function z4(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var Qf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function f0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function G4(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){if(this instanceof r){var i=[null];i.push.apply(i,arguments);var s=Function.bind.apply(e,i);return new s}return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var tv={},H4={get exports(){return tv},set exports(n){tv=n}},d0={},q={},V4={get exports(){return q},set exports(n){q=n}},Ft={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ap=Symbol.for("react.element"),W4=Symbol.for("react.portal"),j4=Symbol.for("react.fragment"),$4=Symbol.for("react.strict_mode"),J4=Symbol.for("react.profiler"),K4=Symbol.for("react.provider"),X4=Symbol.for("react.context"),q4=Symbol.for("react.forward_ref"),Q4=Symbol.for("react.suspense"),Y4=Symbol.for("react.memo"),Z4=Symbol.for("react.lazy"),WI=Symbol.iterator;function eG(n){return n===null||typeof n!="object"?null:(n=WI&&n[WI]||n["@@iterator"],typeof n=="function"?n:null)}var jD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$D=Object.assign,JD={};function kh(n,e,t){this.props=n,this.context=e,this.refs=JD,this.updater=t||jD}kh.prototype.isReactComponent={};kh.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};kh.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function KD(){}KD.prototype=kh.prototype;function tE(n,e,t){this.props=n,this.context=e,this.refs=JD,this.updater=t||jD}var nE=tE.prototype=new KD;nE.constructor=tE;$D(nE,kh.prototype);nE.isPureReactComponent=!0;var jI=Array.isArray,XD=Object.prototype.hasOwnProperty,rE={current:null},qD={key:!0,ref:!0,__self:!0,__source:!0};function QD(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)XD.call(e,r)&&!qD.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Ap,type:n,key:s,ref:o,props:i,_owner:rE.current}}function tG(n,e){return{$$typeof:Ap,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function iE(n){return typeof n=="object"&&n!==null&&n.$$typeof===Ap}function nG(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var $I=/\/+/g;function e1(n,e){return typeof n=="object"&&n!==null&&n.key!=null?nG(""+n.key):e.toString(36)}function Iy(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Ap:case W4:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+e1(o,0):r,jI(i)?(t="",n!=null&&(t=n.replace($I,"$&/")+"/"),Iy(i,e,t,"",function(c){return c})):i!=null&&(iE(i)&&(i=tG(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace($I,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",jI(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+e1(s,a);o+=Iy(s,e,t,l,i)}else if(l=eG(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+e1(s,a++),o+=Iy(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function lg(n,e,t){if(n==null)return n;var r=[],i=0;return Iy(n,r,"","",function(s){return e.call(t,s,i++)}),r}function rG(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var ci={current:null},Py={transition:null},iG={ReactCurrentDispatcher:ci,ReactCurrentBatchConfig:Py,ReactCurrentOwner:rE};Ft.Children={map:lg,forEach:function(n,e,t){lg(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return lg(n,function(){e++}),e},toArray:function(n){return lg(n,function(e){return e})||[]},only:function(n){if(!iE(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Ft.Component=kh;Ft.Fragment=j4;Ft.Profiler=J4;Ft.PureComponent=tE;Ft.StrictMode=$4;Ft.Suspense=Q4;Ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iG;Ft.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=$D({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=rE.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)XD.call(e,l)&&!qD.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Ap,type:n.type,key:i,ref:s,props:r,_owner:o}};Ft.createContext=function(n){return n={$$typeof:X4,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:K4,_context:n},n.Consumer=n};Ft.createElement=QD;Ft.createFactory=function(n){var e=QD.bind(null,n);return e.type=n,e};Ft.createRef=function(){return{current:null}};Ft.forwardRef=function(n){return{$$typeof:q4,render:n}};Ft.isValidElement=iE;Ft.lazy=function(n){return{$$typeof:Z4,_payload:{_status:-1,_result:n},_init:rG}};Ft.memo=function(n,e){return{$$typeof:Y4,type:n,compare:e===void 0?null:e}};Ft.startTransition=function(n){var e=Py.transition;Py.transition={};try{n()}finally{Py.transition=e}};Ft.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ft.useCallback=function(n,e){return ci.current.useCallback(n,e)};Ft.useContext=function(n){return ci.current.useContext(n)};Ft.useDebugValue=function(){};Ft.useDeferredValue=function(n){return ci.current.useDeferredValue(n)};Ft.useEffect=function(n,e){return ci.current.useEffect(n,e)};Ft.useId=function(){return ci.current.useId()};Ft.useImperativeHandle=function(n,e,t){return ci.current.useImperativeHandle(n,e,t)};Ft.useInsertionEffect=function(n,e){return ci.current.useInsertionEffect(n,e)};Ft.useLayoutEffect=function(n,e){return ci.current.useLayoutEffect(n,e)};Ft.useMemo=function(n,e){return ci.current.useMemo(n,e)};Ft.useReducer=function(n,e,t){return ci.current.useReducer(n,e,t)};Ft.useRef=function(n){return ci.current.useRef(n)};Ft.useState=function(n){return ci.current.useState(n)};Ft.useSyncExternalStore=function(n,e,t){return ci.current.useSyncExternalStore(n,e,t)};Ft.useTransition=function(){return ci.current.useTransition()};Ft.version="18.2.0";(function(n){n.exports=Ft})(V4);const Td=f0(q),iS=z4({__proto__:null,default:Td},[q]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sG=q,oG=Symbol.for("react.element"),aG=Symbol.for("react.fragment"),lG=Object.prototype.hasOwnProperty,cG=sG.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uG={key:!0,ref:!0,__self:!0,__source:!0};function YD(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)lG.call(e,r)&&!uG.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:oG,type:n,key:s,ref:o,props:i,_owner:cG.current}}d0.Fragment=aG;d0.jsx=YD;d0.jsxs=YD;(function(n){n.exports=d0})(H4);const E=tv.jsx,k=tv.jsxs;var sS={},nv={},hG={get exports(){return nv},set exports(n){nv=n}},Wi={},oS={},fG={get exports(){return oS},set exports(n){oS=n}},ZD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(U,W){var B=U.length;U.push(W);e:for(;0<B;){var ie=B-1>>>1,z=U[ie];if(0<i(z,W))U[ie]=W,U[B]=z,B=ie;else break e}}function t(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var W=U[0],B=U.pop();if(B!==W){U[0]=B;e:for(var ie=0,z=U.length,te=z>>>1;ie<te;){var ae=2*(ie+1)-1,Q=U[ae],we=ae+1,Ae=U[we];if(0>i(Q,B))we<z&&0>i(Ae,Q)?(U[ie]=Ae,U[we]=B,ie=we):(U[ie]=Q,U[ae]=B,ie=ae);else if(we<z&&0>i(Ae,B))U[ie]=Ae,U[we]=B,ie=we;else break e}}return W}function i(U,W){var B=U.sortIndex-W.sortIndex;return B!==0?B:U.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,p=3,m=!1,y=!1,g=!1,_=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(U){for(var W=t(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=U)r(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=t(c)}}function M(U){if(g=!1,S(U),!y)if(t(l)!==null)y=!0,ne(T);else{var W=t(c);W!==null&&le(M,W.startTime-U)}}function T(U,W){y=!1,g&&(g=!1,x(b),b=-1),m=!0;var B=p;try{for(S(W),d=t(l);d!==null&&(!(d.expirationTime>W)||U&&!G());){var ie=d.callback;if(typeof ie=="function"){d.callback=null,p=d.priorityLevel;var z=ie(d.expirationTime<=W);W=n.unstable_now(),typeof z=="function"?d.callback=z:d===t(l)&&r(l),S(W)}else r(l);d=t(l)}if(d!==null)var te=!0;else{var ae=t(c);ae!==null&&le(M,ae.startTime-W),te=!1}return te}finally{d=null,p=B,m=!1}}var I=!1,L=null,b=-1,R=5,D=-1;function G(){return!(n.unstable_now()-D<R)}function V(){if(L!==null){var U=n.unstable_now();D=U;var W=!0;try{W=L(!0,U)}finally{W?F():(I=!1,L=null)}}else I=!1}var F;if(typeof w=="function")F=function(){w(V)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,X=J.port2;J.port1.onmessage=V,F=function(){X.postMessage(null)}}else F=function(){_(V,0)};function ne(U){L=U,I||(I=!0,F())}function le(U,W){b=_(function(){U(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,ne(T))},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(U){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var B=p;p=W;try{return U()}finally{p=B}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(U,W){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var B=p;p=U;try{return W()}finally{p=B}},n.unstable_scheduleCallback=function(U,W,B){var ie=n.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?ie+B:ie):B=ie,U){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=B+z,U={id:h++,callback:W,priorityLevel:U,startTime:B,expirationTime:z,sortIndex:-1},B>ie?(U.sortIndex=B,e(c,U),t(l)===null&&U===t(c)&&(g?(x(b),b=-1):g=!0,le(M,B-ie))):(U.sortIndex=z,e(l,U),y||m||(y=!0,ne(T))),U},n.unstable_shouldYield=G,n.unstable_wrapCallback=function(U){var W=p;return function(){var B=p;p=W;try{return U.apply(this,arguments)}finally{p=B}}}})(ZD);(function(n){n.exports=ZD})(fG);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eB=q,Gi=oS;function Ce(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tB=new Set,Id={};function Pc(n,e){lh(n,e),lh(n+"Capture",e)}function lh(n,e){for(Id[n]=e,n=0;n<e.length;n++)tB.add(e[n])}var Wo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),aS=Object.prototype.hasOwnProperty,dG=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,JI={},KI={};function pG(n){return aS.call(KI,n)?!0:aS.call(JI,n)?!1:dG.test(n)?KI[n]=!0:(JI[n]=!0,!1)}function mG(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function gG(n,e,t,r){if(e===null||typeof e>"u"||mG(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ui(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ir={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Ir[n]=new ui(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Ir[e]=new ui(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Ir[n]=new ui(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Ir[n]=new ui(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Ir[n]=new ui(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Ir[n]=new ui(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Ir[n]=new ui(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Ir[n]=new ui(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Ir[n]=new ui(n,5,!1,n.toLowerCase(),null,!1,!1)});var sE=/[\-:]([a-z])/g;function oE(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(sE,oE);Ir[e]=new ui(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(sE,oE);Ir[e]=new ui(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(sE,oE);Ir[e]=new ui(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Ir[n]=new ui(n,1,!1,n.toLowerCase(),null,!1,!1)});Ir.xlinkHref=new ui("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Ir[n]=new ui(n,1,!1,n.toLowerCase(),null,!0,!0)});function aE(n,e,t,r){var i=Ir.hasOwnProperty(e)?Ir[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gG(e,t,i,r)&&(t=null),r||i===null?pG(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var ta=eB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cg=Symbol.for("react.element"),Cu=Symbol.for("react.portal"),bu=Symbol.for("react.fragment"),lE=Symbol.for("react.strict_mode"),lS=Symbol.for("react.profiler"),nB=Symbol.for("react.provider"),rB=Symbol.for("react.context"),cE=Symbol.for("react.forward_ref"),cS=Symbol.for("react.suspense"),uS=Symbol.for("react.suspense_list"),uE=Symbol.for("react.memo"),Sa=Symbol.for("react.lazy"),iB=Symbol.for("react.offscreen"),XI=Symbol.iterator;function Ef(n){return n===null||typeof n!="object"?null:(n=XI&&n[XI]||n["@@iterator"],typeof n=="function"?n:null)}var Pn=Object.assign,t1;function Yf(n){if(t1===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);t1=e&&e[1]||""}return`
`+t1+n}var n1=!1;function r1(n,e){if(!n||n1)return"";n1=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{n1=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Yf(n):""}function yG(n){switch(n.tag){case 5:return Yf(n.type);case 16:return Yf("Lazy");case 13:return Yf("Suspense");case 19:return Yf("SuspenseList");case 0:case 2:case 15:return n=r1(n.type,!1),n;case 11:return n=r1(n.type.render,!1),n;case 1:return n=r1(n.type,!0),n;default:return""}}function hS(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case bu:return"Fragment";case Cu:return"Portal";case lS:return"Profiler";case lE:return"StrictMode";case cS:return"Suspense";case uS:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case rB:return(n.displayName||"Context")+".Consumer";case nB:return(n._context.displayName||"Context")+".Provider";case cE:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case uE:return e=n.displayName||null,e!==null?e:hS(n.type)||"Memo";case Sa:e=n._payload,n=n._init;try{return hS(n(e))}catch{}}return null}function vG(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hS(e);case 8:return e===lE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ya(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function sB(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _G(n){var e=sB(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function ug(n){n._valueTracker||(n._valueTracker=_G(n))}function oB(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=sB(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function rv(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function fS(n,e){var t=e.checked;return Pn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function qI(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Ya(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function aB(n,e){e=e.checked,e!=null&&aE(n,"checked",e,!1)}function dS(n,e){aB(n,e);var t=Ya(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?pS(n,e.type,t):e.hasOwnProperty("defaultValue")&&pS(n,e.type,Ya(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function QI(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function pS(n,e,t){(e!=="number"||rv(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Zf=Array.isArray;function Vu(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Ya(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function mS(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ce(91));return Pn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function YI(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Ce(92));if(Zf(t)){if(1<t.length)throw Error(Ce(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Ya(t)}}function lB(n,e){var t=Ya(e.value),r=Ya(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function ZI(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function cB(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gS(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?cB(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var hg,uB=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(hg=hg||document.createElement("div"),hg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=hg.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Pd(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var ad={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xG=["Webkit","ms","Moz","O"];Object.keys(ad).forEach(function(n){xG.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),ad[e]=ad[n]})});function hB(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||ad.hasOwnProperty(n)&&ad[n]?(""+e).trim():e+"px"}function fB(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=hB(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var wG=Pn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yS(n,e){if(e){if(wG[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ce(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ce(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ce(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ce(62))}}function vS(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _S=null;function hE(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var xS=null,Wu=null,ju=null;function eP(n){if(n=Cp(n)){if(typeof xS!="function")throw Error(Ce(280));var e=n.stateNode;e&&(e=v0(e),xS(n.stateNode,n.type,e))}}function dB(n){Wu?ju?ju.push(n):ju=[n]:Wu=n}function pB(){if(Wu){var n=Wu,e=ju;if(ju=Wu=null,eP(n),e)for(n=0;n<e.length;n++)eP(e[n])}}function mB(n,e){return n(e)}function gB(){}var i1=!1;function yB(n,e,t){if(i1)return n(e,t);i1=!0;try{return mB(n,e,t)}finally{i1=!1,(Wu!==null||ju!==null)&&(gB(),pB())}}function Rd(n,e){var t=n.stateNode;if(t===null)return null;var r=v0(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Ce(231,e,typeof t));return t}var wS=!1;if(Wo)try{var Cf={};Object.defineProperty(Cf,"passive",{get:function(){wS=!0}}),window.addEventListener("test",Cf,Cf),window.removeEventListener("test",Cf,Cf)}catch{wS=!1}function SG(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(h){this.onError(h)}}var ld=!1,iv=null,sv=!1,SS=null,AG={onError:function(n){ld=!0,iv=n}};function MG(n,e,t,r,i,s,o,a,l){ld=!1,iv=null,SG.apply(AG,arguments)}function EG(n,e,t,r,i,s,o,a,l){if(MG.apply(this,arguments),ld){if(ld){var c=iv;ld=!1,iv=null}else throw Error(Ce(198));sv||(sv=!0,SS=c)}}function Rc(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function vB(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function tP(n){if(Rc(n)!==n)throw Error(Ce(188))}function CG(n){var e=n.alternate;if(!e){if(e=Rc(n),e===null)throw Error(Ce(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return tP(i),n;if(s===r)return tP(i),e;s=s.sibling}throw Error(Ce(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(Ce(189))}}if(t.alternate!==r)throw Error(Ce(190))}if(t.tag!==3)throw Error(Ce(188));return t.stateNode.current===t?n:e}function _B(n){return n=CG(n),n!==null?xB(n):null}function xB(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=xB(n);if(e!==null)return e;n=n.sibling}return null}var wB=Gi.unstable_scheduleCallback,nP=Gi.unstable_cancelCallback,bG=Gi.unstable_shouldYield,TG=Gi.unstable_requestPaint,Wn=Gi.unstable_now,IG=Gi.unstable_getCurrentPriorityLevel,fE=Gi.unstable_ImmediatePriority,SB=Gi.unstable_UserBlockingPriority,ov=Gi.unstable_NormalPriority,PG=Gi.unstable_LowPriority,AB=Gi.unstable_IdlePriority,p0=null,so=null;function RG(n){if(so&&typeof so.onCommitFiberRoot=="function")try{so.onCommitFiberRoot(p0,n,void 0,(n.current.flags&128)===128)}catch{}}var Os=Math.clz32?Math.clz32:BG,LG=Math.log,DG=Math.LN2;function BG(n){return n>>>=0,n===0?32:31-(LG(n)/DG|0)|0}var fg=64,dg=4194304;function ed(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function av(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=ed(a):(s&=o,s!==0&&(r=ed(s)))}else o=t&~i,o!==0?r=ed(o):s!==0&&(r=ed(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Os(e),i=1<<t,r|=n[t],e&=~i;return r}function OG(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kG(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Os(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=OG(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function AS(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function MB(){var n=fg;return fg<<=1,!(fg&4194240)&&(fg=64),n}function s1(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Mp(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Os(e),n[e]=t}function NG(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Os(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function dE(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Os(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Zt=0;function EB(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var CB,pE,bB,TB,IB,MS=!1,pg=[],Fa=null,Ua=null,za=null,Ld=new Map,Dd=new Map,Ca=[],FG="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rP(n,e){switch(n){case"focusin":case"focusout":Fa=null;break;case"dragenter":case"dragleave":Ua=null;break;case"mouseover":case"mouseout":za=null;break;case"pointerover":case"pointerout":Ld.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dd.delete(e.pointerId)}}function bf(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Cp(e),e!==null&&pE(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function UG(n,e,t,r,i){switch(e){case"focusin":return Fa=bf(Fa,n,e,t,r,i),!0;case"dragenter":return Ua=bf(Ua,n,e,t,r,i),!0;case"mouseover":return za=bf(za,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return Ld.set(s,bf(Ld.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Dd.set(s,bf(Dd.get(s)||null,n,e,t,r,i)),!0}return!1}function PB(n){var e=Wl(n.target);if(e!==null){var t=Rc(e);if(t!==null){if(e=t.tag,e===13){if(e=vB(t),e!==null){n.blockedOn=e,IB(n.priority,function(){bB(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ry(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=ES(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);_S=r,t.target.dispatchEvent(r),_S=null}else return e=Cp(t),e!==null&&pE(e),n.blockedOn=t,!1;e.shift()}return!0}function iP(n,e,t){Ry(n)&&t.delete(e)}function zG(){MS=!1,Fa!==null&&Ry(Fa)&&(Fa=null),Ua!==null&&Ry(Ua)&&(Ua=null),za!==null&&Ry(za)&&(za=null),Ld.forEach(iP),Dd.forEach(iP)}function Tf(n,e){n.blockedOn===e&&(n.blockedOn=null,MS||(MS=!0,Gi.unstable_scheduleCallback(Gi.unstable_NormalPriority,zG)))}function Bd(n){function e(i){return Tf(i,n)}if(0<pg.length){Tf(pg[0],n);for(var t=1;t<pg.length;t++){var r=pg[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Fa!==null&&Tf(Fa,n),Ua!==null&&Tf(Ua,n),za!==null&&Tf(za,n),Ld.forEach(e),Dd.forEach(e),t=0;t<Ca.length;t++)r=Ca[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Ca.length&&(t=Ca[0],t.blockedOn===null);)PB(t),t.blockedOn===null&&Ca.shift()}var $u=ta.ReactCurrentBatchConfig,lv=!0;function GG(n,e,t,r){var i=Zt,s=$u.transition;$u.transition=null;try{Zt=1,mE(n,e,t,r)}finally{Zt=i,$u.transition=s}}function HG(n,e,t,r){var i=Zt,s=$u.transition;$u.transition=null;try{Zt=4,mE(n,e,t,r)}finally{Zt=i,$u.transition=s}}function mE(n,e,t,r){if(lv){var i=ES(n,e,t,r);if(i===null)m1(n,e,r,cv,t),rP(n,r);else if(UG(i,n,e,t,r))r.stopPropagation();else if(rP(n,r),e&4&&-1<FG.indexOf(n)){for(;i!==null;){var s=Cp(i);if(s!==null&&CB(s),s=ES(n,e,t,r),s===null&&m1(n,e,r,cv,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else m1(n,e,r,null,t)}}var cv=null;function ES(n,e,t,r){if(cv=null,n=hE(r),n=Wl(n),n!==null)if(e=Rc(n),e===null)n=null;else if(t=e.tag,t===13){if(n=vB(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return cv=n,null}function RB(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(IG()){case fE:return 1;case SB:return 4;case ov:case PG:return 16;case AB:return 536870912;default:return 16}default:return 16}}var Ia=null,gE=null,Ly=null;function LB(){if(Ly)return Ly;var n,e=gE,t=e.length,r,i="value"in Ia?Ia.value:Ia.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return Ly=i.slice(n,1<r?1-r:void 0)}function Dy(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function mg(){return!0}function sP(){return!1}function ji(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?mg:sP,this.isPropagationStopped=sP,this}return Pn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=mg)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=mg)},persist:function(){},isPersistent:mg}),e}var Nh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yE=ji(Nh),Ep=Pn({},Nh,{view:0,detail:0}),VG=ji(Ep),o1,a1,If,m0=Pn({},Ep,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vE,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==If&&(If&&n.type==="mousemove"?(o1=n.screenX-If.screenX,a1=n.screenY-If.screenY):a1=o1=0,If=n),o1)},movementY:function(n){return"movementY"in n?n.movementY:a1}}),oP=ji(m0),WG=Pn({},m0,{dataTransfer:0}),jG=ji(WG),$G=Pn({},Ep,{relatedTarget:0}),l1=ji($G),JG=Pn({},Nh,{animationName:0,elapsedTime:0,pseudoElement:0}),KG=ji(JG),XG=Pn({},Nh,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),qG=ji(XG),QG=Pn({},Nh,{data:0}),aP=ji(QG),YG={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ZG={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tH(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=eH[n])?!!e[n]:!1}function vE(){return tH}var nH=Pn({},Ep,{key:function(n){if(n.key){var e=YG[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Dy(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ZG[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vE,charCode:function(n){return n.type==="keypress"?Dy(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Dy(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),rH=ji(nH),iH=Pn({},m0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lP=ji(iH),sH=Pn({},Ep,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vE}),oH=ji(sH),aH=Pn({},Nh,{propertyName:0,elapsedTime:0,pseudoElement:0}),lH=ji(aH),cH=Pn({},m0,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),uH=ji(cH),hH=[9,13,27,32],_E=Wo&&"CompositionEvent"in window,cd=null;Wo&&"documentMode"in document&&(cd=document.documentMode);var fH=Wo&&"TextEvent"in window&&!cd,DB=Wo&&(!_E||cd&&8<cd&&11>=cd),cP=String.fromCharCode(32),uP=!1;function BB(n,e){switch(n){case"keyup":return hH.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function OB(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Tu=!1;function dH(n,e){switch(n){case"compositionend":return OB(e);case"keypress":return e.which!==32?null:(uP=!0,cP);case"textInput":return n=e.data,n===cP&&uP?null:n;default:return null}}function pH(n,e){if(Tu)return n==="compositionend"||!_E&&BB(n,e)?(n=LB(),Ly=gE=Ia=null,Tu=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return DB&&e.locale!=="ko"?null:e.data;default:return null}}var mH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hP(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!mH[n.type]:e==="textarea"}function kB(n,e,t,r){dB(r),e=uv(e,"onChange"),0<e.length&&(t=new yE("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var ud=null,Od=null;function gH(n){JB(n,0)}function g0(n){var e=Ru(n);if(oB(e))return n}function yH(n,e){if(n==="change")return e}var NB=!1;if(Wo){var c1;if(Wo){var u1="oninput"in document;if(!u1){var fP=document.createElement("div");fP.setAttribute("oninput","return;"),u1=typeof fP.oninput=="function"}c1=u1}else c1=!1;NB=c1&&(!document.documentMode||9<document.documentMode)}function dP(){ud&&(ud.detachEvent("onpropertychange",FB),Od=ud=null)}function FB(n){if(n.propertyName==="value"&&g0(Od)){var e=[];kB(e,Od,n,hE(n)),yB(gH,e)}}function vH(n,e,t){n==="focusin"?(dP(),ud=e,Od=t,ud.attachEvent("onpropertychange",FB)):n==="focusout"&&dP()}function _H(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return g0(Od)}function xH(n,e){if(n==="click")return g0(e)}function wH(n,e){if(n==="input"||n==="change")return g0(e)}function SH(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Fs=typeof Object.is=="function"?Object.is:SH;function kd(n,e){if(Fs(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!aS.call(e,i)||!Fs(n[i],e[i]))return!1}return!0}function pP(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function mP(n,e){var t=pP(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=pP(t)}}function UB(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?UB(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function zB(){for(var n=window,e=rv();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=rv(n.document)}return e}function xE(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function AH(n){var e=zB(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&UB(t.ownerDocument.documentElement,t)){if(r!==null&&xE(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=mP(t,s);var o=mP(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var MH=Wo&&"documentMode"in document&&11>=document.documentMode,Iu=null,CS=null,hd=null,bS=!1;function gP(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;bS||Iu==null||Iu!==rv(r)||(r=Iu,"selectionStart"in r&&xE(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),hd&&kd(hd,r)||(hd=r,r=uv(CS,"onSelect"),0<r.length&&(e=new yE("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Iu)))}function gg(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Pu={animationend:gg("Animation","AnimationEnd"),animationiteration:gg("Animation","AnimationIteration"),animationstart:gg("Animation","AnimationStart"),transitionend:gg("Transition","TransitionEnd")},h1={},GB={};Wo&&(GB=document.createElement("div").style,"AnimationEvent"in window||(delete Pu.animationend.animation,delete Pu.animationiteration.animation,delete Pu.animationstart.animation),"TransitionEvent"in window||delete Pu.transitionend.transition);function y0(n){if(h1[n])return h1[n];if(!Pu[n])return n;var e=Pu[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in GB)return h1[n]=e[t];return n}var HB=y0("animationend"),VB=y0("animationiteration"),WB=y0("animationstart"),jB=y0("transitionend"),$B=new Map,yP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function al(n,e){$B.set(n,e),Pc(e,[n])}for(var f1=0;f1<yP.length;f1++){var d1=yP[f1],EH=d1.toLowerCase(),CH=d1[0].toUpperCase()+d1.slice(1);al(EH,"on"+CH)}al(HB,"onAnimationEnd");al(VB,"onAnimationIteration");al(WB,"onAnimationStart");al("dblclick","onDoubleClick");al("focusin","onFocus");al("focusout","onBlur");al(jB,"onTransitionEnd");lh("onMouseEnter",["mouseout","mouseover"]);lh("onMouseLeave",["mouseout","mouseover"]);lh("onPointerEnter",["pointerout","pointerover"]);lh("onPointerLeave",["pointerout","pointerover"]);Pc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var td="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bH=new Set("cancel close invalid load scroll toggle".split(" ").concat(td));function vP(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,EG(r,e,void 0,n),n.currentTarget=null}function JB(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;vP(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;vP(i,a,c),s=l}}}if(sv)throw n=SS,sv=!1,SS=null,n}function hn(n,e){var t=e[LS];t===void 0&&(t=e[LS]=new Set);var r=n+"__bubble";t.has(r)||(KB(e,n,2,!1),t.add(r))}function p1(n,e,t){var r=0;e&&(r|=4),KB(t,n,r,e)}var yg="_reactListening"+Math.random().toString(36).slice(2);function Nd(n){if(!n[yg]){n[yg]=!0,tB.forEach(function(t){t!=="selectionchange"&&(bH.has(t)||p1(t,!1,n),p1(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[yg]||(e[yg]=!0,p1("selectionchange",!1,e))}}function KB(n,e,t,r){switch(RB(e)){case 1:var i=GG;break;case 4:i=HG;break;default:i=mE}t=i.bind(null,e,t,n),i=void 0,!wS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function m1(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Wl(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}yB(function(){var c=s,h=hE(t),d=[];e:{var p=$B.get(n);if(p!==void 0){var m=yE,y=n;switch(n){case"keypress":if(Dy(t)===0)break e;case"keydown":case"keyup":m=rH;break;case"focusin":y="focus",m=l1;break;case"focusout":y="blur",m=l1;break;case"beforeblur":case"afterblur":m=l1;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=oP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=jG;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=oH;break;case HB:case VB:case WB:m=KG;break;case jB:m=lH;break;case"scroll":m=VG;break;case"wheel":m=uH;break;case"copy":case"cut":case"paste":m=qG;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=lP}var g=(e&4)!==0,_=!g&&n==="scroll",x=g?p!==null?p+"Capture":null:p;g=[];for(var w=c,S;w!==null;){S=w;var M=S.stateNode;if(S.tag===5&&M!==null&&(S=M,x!==null&&(M=Rd(w,x),M!=null&&g.push(Fd(w,M,S)))),_)break;w=w.return}0<g.length&&(p=new m(p,y,null,t,h),d.push({event:p,listeners:g}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==_S&&(y=t.relatedTarget||t.fromElement)&&(Wl(y)||y[jo]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=t.relatedTarget||t.toElement,m=c,y=y?Wl(y):null,y!==null&&(_=Rc(y),y!==_||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=c),m!==y)){if(g=oP,M="onMouseLeave",x="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(g=lP,M="onPointerLeave",x="onPointerEnter",w="pointer"),_=m==null?p:Ru(m),S=y==null?p:Ru(y),p=new g(M,w+"leave",m,t,h),p.target=_,p.relatedTarget=S,M=null,Wl(h)===c&&(g=new g(x,w+"enter",y,t,h),g.target=S,g.relatedTarget=_,M=g),_=M,m&&y)t:{for(g=m,x=y,w=0,S=g;S;S=Zc(S))w++;for(S=0,M=x;M;M=Zc(M))S++;for(;0<w-S;)g=Zc(g),w--;for(;0<S-w;)x=Zc(x),S--;for(;w--;){if(g===x||x!==null&&g===x.alternate)break t;g=Zc(g),x=Zc(x)}g=null}else g=null;m!==null&&_P(d,p,m,g,!1),y!==null&&_!==null&&_P(d,_,y,g,!0)}}e:{if(p=c?Ru(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var T=yH;else if(hP(p))if(NB)T=wH;else{T=_H;var I=vH}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(T=xH);if(T&&(T=T(n,c))){kB(d,T,t,h);break e}I&&I(n,p,c),n==="focusout"&&(I=p._wrapperState)&&I.controlled&&p.type==="number"&&pS(p,"number",p.value)}switch(I=c?Ru(c):window,n){case"focusin":(hP(I)||I.contentEditable==="true")&&(Iu=I,CS=c,hd=null);break;case"focusout":hd=CS=Iu=null;break;case"mousedown":bS=!0;break;case"contextmenu":case"mouseup":case"dragend":bS=!1,gP(d,t,h);break;case"selectionchange":if(MH)break;case"keydown":case"keyup":gP(d,t,h)}var L;if(_E)e:{switch(n){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Tu?BB(n,t)&&(b="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(b="onCompositionStart");b&&(DB&&t.locale!=="ko"&&(Tu||b!=="onCompositionStart"?b==="onCompositionEnd"&&Tu&&(L=LB()):(Ia=h,gE="value"in Ia?Ia.value:Ia.textContent,Tu=!0)),I=uv(c,b),0<I.length&&(b=new aP(b,n,null,t,h),d.push({event:b,listeners:I}),L?b.data=L:(L=OB(t),L!==null&&(b.data=L)))),(L=fH?dH(n,t):pH(n,t))&&(c=uv(c,"onBeforeInput"),0<c.length&&(h=new aP("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:c}),h.data=L))}JB(d,e)})}function Fd(n,e,t){return{instance:n,listener:e,currentTarget:t}}function uv(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Rd(n,t),s!=null&&r.unshift(Fd(n,s,i)),s=Rd(n,e),s!=null&&r.push(Fd(n,s,i))),n=n.return}return r}function Zc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function _P(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Rd(t,s),l!=null&&o.unshift(Fd(t,l,a))):i||(l=Rd(t,s),l!=null&&o.push(Fd(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var TH=/\r\n?/g,IH=/\u0000|\uFFFD/g;function xP(n){return(typeof n=="string"?n:""+n).replace(TH,`
`).replace(IH,"")}function vg(n,e,t){if(e=xP(e),xP(n)!==e&&t)throw Error(Ce(425))}function hv(){}var TS=null,IS=null;function PS(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var RS=typeof setTimeout=="function"?setTimeout:void 0,PH=typeof clearTimeout=="function"?clearTimeout:void 0,wP=typeof Promise=="function"?Promise:void 0,RH=typeof queueMicrotask=="function"?queueMicrotask:typeof wP<"u"?function(n){return wP.resolve(null).then(n).catch(LH)}:RS;function LH(n){setTimeout(function(){throw n})}function g1(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),Bd(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);Bd(e)}function Ga(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function SP(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Fh=Math.random().toString(36).slice(2),no="__reactFiber$"+Fh,Ud="__reactProps$"+Fh,jo="__reactContainer$"+Fh,LS="__reactEvents$"+Fh,DH="__reactListeners$"+Fh,BH="__reactHandles$"+Fh;function Wl(n){var e=n[no];if(e)return e;for(var t=n.parentNode;t;){if(e=t[jo]||t[no]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=SP(n);n!==null;){if(t=n[no])return t;n=SP(n)}return e}n=t,t=n.parentNode}return null}function Cp(n){return n=n[no]||n[jo],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ru(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Ce(33))}function v0(n){return n[Ud]||null}var DS=[],Lu=-1;function ll(n){return{current:n}}function pn(n){0>Lu||(n.current=DS[Lu],DS[Lu]=null,Lu--)}function ln(n,e){Lu++,DS[Lu]=n.current,n.current=e}var Za={},Xr=ll(Za),xi=ll(!1),dc=Za;function ch(n,e){var t=n.type.contextTypes;if(!t)return Za;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function wi(n){return n=n.childContextTypes,n!=null}function fv(){pn(xi),pn(Xr)}function AP(n,e,t){if(Xr.current!==Za)throw Error(Ce(168));ln(Xr,e),ln(xi,t)}function XB(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ce(108,vG(n)||"Unknown",i));return Pn({},t,r)}function dv(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Za,dc=Xr.current,ln(Xr,n),ln(xi,xi.current),!0}function MP(n,e,t){var r=n.stateNode;if(!r)throw Error(Ce(169));t?(n=XB(n,e,dc),r.__reactInternalMemoizedMergedChildContext=n,pn(xi),pn(Xr),ln(Xr,n)):pn(xi),ln(xi,t)}var Bo=null,_0=!1,y1=!1;function qB(n){Bo===null?Bo=[n]:Bo.push(n)}function OH(n){_0=!0,qB(n)}function cl(){if(!y1&&Bo!==null){y1=!0;var n=0,e=Zt;try{var t=Bo;for(Zt=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Bo=null,_0=!1}catch(i){throw Bo!==null&&(Bo=Bo.slice(n+1)),wB(fE,cl),i}finally{Zt=e,y1=!1}}return null}var Du=[],Bu=0,pv=null,mv=0,ss=[],os=0,pc=null,No=1,Fo="";function Dl(n,e){Du[Bu++]=mv,Du[Bu++]=pv,pv=n,mv=e}function QB(n,e,t){ss[os++]=No,ss[os++]=Fo,ss[os++]=pc,pc=n;var r=No;n=Fo;var i=32-Os(r)-1;r&=~(1<<i),t+=1;var s=32-Os(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,No=1<<32-Os(e)+i|t<<i|r,Fo=s+n}else No=1<<s|t<<i|r,Fo=n}function wE(n){n.return!==null&&(Dl(n,1),QB(n,1,0))}function SE(n){for(;n===pv;)pv=Du[--Bu],Du[Bu]=null,mv=Du[--Bu],Du[Bu]=null;for(;n===pc;)pc=ss[--os],ss[os]=null,Fo=ss[--os],ss[os]=null,No=ss[--os],ss[os]=null}var Fi=null,ki=null,xn=!1,Ps=null;function YB(n,e){var t=cs(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function EP(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Fi=n,ki=Ga(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Fi=n,ki=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=pc!==null?{id:No,overflow:Fo}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=cs(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Fi=n,ki=null,!0):!1;default:return!1}}function BS(n){return(n.mode&1)!==0&&(n.flags&128)===0}function OS(n){if(xn){var e=ki;if(e){var t=e;if(!EP(n,e)){if(BS(n))throw Error(Ce(418));e=Ga(t.nextSibling);var r=Fi;e&&EP(n,e)?YB(r,t):(n.flags=n.flags&-4097|2,xn=!1,Fi=n)}}else{if(BS(n))throw Error(Ce(418));n.flags=n.flags&-4097|2,xn=!1,Fi=n}}}function CP(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Fi=n}function _g(n){if(n!==Fi)return!1;if(!xn)return CP(n),xn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!PS(n.type,n.memoizedProps)),e&&(e=ki)){if(BS(n))throw ZB(),Error(Ce(418));for(;e;)YB(n,e),e=Ga(e.nextSibling)}if(CP(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Ce(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){ki=Ga(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}ki=null}}else ki=Fi?Ga(n.stateNode.nextSibling):null;return!0}function ZB(){for(var n=ki;n;)n=Ga(n.nextSibling)}function uh(){ki=Fi=null,xn=!1}function AE(n){Ps===null?Ps=[n]:Ps.push(n)}var kH=ta.ReactCurrentBatchConfig;function bs(n,e){if(n&&n.defaultProps){e=Pn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var gv=ll(null),yv=null,Ou=null,ME=null;function EE(){ME=Ou=yv=null}function CE(n){var e=gv.current;pn(gv),n._currentValue=e}function kS(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Ju(n,e){yv=n,ME=Ou=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(_i=!0),n.firstContext=null)}function ds(n){var e=n._currentValue;if(ME!==n)if(n={context:n,memoizedValue:e,next:null},Ou===null){if(yv===null)throw Error(Ce(308));Ou=n,yv.dependencies={lanes:0,firstContext:n}}else Ou=Ou.next=n;return e}var jl=null;function bE(n){jl===null?jl=[n]:jl.push(n)}function e3(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,bE(e)):(t.next=i.next,i.next=t),e.interleaved=t,$o(n,r)}function $o(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Aa=!1;function TE(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function t3(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ho(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Ha(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Wt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,$o(n,t)}return i=r.interleaved,i===null?(e.next=e,bE(r)):(e.next=i.next,i.next=e),r.interleaved=e,$o(n,t)}function By(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,dE(n,t)}}function bP(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function vv(n,e,t,r){var i=n.updateQueue;Aa=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=n,g=a;switch(p=e,m=t,g.tag){case 1:if(y=g.payload,typeof y=="function"){d=y.call(m,d,p);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,p=typeof y=="function"?y.call(m,d,p):y,p==null)break e;d=Pn({},d,p);break e;case 2:Aa=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=m,l=d):h=h.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);gc|=o,n.lanes=o,n.memoizedState=d}}function TP(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Ce(191,i));i.call(r)}}}var n3=new eB.Component().refs;function NS(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Pn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var x0={isMounted:function(n){return(n=n._reactInternals)?Rc(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=li(),i=Wa(n),s=Ho(r,i);s.payload=e,t!=null&&(s.callback=t),e=Ha(n,s,i),e!==null&&(ks(e,n,i,r),By(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=li(),i=Wa(n),s=Ho(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Ha(n,s,i),e!==null&&(ks(e,n,i,r),By(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=li(),r=Wa(n),i=Ho(t,r);i.tag=2,e!=null&&(i.callback=e),e=Ha(n,i,r),e!==null&&(ks(e,n,r,t),By(e,n,r))}};function IP(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!kd(t,r)||!kd(i,s):!0}function r3(n,e,t){var r=!1,i=Za,s=e.contextType;return typeof s=="object"&&s!==null?s=ds(s):(i=wi(e)?dc:Xr.current,r=e.contextTypes,s=(r=r!=null)?ch(n,i):Za),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=x0,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function PP(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&x0.enqueueReplaceState(e,e.state,null)}function FS(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=n3,TE(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ds(s):(s=wi(e)?dc:Xr.current,i.context=ch(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(NS(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&x0.enqueueReplaceState(i,i.state,null),vv(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Pf(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Ce(309));var r=t.stateNode}if(!r)throw Error(Ce(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===n3&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Ce(284));if(!t._owner)throw Error(Ce(290,n))}return n}function xg(n,e){throw n=Object.prototype.toString.call(e),Error(Ce(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function RP(n){var e=n._init;return e(n._payload)}function i3(n){function e(x,w){if(n){var S=x.deletions;S===null?(x.deletions=[w],x.flags|=16):S.push(w)}}function t(x,w){if(!n)return null;for(;w!==null;)e(x,w),w=w.sibling;return null}function r(x,w){for(x=new Map;w!==null;)w.key!==null?x.set(w.key,w):x.set(w.index,w),w=w.sibling;return x}function i(x,w){return x=ja(x,w),x.index=0,x.sibling=null,x}function s(x,w,S){return x.index=S,n?(S=x.alternate,S!==null?(S=S.index,S<w?(x.flags|=2,w):S):(x.flags|=2,w)):(x.flags|=1048576,w)}function o(x){return n&&x.alternate===null&&(x.flags|=2),x}function a(x,w,S,M){return w===null||w.tag!==6?(w=M1(S,x.mode,M),w.return=x,w):(w=i(w,S),w.return=x,w)}function l(x,w,S,M){var T=S.type;return T===bu?h(x,w,S.props.children,M,S.key):w!==null&&(w.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Sa&&RP(T)===w.type)?(M=i(w,S.props),M.ref=Pf(x,w,S),M.return=x,M):(M=zy(S.type,S.key,S.props,null,x.mode,M),M.ref=Pf(x,w,S),M.return=x,M)}function c(x,w,S,M){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=E1(S,x.mode,M),w.return=x,w):(w=i(w,S.children||[]),w.return=x,w)}function h(x,w,S,M,T){return w===null||w.tag!==7?(w=nc(S,x.mode,M,T),w.return=x,w):(w=i(w,S),w.return=x,w)}function d(x,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=M1(""+w,x.mode,S),w.return=x,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case cg:return S=zy(w.type,w.key,w.props,null,x.mode,S),S.ref=Pf(x,null,w),S.return=x,S;case Cu:return w=E1(w,x.mode,S),w.return=x,w;case Sa:var M=w._init;return d(x,M(w._payload),S)}if(Zf(w)||Ef(w))return w=nc(w,x.mode,S,null),w.return=x,w;xg(x,w)}return null}function p(x,w,S,M){var T=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return T!==null?null:a(x,w,""+S,M);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case cg:return S.key===T?l(x,w,S,M):null;case Cu:return S.key===T?c(x,w,S,M):null;case Sa:return T=S._init,p(x,w,T(S._payload),M)}if(Zf(S)||Ef(S))return T!==null?null:h(x,w,S,M,null);xg(x,S)}return null}function m(x,w,S,M,T){if(typeof M=="string"&&M!==""||typeof M=="number")return x=x.get(S)||null,a(w,x,""+M,T);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case cg:return x=x.get(M.key===null?S:M.key)||null,l(w,x,M,T);case Cu:return x=x.get(M.key===null?S:M.key)||null,c(w,x,M,T);case Sa:var I=M._init;return m(x,w,S,I(M._payload),T)}if(Zf(M)||Ef(M))return x=x.get(S)||null,h(w,x,M,T,null);xg(w,M)}return null}function y(x,w,S,M){for(var T=null,I=null,L=w,b=w=0,R=null;L!==null&&b<S.length;b++){L.index>b?(R=L,L=null):R=L.sibling;var D=p(x,L,S[b],M);if(D===null){L===null&&(L=R);break}n&&L&&D.alternate===null&&e(x,L),w=s(D,w,b),I===null?T=D:I.sibling=D,I=D,L=R}if(b===S.length)return t(x,L),xn&&Dl(x,b),T;if(L===null){for(;b<S.length;b++)L=d(x,S[b],M),L!==null&&(w=s(L,w,b),I===null?T=L:I.sibling=L,I=L);return xn&&Dl(x,b),T}for(L=r(x,L);b<S.length;b++)R=m(L,x,b,S[b],M),R!==null&&(n&&R.alternate!==null&&L.delete(R.key===null?b:R.key),w=s(R,w,b),I===null?T=R:I.sibling=R,I=R);return n&&L.forEach(function(G){return e(x,G)}),xn&&Dl(x,b),T}function g(x,w,S,M){var T=Ef(S);if(typeof T!="function")throw Error(Ce(150));if(S=T.call(S),S==null)throw Error(Ce(151));for(var I=T=null,L=w,b=w=0,R=null,D=S.next();L!==null&&!D.done;b++,D=S.next()){L.index>b?(R=L,L=null):R=L.sibling;var G=p(x,L,D.value,M);if(G===null){L===null&&(L=R);break}n&&L&&G.alternate===null&&e(x,L),w=s(G,w,b),I===null?T=G:I.sibling=G,I=G,L=R}if(D.done)return t(x,L),xn&&Dl(x,b),T;if(L===null){for(;!D.done;b++,D=S.next())D=d(x,D.value,M),D!==null&&(w=s(D,w,b),I===null?T=D:I.sibling=D,I=D);return xn&&Dl(x,b),T}for(L=r(x,L);!D.done;b++,D=S.next())D=m(L,x,b,D.value,M),D!==null&&(n&&D.alternate!==null&&L.delete(D.key===null?b:D.key),w=s(D,w,b),I===null?T=D:I.sibling=D,I=D);return n&&L.forEach(function(V){return e(x,V)}),xn&&Dl(x,b),T}function _(x,w,S,M){if(typeof S=="object"&&S!==null&&S.type===bu&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case cg:e:{for(var T=S.key,I=w;I!==null;){if(I.key===T){if(T=S.type,T===bu){if(I.tag===7){t(x,I.sibling),w=i(I,S.props.children),w.return=x,x=w;break e}}else if(I.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Sa&&RP(T)===I.type){t(x,I.sibling),w=i(I,S.props),w.ref=Pf(x,I,S),w.return=x,x=w;break e}t(x,I);break}else e(x,I);I=I.sibling}S.type===bu?(w=nc(S.props.children,x.mode,M,S.key),w.return=x,x=w):(M=zy(S.type,S.key,S.props,null,x.mode,M),M.ref=Pf(x,w,S),M.return=x,x=M)}return o(x);case Cu:e:{for(I=S.key;w!==null;){if(w.key===I)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){t(x,w.sibling),w=i(w,S.children||[]),w.return=x,x=w;break e}else{t(x,w);break}else e(x,w);w=w.sibling}w=E1(S,x.mode,M),w.return=x,x=w}return o(x);case Sa:return I=S._init,_(x,w,I(S._payload),M)}if(Zf(S))return y(x,w,S,M);if(Ef(S))return g(x,w,S,M);xg(x,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(t(x,w.sibling),w=i(w,S),w.return=x,x=w):(t(x,w),w=M1(S,x.mode,M),w.return=x,x=w),o(x)):t(x,w)}return _}var hh=i3(!0),s3=i3(!1),bp={},oo=ll(bp),zd=ll(bp),Gd=ll(bp);function $l(n){if(n===bp)throw Error(Ce(174));return n}function IE(n,e){switch(ln(Gd,e),ln(zd,n),ln(oo,bp),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:gS(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=gS(e,n)}pn(oo),ln(oo,e)}function fh(){pn(oo),pn(zd),pn(Gd)}function o3(n){$l(Gd.current);var e=$l(oo.current),t=gS(e,n.type);e!==t&&(ln(zd,n),ln(oo,t))}function PE(n){zd.current===n&&(pn(oo),pn(zd))}var En=ll(0);function _v(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var v1=[];function RE(){for(var n=0;n<v1.length;n++)v1[n]._workInProgressVersionPrimary=null;v1.length=0}var Oy=ta.ReactCurrentDispatcher,_1=ta.ReactCurrentBatchConfig,mc=0,In=null,sr=null,yr=null,xv=!1,fd=!1,Hd=0,NH=0;function Fr(){throw Error(Ce(321))}function LE(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Fs(n[t],e[t]))return!1;return!0}function DE(n,e,t,r,i,s){if(mc=s,In=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Oy.current=n===null||n.memoizedState===null?GH:HH,n=t(r,i),fd){s=0;do{if(fd=!1,Hd=0,25<=s)throw Error(Ce(301));s+=1,yr=sr=null,e.updateQueue=null,Oy.current=VH,n=t(r,i)}while(fd)}if(Oy.current=wv,e=sr!==null&&sr.next!==null,mc=0,yr=sr=In=null,xv=!1,e)throw Error(Ce(300));return n}function BE(){var n=Hd!==0;return Hd=0,n}function to(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yr===null?In.memoizedState=yr=n:yr=yr.next=n,yr}function ps(){if(sr===null){var n=In.alternate;n=n!==null?n.memoizedState:null}else n=sr.next;var e=yr===null?In.memoizedState:yr.next;if(e!==null)yr=e,sr=n;else{if(n===null)throw Error(Ce(310));sr=n,n={memoizedState:sr.memoizedState,baseState:sr.baseState,baseQueue:sr.baseQueue,queue:sr.queue,next:null},yr===null?In.memoizedState=yr=n:yr=yr.next=n}return yr}function Vd(n,e){return typeof e=="function"?e(n):e}function x1(n){var e=ps(),t=e.queue;if(t===null)throw Error(Ce(311));t.lastRenderedReducer=n;var r=sr,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((mc&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,In.lanes|=h,gc|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Fs(r,e.memoizedState)||(_i=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,In.lanes|=s,gc|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function w1(n){var e=ps(),t=e.queue;if(t===null)throw Error(Ce(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Fs(s,e.memoizedState)||(_i=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function a3(){}function l3(n,e){var t=In,r=ps(),i=e(),s=!Fs(r.memoizedState,i);if(s&&(r.memoizedState=i,_i=!0),r=r.queue,OE(h3.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||yr!==null&&yr.memoizedState.tag&1){if(t.flags|=2048,Wd(9,u3.bind(null,t,r,i,e),void 0,null),_r===null)throw Error(Ce(349));mc&30||c3(t,e,i)}return i}function c3(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=In.updateQueue,e===null?(e={lastEffect:null,stores:null},In.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function u3(n,e,t,r){e.value=t,e.getSnapshot=r,f3(e)&&d3(n)}function h3(n,e,t){return t(function(){f3(e)&&d3(n)})}function f3(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Fs(n,t)}catch{return!0}}function d3(n){var e=$o(n,1);e!==null&&ks(e,n,1,-1)}function LP(n){var e=to();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vd,lastRenderedState:n},e.queue=n,n=n.dispatch=zH.bind(null,In,n),[e.memoizedState,n]}function Wd(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=In.updateQueue,e===null?(e={lastEffect:null,stores:null},In.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function p3(){return ps().memoizedState}function ky(n,e,t,r){var i=to();In.flags|=n,i.memoizedState=Wd(1|e,t,void 0,r===void 0?null:r)}function w0(n,e,t,r){var i=ps();r=r===void 0?null:r;var s=void 0;if(sr!==null){var o=sr.memoizedState;if(s=o.destroy,r!==null&&LE(r,o.deps)){i.memoizedState=Wd(e,t,s,r);return}}In.flags|=n,i.memoizedState=Wd(1|e,t,s,r)}function DP(n,e){return ky(8390656,8,n,e)}function OE(n,e){return w0(2048,8,n,e)}function m3(n,e){return w0(4,2,n,e)}function g3(n,e){return w0(4,4,n,e)}function y3(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function v3(n,e,t){return t=t!=null?t.concat([n]):null,w0(4,4,y3.bind(null,e,n),t)}function kE(){}function _3(n,e){var t=ps();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&LE(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function x3(n,e){var t=ps();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&LE(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function w3(n,e,t){return mc&21?(Fs(t,e)||(t=MB(),In.lanes|=t,gc|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,_i=!0),n.memoizedState=t)}function FH(n,e){var t=Zt;Zt=t!==0&&4>t?t:4,n(!0);var r=_1.transition;_1.transition={};try{n(!1),e()}finally{Zt=t,_1.transition=r}}function S3(){return ps().memoizedState}function UH(n,e,t){var r=Wa(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},A3(n))M3(e,t);else if(t=e3(n,e,t,r),t!==null){var i=li();ks(t,n,r,i),E3(t,e,r)}}function zH(n,e,t){var r=Wa(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(A3(n))M3(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Fs(a,o)){var l=e.interleaved;l===null?(i.next=i,bE(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=e3(n,e,i,r),t!==null&&(i=li(),ks(t,n,r,i),E3(t,e,r))}}function A3(n){var e=n.alternate;return n===In||e!==null&&e===In}function M3(n,e){fd=xv=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function E3(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,dE(n,t)}}var wv={readContext:ds,useCallback:Fr,useContext:Fr,useEffect:Fr,useImperativeHandle:Fr,useInsertionEffect:Fr,useLayoutEffect:Fr,useMemo:Fr,useReducer:Fr,useRef:Fr,useState:Fr,useDebugValue:Fr,useDeferredValue:Fr,useTransition:Fr,useMutableSource:Fr,useSyncExternalStore:Fr,useId:Fr,unstable_isNewReconciler:!1},GH={readContext:ds,useCallback:function(n,e){return to().memoizedState=[n,e===void 0?null:e],n},useContext:ds,useEffect:DP,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,ky(4194308,4,y3.bind(null,e,n),t)},useLayoutEffect:function(n,e){return ky(4194308,4,n,e)},useInsertionEffect:function(n,e){return ky(4,2,n,e)},useMemo:function(n,e){var t=to();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=to();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=UH.bind(null,In,n),[r.memoizedState,n]},useRef:function(n){var e=to();return n={current:n},e.memoizedState=n},useState:LP,useDebugValue:kE,useDeferredValue:function(n){return to().memoizedState=n},useTransition:function(){var n=LP(!1),e=n[0];return n=FH.bind(null,n[1]),to().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=In,i=to();if(xn){if(t===void 0)throw Error(Ce(407));t=t()}else{if(t=e(),_r===null)throw Error(Ce(349));mc&30||c3(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,DP(h3.bind(null,r,s,n),[n]),r.flags|=2048,Wd(9,u3.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=to(),e=_r.identifierPrefix;if(xn){var t=Fo,r=No;t=(r&~(1<<32-Os(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Hd++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=NH++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},HH={readContext:ds,useCallback:_3,useContext:ds,useEffect:OE,useImperativeHandle:v3,useInsertionEffect:m3,useLayoutEffect:g3,useMemo:x3,useReducer:x1,useRef:p3,useState:function(){return x1(Vd)},useDebugValue:kE,useDeferredValue:function(n){var e=ps();return w3(e,sr.memoizedState,n)},useTransition:function(){var n=x1(Vd)[0],e=ps().memoizedState;return[n,e]},useMutableSource:a3,useSyncExternalStore:l3,useId:S3,unstable_isNewReconciler:!1},VH={readContext:ds,useCallback:_3,useContext:ds,useEffect:OE,useImperativeHandle:v3,useInsertionEffect:m3,useLayoutEffect:g3,useMemo:x3,useReducer:w1,useRef:p3,useState:function(){return w1(Vd)},useDebugValue:kE,useDeferredValue:function(n){var e=ps();return sr===null?e.memoizedState=n:w3(e,sr.memoizedState,n)},useTransition:function(){var n=w1(Vd)[0],e=ps().memoizedState;return[n,e]},useMutableSource:a3,useSyncExternalStore:l3,useId:S3,unstable_isNewReconciler:!1};function dh(n,e){try{var t="",r=e;do t+=yG(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function S1(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function US(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var WH=typeof WeakMap=="function"?WeakMap:Map;function C3(n,e,t){t=Ho(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Av||(Av=!0,XS=r),US(n,e)},t}function b3(n,e,t){t=Ho(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){US(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){US(n,e),typeof r!="function"&&(Va===null?Va=new Set([this]):Va.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function BP(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new WH;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=i5.bind(null,n,e,t),e.then(n,n))}function OP(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function kP(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Ho(-1,1),e.tag=2,Ha(t,e,1))),t.lanes|=1),n)}var jH=ta.ReactCurrentOwner,_i=!1;function si(n,e,t,r){e.child=n===null?s3(e,null,t,r):hh(e,n.child,t,r)}function NP(n,e,t,r,i){t=t.render;var s=e.ref;return Ju(e,i),r=DE(n,e,t,r,s,i),t=BE(),n!==null&&!_i?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Jo(n,e,i)):(xn&&t&&wE(e),e.flags|=1,si(n,e,r,i),e.child)}function FP(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!WE(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,T3(n,e,s,r,i)):(n=zy(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:kd,t(o,r)&&n.ref===e.ref)return Jo(n,e,i)}return e.flags|=1,n=ja(s,r),n.ref=e.ref,n.return=e,e.child=n}function T3(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(kd(s,r)&&n.ref===e.ref)if(_i=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(_i=!0);else return e.lanes=n.lanes,Jo(n,e,i)}return zS(n,e,t,r,i)}function I3(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ln(Nu,Di),Di|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,ln(Nu,Di),Di|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,ln(Nu,Di),Di|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,ln(Nu,Di),Di|=r;return si(n,e,i,t),e.child}function P3(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function zS(n,e,t,r,i){var s=wi(t)?dc:Xr.current;return s=ch(e,s),Ju(e,i),t=DE(n,e,t,r,s,i),r=BE(),n!==null&&!_i?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Jo(n,e,i)):(xn&&r&&wE(e),e.flags|=1,si(n,e,t,i),e.child)}function UP(n,e,t,r,i){if(wi(t)){var s=!0;dv(e)}else s=!1;if(Ju(e,i),e.stateNode===null)Ny(n,e),r3(e,t,r),FS(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=ds(c):(c=wi(t)?dc:Xr.current,c=ch(e,c));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&PP(e,o,r,c),Aa=!1;var p=e.memoizedState;o.state=p,vv(e,r,o,i),l=e.memoizedState,a!==r||p!==l||xi.current||Aa?(typeof h=="function"&&(NS(e,t,h,r),l=e.memoizedState),(a=Aa||IP(e,t,a,r,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,t3(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:bs(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=ds(l):(l=wi(t)?dc:Xr.current,l=ch(e,l));var m=t.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&PP(e,o,r,l),Aa=!1,p=e.memoizedState,o.state=p,vv(e,r,o,i);var y=e.memoizedState;a!==d||p!==y||xi.current||Aa?(typeof m=="function"&&(NS(e,t,m,r),y=e.memoizedState),(c=Aa||IP(e,t,c,r,p,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return GS(n,e,t,r,s,i)}function GS(n,e,t,r,i,s){P3(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&MP(e,t,!1),Jo(n,e,s);r=e.stateNode,jH.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=hh(e,n.child,null,s),e.child=hh(e,null,a,s)):si(n,e,a,s),e.memoizedState=r.state,i&&MP(e,t,!0),e.child}function R3(n){var e=n.stateNode;e.pendingContext?AP(n,e.pendingContext,e.pendingContext!==e.context):e.context&&AP(n,e.context,!1),IE(n,e.containerInfo)}function zP(n,e,t,r,i){return uh(),AE(i),e.flags|=256,si(n,e,t,r),e.child}var HS={dehydrated:null,treeContext:null,retryLane:0};function VS(n){return{baseLanes:n,cachePool:null,transitions:null}}function L3(n,e,t){var r=e.pendingProps,i=En.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),ln(En,i&1),n===null)return OS(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=M0(o,r,0,null),n=nc(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=VS(t),e.memoizedState=HS,n):NE(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return $H(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ja(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ja(a,s):(s=nc(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?VS(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=HS,r}return s=n.child,n=s.sibling,r=ja(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function NE(n,e){return e=M0({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function wg(n,e,t,r){return r!==null&&AE(r),hh(e,n.child,null,t),n=NE(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function $H(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=S1(Error(Ce(422))),wg(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=M0({mode:"visible",children:r.children},i,0,null),s=nc(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&hh(e,n.child,null,o),e.child.memoizedState=VS(o),e.memoizedState=HS,s);if(!(e.mode&1))return wg(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Ce(419)),r=S1(s,r,void 0),wg(n,e,o,r)}if(a=(o&n.childLanes)!==0,_i||a){if(r=_r,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,$o(n,i),ks(r,n,i,-1))}return VE(),r=S1(Error(Ce(421))),wg(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=s5.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,ki=Ga(i.nextSibling),Fi=e,xn=!0,Ps=null,n!==null&&(ss[os++]=No,ss[os++]=Fo,ss[os++]=pc,No=n.id,Fo=n.overflow,pc=e),e=NE(e,r.children),e.flags|=4096,e)}function GP(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),kS(n.return,e,t)}function A1(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function D3(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(si(n,e,r.children,t),r=En.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&GP(n,t,e);else if(n.tag===19)GP(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(ln(En,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&_v(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),A1(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&_v(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}A1(e,!0,t,null,s);break;case"together":A1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ny(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Jo(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),gc|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Ce(153));if(e.child!==null){for(n=e.child,t=ja(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=ja(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function JH(n,e,t){switch(e.tag){case 3:R3(e),uh();break;case 5:o3(e);break;case 1:wi(e.type)&&dv(e);break;case 4:IE(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ln(gv,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ln(En,En.current&1),e.flags|=128,null):t&e.child.childLanes?L3(n,e,t):(ln(En,En.current&1),n=Jo(n,e,t),n!==null?n.sibling:null);ln(En,En.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return D3(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ln(En,En.current),r)break;return null;case 22:case 23:return e.lanes=0,I3(n,e,t)}return Jo(n,e,t)}var B3,WS,O3,k3;B3=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};WS=function(){};O3=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,$l(oo.current);var s=null;switch(t){case"input":i=fS(n,i),r=fS(n,r),s=[];break;case"select":i=Pn({},i,{value:void 0}),r=Pn({},r,{value:void 0}),s=[];break;case"textarea":i=mS(n,i),r=mS(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=hv)}yS(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Id.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Id.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&hn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};k3=function(n,e,t,r){t!==r&&(e.flags|=4)};function Rf(n,e){if(!xn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Ur(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function KH(n,e,t){var r=e.pendingProps;switch(SE(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ur(e),null;case 1:return wi(e.type)&&fv(),Ur(e),null;case 3:return r=e.stateNode,fh(),pn(xi),pn(Xr),RE(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(_g(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ps!==null&&(YS(Ps),Ps=null))),WS(n,e),Ur(e),null;case 5:PE(e);var i=$l(Gd.current);if(t=e.type,n!==null&&e.stateNode!=null)O3(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ce(166));return Ur(e),null}if(n=$l(oo.current),_g(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[no]=e,r[Ud]=s,n=(e.mode&1)!==0,t){case"dialog":hn("cancel",r),hn("close",r);break;case"iframe":case"object":case"embed":hn("load",r);break;case"video":case"audio":for(i=0;i<td.length;i++)hn(td[i],r);break;case"source":hn("error",r);break;case"img":case"image":case"link":hn("error",r),hn("load",r);break;case"details":hn("toggle",r);break;case"input":qI(r,s),hn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},hn("invalid",r);break;case"textarea":YI(r,s),hn("invalid",r)}yS(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&vg(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&vg(r.textContent,a,n),i=["children",""+a]):Id.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&hn("scroll",r)}switch(t){case"input":ug(r),QI(r,s,!0);break;case"textarea":ug(r),ZI(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=hv)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=cB(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[no]=e,n[Ud]=r,B3(n,e,!1,!1),e.stateNode=n;e:{switch(o=vS(t,r),t){case"dialog":hn("cancel",n),hn("close",n),i=r;break;case"iframe":case"object":case"embed":hn("load",n),i=r;break;case"video":case"audio":for(i=0;i<td.length;i++)hn(td[i],n);i=r;break;case"source":hn("error",n),i=r;break;case"img":case"image":case"link":hn("error",n),hn("load",n),i=r;break;case"details":hn("toggle",n),i=r;break;case"input":qI(n,r),i=fS(n,r),hn("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=Pn({},r,{value:void 0}),hn("invalid",n);break;case"textarea":YI(n,r),i=mS(n,r),hn("invalid",n);break;default:i=r}yS(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?fB(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&uB(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Pd(n,l):typeof l=="number"&&Pd(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Id.hasOwnProperty(s)?l!=null&&s==="onScroll"&&hn("scroll",n):l!=null&&aE(n,s,l,o))}switch(t){case"input":ug(n),QI(n,r,!1);break;case"textarea":ug(n),ZI(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Ya(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Vu(n,!!r.multiple,s,!1):r.defaultValue!=null&&Vu(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=hv)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ur(e),null;case 6:if(n&&e.stateNode!=null)k3(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ce(166));if(t=$l(Gd.current),$l(oo.current),_g(e)){if(r=e.stateNode,t=e.memoizedProps,r[no]=e,(s=r.nodeValue!==t)&&(n=Fi,n!==null))switch(n.tag){case 3:vg(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&vg(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[no]=e,e.stateNode=r}return Ur(e),null;case 13:if(pn(En),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(xn&&ki!==null&&e.mode&1&&!(e.flags&128))ZB(),uh(),e.flags|=98560,s=!1;else if(s=_g(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(Ce(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ce(317));s[no]=e}else uh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ur(e),s=!1}else Ps!==null&&(YS(Ps),Ps=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||En.current&1?ar===0&&(ar=3):VE())),e.updateQueue!==null&&(e.flags|=4),Ur(e),null);case 4:return fh(),WS(n,e),n===null&&Nd(e.stateNode.containerInfo),Ur(e),null;case 10:return CE(e.type._context),Ur(e),null;case 17:return wi(e.type)&&fv(),Ur(e),null;case 19:if(pn(En),s=e.memoizedState,s===null)return Ur(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Rf(s,!1);else{if(ar!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=_v(n),o!==null){for(e.flags|=128,Rf(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return ln(En,En.current&1|2),e.child}n=n.sibling}s.tail!==null&&Wn()>ph&&(e.flags|=128,r=!0,Rf(s,!1),e.lanes=4194304)}else{if(!r)if(n=_v(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Rf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!xn)return Ur(e),null}else 2*Wn()-s.renderingStartTime>ph&&t!==1073741824&&(e.flags|=128,r=!0,Rf(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Wn(),e.sibling=null,t=En.current,ln(En,r?t&1|2:t&1),e):(Ur(e),null);case 22:case 23:return HE(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Di&1073741824&&(Ur(e),e.subtreeFlags&6&&(e.flags|=8192)):Ur(e),null;case 24:return null;case 25:return null}throw Error(Ce(156,e.tag))}function XH(n,e){switch(SE(e),e.tag){case 1:return wi(e.type)&&fv(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return fh(),pn(xi),pn(Xr),RE(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return PE(e),null;case 13:if(pn(En),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Ce(340));uh()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return pn(En),null;case 4:return fh(),null;case 10:return CE(e.type._context),null;case 22:case 23:return HE(),null;case 24:return null;default:return null}}var Sg=!1,jr=!1,qH=typeof WeakSet=="function"?WeakSet:Set,qe=null;function ku(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Nn(n,e,r)}else t.current=null}function jS(n,e,t){try{t()}catch(r){Nn(n,e,r)}}var HP=!1;function QH(n,e){if(TS=lv,n=zB(),xE(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=n,p=null;t:for(;;){for(var m;d!==t||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===n)break t;if(p===t&&++c===i&&(a=o),p===s&&++h===r&&(l=o),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(IS={focusedElem:n,selectionRange:t},lv=!1,qe=e;qe!==null;)if(e=qe,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,qe=n;else for(;qe!==null;){e=qe;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,_=y.memoizedState,x=e.stateNode,w=x.getSnapshotBeforeUpdate(e.elementType===e.type?g:bs(e.type,g),_);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ce(163))}}catch(M){Nn(e,e.return,M)}if(n=e.sibling,n!==null){n.return=e.return,qe=n;break}qe=e.return}return y=HP,HP=!1,y}function dd(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&jS(e,t,s)}i=i.next}while(i!==r)}}function S0(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function $S(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function N3(n){var e=n.alternate;e!==null&&(n.alternate=null,N3(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[no],delete e[Ud],delete e[LS],delete e[DH],delete e[BH])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function F3(n){return n.tag===5||n.tag===3||n.tag===4}function VP(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||F3(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function JS(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=hv));else if(r!==4&&(n=n.child,n!==null))for(JS(n,e,t),n=n.sibling;n!==null;)JS(n,e,t),n=n.sibling}function KS(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(KS(n,e,t),n=n.sibling;n!==null;)KS(n,e,t),n=n.sibling}var Er=null,Ts=!1;function pa(n,e,t){for(t=t.child;t!==null;)U3(n,e,t),t=t.sibling}function U3(n,e,t){if(so&&typeof so.onCommitFiberUnmount=="function")try{so.onCommitFiberUnmount(p0,t)}catch{}switch(t.tag){case 5:jr||ku(t,e);case 6:var r=Er,i=Ts;Er=null,pa(n,e,t),Er=r,Ts=i,Er!==null&&(Ts?(n=Er,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Er.removeChild(t.stateNode));break;case 18:Er!==null&&(Ts?(n=Er,t=t.stateNode,n.nodeType===8?g1(n.parentNode,t):n.nodeType===1&&g1(n,t),Bd(n)):g1(Er,t.stateNode));break;case 4:r=Er,i=Ts,Er=t.stateNode.containerInfo,Ts=!0,pa(n,e,t),Er=r,Ts=i;break;case 0:case 11:case 14:case 15:if(!jr&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&jS(t,e,o),i=i.next}while(i!==r)}pa(n,e,t);break;case 1:if(!jr&&(ku(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Nn(t,e,a)}pa(n,e,t);break;case 21:pa(n,e,t);break;case 22:t.mode&1?(jr=(r=jr)||t.memoizedState!==null,pa(n,e,t),jr=r):pa(n,e,t);break;default:pa(n,e,t)}}function WP(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new qH),e.forEach(function(r){var i=o5.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Ss(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Er=a.stateNode,Ts=!1;break e;case 3:Er=a.stateNode.containerInfo,Ts=!0;break e;case 4:Er=a.stateNode.containerInfo,Ts=!0;break e}a=a.return}if(Er===null)throw Error(Ce(160));U3(s,o,i),Er=null,Ts=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Nn(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)z3(e,n),e=e.sibling}function z3(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ss(e,n),Zs(n),r&4){try{dd(3,n,n.return),S0(3,n)}catch(g){Nn(n,n.return,g)}try{dd(5,n,n.return)}catch(g){Nn(n,n.return,g)}}break;case 1:Ss(e,n),Zs(n),r&512&&t!==null&&ku(t,t.return);break;case 5:if(Ss(e,n),Zs(n),r&512&&t!==null&&ku(t,t.return),n.flags&32){var i=n.stateNode;try{Pd(i,"")}catch(g){Nn(n,n.return,g)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&aB(i,s),vS(a,o);var c=vS(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?fB(i,d):h==="dangerouslySetInnerHTML"?uB(i,d):h==="children"?Pd(i,d):aE(i,h,d,c)}switch(a){case"input":dS(i,s);break;case"textarea":lB(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Vu(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Vu(i,!!s.multiple,s.defaultValue,!0):Vu(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ud]=s}catch(g){Nn(n,n.return,g)}}break;case 6:if(Ss(e,n),Zs(n),r&4){if(n.stateNode===null)throw Error(Ce(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(g){Nn(n,n.return,g)}}break;case 3:if(Ss(e,n),Zs(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Bd(e.containerInfo)}catch(g){Nn(n,n.return,g)}break;case 4:Ss(e,n),Zs(n);break;case 13:Ss(e,n),Zs(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(zE=Wn())),r&4&&WP(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(jr=(c=jr)||h,Ss(e,n),jr=c):Ss(e,n),Zs(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!h&&n.mode&1)for(qe=n,h=n.child;h!==null;){for(d=qe=h;qe!==null;){switch(p=qe,m=p.child,p.tag){case 0:case 11:case 14:case 15:dd(4,p,p.return);break;case 1:ku(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(g){Nn(r,t,g)}}break;case 5:ku(p,p.return);break;case 22:if(p.memoizedState!==null){$P(d);continue}}m!==null?(m.return=p,qe=m):$P(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=hB("display",o))}catch(g){Nn(n,n.return,g)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){Nn(n,n.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ss(e,n),Zs(n),r&4&&WP(n);break;case 21:break;default:Ss(e,n),Zs(n)}}function Zs(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(F3(t)){var r=t;break e}t=t.return}throw Error(Ce(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Pd(i,""),r.flags&=-33);var s=VP(n);KS(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=VP(n);JS(n,a,o);break;default:throw Error(Ce(161))}}catch(l){Nn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function YH(n,e,t){qe=n,G3(n)}function G3(n,e,t){for(var r=(n.mode&1)!==0;qe!==null;){var i=qe,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Sg;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||jr;a=Sg;var c=jr;if(Sg=o,(jr=l)&&!c)for(qe=i;qe!==null;)o=qe,l=o.child,o.tag===22&&o.memoizedState!==null?JP(i):l!==null?(l.return=o,qe=l):JP(i);for(;s!==null;)qe=s,G3(s),s=s.sibling;qe=i,Sg=a,jr=c}jP(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,qe=s):jP(n)}}function jP(n){for(;qe!==null;){var e=qe;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:jr||S0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!jr)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:bs(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&TP(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}TP(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Bd(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ce(163))}jr||e.flags&512&&$S(e)}catch(p){Nn(e,e.return,p)}}if(e===n){qe=null;break}if(t=e.sibling,t!==null){t.return=e.return,qe=t;break}qe=e.return}}function $P(n){for(;qe!==null;){var e=qe;if(e===n){qe=null;break}var t=e.sibling;if(t!==null){t.return=e.return,qe=t;break}qe=e.return}}function JP(n){for(;qe!==null;){var e=qe;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{S0(4,e)}catch(l){Nn(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Nn(e,i,l)}}var s=e.return;try{$S(e)}catch(l){Nn(e,s,l)}break;case 5:var o=e.return;try{$S(e)}catch(l){Nn(e,o,l)}}}catch(l){Nn(e,e.return,l)}if(e===n){qe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,qe=a;break}qe=e.return}}var ZH=Math.ceil,Sv=ta.ReactCurrentDispatcher,FE=ta.ReactCurrentOwner,hs=ta.ReactCurrentBatchConfig,Wt=0,_r=null,Zn=null,br=0,Di=0,Nu=ll(0),ar=0,jd=null,gc=0,A0=0,UE=0,pd=null,yi=null,zE=0,ph=1/0,Do=null,Av=!1,XS=null,Va=null,Ag=!1,Pa=null,Mv=0,md=0,qS=null,Fy=-1,Uy=0;function li(){return Wt&6?Wn():Fy!==-1?Fy:Fy=Wn()}function Wa(n){return n.mode&1?Wt&2&&br!==0?br&-br:kH.transition!==null?(Uy===0&&(Uy=MB()),Uy):(n=Zt,n!==0||(n=window.event,n=n===void 0?16:RB(n.type)),n):1}function ks(n,e,t,r){if(50<md)throw md=0,qS=null,Error(Ce(185));Mp(n,t,r),(!(Wt&2)||n!==_r)&&(n===_r&&(!(Wt&2)&&(A0|=t),ar===4&&ba(n,br)),Si(n,r),t===1&&Wt===0&&!(e.mode&1)&&(ph=Wn()+500,_0&&cl()))}function Si(n,e){var t=n.callbackNode;kG(n,e);var r=av(n,n===_r?br:0);if(r===0)t!==null&&nP(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&nP(t),e===1)n.tag===0?OH(KP.bind(null,n)):qB(KP.bind(null,n)),RH(function(){!(Wt&6)&&cl()}),t=null;else{switch(EB(r)){case 1:t=fE;break;case 4:t=SB;break;case 16:t=ov;break;case 536870912:t=AB;break;default:t=ov}t=X3(t,H3.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function H3(n,e){if(Fy=-1,Uy=0,Wt&6)throw Error(Ce(327));var t=n.callbackNode;if(Ku()&&n.callbackNode!==t)return null;var r=av(n,n===_r?br:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Ev(n,r);else{e=r;var i=Wt;Wt|=2;var s=W3();(_r!==n||br!==e)&&(Do=null,ph=Wn()+500,tc(n,e));do try{n5();break}catch(a){V3(n,a)}while(1);EE(),Sv.current=s,Wt=i,Zn!==null?e=0:(_r=null,br=0,e=ar)}if(e!==0){if(e===2&&(i=AS(n),i!==0&&(r=i,e=QS(n,i))),e===1)throw t=jd,tc(n,0),ba(n,r),Si(n,Wn()),t;if(e===6)ba(n,r);else{if(i=n.current.alternate,!(r&30)&&!e5(i)&&(e=Ev(n,r),e===2&&(s=AS(n),s!==0&&(r=s,e=QS(n,s))),e===1))throw t=jd,tc(n,0),ba(n,r),Si(n,Wn()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(Ce(345));case 2:Bl(n,yi,Do);break;case 3:if(ba(n,r),(r&130023424)===r&&(e=zE+500-Wn(),10<e)){if(av(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){li(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=RS(Bl.bind(null,n,yi,Do),e);break}Bl(n,yi,Do);break;case 4:if(ba(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Os(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Wn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ZH(r/1960))-r,10<r){n.timeoutHandle=RS(Bl.bind(null,n,yi,Do),r);break}Bl(n,yi,Do);break;case 5:Bl(n,yi,Do);break;default:throw Error(Ce(329))}}}return Si(n,Wn()),n.callbackNode===t?H3.bind(null,n):null}function QS(n,e){var t=pd;return n.current.memoizedState.isDehydrated&&(tc(n,e).flags|=256),n=Ev(n,e),n!==2&&(e=yi,yi=t,e!==null&&YS(e)),n}function YS(n){yi===null?yi=n:yi.push.apply(yi,n)}function e5(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Fs(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ba(n,e){for(e&=~UE,e&=~A0,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Os(e),r=1<<t;n[t]=-1,e&=~r}}function KP(n){if(Wt&6)throw Error(Ce(327));Ku();var e=av(n,0);if(!(e&1))return Si(n,Wn()),null;var t=Ev(n,e);if(n.tag!==0&&t===2){var r=AS(n);r!==0&&(e=r,t=QS(n,r))}if(t===1)throw t=jd,tc(n,0),ba(n,e),Si(n,Wn()),t;if(t===6)throw Error(Ce(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Bl(n,yi,Do),Si(n,Wn()),null}function GE(n,e){var t=Wt;Wt|=1;try{return n(e)}finally{Wt=t,Wt===0&&(ph=Wn()+500,_0&&cl())}}function yc(n){Pa!==null&&Pa.tag===0&&!(Wt&6)&&Ku();var e=Wt;Wt|=1;var t=hs.transition,r=Zt;try{if(hs.transition=null,Zt=1,n)return n()}finally{Zt=r,hs.transition=t,Wt=e,!(Wt&6)&&cl()}}function HE(){Di=Nu.current,pn(Nu)}function tc(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,PH(t)),Zn!==null)for(t=Zn.return;t!==null;){var r=t;switch(SE(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&fv();break;case 3:fh(),pn(xi),pn(Xr),RE();break;case 5:PE(r);break;case 4:fh();break;case 13:pn(En);break;case 19:pn(En);break;case 10:CE(r.type._context);break;case 22:case 23:HE()}t=t.return}if(_r=n,Zn=n=ja(n.current,null),br=Di=e,ar=0,jd=null,UE=A0=gc=0,yi=pd=null,jl!==null){for(e=0;e<jl.length;e++)if(t=jl[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}jl=null}return n}function V3(n,e){do{var t=Zn;try{if(EE(),Oy.current=wv,xv){for(var r=In.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}xv=!1}if(mc=0,yr=sr=In=null,fd=!1,Hd=0,FE.current=null,t===null||t.return===null){ar=1,jd=e,Zn=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=br,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=OP(o);if(m!==null){m.flags&=-257,kP(m,o,a,s,e),m.mode&1&&BP(s,c,e),e=m,l=c;var y=e.updateQueue;if(y===null){var g=new Set;g.add(l),e.updateQueue=g}else y.add(l);break e}else{if(!(e&1)){BP(s,c,e),VE();break e}l=Error(Ce(426))}}else if(xn&&a.mode&1){var _=OP(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),kP(_,o,a,s,e),AE(dh(l,a));break e}}s=l=dh(l,a),ar!==4&&(ar=2),pd===null?pd=[s]:pd.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=C3(s,l,e);bP(s,x);break e;case 1:a=l;var w=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Va===null||!Va.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var M=b3(s,a,e);bP(s,M);break e}}s=s.return}while(s!==null)}$3(t)}catch(T){e=T,Zn===t&&t!==null&&(Zn=t=t.return);continue}break}while(1)}function W3(){var n=Sv.current;return Sv.current=wv,n===null?wv:n}function VE(){(ar===0||ar===3||ar===2)&&(ar=4),_r===null||!(gc&268435455)&&!(A0&268435455)||ba(_r,br)}function Ev(n,e){var t=Wt;Wt|=2;var r=W3();(_r!==n||br!==e)&&(Do=null,tc(n,e));do try{t5();break}catch(i){V3(n,i)}while(1);if(EE(),Wt=t,Sv.current=r,Zn!==null)throw Error(Ce(261));return _r=null,br=0,ar}function t5(){for(;Zn!==null;)j3(Zn)}function n5(){for(;Zn!==null&&!bG();)j3(Zn)}function j3(n){var e=K3(n.alternate,n,Di);n.memoizedProps=n.pendingProps,e===null?$3(n):Zn=e,FE.current=null}function $3(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=XH(t,e),t!==null){t.flags&=32767,Zn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ar=6,Zn=null;return}}else if(t=KH(t,e,Di),t!==null){Zn=t;return}if(e=e.sibling,e!==null){Zn=e;return}Zn=e=n}while(e!==null);ar===0&&(ar=5)}function Bl(n,e,t){var r=Zt,i=hs.transition;try{hs.transition=null,Zt=1,r5(n,e,t,r)}finally{hs.transition=i,Zt=r}return null}function r5(n,e,t,r){do Ku();while(Pa!==null);if(Wt&6)throw Error(Ce(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Ce(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(NG(n,s),n===_r&&(Zn=_r=null,br=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Ag||(Ag=!0,X3(ov,function(){return Ku(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=hs.transition,hs.transition=null;var o=Zt;Zt=1;var a=Wt;Wt|=4,FE.current=null,QH(n,t),z3(t,n),AH(IS),lv=!!TS,IS=TS=null,n.current=t,YH(t),TG(),Wt=a,Zt=o,hs.transition=s}else n.current=t;if(Ag&&(Ag=!1,Pa=n,Mv=i),s=n.pendingLanes,s===0&&(Va=null),RG(t.stateNode),Si(n,Wn()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(Av)throw Av=!1,n=XS,XS=null,n;return Mv&1&&n.tag!==0&&Ku(),s=n.pendingLanes,s&1?n===qS?md++:(md=0,qS=n):md=0,cl(),null}function Ku(){if(Pa!==null){var n=EB(Mv),e=hs.transition,t=Zt;try{if(hs.transition=null,Zt=16>n?16:n,Pa===null)var r=!1;else{if(n=Pa,Pa=null,Mv=0,Wt&6)throw Error(Ce(331));var i=Wt;for(Wt|=4,qe=n.current;qe!==null;){var s=qe,o=s.child;if(qe.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(qe=c;qe!==null;){var h=qe;switch(h.tag){case 0:case 11:case 15:dd(8,h,s)}var d=h.child;if(d!==null)d.return=h,qe=d;else for(;qe!==null;){h=qe;var p=h.sibling,m=h.return;if(N3(h),h===c){qe=null;break}if(p!==null){p.return=m,qe=p;break}qe=m}}}var y=s.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var _=g.sibling;g.sibling=null,g=_}while(g!==null)}}qe=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,qe=o;else e:for(;qe!==null;){if(s=qe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:dd(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,qe=x;break e}qe=s.return}}var w=n.current;for(qe=w;qe!==null;){o=qe;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,qe=S;else e:for(o=w;qe!==null;){if(a=qe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:S0(9,a)}}catch(T){Nn(a,a.return,T)}if(a===o){qe=null;break e}var M=a.sibling;if(M!==null){M.return=a.return,qe=M;break e}qe=a.return}}if(Wt=i,cl(),so&&typeof so.onPostCommitFiberRoot=="function")try{so.onPostCommitFiberRoot(p0,n)}catch{}r=!0}return r}finally{Zt=t,hs.transition=e}}return!1}function XP(n,e,t){e=dh(t,e),e=C3(n,e,1),n=Ha(n,e,1),e=li(),n!==null&&(Mp(n,1,e),Si(n,e))}function Nn(n,e,t){if(n.tag===3)XP(n,n,t);else for(;e!==null;){if(e.tag===3){XP(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Va===null||!Va.has(r))){n=dh(t,n),n=b3(e,n,1),e=Ha(e,n,1),n=li(),e!==null&&(Mp(e,1,n),Si(e,n));break}}e=e.return}}function i5(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=li(),n.pingedLanes|=n.suspendedLanes&t,_r===n&&(br&t)===t&&(ar===4||ar===3&&(br&130023424)===br&&500>Wn()-zE?tc(n,0):UE|=t),Si(n,e)}function J3(n,e){e===0&&(n.mode&1?(e=dg,dg<<=1,!(dg&130023424)&&(dg=4194304)):e=1);var t=li();n=$o(n,e),n!==null&&(Mp(n,e,t),Si(n,t))}function s5(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),J3(n,t)}function o5(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Ce(314))}r!==null&&r.delete(e),J3(n,t)}var K3;K3=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||xi.current)_i=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return _i=!1,JH(n,e,t);_i=!!(n.flags&131072)}else _i=!1,xn&&e.flags&1048576&&QB(e,mv,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ny(n,e),n=e.pendingProps;var i=ch(e,Xr.current);Ju(e,t),i=DE(null,e,r,n,i,t);var s=BE();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,wi(r)?(s=!0,dv(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,TE(e),i.updater=x0,e.stateNode=i,i._reactInternals=e,FS(e,r,n,t),e=GS(null,e,r,!0,s,t)):(e.tag=0,xn&&s&&wE(e),si(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Ny(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=l5(r),n=bs(r,n),i){case 0:e=zS(null,e,r,n,t);break e;case 1:e=UP(null,e,r,n,t);break e;case 11:e=NP(null,e,r,n,t);break e;case 14:e=FP(null,e,r,bs(r.type,n),t);break e}throw Error(Ce(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bs(r,i),zS(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bs(r,i),UP(n,e,r,i,t);case 3:e:{if(R3(e),n===null)throw Error(Ce(387));r=e.pendingProps,s=e.memoizedState,i=s.element,t3(n,e),vv(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=dh(Error(Ce(423)),e),e=zP(n,e,r,t,i);break e}else if(r!==i){i=dh(Error(Ce(424)),e),e=zP(n,e,r,t,i);break e}else for(ki=Ga(e.stateNode.containerInfo.firstChild),Fi=e,xn=!0,Ps=null,t=s3(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(uh(),r===i){e=Jo(n,e,t);break e}si(n,e,r,t)}e=e.child}return e;case 5:return o3(e),n===null&&OS(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,PS(r,i)?o=null:s!==null&&PS(r,s)&&(e.flags|=32),P3(n,e),si(n,e,o,t),e.child;case 6:return n===null&&OS(e),null;case 13:return L3(n,e,t);case 4:return IE(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=hh(e,null,r,t):si(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bs(r,i),NP(n,e,r,i,t);case 7:return si(n,e,e.pendingProps,t),e.child;case 8:return si(n,e,e.pendingProps.children,t),e.child;case 12:return si(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ln(gv,r._currentValue),r._currentValue=o,s!==null)if(Fs(s.value,o)){if(s.children===i.children&&!xi.current){e=Jo(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ho(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),kS(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ce(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),kS(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}si(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ju(e,t),i=ds(i),r=r(i),e.flags|=1,si(n,e,r,t),e.child;case 14:return r=e.type,i=bs(r,e.pendingProps),i=bs(r.type,i),FP(n,e,r,i,t);case 15:return T3(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bs(r,i),Ny(n,e),e.tag=1,wi(r)?(n=!0,dv(e)):n=!1,Ju(e,t),r3(e,r,i),FS(e,r,i,t),GS(null,e,r,!0,n,t);case 19:return D3(n,e,t);case 22:return I3(n,e,t)}throw Error(Ce(156,e.tag))};function X3(n,e){return wB(n,e)}function a5(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cs(n,e,t,r){return new a5(n,e,t,r)}function WE(n){return n=n.prototype,!(!n||!n.isReactComponent)}function l5(n){if(typeof n=="function")return WE(n)?1:0;if(n!=null){if(n=n.$$typeof,n===cE)return 11;if(n===uE)return 14}return 2}function ja(n,e){var t=n.alternate;return t===null?(t=cs(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function zy(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")WE(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case bu:return nc(t.children,i,s,e);case lE:o=8,i|=8;break;case lS:return n=cs(12,t,e,i|2),n.elementType=lS,n.lanes=s,n;case cS:return n=cs(13,t,e,i),n.elementType=cS,n.lanes=s,n;case uS:return n=cs(19,t,e,i),n.elementType=uS,n.lanes=s,n;case iB:return M0(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case nB:o=10;break e;case rB:o=9;break e;case cE:o=11;break e;case uE:o=14;break e;case Sa:o=16,r=null;break e}throw Error(Ce(130,n==null?n:typeof n,""))}return e=cs(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function nc(n,e,t,r){return n=cs(7,n,r,e),n.lanes=t,n}function M0(n,e,t,r){return n=cs(22,n,r,e),n.elementType=iB,n.lanes=t,n.stateNode={isHidden:!1},n}function M1(n,e,t){return n=cs(6,n,null,e),n.lanes=t,n}function E1(n,e,t){return e=cs(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function c5(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=s1(0),this.expirationTimes=s1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=s1(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jE(n,e,t,r,i,s,o,a,l){return n=new c5(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=cs(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},TE(s),n}function u5(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cu,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function q3(n){if(!n)return Za;n=n._reactInternals;e:{if(Rc(n)!==n||n.tag!==1)throw Error(Ce(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(wi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ce(171))}if(n.tag===1){var t=n.type;if(wi(t))return XB(n,t,e)}return e}function Q3(n,e,t,r,i,s,o,a,l){return n=jE(t,r,!0,n,i,s,o,a,l),n.context=q3(null),t=n.current,r=li(),i=Wa(t),s=Ho(r,i),s.callback=e??null,Ha(t,s,i),n.current.lanes=i,Mp(n,i,r),Si(n,r),n}function E0(n,e,t,r){var i=e.current,s=li(),o=Wa(i);return t=q3(t),e.context===null?e.context=t:e.pendingContext=t,e=Ho(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Ha(i,e,o),n!==null&&(ks(n,i,o,s),By(n,i,o)),o}function Cv(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function qP(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function $E(n,e){qP(n,e),(n=n.alternate)&&qP(n,e)}function h5(){return null}var Y3=typeof reportError=="function"?reportError:function(n){console.error(n)};function JE(n){this._internalRoot=n}C0.prototype.render=JE.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Ce(409));E0(n,e,null,null)};C0.prototype.unmount=JE.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;yc(function(){E0(null,n,null,null)}),e[jo]=null}};function C0(n){this._internalRoot=n}C0.prototype.unstable_scheduleHydration=function(n){if(n){var e=TB();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Ca.length&&e!==0&&e<Ca[t].priority;t++);Ca.splice(t,0,n),t===0&&PB(n)}};function KE(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function b0(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function QP(){}function f5(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Cv(o);s.call(c)}}var o=Q3(e,r,n,0,null,!1,!1,"",QP);return n._reactRootContainer=o,n[jo]=o.current,Nd(n.nodeType===8?n.parentNode:n),yc(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Cv(l);a.call(c)}}var l=jE(n,0,!1,null,null,!1,!1,"",QP);return n._reactRootContainer=l,n[jo]=l.current,Nd(n.nodeType===8?n.parentNode:n),yc(function(){E0(e,l,t,r)}),l}function T0(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Cv(o);a.call(l)}}E0(e,o,n,i)}else o=f5(t,e,n,i,r);return Cv(o)}CB=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=ed(e.pendingLanes);t!==0&&(dE(e,t|1),Si(e,Wn()),!(Wt&6)&&(ph=Wn()+500,cl()))}break;case 13:yc(function(){var r=$o(n,1);if(r!==null){var i=li();ks(r,n,1,i)}}),$E(n,1)}};pE=function(n){if(n.tag===13){var e=$o(n,134217728);if(e!==null){var t=li();ks(e,n,134217728,t)}$E(n,134217728)}};bB=function(n){if(n.tag===13){var e=Wa(n),t=$o(n,e);if(t!==null){var r=li();ks(t,n,e,r)}$E(n,e)}};TB=function(){return Zt};IB=function(n,e){var t=Zt;try{return Zt=n,e()}finally{Zt=t}};xS=function(n,e,t){switch(e){case"input":if(dS(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=v0(r);if(!i)throw Error(Ce(90));oB(r),dS(r,i)}}}break;case"textarea":lB(n,t);break;case"select":e=t.value,e!=null&&Vu(n,!!t.multiple,e,!1)}};mB=GE;gB=yc;var d5={usingClientEntryPoint:!1,Events:[Cp,Ru,v0,dB,pB,GE]},Lf={findFiberByHostInstance:Wl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},p5={bundleType:Lf.bundleType,version:Lf.version,rendererPackageName:Lf.rendererPackageName,rendererConfig:Lf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ta.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=_B(n),n===null?null:n.stateNode},findFiberByHostInstance:Lf.findFiberByHostInstance||h5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mg.isDisabled&&Mg.supportsFiber)try{p0=Mg.inject(p5),so=Mg}catch{}}Wi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=d5;Wi.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!KE(e))throw Error(Ce(200));return u5(n,e,null,t)};Wi.createRoot=function(n,e){if(!KE(n))throw Error(Ce(299));var t=!1,r="",i=Y3;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=jE(n,1,!1,null,null,t,!1,r,i),n[jo]=e.current,Nd(n.nodeType===8?n.parentNode:n),new JE(e)};Wi.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Ce(188)):(n=Object.keys(n).join(","),Error(Ce(268,n)));return n=_B(e),n=n===null?null:n.stateNode,n};Wi.flushSync=function(n){return yc(n)};Wi.hydrate=function(n,e,t){if(!b0(e))throw Error(Ce(200));return T0(null,n,e,!0,t)};Wi.hydrateRoot=function(n,e,t){if(!KE(n))throw Error(Ce(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=Y3;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=Q3(e,null,n,1,t??null,i,!1,s,o),n[jo]=e.current,Nd(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new C0(e)};Wi.render=function(n,e,t){if(!b0(e))throw Error(Ce(200));return T0(null,n,e,!1,t)};Wi.unmountComponentAtNode=function(n){if(!b0(n))throw Error(Ce(40));return n._reactRootContainer?(yc(function(){T0(null,null,n,!1,function(){n._reactRootContainer=null,n[jo]=null})}),!0):!1};Wi.unstable_batchedUpdates=GE;Wi.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!b0(t))throw Error(Ce(200));if(n==null||n._reactInternals===void 0)throw Error(Ce(38));return T0(n,e,t,!1,r)};Wi.version="18.2.0-next-9e3b772b8-20220608";(function(n){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}e(),n.exports=Wi})(hG);var Z3,YP=nv;Z3=sS.createRoot=YP.createRoot,sS.hydrateRoot=YP.hydrateRoot;const eO="/money-can/assets/money-can-low-resolution-logo-color-on-transparent-background-08619e95.svg";/**
 * @remix-run/router v1.3.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $d(){return $d=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},$d.apply(this,arguments)}var Ra;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ra||(Ra={}));const ZP="popstate";function m5(n){n===void 0&&(n={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=Lc(i.location.hash.substr(1));return ZS("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof s=="string"?s:bv(s))}function r(i,s){g5(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return v5(e,t,r,n)}function lr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function g5(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function y5(){return Math.random().toString(36).substr(2,8)}function e2(n,e){return{usr:n.state,key:n.key,idx:e}}function ZS(n,e,t,r){return t===void 0&&(t=null),$d({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Lc(e):e,{state:t,key:e&&e.key||r||y5()})}function bv(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Lc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function v5(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Ra.Pop,l=null,c=h();c==null&&(c=0,o.replaceState($d({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=Ra.Pop;let _=h(),x=_==null?null:_-c;c=_,l&&l({action:a,location:g.location,delta:x})}function p(_,x){a=Ra.Push;let w=ZS(g.location,_,x);t&&t(w,_),c=h()+1;let S=e2(w,c),M=g.createHref(w);try{o.pushState(S,"",M)}catch{i.location.assign(M)}s&&l&&l({action:a,location:g.location,delta:1})}function m(_,x){a=Ra.Replace;let w=ZS(g.location,_,x);t&&t(w,_),c=h();let S=e2(w,c),M=g.createHref(w);o.replaceState(S,"",M),s&&l&&l({action:a,location:g.location,delta:0})}function y(_){let x=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof _=="string"?_:bv(_);return lr(x,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,x)}let g={get action(){return a},get location(){return n(i,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(ZP,d),l=_,()=>{i.removeEventListener(ZP,d),l=null}},createHref(_){return e(i,_)},createURL:y,encodeLocation(_){let x=y(_);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:p,replace:m,go(_){return o.go(_)}};return g}var t2;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(t2||(t2={}));function _5(n,e,t){t===void 0&&(t="/");let r=typeof e=="string"?Lc(e):e,i=rO(r.pathname||"/",t);if(i==null)return null;let s=tO(n);x5(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=I5(s[a],L5(i));return o}function tO(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(lr(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=$a([r,l.relativePath]),h=t.concat(l);s.children&&s.children.length>0&&(lr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),tO(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:b5(c,s.index),routesMeta:h})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of nO(s.path))i(s,o,l)}),e}function nO(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=nO(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function x5(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:T5(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const w5=/^:\w+$/,S5=3,A5=2,M5=1,E5=10,C5=-2,n2=n=>n==="*";function b5(n,e){let t=n.split("/"),r=t.length;return t.some(n2)&&(r+=C5),e&&(r+=A5),t.filter(i=>!n2(i)).reduce((i,s)=>i+(w5.test(s)?S5:s===""?M5:E5),r)}function T5(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function I5(n,e){let{routesMeta:t}=n,r={},i="/",s=[];for(let o=0;o<t.length;++o){let a=t[o],l=o===t.length-1,c=i==="/"?e:e.slice(i.length)||"/",h=P5({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!h)return null;Object.assign(r,h.params);let d=a.route;s.push({params:r,pathname:$a([i,h.pathname]),pathnameBase:k5($a([i,h.pathnameBase])),route:d}),h.pathnameBase!=="/"&&(i=$a([i,h.pathnameBase]))}return s}function P5(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=R5(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,d)=>{if(h==="*"){let p=a[d]||"";o=s.slice(0,s.length-p.length).replace(/(.)\/+$/,"$1")}return c[h]=D5(a[d]||"",h),c},{}),pathname:s,pathnameBase:o,pattern:n}}function R5(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),XE(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return n.endsWith("*")?(r.push("*"),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function L5(n){try{return decodeURI(n)}catch(e){return XE(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function D5(n,e){try{return decodeURIComponent(n)}catch(t){return XE(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+n+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+t+").")),n}}function rO(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function XE(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function B5(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Lc(n):n;return{pathname:t?t.startsWith("/")?t:O5(t,e):e,search:N5(r),hash:F5(i)}}function O5(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function C1(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function iO(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function sO(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Lc(n):(i=$d({},n),lr(!i.pathname||!i.pathname.includes("?"),C1("?","pathname","search",i)),lr(!i.pathname||!i.pathname.includes("#"),C1("#","pathname","hash",i)),lr(!i.search||!i.search.includes("#"),C1("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,a;if(r||o==null)a=t;else{let d=e.length-1;if(o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;i.pathname=p.join("/")}a=d>=0?e[d]:"/"}let l=B5(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const $a=n=>n.join("/").replace(/\/\/+/g,"/"),k5=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),N5=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,F5=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function U5(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const z5=["post","put","patch","delete"];[...z5];/**
 * React Router v6.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function eA(){return eA=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},eA.apply(this,arguments)}function G5(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}const H5=typeof Object.is=="function"?Object.is:G5,{useState:V5,useEffect:W5,useLayoutEffect:j5,useDebugValue:$5}=iS;function J5(n,e,t){const r=e(),[{inst:i},s]=V5({inst:{value:r,getSnapshot:e}});return j5(()=>{i.value=r,i.getSnapshot=e,b1(i)&&s({inst:i})},[n,r,e]),W5(()=>(b1(i)&&s({inst:i}),n(()=>{b1(i)&&s({inst:i})})),[n]),$5(r),r}function b1(n){const e=n.getSnapshot,t=n.value;try{const r=e();return!H5(t,r)}catch{return!0}}function K5(n,e,t){return e()}const X5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",q5=!X5,Q5=q5?K5:J5;"useSyncExternalStore"in iS&&(n=>n.useSyncExternalStore)(iS);const oO=q.createContext(null),qE=q.createContext(null),Tp=q.createContext(null),I0=q.createContext(null),Uh=q.createContext({outlet:null,matches:[]}),aO=q.createContext(null);function Y5(n,e){let{relative:t}=e===void 0?{}:e;Ip()||lr(!1);let{basename:r,navigator:i}=q.useContext(Tp),{hash:s,pathname:o,search:a}=QE(n,{relative:t}),l=o;return r!=="/"&&(l=o==="/"?r:$a([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Ip(){return q.useContext(I0)!=null}function zh(){return Ip()||lr(!1),q.useContext(I0).location}function Z5(){Ip()||lr(!1);let{basename:n,navigator:e}=q.useContext(Tp),{matches:t}=q.useContext(Uh),{pathname:r}=zh(),i=JSON.stringify(iO(t).map(a=>a.pathnameBase)),s=q.useRef(!1);return q.useEffect(()=>{s.current=!0}),q.useCallback(function(a,l){if(l===void 0&&(l={}),!s.current)return;if(typeof a=="number"){e.go(a);return}let c=sO(a,JSON.parse(i),r,l.relative==="path");n!=="/"&&(c.pathname=c.pathname==="/"?n:$a([n,c.pathname])),(l.replace?e.replace:e.push)(c,l.state,l)},[n,e,i,r])}function QE(n,e){let{relative:t}=e===void 0?{}:e,{matches:r}=q.useContext(Uh),{pathname:i}=zh(),s=JSON.stringify(iO(r).map(o=>o.pathnameBase));return q.useMemo(()=>sO(n,JSON.parse(s),i,t==="path"),[n,s,i,t])}function e6(n,e){Ip()||lr(!1);let{navigator:t}=q.useContext(Tp),r=q.useContext(qE),{matches:i}=q.useContext(Uh),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let l=zh(),c;if(e){var h;let g=typeof e=="string"?Lc(e):e;a==="/"||(h=g.pathname)!=null&&h.startsWith(a)||lr(!1),c=g}else c=l;let d=c.pathname||"/",p=a==="/"?d:d.slice(a.length)||"/",m=_5(n,{pathname:p}),y=i6(m&&m.map(g=>Object.assign({},g,{params:Object.assign({},o,g.params),pathname:$a([a,t.encodeLocation?t.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?a:$a([a,t.encodeLocation?t.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),i,r||void 0);return e&&y?q.createElement(I0.Provider,{value:{location:eA({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Ra.Pop}},y):y}function t6(){let n=l6(),e=U5(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),t?q.createElement("pre",{style:i},t):null,s)}class n6 extends q.Component{constructor(e){super(e),this.state={location:e.location,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?q.createElement(Uh.Provider,{value:this.props.routeContext},q.createElement(aO.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function r6(n){let{routeContext:e,match:t,children:r}=n,i=q.useContext(oO);return i&&i.static&&i.staticContext&&t.route.errorElement&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),q.createElement(Uh.Provider,{value:e},r)}function i6(n,e,t){if(e===void 0&&(e=[]),n==null)if(t!=null&&t.errors)n=t.matches;else return null;let r=n,i=t==null?void 0:t.errors;if(i!=null){let s=r.findIndex(o=>o.route.id&&(i==null?void 0:i[o.route.id]));s>=0||lr(!1),r=r.slice(0,Math.min(r.length,s+1))}return r.reduceRight((s,o,a)=>{let l=o.route.id?i==null?void 0:i[o.route.id]:null,c=t?o.route.errorElement||q.createElement(t6,null):null,h=e.concat(r.slice(0,a+1)),d=()=>q.createElement(r6,{match:o,routeContext:{outlet:s,matches:h}},l?c:o.route.element!==void 0?o.route.element:s);return t&&(o.route.errorElement||a===0)?q.createElement(n6,{location:t.location,component:c,error:l,children:d(),routeContext:{outlet:null,matches:h}}):d()},null)}var r2;(function(n){n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator"})(r2||(r2={}));var Tv;(function(n){n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator"})(Tv||(Tv={}));function s6(n){let e=q.useContext(qE);return e||lr(!1),e}function o6(n){let e=q.useContext(Uh);return e||lr(!1),e}function a6(n){let e=o6(),t=e.matches[e.matches.length-1];return t.route.id||lr(!1),t.route.id}function l6(){var n;let e=q.useContext(aO),t=s6(Tv.UseRouteError),r=a6(Tv.UseRouteError);return e||((n=t.errors)==null?void 0:n[r])}function rs(n){lr(!1)}function c6(n){let{basename:e="/",children:t=null,location:r,navigationType:i=Ra.Pop,navigator:s,static:o=!1}=n;Ip()&&lr(!1);let a=e.replace(/^\/*/,"/"),l=q.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof r=="string"&&(r=Lc(r));let{pathname:c="/",search:h="",hash:d="",state:p=null,key:m="default"}=r,y=q.useMemo(()=>{let g=rO(c,a);return g==null?null:{pathname:g,search:h,hash:d,state:p,key:m}},[a,c,h,d,p,m]);return y==null?null:q.createElement(Tp.Provider,{value:l},q.createElement(I0.Provider,{children:t,value:{location:y,navigationType:i}}))}function u6(n){let{children:e,location:t}=n,r=q.useContext(oO),i=r&&!e?r.router.routes:tA(e);return e6(i,t)}var i2;(function(n){n[n.pending=0]="pending",n[n.success=1]="success",n[n.error=2]="error"})(i2||(i2={}));new Promise(()=>{});function tA(n,e){e===void 0&&(e=[]);let t=[];return q.Children.forEach(n,(r,i)=>{if(!q.isValidElement(r))return;if(r.type===q.Fragment){t.push.apply(t,tA(r.props.children,e));return}r.type!==rs&&lr(!1),!r.props.index||!r.props.children||lr(!1);let s=[...e,i],o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,hasErrorBoundary:r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle};r.props.children&&(o.children=tA(r.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Iv(){return Iv=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Iv.apply(this,arguments)}function lO(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function h6(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function f6(n,e){return n.button===0&&(!e||e==="_self")&&!h6(n)}const d6=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],p6=["aria-current","caseSensitive","className","end","style","to","children"];function m6(n){let{basename:e,children:t,window:r}=n,i=q.useRef();i.current==null&&(i.current=m5({window:r,v5Compat:!0}));let s=i.current,[o,a]=q.useState({action:s.action,location:s.location});return q.useLayoutEffect(()=>s.listen(a),[s]),q.createElement(c6,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:s})}const g6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Li=q.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h}=e,d=lO(e,d6),p,m=!1;if(g6&&typeof c=="string"&&/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i.test(c)){p=c;let x=new URL(window.location.href),w=c.startsWith("//")?new URL(x.protocol+c):new URL(c);w.origin===x.origin?c=w.pathname+w.search+w.hash:m=!0}let y=Y5(c,{relative:i}),g=y6(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i});function _(x){r&&r(x),x.defaultPrevented||g(x)}return q.createElement("a",Iv({},d,{href:p||y,onClick:m||s?r:_,ref:t,target:l}))}),cO=q.forwardRef(function(e,t){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,children:c}=e,h=lO(e,p6),d=QE(l,{relative:h.relative}),p=zh(),m=q.useContext(qE),{navigator:y}=q.useContext(Tp),g=y.encodeLocation?y.encodeLocation(d).pathname:d.pathname,_=p.pathname,x=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;i||(_=_.toLowerCase(),x=x?x.toLowerCase():null,g=g.toLowerCase());let w=_===g||!o&&_.startsWith(g)&&_.charAt(g.length)==="/",S=x!=null&&(x===g||!o&&x.startsWith(g)&&x.charAt(g.length)==="/"),M=w?r:void 0,T;typeof s=="function"?T=s({isActive:w,isPending:S}):T=[s,w?"active":null,S?"pending":null].filter(Boolean).join(" ");let I=typeof a=="function"?a({isActive:w,isPending:S}):a;return q.createElement(Li,Iv({},h,{"aria-current":M,className:T,ref:t,style:I,to:l}),typeof c=="function"?c({isActive:w,isPending:S}):c)});var s2;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmitImpl="useSubmitImpl",n.UseFetcher="useFetcher"})(s2||(s2={}));var o2;(function(n){n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(o2||(o2={}));function y6(n,e){let{target:t,replace:r,state:i,preventScrollReset:s,relative:o}=e===void 0?{}:e,a=Z5(),l=zh(),c=QE(n,{relative:o});return q.useCallback(h=>{if(f6(h,t)){h.preventDefault();let d=r!==void 0?r:bv(l)===bv(c);a(n,{replace:d,state:i,preventScrollReset:s,relative:o})}},[l,a,c,r,i,t,n,s,o])}function Mn({to:n,children:e,className:t}){return E(Li,{className:t,to:n,children:E("div",{onClick:()=>{window.scrollTo(0,0)},children:e})})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var nA=function(){return nA=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},nA.apply(this,arguments)};function v6(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}var Xu="",gd=null,Gy=null,uO=null;function YE(){Xu="",gd!==null&&gd.disconnect(),Gy!==null&&(window.clearTimeout(Gy),Gy=null)}function a2(n){var e=["BUTTON","INPUT","SELECT","TEXTAREA"],t=["A","AREA"];return e.includes(n.tagName)&&!n.hasAttribute("disabled")||t.includes(n.tagName)&&n.hasAttribute("href")}function l2(){var n=null;if(Xu==="#")n=document.body;else{var e=Xu.replace("#","");n=document.getElementById(e),n===null&&Xu==="#top"&&(n=document.body)}if(n!==null){uO(n);var t=n.getAttribute("tabindex");return t===null&&!a2(n)&&n.setAttribute("tabindex",-1),n.focus({preventScroll:!0}),t===null&&!a2(n)&&(n.blur(),n.removeAttribute("tabindex")),YE(),!0}return!1}function _6(n){window.setTimeout(function(){l2()===!1&&(gd===null&&(gd=new MutationObserver(l2)),gd.observe(document,{attributes:!0,childList:!0,subtree:!0}),Gy=window.setTimeout(function(){YE()},n||1e4))},0)}function hO(n){return Td.forwardRef(function(e,t){var r="";typeof e.to=="string"&&e.to.includes("#")?r="#"+e.to.split("#").slice(1).join("#"):typeof e.to=="object"&&typeof e.to.hash=="string"&&(r=e.to.hash);var i={};n===cO&&(i.isActive=function(a,l){return a&&a.isExact&&l.hash===r});function s(a){YE(),Xu=e.elementId?"#"+e.elementId:r,e.onClick&&e.onClick(a),Xu!==""&&!a.defaultPrevented&&a.button===0&&(!e.target||e.target==="_self")&&!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)&&(uO=e.scroll||function(l){return e.smooth?l.scrollIntoView({behavior:"smooth"}):l.scrollIntoView()},_6(e.timeout))}var o=v6(e,["scroll","smooth","timeout","elementId"]);return Td.createElement(n,nA({},i,o,{onClick:s,ref:t}),e.children)})}var Eg=hO(Li);hO(cO);const x6=()=>E("footer",{className:"footer ",children:E("div",{className:"container",children:k("div",{className:"row d-flex align-items-start justify-content-between",children:[k("nav",{className:"footer__logo col d-flex align-items-center flex-column align-items-sm-start flex-sm-column align-items-md-start flex-md-column align-items-lg-start flex-lg-column",children:[E(Mn,{to:"/",children:E("img",{src:eO,alt:"logo",width:170})}),E(Mn,{to:"",children:" "}),E(Mn,{to:"",children:" "}),E(Mn,{to:"/cooperation",children:" "}),E("p",{children:"   "})]}),k("nav",{className:"col d-flex",children:[k("ul",{className:"d-none d-sm-none d-md-none d-lg-block",children:[E(Eg,{to:"#/about",className:"active",disabled:!0,children:E("li",{children:""})}),E(Eg,{to:"#/constructor",children:E("li",{children:""})}),E(Eg,{to:"/#newCollection",children:E("li",{children:" "})}),E(Eg,{to:"/#reviews",children:E("li",{children:""})})]}),k("ul",{children:[E(Mn,{to:"",className:"active",children:E("li",{children:""})}),E(Mn,{to:"",children:E("li",{children:""})}),E(Mn,{to:"",children:E("li",{children:""})}),E(Mn,{to:"",children:E("li",{children:""})}),E(Mn,{to:"",children:E("li",{children:""})})]}),k("ul",{className:"d-none d-sm-none d-md-none d-lg-block",children:[E(Mn,{to:"/about",className:"active",children:E("li",{style:{width:42},children:" "})}),E(Mn,{to:"",children:E("li",{children:""})}),E(Mn,{to:"",children:E("li",{children:""})}),E(Mn,{to:"",children:E("li",{children:""})})]}),k("ul",{children:[E(Mn,{to:"/contuct",className:"active",children:E("li",{children:""})}),E(Mn,{to:"",children:E("li",{children:"Email"})}),E(Mn,{to:"",children:E("li",{children:"Telegram"})}),E(Mn,{to:"",children:E("li",{children:"Whatsapp"})}),E(Mn,{to:"",children:E("li",{children:"Facebook"})})]})]}),E("nav",{className:"col",children:E("ul",{children:E(Mn,{to:"",children:E("li",{className:"text-center text-sm-center text-md-center text-lg-end",children:"9550 S Eastern Ave ste 253-A102 Las Vegas NV 89123"})})})})]})})}),fO="/money-can/assets/Cart 1-aea4eee6.svg",w6="/money-can/assets/toggleMenu-6a6da8d4.svg",S6="/money-can/assets/closeMenu-e0cb8782.svg",A6="/money-can/assets/whatsapp-7ed5b4a0.svg",M6="/money-can/assets/facebook-aef7990b.svg",E6="/money-can/assets/instagram-b00db969.svg",C6="/money-can/assets/messenger-968ab571.svg",b6="/money-can/assets/Vector-982b2291.svg",c2=[{id:"/catalog",title:""},{id:"/design",title:" "},{id:"/production",title:""},{id:"/fulfillment",title:""},{id:"/about",title:" "},{id:"/contact",title:""},{id:"/constructor",title:""}],T6=[{id:"1",icon:A6},{id:"2",icon:E6},{id:"3",icon:M6},{id:"4",icon:C6},{id:"5",icon:b6}],I6=()=>{const[n,e]=q.useState(""),[t,r]=q.useState(!1),i=zh();return q.useEffect(()=>{i.pathname==="/"?e(""):i.pathname==="/catalog"?e(""):i.pathname==="/constructor"?e(""):i.pathname==="/about"?e(" "):i.pathname==="/design"?e(" "):i.pathname==="/contact"?e(""):i.pathname==="/cart"?e(""):i.pathname==="/production"?e(""):i.pathname==="/cooperation"?e(" "):i.pathname==="/fulfillment"&&e("")},[i]),E("header",{className:"header",children:k("div",{className:"container d-flex align-items-center justify-content-between",children:[E("nav",{className:"header__brand__logo",children:E(Mn,{to:"/",onClick:()=>{e("")},children:E("img",{src:eO,width:"100",alt:""})})}),E("nav",{className:"d-flex align-items-center",children:E("ul",{className:"d-flex align-items-center  justify-content-between w-100 p-0 m-0",children:c2.map(s=>E("li",{children:E(Mn,{to:s.id,className:`${n===s.title?"links-lightBlue":""}`,onClick:()=>e(s.title),children:s.title})},s.id))})}),k("nav",{className:"header__cart",children:[E("img",{className:"toggle__menu",src:t?S6:w6,alt:"menu",onClick:()=>r(!t)}),E("div",{className:`${t?"toggleMenu":"hidden"}`,children:E("ul",{className:"d-flex align-items-center  justify-content-between w-100 p-0 m-0",children:c2.map(s=>E("li",{children:E(Mn,{to:s.id,className:`${n===s.title?"links-lightBlue":""}`,onClick:()=>{r(!t),e(s.title)},children:s.title})},s.id))})}),E(Mn,{to:"/cart",children:E("img",{src:fO,alt:"cart"})})]})]})})};var dO={},pO={},P0={},mO={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e={animating:!1,autoplaying:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,dragging:!1,edgeDragged:!1,initialized:!1,lazyLoadedList:[],listHeight:null,listWidth:null,scrolling:!1,slideCount:null,slideHeight:null,slideWidth:null,swipeLeft:null,swiped:!1,swiping:!1,touchObject:{startX:0,startY:0,curX:0,curY:0},trackStyle:{},trackWidth:0,targetSlide:0},t=e;n.default=t})(mO);var P6="Expected a function",u2=0/0,R6="[object Symbol]",L6=/^\s+|\s+$/g,D6=/^[-+]0x[0-9a-f]+$/i,B6=/^0b[01]+$/i,O6=/^0o[0-7]+$/i,k6=parseInt,N6=typeof Qf=="object"&&Qf&&Qf.Object===Object&&Qf,F6=typeof self=="object"&&self&&self.Object===Object&&self,U6=N6||F6||Function("return this")(),z6=Object.prototype,G6=z6.toString,H6=Math.max,V6=Math.min,T1=function(){return U6.Date.now()};function W6(n,e,t){var r,i,s,o,a,l,c=0,h=!1,d=!1,p=!0;if(typeof n!="function")throw new TypeError(P6);e=h2(e)||0,rA(t)&&(h=!!t.leading,d="maxWait"in t,s=d?H6(h2(t.maxWait)||0,e):s,p="trailing"in t?!!t.trailing:p);function m(I){var L=r,b=i;return r=i=void 0,c=I,o=n.apply(b,L),o}function y(I){return c=I,a=setTimeout(x,e),h?m(I):o}function g(I){var L=I-l,b=I-c,R=e-L;return d?V6(R,s-b):R}function _(I){var L=I-l,b=I-c;return l===void 0||L>=e||L<0||d&&b>=s}function x(){var I=T1();if(_(I))return w(I);a=setTimeout(x,g(I))}function w(I){return a=void 0,p&&r?m(I):(r=i=void 0,o)}function S(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function M(){return a===void 0?o:w(T1())}function T(){var I=T1(),L=_(I);if(r=arguments,i=this,l=I,L){if(a===void 0)return y(l);if(d)return a=setTimeout(x,e),m(l)}return a===void 0&&(a=setTimeout(x,e)),o}return T.cancel=S,T.flush=M,T}function rA(n){var e=typeof n;return!!n&&(e=="object"||e=="function")}function j6(n){return!!n&&typeof n=="object"}function $6(n){return typeof n=="symbol"||j6(n)&&G6.call(n)==R6}function h2(n){if(typeof n=="number")return n;if($6(n))return u2;if(rA(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=rA(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=n.replace(L6,"");var t=B6.test(n);return t||O6.test(n)?k6(n.slice(2),t?2:8):D6.test(n)?u2:+n}var J6=W6,mh={},K6={get exports(){return mh},set exports(n){mh=n}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var r=[],i=0;i<arguments.length;i++){var s=arguments[i];if(s){var o=typeof s;if(o==="string"||o==="number")r.push(s);else if(Array.isArray(s)){if(s.length){var a=t.apply(null,s);a&&r.push(a)}}else if(o==="object"){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){r.push(s.toString());continue}for(var l in s)e.call(s,l)&&s[l]&&r.push(l)}}}return r.join(" ")}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(K6);var Ve={};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.checkSpecKeys=Ve.checkNavigable=Ve.changeSlide=Ve.canUseDOM=Ve.canGoNext=void 0;Ve.clamp=gO;Ve.swipeStart=Ve.swipeMove=Ve.swipeEnd=Ve.slidesOnRight=Ve.slidesOnLeft=Ve.slideHandler=Ve.siblingDirection=Ve.safePreventDefault=Ve.lazyStartIndex=Ve.lazySlidesOnRight=Ve.lazySlidesOnLeft=Ve.lazyEndIndex=Ve.keyHandler=Ve.initializedState=Ve.getWidth=Ve.getTrackLeft=Ve.getTrackCSS=Ve.getTrackAnimateCSS=Ve.getTotalSlides=Ve.getSwipeDirection=Ve.getSlideCount=Ve.getRequiredLazySlides=Ve.getPreClones=Ve.getPostClones=Ve.getOnDemandLazySlides=Ve.getNavigableIndexes=Ve.getHeight=Ve.extractObject=void 0;var X6=q6(q);function q6(n){return n&&n.__esModule?n:{default:n}}function f2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function vn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?f2(Object(t),!0).forEach(function(r){Q6(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):f2(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Q6(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function gO(n,e,t){return Math.max(e,Math.min(n,t))}var rc=function(e){var t=["onTouchStart","onTouchMove","onWheel"];t.includes(e._reactName)||e.preventDefault()};Ve.safePreventDefault=rc;var ZE=function(e){for(var t=[],r=eC(e),i=tC(e),s=r;s<i;s++)e.lazyLoadedList.indexOf(s)<0&&t.push(s);return t};Ve.getOnDemandLazySlides=ZE;var Y6=function(e){for(var t=[],r=eC(e),i=tC(e),s=r;s<i;s++)t.push(s);return t};Ve.getRequiredLazySlides=Y6;var eC=function(e){return e.currentSlide-yO(e)};Ve.lazyStartIndex=eC;var tC=function(e){return e.currentSlide+vO(e)};Ve.lazyEndIndex=tC;var yO=function(e){return e.centerMode?Math.floor(e.slidesToShow/2)+(parseInt(e.centerPadding)>0?1:0):0};Ve.lazySlidesOnLeft=yO;var vO=function(e){return e.centerMode?Math.floor((e.slidesToShow-1)/2)+1+(parseInt(e.centerPadding)>0?1:0):e.slidesToShow};Ve.lazySlidesOnRight=vO;var Pv=function(e){return e&&e.offsetWidth||0};Ve.getWidth=Pv;var nC=function(e){return e&&e.offsetHeight||0};Ve.getHeight=nC;var rC=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r,i,s,o;return r=e.startX-e.curX,i=e.startY-e.curY,s=Math.atan2(i,r),o=Math.round(s*180/Math.PI),o<0&&(o=360-Math.abs(o)),o<=45&&o>=0||o<=360&&o>=315?"left":o>=135&&o<=225?"right":t===!0?o>=35&&o<=135?"up":"down":"vertical"};Ve.getSwipeDirection=rC;var iC=function(e){var t=!0;return e.infinite||(e.centerMode&&e.currentSlide>=e.slideCount-1||e.slideCount<=e.slidesToShow||e.currentSlide>=e.slideCount-e.slidesToShow)&&(t=!1),t};Ve.canGoNext=iC;var Z6=function(e,t){var r={};return t.forEach(function(i){return r[i]=e[i]}),r};Ve.extractObject=Z6;var e9=function(e){var t=X6.default.Children.count(e.children),r=e.listRef,i=Math.ceil(Pv(r)),s=e.trackRef&&e.trackRef.node,o=Math.ceil(Pv(s)),a;if(e.vertical)a=i;else{var l=e.centerMode&&parseInt(e.centerPadding)*2;typeof e.centerPadding=="string"&&e.centerPadding.slice(-1)==="%"&&(l*=i/100),a=Math.ceil((i-l)/e.slidesToShow)}var c=r&&nC(r.querySelector('[data-index="0"]')),h=c*e.slidesToShow,d=e.currentSlide===void 0?e.initialSlide:e.currentSlide;e.rtl&&e.currentSlide===void 0&&(d=t-1-e.initialSlide);var p=e.lazyLoadedList||[],m=ZE(vn(vn({},e),{},{currentSlide:d,lazyLoadedList:p}));p=p.concat(m);var y={slideCount:t,slideWidth:a,listWidth:i,trackWidth:o,currentSlide:d,slideHeight:c,listHeight:h,lazyLoadedList:p};return e.autoplaying===null&&e.autoplay&&(y.autoplaying="playing"),y};Ve.initializedState=e9;var t9=function(e){var t=e.waitForAnimate,r=e.animating,i=e.fade,s=e.infinite,o=e.index,a=e.slideCount,l=e.lazyLoad,c=e.currentSlide,h=e.centerMode,d=e.slidesToScroll,p=e.slidesToShow,m=e.useCSS,y=e.lazyLoadedList;if(t&&r)return{};var g=o,_,x,w,S={},M={},T=s?o:gO(o,0,a-1);if(i){if(!s&&(o<0||o>=a))return{};o<0?g=o+a:o>=a&&(g=o-a),l&&y.indexOf(g)<0&&(y=y.concat(g)),S={animating:!0,currentSlide:g,lazyLoadedList:y,targetSlide:g},M={animating:!1,targetSlide:g}}else _=g,g<0?(_=g+a,s?a%d!==0&&(_=a-a%d):_=0):!iC(e)&&g>c?g=_=c:h&&g>=a?(g=s?a:a-1,_=s?0:a-1):g>=a&&(_=g-a,s?a%d!==0&&(_=0):_=a-p),!s&&g+p>=a&&(_=a-p),x=Kd(vn(vn({},e),{},{slideIndex:g})),w=Kd(vn(vn({},e),{},{slideIndex:_})),s||(x===w&&(g=_),x=w),l&&(y=y.concat(ZE(vn(vn({},e),{},{currentSlide:g})))),m?(S={animating:!0,currentSlide:_,trackStyle:sC(vn(vn({},e),{},{left:x})),lazyLoadedList:y,targetSlide:T},M={animating:!1,currentSlide:_,trackStyle:Jd(vn(vn({},e),{},{left:w})),swipeLeft:null,targetSlide:T}):S={currentSlide:_,trackStyle:Jd(vn(vn({},e),{},{left:w})),lazyLoadedList:y,targetSlide:T};return{state:S,nextState:M}};Ve.slideHandler=t9;var n9=function(e,t){var r,i,s,o,a,l=e.slidesToScroll,c=e.slidesToShow,h=e.slideCount,d=e.currentSlide,p=e.targetSlide,m=e.lazyLoad,y=e.infinite;if(o=h%l!==0,r=o?0:(h-d)%l,t.message==="previous")s=r===0?l:c-r,a=d-s,m&&!y&&(i=d-s,a=i===-1?h-1:i),y||(a=p-l);else if(t.message==="next")s=r===0?l:r,a=d+s,m&&!y&&(a=(d+l)%h+r),y||(a=p+l);else if(t.message==="dots")a=t.index*t.slidesToScroll;else if(t.message==="children"){if(a=t.index,y){var g=SO(vn(vn({},e),{},{targetSlide:a}));a>t.currentSlide&&g==="left"?a=a-h:a<t.currentSlide&&g==="right"&&(a=a+h)}}else t.message==="index"&&(a=Number(t.index));return a};Ve.changeSlide=n9;var r9=function(e,t,r){return e.target.tagName.match("TEXTAREA|INPUT|SELECT")||!t?"":e.keyCode===37?r?"next":"previous":e.keyCode===39?r?"previous":"next":""};Ve.keyHandler=r9;var i9=function(e,t,r){return e.target.tagName==="IMG"&&rc(e),!t||!r&&e.type.indexOf("mouse")!==-1?"":{dragging:!0,touchObject:{startX:e.touches?e.touches[0].pageX:e.clientX,startY:e.touches?e.touches[0].pageY:e.clientY,curX:e.touches?e.touches[0].pageX:e.clientX,curY:e.touches?e.touches[0].pageY:e.clientY}}};Ve.swipeStart=i9;var s9=function(e,t){var r=t.scrolling,i=t.animating,s=t.vertical,o=t.swipeToSlide,a=t.verticalSwiping,l=t.rtl,c=t.currentSlide,h=t.edgeFriction,d=t.edgeDragged,p=t.onEdge,m=t.swiped,y=t.swiping,g=t.slideCount,_=t.slidesToScroll,x=t.infinite,w=t.touchObject,S=t.swipeEvent,M=t.listHeight,T=t.listWidth;if(!r){if(i)return rc(e);s&&o&&a&&rc(e);var I,L={},b=Kd(t);w.curX=e.touches?e.touches[0].pageX:e.clientX,w.curY=e.touches?e.touches[0].pageY:e.clientY,w.swipeLength=Math.round(Math.sqrt(Math.pow(w.curX-w.startX,2)));var R=Math.round(Math.sqrt(Math.pow(w.curY-w.startY,2)));if(!a&&!y&&R>10)return{scrolling:!0};a&&(w.swipeLength=R);var D=(l?-1:1)*(w.curX>w.startX?1:-1);a&&(D=w.curY>w.startY?1:-1);var G=Math.ceil(g/_),V=rC(t.touchObject,a),F=w.swipeLength;return x||(c===0&&(V==="right"||V==="down")||c+1>=G&&(V==="left"||V==="up")||!iC(t)&&(V==="left"||V==="up"))&&(F=w.swipeLength*h,d===!1&&p&&(p(V),L.edgeDragged=!0)),!m&&S&&(S(V),L.swiped=!0),s?I=b+F*(M/T)*D:l?I=b-F*D:I=b+F*D,a&&(I=b+F*D),L=vn(vn({},L),{},{touchObject:w,swipeLeft:I,trackStyle:Jd(vn(vn({},t),{},{left:I}))}),Math.abs(w.curX-w.startX)<Math.abs(w.curY-w.startY)*.8||w.swipeLength>10&&(L.swiping=!0,rc(e)),L}};Ve.swipeMove=s9;var o9=function(e,t){var r=t.dragging,i=t.swipe,s=t.touchObject,o=t.listWidth,a=t.touchThreshold,l=t.verticalSwiping,c=t.listHeight,h=t.swipeToSlide,d=t.scrolling,p=t.onSwipe,m=t.targetSlide,y=t.currentSlide,g=t.infinite;if(!r)return i&&rc(e),{};var _=l?c/a:o/a,x=rC(s,l),w={dragging:!1,edgeDragged:!1,scrolling:!1,swiping:!1,swiped:!1,swipeLeft:null,touchObject:{}};if(d||!s.swipeLength)return w;if(s.swipeLength>_){rc(e),p&&p(x);var S,M,T=g?y:m;switch(x){case"left":case"up":M=T+sA(t),S=h?iA(t,M):M,w.currentDirection=0;break;case"right":case"down":M=T-sA(t),S=h?iA(t,M):M,w.currentDirection=1;break;default:S=T}w.triggerSlideHandler=S}else{var I=Kd(t);w.trackStyle=sC(vn(vn({},t),{},{left:I}))}return w};Ve.swipeEnd=o9;var _O=function(e){for(var t=e.infinite?e.slideCount*2:e.slideCount,r=e.infinite?e.slidesToShow*-1:0,i=e.infinite?e.slidesToShow*-1:0,s=[];r<t;)s.push(r),r=i+e.slidesToScroll,i+=Math.min(e.slidesToScroll,e.slidesToShow);return s};Ve.getNavigableIndexes=_O;var iA=function(e,t){var r=_O(e),i=0;if(t>r[r.length-1])t=r[r.length-1];else for(var s in r){if(t<r[s]){t=i;break}i=r[s]}return t};Ve.checkNavigable=iA;var sA=function(e){var t=e.centerMode?e.slideWidth*Math.floor(e.slidesToShow/2):0;if(e.swipeToSlide){var r,i=e.listRef,s=i.querySelectorAll&&i.querySelectorAll(".slick-slide")||[];if(Array.from(s).every(function(l){if(e.vertical){if(l.offsetTop+nC(l)/2>e.swipeLeft*-1)return r=l,!1}else if(l.offsetLeft-t+Pv(l)/2>e.swipeLeft*-1)return r=l,!1;return!0}),!r)return 0;var o=e.rtl===!0?e.slideCount-e.currentSlide:e.currentSlide,a=Math.abs(r.dataset.index-o)||1;return a}else return e.slidesToScroll};Ve.getSlideCount=sA;var R0=function(e,t){return t.reduce(function(r,i){return r&&e.hasOwnProperty(i)},!0)?null:console.error("Keys Missing:",e)};Ve.checkSpecKeys=R0;var Jd=function(e){R0(e,["left","variableWidth","slideCount","slidesToShow","slideWidth"]);var t,r,i=e.slideCount+2*e.slidesToShow;e.vertical?r=i*e.slideHeight:t=wO(e)*e.slideWidth;var s={opacity:1,transition:"",WebkitTransition:""};if(e.useTransform){var o=e.vertical?"translate3d(0px, "+e.left+"px, 0px)":"translate3d("+e.left+"px, 0px, 0px)",a=e.vertical?"translate3d(0px, "+e.left+"px, 0px)":"translate3d("+e.left+"px, 0px, 0px)",l=e.vertical?"translateY("+e.left+"px)":"translateX("+e.left+"px)";s=vn(vn({},s),{},{WebkitTransform:o,transform:a,msTransform:l})}else e.vertical?s.top=e.left:s.left=e.left;return e.fade&&(s={opacity:1}),t&&(s.width=t),r&&(s.height=r),window&&!window.addEventListener&&window.attachEvent&&(e.vertical?s.marginTop=e.left+"px":s.marginLeft=e.left+"px"),s};Ve.getTrackCSS=Jd;var sC=function(e){R0(e,["left","variableWidth","slideCount","slidesToShow","slideWidth","speed","cssEase"]);var t=Jd(e);return e.useTransform?(t.WebkitTransition="-webkit-transform "+e.speed+"ms "+e.cssEase,t.transition="transform "+e.speed+"ms "+e.cssEase):e.vertical?t.transition="top "+e.speed+"ms "+e.cssEase:t.transition="left "+e.speed+"ms "+e.cssEase,t};Ve.getTrackAnimateCSS=sC;var Kd=function(e){if(e.unslick)return 0;R0(e,["slideIndex","trackRef","infinite","centerMode","slideCount","slidesToShow","slidesToScroll","slideWidth","listWidth","variableWidth","slideHeight"]);var t=e.slideIndex,r=e.trackRef,i=e.infinite,s=e.centerMode,o=e.slideCount,a=e.slidesToShow,l=e.slidesToScroll,c=e.slideWidth,h=e.listWidth,d=e.variableWidth,p=e.slideHeight,m=e.fade,y=e.vertical,g=0,_,x,w=0;if(m||e.slideCount===1)return 0;var S=0;if(i?(S=-yd(e),o%l!==0&&t+l>o&&(S=-(t>o?a-(t-o):o%l)),s&&(S+=parseInt(a/2))):(o%l!==0&&t+l>o&&(S=a-o%l),s&&(S=parseInt(a/2))),g=S*c,w=S*p,y?_=t*p*-1+w:_=t*c*-1+g,d===!0){var M,T=r&&r.node;if(M=t+yd(e),x=T&&T.childNodes[M],_=x?x.offsetLeft*-1:0,s===!0){M=i?t+yd(e):t,x=T&&T.children[M],_=0;for(var I=0;I<M;I++)_-=T&&T.children[I]&&T.children[I].offsetWidth;_-=parseInt(e.centerPadding),_+=x&&(h-x.offsetWidth)/2}}return _};Ve.getTrackLeft=Kd;var yd=function(e){return e.unslick||!e.infinite?0:e.variableWidth?e.slideCount:e.slidesToShow+(e.centerMode?1:0)};Ve.getPreClones=yd;var xO=function(e){return e.unslick||!e.infinite?0:e.slideCount};Ve.getPostClones=xO;var wO=function(e){return e.slideCount===1?1:yd(e)+e.slideCount+xO(e)};Ve.getTotalSlides=wO;var SO=function(e){return e.targetSlide>e.currentSlide?e.targetSlide>e.currentSlide+AO(e)?"left":"right":e.targetSlide<e.currentSlide-MO(e)?"right":"left"};Ve.siblingDirection=SO;var AO=function(e){var t=e.slidesToShow,r=e.centerMode,i=e.rtl,s=e.centerPadding;if(r){var o=(t-1)/2+1;return parseInt(s)>0&&(o+=1),i&&t%2===0&&(o+=1),o}return i?0:t-1};Ve.slidesOnRight=AO;var MO=function(e){var t=e.slidesToShow,r=e.centerMode,i=e.rtl,s=e.centerPadding;if(r){var o=(t-1)/2+1;return parseInt(s)>0&&(o+=1),!i&&t%2===0&&(o+=1),o}return i?t-1:0};Ve.slidesOnLeft=MO;var a9=function(){return!!(typeof window<"u"&&window.document&&window.document.createElement)};Ve.canUseDOM=a9;var L0={};function oA(n){return oA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oA(n)}Object.defineProperty(L0,"__esModule",{value:!0});L0.Track=void 0;var Ma=EO(q),I1=EO(mh),P1=Ve;function EO(n){return n&&n.__esModule?n:{default:n}}function aA(){return aA=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},aA.apply(this,arguments)}function l9(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function d2(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function c9(n,e,t){return e&&d2(n.prototype,e),t&&d2(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function u9(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&lA(n,e)}function lA(n,e){return lA=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},lA(n,e)}function h9(n){var e=d9();return function(){var r=Rv(n),i;if(e){var s=Rv(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return f9(this,i)}}function f9(n,e){if(e&&(oA(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cA(n)}function cA(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function d9(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Rv(n){return Rv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Rv(n)}function p2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function mi(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?p2(Object(t),!0).forEach(function(r){uA(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):p2(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function uA(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var R1=function(e){var t,r,i,s,o;e.rtl?o=e.slideCount-1-e.index:o=e.index,i=o<0||o>=e.slideCount,e.centerMode?(s=Math.floor(e.slidesToShow/2),r=(o-e.currentSlide)%e.slideCount===0,o>e.currentSlide-s-1&&o<=e.currentSlide+s&&(t=!0)):t=e.currentSlide<=o&&o<e.currentSlide+e.slidesToShow;var a;e.targetSlide<0?a=e.targetSlide+e.slideCount:e.targetSlide>=e.slideCount?a=e.targetSlide-e.slideCount:a=e.targetSlide;var l=o===a;return{"slick-slide":!0,"slick-active":t,"slick-center":r,"slick-cloned":i,"slick-current":l}},p9=function(e){var t={};return(e.variableWidth===void 0||e.variableWidth===!1)&&(t.width=e.slideWidth),e.fade&&(t.position="relative",e.vertical?t.top=-e.index*parseInt(e.slideHeight):t.left=-e.index*parseInt(e.slideWidth),t.opacity=e.currentSlide===e.index?1:0,e.useCSS&&(t.transition="opacity "+e.speed+"ms "+e.cssEase+", visibility "+e.speed+"ms "+e.cssEase)),t},L1=function(e,t){return e.key||t},m9=function(e){var t,r=[],i=[],s=[],o=Ma.default.Children.count(e.children),a=(0,P1.lazyStartIndex)(e),l=(0,P1.lazyEndIndex)(e);return Ma.default.Children.forEach(e.children,function(c,h){var d,p={message:"children",index:h,slidesToScroll:e.slidesToScroll,currentSlide:e.currentSlide};!e.lazyLoad||e.lazyLoad&&e.lazyLoadedList.indexOf(h)>=0?d=c:d=Ma.default.createElement("div",null);var m=p9(mi(mi({},e),{},{index:h})),y=d.props.className||"",g=R1(mi(mi({},e),{},{index:h}));if(r.push(Ma.default.cloneElement(d,{key:"original"+L1(d,h),"data-index":h,className:(0,I1.default)(g,y),tabIndex:"-1","aria-hidden":!g["slick-active"],style:mi(mi({outline:"none"},d.props.style||{}),m),onClick:function(w){d.props&&d.props.onClick&&d.props.onClick(w),e.focusOnSelect&&e.focusOnSelect(p)}})),e.infinite&&e.fade===!1){var _=o-h;_<=(0,P1.getPreClones)(e)&&o!==e.slidesToShow&&(t=-_,t>=a&&(d=c),g=R1(mi(mi({},e),{},{index:t})),i.push(Ma.default.cloneElement(d,{key:"precloned"+L1(d,t),"data-index":t,tabIndex:"-1",className:(0,I1.default)(g,y),"aria-hidden":!g["slick-active"],style:mi(mi({},d.props.style||{}),m),onClick:function(w){d.props&&d.props.onClick&&d.props.onClick(w),e.focusOnSelect&&e.focusOnSelect(p)}}))),o!==e.slidesToShow&&(t=o+h,t<l&&(d=c),g=R1(mi(mi({},e),{},{index:t})),s.push(Ma.default.cloneElement(d,{key:"postcloned"+L1(d,t),"data-index":t,tabIndex:"-1",className:(0,I1.default)(g,y),"aria-hidden":!g["slick-active"],style:mi(mi({},d.props.style||{}),m),onClick:function(w){d.props&&d.props.onClick&&d.props.onClick(w),e.focusOnSelect&&e.focusOnSelect(p)}})))}}),e.rtl?i.concat(r,s).reverse():i.concat(r,s)},g9=function(n){u9(t,n);var e=h9(t);function t(){var r;l9(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),uA(cA(r),"node",null),uA(cA(r),"handleRef",function(a){r.node=a}),r}return c9(t,[{key:"render",value:function(){var i=m9(this.props),s=this.props,o=s.onMouseEnter,a=s.onMouseOver,l=s.onMouseLeave,c={onMouseEnter:o,onMouseOver:a,onMouseLeave:l};return Ma.default.createElement("div",aA({ref:this.handleRef,className:"slick-track",style:this.props.trackStyle},c),i)}}]),t}(Ma.default.PureComponent);L0.Track=g9;var D0={};function hA(n){return hA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hA(n)}Object.defineProperty(D0,"__esModule",{value:!0});D0.Dots=void 0;var Cg=CO(q),y9=CO(mh),m2=Ve;function CO(n){return n&&n.__esModule?n:{default:n}}function g2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function v9(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?g2(Object(t),!0).forEach(function(r){_9(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):g2(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function _9(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function x9(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function y2(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function w9(n,e,t){return e&&y2(n.prototype,e),t&&y2(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function S9(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&fA(n,e)}function fA(n,e){return fA=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},fA(n,e)}function A9(n){var e=C9();return function(){var r=Lv(n),i;if(e){var s=Lv(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return M9(this,i)}}function M9(n,e){if(e&&(hA(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E9(n)}function E9(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function C9(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Lv(n){return Lv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Lv(n)}var b9=function(e){var t;return e.infinite?t=Math.ceil(e.slideCount/e.slidesToScroll):t=Math.ceil((e.slideCount-e.slidesToShow)/e.slidesToScroll)+1,t},T9=function(n){S9(t,n);var e=A9(t);function t(){return x9(this,t),e.apply(this,arguments)}return w9(t,[{key:"clickHandler",value:function(i,s){s.preventDefault(),this.props.clickHandler(i)}},{key:"render",value:function(){for(var i=this.props,s=i.onMouseEnter,o=i.onMouseOver,a=i.onMouseLeave,l=i.infinite,c=i.slidesToScroll,h=i.slidesToShow,d=i.slideCount,p=i.currentSlide,m=b9({slideCount:d,slidesToScroll:c,slidesToShow:h,infinite:l}),y={onMouseEnter:s,onMouseOver:o,onMouseLeave:a},g=[],_=0;_<m;_++){var x=(_+1)*c-1,w=l?x:(0,m2.clamp)(x,0,d-1),S=w-(c-1),M=l?S:(0,m2.clamp)(S,0,d-1),T=(0,y9.default)({"slick-active":l?p>=M&&p<=w:p===M}),I={message:"dots",index:_,slidesToScroll:c,currentSlide:p},L=this.clickHandler.bind(this,I);g=g.concat(Cg.default.createElement("li",{key:_,className:T},Cg.default.cloneElement(this.props.customPaging(_),{onClick:L})))}return Cg.default.cloneElement(this.props.appendDots(g),v9({className:this.props.dotsClass},y))}}]),t}(Cg.default.PureComponent);D0.Dots=T9;var gh={};function dA(n){return dA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dA(n)}Object.defineProperty(gh,"__esModule",{value:!0});gh.PrevArrow=gh.NextArrow=void 0;var qu=TO(q),bO=TO(mh),I9=Ve;function TO(n){return n&&n.__esModule?n:{default:n}}function Dv(){return Dv=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Dv.apply(this,arguments)}function v2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Bv(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?v2(Object(t),!0).forEach(function(r){P9(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):v2(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function P9(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function IO(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function _2(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function PO(n,e,t){return e&&_2(n.prototype,e),t&&_2(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function RO(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&pA(n,e)}function pA(n,e){return pA=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},pA(n,e)}function LO(n){var e=D9();return function(){var r=Ov(n),i;if(e){var s=Ov(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return R9(this,i)}}function R9(n,e){if(e&&(dA(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L9(n)}function L9(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function D9(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ov(n){return Ov=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ov(n)}var B9=function(n){RO(t,n);var e=LO(t);function t(){return IO(this,t),e.apply(this,arguments)}return PO(t,[{key:"clickHandler",value:function(i,s){s&&s.preventDefault(),this.props.clickHandler(i,s)}},{key:"render",value:function(){var i={"slick-arrow":!0,"slick-prev":!0},s=this.clickHandler.bind(this,{message:"previous"});!this.props.infinite&&(this.props.currentSlide===0||this.props.slideCount<=this.props.slidesToShow)&&(i["slick-disabled"]=!0,s=null);var o={key:"0","data-role":"none",className:(0,bO.default)(i),style:{display:"block"},onClick:s},a={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount},l;return this.props.prevArrow?l=qu.default.cloneElement(this.props.prevArrow,Bv(Bv({},o),a)):l=qu.default.createElement("button",Dv({key:"0",type:"button"},o)," ","Previous"),l}}]),t}(qu.default.PureComponent);gh.PrevArrow=B9;var O9=function(n){RO(t,n);var e=LO(t);function t(){return IO(this,t),e.apply(this,arguments)}return PO(t,[{key:"clickHandler",value:function(i,s){s&&s.preventDefault(),this.props.clickHandler(i,s)}},{key:"render",value:function(){var i={"slick-arrow":!0,"slick-next":!0},s=this.clickHandler.bind(this,{message:"next"});(0,I9.canGoNext)(this.props)||(i["slick-disabled"]=!0,s=null);var o={key:"1","data-role":"none",className:(0,bO.default)(i),style:{display:"block"},onClick:s},a={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount},l;return this.props.nextArrow?l=qu.default.cloneElement(this.props.nextArrow,Bv(Bv({},o),a)):l=qu.default.createElement("button",Dv({key:"1",type:"button"},o)," ","Next"),l}}]),t}(qu.default.PureComponent);gh.NextArrow=O9;var DO=function(){if(typeof Map<"u")return Map;function n(e,t){var r=-1;return e.some(function(i,s){return i[0]===t?(r=s,!0):!1}),r}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(t){var r=n(this.__entries__,t),i=this.__entries__[r];return i&&i[1]},e.prototype.set=function(t,r){var i=n(this.__entries__,t);~i?this.__entries__[i][1]=r:this.__entries__.push([t,r])},e.prototype.delete=function(t){var r=this.__entries__,i=n(r,t);~i&&r.splice(i,1)},e.prototype.has=function(t){return!!~n(this.__entries__,t)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,r){r===void 0&&(r=null);for(var i=0,s=this.__entries__;i<s.length;i++){var o=s[i];t.call(r,o[1],o[0])}},e}()}(),mA=typeof window<"u"&&typeof document<"u"&&window.document===document,kv=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),k9=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(kv):function(n){return setTimeout(function(){return n(Date.now())},1e3/60)}}(),N9=2;function F9(n,e){var t=!1,r=!1,i=0;function s(){t&&(t=!1,n()),r&&a()}function o(){k9(s)}function a(){var l=Date.now();if(t){if(l-i<N9)return;r=!0}else t=!0,r=!1,setTimeout(o,e);i=l}return a}var U9=20,z9=["top","right","bottom","left","width","height","size","weight"],G9=typeof MutationObserver<"u",H9=function(){function n(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=F9(this.refresh.bind(this),U9)}return n.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},n.prototype.removeObserver=function(e){var t=this.observers_,r=t.indexOf(e);~r&&t.splice(r,1),!t.length&&this.connected_&&this.disconnect_()},n.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},n.prototype.updateObservers_=function(){var e=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return e.forEach(function(t){return t.broadcastActive()}),e.length>0},n.prototype.connect_=function(){!mA||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),G9?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},n.prototype.disconnect_=function(){!mA||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},n.prototype.onTransitionEnd_=function(e){var t=e.propertyName,r=t===void 0?"":t,i=z9.some(function(s){return!!~r.indexOf(s)});i&&this.refresh()},n.getInstance=function(){return this.instance_||(this.instance_=new n),this.instance_},n.instance_=null,n}(),BO=function(n,e){for(var t=0,r=Object.keys(e);t<r.length;t++){var i=r[t];Object.defineProperty(n,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return n},yh=function(n){var e=n&&n.ownerDocument&&n.ownerDocument.defaultView;return e||kv},OO=B0(0,0,0,0);function Nv(n){return parseFloat(n)||0}function x2(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(r,i){var s=n["border-"+i+"-width"];return r+Nv(s)},0)}function V9(n){for(var e=["top","right","bottom","left"],t={},r=0,i=e;r<i.length;r++){var s=i[r],o=n["padding-"+s];t[s]=Nv(o)}return t}function W9(n){var e=n.getBBox();return B0(0,0,e.width,e.height)}function j9(n){var e=n.clientWidth,t=n.clientHeight;if(!e&&!t)return OO;var r=yh(n).getComputedStyle(n),i=V9(r),s=i.left+i.right,o=i.top+i.bottom,a=Nv(r.width),l=Nv(r.height);if(r.boxSizing==="border-box"&&(Math.round(a+s)!==e&&(a-=x2(r,"left","right")+s),Math.round(l+o)!==t&&(l-=x2(r,"top","bottom")+o)),!J9(n)){var c=Math.round(a+s)-e,h=Math.round(l+o)-t;Math.abs(c)!==1&&(a-=c),Math.abs(h)!==1&&(l-=h)}return B0(i.left,i.top,a,l)}var $9=function(){return typeof SVGGraphicsElement<"u"?function(n){return n instanceof yh(n).SVGGraphicsElement}:function(n){return n instanceof yh(n).SVGElement&&typeof n.getBBox=="function"}}();function J9(n){return n===yh(n).document.documentElement}function K9(n){return mA?$9(n)?W9(n):j9(n):OO}function X9(n){var e=n.x,t=n.y,r=n.width,i=n.height,s=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,o=Object.create(s.prototype);return BO(o,{x:e,y:t,width:r,height:i,top:t,right:e+r,bottom:i+t,left:e}),o}function B0(n,e,t,r){return{x:n,y:e,width:t,height:r}}var q9=function(){function n(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=B0(0,0,0,0),this.target=e}return n.prototype.isActive=function(){var e=K9(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},n.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},n}(),Q9=function(){function n(e,t){var r=X9(t);BO(this,{target:e,contentRect:r})}return n}(),Y9=function(){function n(e,t,r){if(this.activeObservations_=[],this.observations_=new DO,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}return n.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof yh(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new q9(e)),this.controller_.addObserver(this),this.controller_.refresh())}},n.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof yh(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},n.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},n.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},n.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(r){return new Q9(r.target,r.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},n.prototype.clearActive=function(){this.activeObservations_.splice(0)},n.prototype.hasActive=function(){return this.activeObservations_.length>0},n}(),kO=typeof WeakMap<"u"?new WeakMap:new DO,NO=function(){function n(e){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=H9.getInstance(),r=new Y9(e,t,this);kO.set(this,r)}return n}();["observe","unobserve","disconnect"].forEach(function(n){NO.prototype[n]=function(){var e;return(e=kO.get(this))[n].apply(e,arguments)}});var Z9=function(){return typeof kv.ResizeObserver<"u"?kv.ResizeObserver:NO}();const eV=Object.freeze(Object.defineProperty({__proto__:null,default:Z9},Symbol.toStringTag,{value:"Module"})),tV=G4(eV);Object.defineProperty(P0,"__esModule",{value:!0});P0.InnerSlider=void 0;var ni=Pp(q),nV=Pp(mO),rV=Pp(J6),iV=Pp(mh),An=Ve,sV=L0,oV=D0,w2=gh,aV=Pp(tV);function Pp(n){return n&&n.__esModule?n:{default:n}}function Fv(n){return Fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fv(n)}function Uv(){return Uv=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Uv.apply(this,arguments)}function lV(n,e){if(n==null)return{};var t=cV(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function cV(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function S2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ut(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?S2(Object(t),!0).forEach(function(r){Dt(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):S2(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function uV(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function A2(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function hV(n,e,t){return e&&A2(n.prototype,e),t&&A2(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function fV(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&gA(n,e)}function gA(n,e){return gA=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},gA(n,e)}function dV(n){var e=mV();return function(){var r=zv(n),i;if(e){var s=zv(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return pV(this,i)}}function pV(n,e){if(e&&(Fv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lt(n)}function Lt(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function mV(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function zv(n){return zv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},zv(n)}function Dt(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var gV=function(n){fV(t,n);var e=dV(t);function t(r){var i;uV(this,t),i=e.call(this,r),Dt(Lt(i),"listRefHandler",function(o){return i.list=o}),Dt(Lt(i),"trackRefHandler",function(o){return i.track=o}),Dt(Lt(i),"adaptHeight",function(){if(i.props.adaptiveHeight&&i.list){var o=i.list.querySelector('[data-index="'.concat(i.state.currentSlide,'"]'));i.list.style.height=(0,An.getHeight)(o)+"px"}}),Dt(Lt(i),"componentDidMount",function(){if(i.props.onInit&&i.props.onInit(),i.props.lazyLoad){var o=(0,An.getOnDemandLazySlides)(ut(ut({},i.props),i.state));o.length>0&&(i.setState(function(l){return{lazyLoadedList:l.lazyLoadedList.concat(o)}}),i.props.onLazyLoad&&i.props.onLazyLoad(o))}var a=ut({listRef:i.list,trackRef:i.track},i.props);i.updateState(a,!0,function(){i.adaptHeight(),i.props.autoplay&&i.autoPlay("update")}),i.props.lazyLoad==="progressive"&&(i.lazyLoadTimer=setInterval(i.progressiveLazyLoad,1e3)),i.ro=new aV.default(function(){i.state.animating?(i.onWindowResized(!1),i.callbackTimers.push(setTimeout(function(){return i.onWindowResized()},i.props.speed))):i.onWindowResized()}),i.ro.observe(i.list),document.querySelectorAll&&Array.prototype.forEach.call(document.querySelectorAll(".slick-slide"),function(l){l.onfocus=i.props.pauseOnFocus?i.onSlideFocus:null,l.onblur=i.props.pauseOnFocus?i.onSlideBlur:null}),window.addEventListener?window.addEventListener("resize",i.onWindowResized):window.attachEvent("onresize",i.onWindowResized)}),Dt(Lt(i),"componentWillUnmount",function(){i.animationEndCallback&&clearTimeout(i.animationEndCallback),i.lazyLoadTimer&&clearInterval(i.lazyLoadTimer),i.callbackTimers.length&&(i.callbackTimers.forEach(function(o){return clearTimeout(o)}),i.callbackTimers=[]),window.addEventListener?window.removeEventListener("resize",i.onWindowResized):window.detachEvent("onresize",i.onWindowResized),i.autoplayTimer&&clearInterval(i.autoplayTimer),i.ro.disconnect()}),Dt(Lt(i),"componentDidUpdate",function(o){if(i.checkImagesLoad(),i.props.onReInit&&i.props.onReInit(),i.props.lazyLoad){var a=(0,An.getOnDemandLazySlides)(ut(ut({},i.props),i.state));a.length>0&&(i.setState(function(h){return{lazyLoadedList:h.lazyLoadedList.concat(a)}}),i.props.onLazyLoad&&i.props.onLazyLoad(a))}i.adaptHeight();var l=ut(ut({listRef:i.list,trackRef:i.track},i.props),i.state),c=i.didPropsChange(o);c&&i.updateState(l,c,function(){i.state.currentSlide>=ni.default.Children.count(i.props.children)&&i.changeSlide({message:"index",index:ni.default.Children.count(i.props.children)-i.props.slidesToShow,currentSlide:i.state.currentSlide}),i.props.autoplay?i.autoPlay("update"):i.pause("paused")})}),Dt(Lt(i),"onWindowResized",function(o){i.debouncedResize&&i.debouncedResize.cancel(),i.debouncedResize=(0,rV.default)(function(){return i.resizeWindow(o)},50),i.debouncedResize()}),Dt(Lt(i),"resizeWindow",function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,a=Boolean(i.track&&i.track.node);if(a){var l=ut(ut({listRef:i.list,trackRef:i.track},i.props),i.state);i.updateState(l,o,function(){i.props.autoplay?i.autoPlay("update"):i.pause("paused")}),i.setState({animating:!1}),clearTimeout(i.animationEndCallback),delete i.animationEndCallback}}),Dt(Lt(i),"updateState",function(o,a,l){var c=(0,An.initializedState)(o);o=ut(ut(ut({},o),c),{},{slideIndex:c.currentSlide});var h=(0,An.getTrackLeft)(o);o=ut(ut({},o),{},{left:h});var d=(0,An.getTrackCSS)(o);(a||ni.default.Children.count(i.props.children)!==ni.default.Children.count(o.children))&&(c.trackStyle=d),i.setState(c,l)}),Dt(Lt(i),"ssrInit",function(){if(i.props.variableWidth){var o=0,a=0,l=[],c=(0,An.getPreClones)(ut(ut(ut({},i.props),i.state),{},{slideCount:i.props.children.length})),h=(0,An.getPostClones)(ut(ut(ut({},i.props),i.state),{},{slideCount:i.props.children.length}));i.props.children.forEach(function(L){l.push(L.props.style.width),o+=L.props.style.width});for(var d=0;d<c;d++)a+=l[l.length-1-d],o+=l[l.length-1-d];for(var p=0;p<h;p++)o+=l[p];for(var m=0;m<i.state.currentSlide;m++)a+=l[m];var y={width:o+"px",left:-a+"px"};if(i.props.centerMode){var g="".concat(l[i.state.currentSlide],"px");y.left="calc(".concat(y.left," + (100% - ").concat(g,") / 2 ) ")}return{trackStyle:y}}var _=ni.default.Children.count(i.props.children),x=ut(ut(ut({},i.props),i.state),{},{slideCount:_}),w=(0,An.getPreClones)(x)+(0,An.getPostClones)(x)+_,S=100/i.props.slidesToShow*w,M=100/w,T=-M*((0,An.getPreClones)(x)+i.state.currentSlide)*S/100;i.props.centerMode&&(T+=(100-M*S/100)/2);var I={width:S+"%",left:T+"%"};return{slideWidth:M+"%",trackStyle:I}}),Dt(Lt(i),"checkImagesLoad",function(){var o=i.list&&i.list.querySelectorAll&&i.list.querySelectorAll(".slick-slide img")||[],a=o.length,l=0;Array.prototype.forEach.call(o,function(c){var h=function(){return++l&&l>=a&&i.onWindowResized()};if(!c.onclick)c.onclick=function(){return c.parentNode.focus()};else{var d=c.onclick;c.onclick=function(){d(),c.parentNode.focus()}}c.onload||(i.props.lazyLoad?c.onload=function(){i.adaptHeight(),i.callbackTimers.push(setTimeout(i.onWindowResized,i.props.speed))}:(c.onload=h,c.onerror=function(){h(),i.props.onLazyLoadError&&i.props.onLazyLoadError()}))})}),Dt(Lt(i),"progressiveLazyLoad",function(){for(var o=[],a=ut(ut({},i.props),i.state),l=i.state.currentSlide;l<i.state.slideCount+(0,An.getPostClones)(a);l++)if(i.state.lazyLoadedList.indexOf(l)<0){o.push(l);break}for(var c=i.state.currentSlide-1;c>=-(0,An.getPreClones)(a);c--)if(i.state.lazyLoadedList.indexOf(c)<0){o.push(c);break}o.length>0?(i.setState(function(h){return{lazyLoadedList:h.lazyLoadedList.concat(o)}}),i.props.onLazyLoad&&i.props.onLazyLoad(o)):i.lazyLoadTimer&&(clearInterval(i.lazyLoadTimer),delete i.lazyLoadTimer)}),Dt(Lt(i),"slideHandler",function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,l=i.props,c=l.asNavFor,h=l.beforeChange,d=l.onLazyLoad,p=l.speed,m=l.afterChange,y=i.state.currentSlide,g=(0,An.slideHandler)(ut(ut(ut({index:o},i.props),i.state),{},{trackRef:i.track,useCSS:i.props.useCSS&&!a})),_=g.state,x=g.nextState;if(_){h&&h(y,_.currentSlide);var w=_.lazyLoadedList.filter(function(S){return i.state.lazyLoadedList.indexOf(S)<0});d&&w.length>0&&d(w),!i.props.waitForAnimate&&i.animationEndCallback&&(clearTimeout(i.animationEndCallback),m&&m(y),delete i.animationEndCallback),i.setState(_,function(){c&&i.asNavForIndex!==o&&(i.asNavForIndex=o,c.innerSlider.slideHandler(o)),x&&(i.animationEndCallback=setTimeout(function(){var S=x.animating,M=lV(x,["animating"]);i.setState(M,function(){i.callbackTimers.push(setTimeout(function(){return i.setState({animating:S})},10)),m&&m(_.currentSlide),delete i.animationEndCallback})},p))})}}),Dt(Lt(i),"changeSlide",function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,l=ut(ut({},i.props),i.state),c=(0,An.changeSlide)(l,o);if(!(c!==0&&!c)&&(a===!0?i.slideHandler(c,a):i.slideHandler(c),i.props.autoplay&&i.autoPlay("update"),i.props.focusOnSelect)){var h=i.list.querySelectorAll(".slick-current");h[0]&&h[0].focus()}}),Dt(Lt(i),"clickHandler",function(o){i.clickable===!1&&(o.stopPropagation(),o.preventDefault()),i.clickable=!0}),Dt(Lt(i),"keyHandler",function(o){var a=(0,An.keyHandler)(o,i.props.accessibility,i.props.rtl);a!==""&&i.changeSlide({message:a})}),Dt(Lt(i),"selectHandler",function(o){i.changeSlide(o)}),Dt(Lt(i),"disableBodyScroll",function(){var o=function(l){l=l||window.event,l.preventDefault&&l.preventDefault(),l.returnValue=!1};window.ontouchmove=o}),Dt(Lt(i),"enableBodyScroll",function(){window.ontouchmove=null}),Dt(Lt(i),"swipeStart",function(o){i.props.verticalSwiping&&i.disableBodyScroll();var a=(0,An.swipeStart)(o,i.props.swipe,i.props.draggable);a!==""&&i.setState(a)}),Dt(Lt(i),"swipeMove",function(o){var a=(0,An.swipeMove)(o,ut(ut(ut({},i.props),i.state),{},{trackRef:i.track,listRef:i.list,slideIndex:i.state.currentSlide}));a&&(a.swiping&&(i.clickable=!1),i.setState(a))}),Dt(Lt(i),"swipeEnd",function(o){var a=(0,An.swipeEnd)(o,ut(ut(ut({},i.props),i.state),{},{trackRef:i.track,listRef:i.list,slideIndex:i.state.currentSlide}));if(a){var l=a.triggerSlideHandler;delete a.triggerSlideHandler,i.setState(a),l!==void 0&&(i.slideHandler(l),i.props.verticalSwiping&&i.enableBodyScroll())}}),Dt(Lt(i),"touchEnd",function(o){i.swipeEnd(o),i.clickable=!0}),Dt(Lt(i),"slickPrev",function(){i.callbackTimers.push(setTimeout(function(){return i.changeSlide({message:"previous"})},0))}),Dt(Lt(i),"slickNext",function(){i.callbackTimers.push(setTimeout(function(){return i.changeSlide({message:"next"})},0))}),Dt(Lt(i),"slickGoTo",function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(o=Number(o),isNaN(o))return"";i.callbackTimers.push(setTimeout(function(){return i.changeSlide({message:"index",index:o,currentSlide:i.state.currentSlide},a)},0))}),Dt(Lt(i),"play",function(){var o;if(i.props.rtl)o=i.state.currentSlide-i.props.slidesToScroll;else if((0,An.canGoNext)(ut(ut({},i.props),i.state)))o=i.state.currentSlide+i.props.slidesToScroll;else return!1;i.slideHandler(o)}),Dt(Lt(i),"autoPlay",function(o){i.autoplayTimer&&clearInterval(i.autoplayTimer);var a=i.state.autoplaying;if(o==="update"){if(a==="hovered"||a==="focused"||a==="paused")return}else if(o==="leave"){if(a==="paused"||a==="focused")return}else if(o==="blur"&&(a==="paused"||a==="hovered"))return;i.autoplayTimer=setInterval(i.play,i.props.autoplaySpeed+50),i.setState({autoplaying:"playing"})}),Dt(Lt(i),"pause",function(o){i.autoplayTimer&&(clearInterval(i.autoplayTimer),i.autoplayTimer=null);var a=i.state.autoplaying;o==="paused"?i.setState({autoplaying:"paused"}):o==="focused"?(a==="hovered"||a==="playing")&&i.setState({autoplaying:"focused"}):a==="playing"&&i.setState({autoplaying:"hovered"})}),Dt(Lt(i),"onDotsOver",function(){return i.props.autoplay&&i.pause("hovered")}),Dt(Lt(i),"onDotsLeave",function(){return i.props.autoplay&&i.state.autoplaying==="hovered"&&i.autoPlay("leave")}),Dt(Lt(i),"onTrackOver",function(){return i.props.autoplay&&i.pause("hovered")}),Dt(Lt(i),"onTrackLeave",function(){return i.props.autoplay&&i.state.autoplaying==="hovered"&&i.autoPlay("leave")}),Dt(Lt(i),"onSlideFocus",function(){return i.props.autoplay&&i.pause("focused")}),Dt(Lt(i),"onSlideBlur",function(){return i.props.autoplay&&i.state.autoplaying==="focused"&&i.autoPlay("blur")}),Dt(Lt(i),"render",function(){var o=(0,iV.default)("slick-slider",i.props.className,{"slick-vertical":i.props.vertical,"slick-initialized":!0}),a=ut(ut({},i.props),i.state),l=(0,An.extractObject)(a,["fade","cssEase","speed","infinite","centerMode","focusOnSelect","currentSlide","lazyLoad","lazyLoadedList","rtl","slideWidth","slideHeight","listHeight","vertical","slidesToShow","slidesToScroll","slideCount","trackStyle","variableWidth","unslick","centerPadding","targetSlide","useCSS"]),c=i.props.pauseOnHover;l=ut(ut({},l),{},{onMouseEnter:c?i.onTrackOver:null,onMouseLeave:c?i.onTrackLeave:null,onMouseOver:c?i.onTrackOver:null,focusOnSelect:i.props.focusOnSelect&&i.clickable?i.selectHandler:null});var h;if(i.props.dots===!0&&i.state.slideCount>=i.props.slidesToShow){var d=(0,An.extractObject)(a,["dotsClass","slideCount","slidesToShow","currentSlide","slidesToScroll","clickHandler","children","customPaging","infinite","appendDots"]),p=i.props.pauseOnDotsHover;d=ut(ut({},d),{},{clickHandler:i.changeSlide,onMouseEnter:p?i.onDotsLeave:null,onMouseOver:p?i.onDotsOver:null,onMouseLeave:p?i.onDotsLeave:null}),h=ni.default.createElement(oV.Dots,d)}var m,y,g=(0,An.extractObject)(a,["infinite","centerMode","currentSlide","slideCount","slidesToShow","prevArrow","nextArrow"]);g.clickHandler=i.changeSlide,i.props.arrows&&(m=ni.default.createElement(w2.PrevArrow,g),y=ni.default.createElement(w2.NextArrow,g));var _=null;i.props.vertical&&(_={height:i.state.listHeight});var x=null;i.props.vertical===!1?i.props.centerMode===!0&&(x={padding:"0px "+i.props.centerPadding}):i.props.centerMode===!0&&(x={padding:i.props.centerPadding+" 0px"});var w=ut(ut({},_),x),S=i.props.touchMove,M={className:"slick-list",style:w,onClick:i.clickHandler,onMouseDown:S?i.swipeStart:null,onMouseMove:i.state.dragging&&S?i.swipeMove:null,onMouseUp:S?i.swipeEnd:null,onMouseLeave:i.state.dragging&&S?i.swipeEnd:null,onTouchStart:S?i.swipeStart:null,onTouchMove:i.state.dragging&&S?i.swipeMove:null,onTouchEnd:S?i.touchEnd:null,onTouchCancel:i.state.dragging&&S?i.swipeEnd:null,onKeyDown:i.props.accessibility?i.keyHandler:null},T={className:o,dir:"ltr",style:i.props.style};return i.props.unslick&&(M={className:"slick-list"},T={className:o}),ni.default.createElement("div",T,i.props.unslick?"":m,ni.default.createElement("div",Uv({ref:i.listRefHandler},M),ni.default.createElement(sV.Track,Uv({ref:i.trackRefHandler},l),i.props.children)),i.props.unslick?"":y,i.props.unslick?"":h)}),i.list=null,i.track=null,i.state=ut(ut({},nV.default),{},{currentSlide:i.props.initialSlide,slideCount:ni.default.Children.count(i.props.children)}),i.callbackTimers=[],i.clickable=!0,i.debouncedResize=null;var s=i.ssrInit();return i.state=ut(ut({},i.state),s),i}return hV(t,[{key:"didPropsChange",value:function(i){for(var s=!1,o=0,a=Object.keys(this.props);o<a.length;o++){var l=a[o];if(!i.hasOwnProperty(l)){s=!0;break}if(!(Fv(i[l])==="object"||typeof i[l]=="function")&&i[l]!==this.props[l]){s=!0;break}}return s||ni.default.Children.count(this.props.children)!==ni.default.Children.count(i.children)}}]),t}(ni.default.Component);P0.InnerSlider=gV;var yV=function(n){return n.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}).toLowerCase()},vV=yV,_V=vV,xV=function(n){var e=/[height|width]$/;return e.test(n)},M2=function(n){var e="",t=Object.keys(n);return t.forEach(function(r,i){var s=n[r];r=_V(r),xV(r)&&typeof s=="number"&&(s=s+"px"),s===!0?e+=r:s===!1?e+="not "+r:e+="("+r+": "+s+")",i<t.length-1&&(e+=" and ")}),e},wV=function(n){var e="";return typeof n=="string"?n:n instanceof Array?(n.forEach(function(t,r){e+=M2(t),r<n.length-1&&(e+=", ")}),e):M2(n)},SV=wV,FO={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=t(q);function t(s){return s&&s.__esModule?s:{default:s}}var r={accessibility:!0,adaptiveHeight:!1,afterChange:null,appendDots:function(o){return e.default.createElement("ul",{style:{display:"block"}},o)},arrows:!0,autoplay:!1,autoplaySpeed:3e3,beforeChange:null,centerMode:!1,centerPadding:"50px",className:"",cssEase:"ease",customPaging:function(o){return e.default.createElement("button",null,o+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:null,nextArrow:null,onEdge:null,onInit:null,onLazyLoadError:null,onReInit:null,pauseOnDotsHover:!1,pauseOnFocus:!1,pauseOnHover:!0,prevArrow:null,responsive:null,rows:1,rtl:!1,slide:"div",slidesPerRow:1,slidesToScroll:1,slidesToShow:1,speed:500,swipe:!0,swipeEvent:null,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0},i=r;n.default=i})(FO);var D1,E2;function AV(){if(E2)return D1;E2=1;function n(e){this.options=e,!e.deferSetup&&this.setup()}return n.prototype={constructor:n,setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(e){return this.options===e||this.options.match===e}},D1=n,D1}var B1,C2;function UO(){if(C2)return B1;C2=1;function n(r,i){var s=0,o=r.length,a;for(s;s<o&&(a=i(r[s],s),a!==!1);s++);}function e(r){return Object.prototype.toString.apply(r)==="[object Array]"}function t(r){return typeof r=="function"}return B1={isFunction:t,isArray:e,each:n},B1}var O1,b2;function MV(){if(b2)return O1;b2=1;var n=AV(),e=UO().each;function t(r,i){this.query=r,this.isUnconditional=i,this.handlers=[],this.mql=window.matchMedia(r);var s=this;this.listener=function(o){s.mql=o.currentTarget||o,s.assess()},this.mql.addListener(this.listener)}return t.prototype={constuctor:t,addHandler:function(r){var i=new n(r);this.handlers.push(i),this.matches()&&i.on()},removeHandler:function(r){var i=this.handlers;e(i,function(s,o){if(s.equals(r))return s.destroy(),!i.splice(o,1)})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){e(this.handlers,function(r){r.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var r=this.matches()?"on":"off";e(this.handlers,function(i){i[r]()})}},O1=t,O1}var k1,T2;function EV(){if(T2)return k1;T2=1;var n=MV(),e=UO(),t=e.each,r=e.isFunction,i=e.isArray;function s(){if(!window.matchMedia)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!window.matchMedia("only all").matches}return s.prototype={constructor:s,register:function(o,a,l){var c=this.queries,h=l&&this.browserIsIncapable;return c[o]||(c[o]=new n(o,h)),r(a)&&(a={match:a}),i(a)||(a=[a]),t(a,function(d){r(d)&&(d={match:d}),c[o].addHandler(d)}),this},unregister:function(o,a){var l=this.queries[o];return l&&(a?l.removeHandler(a):(l.clear(),delete this.queries[o])),this}},k1=s,k1}var N1,I2;function CV(){if(I2)return N1;I2=1;var n=EV();return N1=new n,N1}(function(n){function e(b){return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},e(b)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=a(q),r=P0,i=a(SV),s=a(FO),o=Ve;function a(b){return b&&b.__esModule?b:{default:b}}function l(){return l=Object.assign||function(b){for(var R=1;R<arguments.length;R++){var D=arguments[R];for(var G in D)Object.prototype.hasOwnProperty.call(D,G)&&(b[G]=D[G])}return b},l.apply(this,arguments)}function c(b,R){var D=Object.keys(b);if(Object.getOwnPropertySymbols){var G=Object.getOwnPropertySymbols(b);R&&(G=G.filter(function(V){return Object.getOwnPropertyDescriptor(b,V).enumerable})),D.push.apply(D,G)}return D}function h(b){for(var R=1;R<arguments.length;R++){var D=arguments[R]!=null?arguments[R]:{};R%2?c(Object(D),!0).forEach(function(G){T(b,G,D[G])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(D)):c(Object(D)).forEach(function(G){Object.defineProperty(b,G,Object.getOwnPropertyDescriptor(D,G))})}return b}function d(b,R){if(!(b instanceof R))throw new TypeError("Cannot call a class as a function")}function p(b,R){for(var D=0;D<R.length;D++){var G=R[D];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(b,G.key,G)}}function m(b,R,D){return R&&p(b.prototype,R),D&&p(b,D),Object.defineProperty(b,"prototype",{writable:!1}),b}function y(b,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(R&&R.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),Object.defineProperty(b,"prototype",{writable:!1}),R&&g(b,R)}function g(b,R){return g=Object.setPrototypeOf||function(G,V){return G.__proto__=V,G},g(b,R)}function _(b){var R=S();return function(){var G=M(b),V;if(R){var F=M(this).constructor;V=Reflect.construct(G,arguments,F)}else V=G.apply(this,arguments);return x(this,V)}}function x(b,R){if(R&&(e(R)==="object"||typeof R=="function"))return R;if(R!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w(b)}function w(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function S(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function M(b){return M=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)},M(b)}function T(b,R,D){return R in b?Object.defineProperty(b,R,{value:D,enumerable:!0,configurable:!0,writable:!0}):b[R]=D,b}var I=(0,o.canUseDOM)()&&CV(),L=function(b){y(D,b);var R=_(D);function D(G){var V;return d(this,D),V=R.call(this,G),T(w(V),"innerSliderRefHandler",function(F){return V.innerSlider=F}),T(w(V),"slickPrev",function(){return V.innerSlider.slickPrev()}),T(w(V),"slickNext",function(){return V.innerSlider.slickNext()}),T(w(V),"slickGoTo",function(F){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return V.innerSlider.slickGoTo(F,J)}),T(w(V),"slickPause",function(){return V.innerSlider.pause("paused")}),T(w(V),"slickPlay",function(){return V.innerSlider.autoPlay("play")}),V.state={breakpoint:null},V._responsiveMediaHandlers=[],V}return m(D,[{key:"media",value:function(V,F){I.register(V,F),this._responsiveMediaHandlers.push({query:V,handler:F})}},{key:"componentDidMount",value:function(){var V=this;if(this.props.responsive){var F=this.props.responsive.map(function(X){return X.breakpoint});F.sort(function(X,ne){return X-ne}),F.forEach(function(X,ne){var le;ne===0?le=(0,i.default)({minWidth:0,maxWidth:X}):le=(0,i.default)({minWidth:F[ne-1]+1,maxWidth:X}),(0,o.canUseDOM)()&&V.media(le,function(){V.setState({breakpoint:X})})});var J=(0,i.default)({minWidth:F.slice(-1)[0]});(0,o.canUseDOM)()&&this.media(J,function(){V.setState({breakpoint:null})})}}},{key:"componentWillUnmount",value:function(){this._responsiveMediaHandlers.forEach(function(V){I.unregister(V.query,V.handler)})}},{key:"render",value:function(){var V=this,F,J;this.state.breakpoint?(J=this.props.responsive.filter(function(ae){return ae.breakpoint===V.state.breakpoint}),F=J[0].settings==="unslick"?"unslick":h(h(h({},s.default),this.props),J[0].settings)):F=h(h({},s.default),this.props),F.centerMode&&(F.slidesToScroll>1,F.slidesToScroll=1),F.fade&&(F.slidesToShow>1,F.slidesToScroll>1,F.slidesToShow=1,F.slidesToScroll=1);var X=t.default.Children.toArray(this.props.children);X=X.filter(function(ae){return typeof ae=="string"?!!ae.trim():!!ae}),F.variableWidth&&(F.rows>1||F.slidesPerRow>1)&&(console.warn("variableWidth is not supported in case of rows > 1 or slidesPerRow > 1"),F.variableWidth=!1);for(var ne=[],le=null,U=0;U<X.length;U+=F.rows*F.slidesPerRow){for(var W=[],B=U;B<U+F.rows*F.slidesPerRow;B+=F.slidesPerRow){for(var ie=[],z=B;z<B+F.slidesPerRow&&(F.variableWidth&&X[z].props.style&&(le=X[z].props.style.width),!(z>=X.length));z+=1)ie.push(t.default.cloneElement(X[z],{key:100*U+10*B+z,tabIndex:-1,style:{width:"".concat(100/F.slidesPerRow,"%"),display:"inline-block"}}));W.push(t.default.createElement("div",{key:10*U+B},ie))}F.variableWidth?ne.push(t.default.createElement("div",{key:U,style:{width:le}},W)):ne.push(t.default.createElement("div",{key:U},W))}if(F==="unslick"){var te="regular slider "+(this.props.className||"");return t.default.createElement("div",{className:te},X)}else ne.length<=F.slidesToShow&&(F.unslick=!0);return t.default.createElement(r.InnerSlider,l({style:this.props.style,ref:this.innerSliderRefHandler},F),ne)}}]),D}(t.default.Component);n.default=L})(pO);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=t(pO);function t(i){return i&&i.__esModule?i:{default:i}}var r=e.default;n.default=r})(dO);const Rp=f0(dO),eu="/money-can/assets/3dSlider-25244144.png",bV=()=>E("div",{className:"about-block-bg",id:"about",children:k(Rp,{className:"slider",...{dots:!1,infinite:!0,autoplay:!0,speed:500,slidesToShow:1,slidesToScroll:1},children:[E("div",{children:E("img",{className:"w-30",src:eu,alt:""})}),E("div",{children:E("img",{className:"w-30",src:eu,alt:""})}),E("div",{children:E("img",{className:"w-30",src:eu,alt:""})}),E("div",{children:E("img",{className:"w-30",src:eu,alt:""})}),E("div",{children:E("img",{className:"w-30",src:eu,alt:""})}),E("div",{children:E("img",{className:"w-30",src:eu,alt:""})})]})}),an=({children:n,...e})=>E(Li,{...e,className:"button d-flex align-items-center justify-content-center",href:"",children:n}),TV=()=>E("section",{className:"constructor-block",id:"constructor",children:k("div",{className:" container d-flex align-items-center justify-content-around flex-column ",children:[k("p",{className:"py-5 w-100 w-sm-100 w-md-100 w-lg-50 text-center",children:["   ",E("strong",{children:"3D "}),",       ,   .   ,         ."]}),E(an,{className:"button--outline",children:"  "})]})}),IV="/money-can/assets/contact-us-Img-8b5c5a23.svg",Dc=()=>k("section",{className:"contuctUs",children:[k("div",{className:"container",children:[E("h2",{children:"  "}),k("form",{action:"",className:"d-flex align-items-center flex-column justify-content-center align-items-sm-center flex-sm-column justify-content-sm-center align-items-md-center flex-md-column justify-md-content-center align-items-lg-end flex-lg-row justify-content-lg-between",children:[k("div",{className:" d-flex flex-column ",children:[E("label",{htmlFor:"",children:""}),E("input",{type:"text",placeholder:" "})]}),k("div",{className:"d-flex flex-column  my-4 my-sm-4 my-md-0 my-lg-0",children:[E("label",{htmlFor:"",children:" "}),E("input",{type:"text",placeholder:"+ 996"})]}),E(an,{children:""})]}),k("p",{children:['   " ",  ,      ',E("a",{href:"",children:E("strong",{children:"   "})}),"",E("a",{href:"",children:E("strong",{children:"    "})})]})]}),E("img",{className:"contuctUsBgImg",src:IV,alt:""})]}),PV="/money-can/assets/pexels-photo-4620624-fe5a6626.jpeg",RV="/money-can/assets/pexels-photo-4622215-a0c81758.webp",LV="/money-can/assets/ 4-98731bac.png",DV="/money-can/assets/pexels-mirto-kon-4492631 (1)-ba89ea75.jpg",BV=()=>k("section",{className:"deportment-cards container",children:[E("div",{className:"grid department-card-disign",children:k("figure",{className:"effect-zoe",children:[E("img",{className:"w-100 h-100",src:PV,alt:""}),k("figcaption",{children:[E("h2",{children:" "}),E("p",{className:"icon-links",children:E(an,{to:"/design",children:"  "})}),E("p",{className:"description",children:"    ,    ,          ,    ,          ,    ,     "})]})]})}),E("div",{className:"grid department-card-production",children:k("figure",{className:"effect-zoe",children:[E("img",{className:"w-100 h-100",src:RV,alt:""}),k("figcaption",{children:[E("h2",{children:""}),E("p",{className:"icon-links",children:E(an,{to:"/production",children:"  "})}),E("p",{className:"description",children:"    ,    ,     "})]})]})}),E("div",{className:"grid department-card-fulfilment",children:k("figure",{className:"effect-zoe",children:[E("img",{className:"w-100 h-100",src:LV,alt:""}),k("figcaption",{children:[E("h2",{children:""}),E("p",{className:"icon-links",children:E(an,{to:"/fulfillment",children:"  "})}),E("p",{className:"description",children:"    ,    ,     "})]})]})}),E("div",{className:"grid department-card-catalog",children:k("figure",{className:"effect-zoe",children:[E("img",{className:"w-100 h-100",src:DV,alt:""}),k("figcaption",{children:[E("h2",{children:""}),E("p",{className:"icon-links",children:E(an,{to:"/catalog",children:"  "})}),E("p",{className:"description",children:"    ,    ,     "})]})]})})]}),OV="/money-can/assets/qualitySvg-56a75e54.svg",kV="/money-can/assets/speedSvg-6cac7f42.svg",NV="/money-can/assets/resposibility-2cf22a29.svg",FV=()=>E("section",{className:"important-to-us-bg",children:k("div",{className:"container d-flex flex-column justify-content-between align-items-center py-5",children:[E("h2",{children:"   "}),k("div",{className:"important-to-us-cards row d-flex justify-content-between flex-column flex-sm-column flex-md-column flex-lg-row pt-5",children:[k("div",{className:"col  d-flex justify-content-between flex-column align-items-center",children:[E("img",{src:OV,alt:""}),E("h4",{className:"important-to-us-text py-3",children:""}),E("p",{children:"          "})]}),k("div",{className:"col d-flex justify-content-between flex-column align-items-center",children:[E("img",{src:kV,alt:""}),E("h4",{className:"important-to-us-text py-3",children:""}),E("p",{children:"    Moneycan    300-      "})]}),k("div",{className:"col d-flex justify-content-between flex-column align-items-center",children:[E("img",{src:NV,alt:""}),E("h4",{className:"important-to-us-text py-3",children:""}),E("p",{children:"     .       -   MoneyCan"})]})]})]})}),F1="/money-can/assets/newCol2-53f8e0f0.svg",U1="/money-can/assets/newCol1-7447790f.svg",UV=()=>k("div",{id:"newCollection",className:"new-collection container",children:[E("h2",{children:" "}),k(Rp,{className:"slider",...{dots:!0,infinite:!0,speed:500,slidesToShow:2,slidesToScroll:2,initialSlide:0,responsive:[{breakpoint:1024,settings:{slidesToShow:2,slidesToScroll:1,infinite:!0,dots:!1}},{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:1,initialSlide:1}},{breakpoint:576,settings:{slidesToShow:1,slidesToScroll:1}}]},children:[E("div",{children:E("img",{src:F1,alt:""})}),E("div",{children:E("img",{src:U1,alt:""})}),E("div",{children:E("img",{src:F1,alt:""})}),E("div",{children:E("img",{src:U1,alt:""})}),E("div",{children:E("img",{src:F1,alt:""})}),E("div",{children:E("img",{src:U1,alt:""})})]}),E("div",{className:"newCollection-btn",children:E(an,{to:"/catalog",children:"  "})})]}),tu="/money-can/assets/revStars-26d6260d.svg",zV=()=>E("section",{className:"reviews",id:"reviews",children:k("div",{className:"container",children:[E("h2",{children:""}),E("div",{className:"reviews__block",children:k(Rp,{className:"",...{dots:!1,infinite:!0,autoplay:!1,speed:500,slidesToShow:3,slidesToScroll:3,responsive:[{breakpoint:1024,settings:{slidesToShow:2,slidesToScroll:1,infinite:!0,dots:!1}},{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]},children:[k("div",{className:"reviews__card",children:[E("h4",{children:"Very Good Design Services"}),E("p",{children:'"Used for many years. Never have any problem in my computer."'}),E("img",{src:tu,alt:""}),E("p",{children:"by Ugur D."})]}),k("div",{className:"reviews__card",children:[E("h4",{children:"Very Good Design Services"}),E("p",{children:'"Used for many years. Never have any problem in my computer."'}),E("img",{src:tu,alt:""}),E("p",{children:"by Ugur D."})]}),k("div",{className:"reviews__card",children:[E("h4",{children:"Very Good Design Services"}),E("p",{children:'"Used for many years. Never have any problem in my computer."'}),E("img",{src:tu,alt:""}),E("p",{children:"by Ugur D."})]}),k("div",{className:"reviews__card",children:[E("h4",{children:"Very Good Design Services"}),E("p",{children:'"Used for many years. Never have any problem in my computer."'}),E("img",{src:tu,alt:""}),E("p",{children:"by Ugur D."})]}),k("div",{className:"reviews__card",children:[E("h4",{children:"Very Good Design Services"}),E("p",{children:'"Used for many years. Never have any problem in my computer."'}),E("img",{src:tu,alt:""}),E("p",{children:"by Ugur D."})]}),k("div",{className:"reviews__card",children:[E("h4",{children:"Very Good Design Services"}),E("p",{children:'"Used for many years. Never have any problem in my computer."'}),E("img",{src:tu,alt:""}),E("p",{children:"by Ugur D."})]})]})})]})}),GV=()=>k("div",{children:[E(bV,{}),E(TV,{}),E(FV,{}),E(BV,{}),E(UV,{}),E(zV,{}),E(Dc,{})]}),HV="/money-can/assets/constrEllipse-495d77ea.svg",VV="/money-can/assets/plus-7e05cf21.svg",WV="/money-can/assets/minus-03823a8e.svg",zO="/money-can/assets/cart-plus 1-99902d61.svg",Ol="/money-can/assets/pexels-anubhaw-anand-3756030-7140e23f.jpg";/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const O0="150",kl={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Nl={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},GO=0,yA=1,HO=2,jV=3,VO=0,k0=1,vd=2,Jl=3,co=0,Ai=1,Ds=2,$V=2,Vo=0,ic=1,vA=2,_A=3,xA=4,WO=5,Hl=100,jO=101,$O=102,wA=103,SA=104,JO=200,KO=201,XO=202,qO=203,oC=204,aC=205,QO=206,YO=207,ZO=208,ek=209,tk=210,nk=0,rk=1,ik=2,Gv=3,sk=4,ok=5,ak=6,lk=7,Lp=0,ck=1,uk=2,Ns=0,hk=1,fk=2,dk=3,lC=4,pk=5,N0=300,el=301,tl=302,vh=303,Xd=304,Gh=306,uo=1e3,or=1001,_h=1002,Fn=1003,qd=1004,JV=1004,Qu=1005,KV=1005,Cn=1006,F0=1007,XV=1007,ho=1008,qV=1008,Ko=1009,mk=1010,gk=1011,cC=1012,yk=1013,La=1014,Uo=1015,xh=1016,vk=1017,_k=1018,sc=1020,xk=1021,vi=1023,wk=1024,Sk=1025,Ja=1026,vc=1027,Ak=1028,Mk=1029,Ek=1030,Ck=1031,bk=1033,Hy=33776,Vy=33777,Wy=33778,jy=33779,AA=35840,MA=35841,EA=35842,CA=35843,Tk=36196,bA=37492,TA=37496,IA=37808,PA=37809,RA=37810,LA=37811,DA=37812,BA=37813,OA=37814,kA=37815,NA=37816,FA=37817,UA=37818,zA=37819,GA=37820,HA=37821,$y=36492,Ik=36283,VA=36284,WA=36285,jA=36286,Pk=2200,Rk=2201,Lk=2202,wh=2300,_c=2301,Jy=2302,Kl=2400,Xl=2401,Qd=2402,U0=2500,uC=2501,QV=0,Dk=1,hC=2,Xo=3e3,bt=3001,Bk=3200,Ok=3201,na=0,kk=1,YV="",Is="srgb",Sh="srgb-linear",fC="display-p3",ZV=0,Ky=7680,e8=7681,t8=7682,n8=7683,r8=34055,i8=34056,s8=5386,o8=512,a8=513,l8=514,c8=515,u8=516,h8=517,f8=518,Nk=519,Yd=35044,d8=35048,p8=35040,m8=35045,g8=35049,y8=35041,v8=35046,_8=35050,x8=35042,w8="100",$A="300 es",Hv=1035;class go{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const zr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let P2=1234567;const oc=Math.PI/180,Zd=180/Math.PI;function Ui(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(zr[n&255]+zr[n>>8&255]+zr[n>>16&255]+zr[n>>24&255]+"-"+zr[e&255]+zr[e>>8&255]+"-"+zr[e>>16&15|64]+zr[e>>24&255]+"-"+zr[t&63|128]+zr[t>>8&255]+"-"+zr[t>>16&255]+zr[t>>24&255]+zr[r&255]+zr[r>>8&255]+zr[r>>16&255]+zr[r>>24&255]).toLowerCase()}function jn(n,e,t){return Math.max(e,Math.min(t,n))}function dC(n,e){return(n%e+e)%e}function S8(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function A8(n,e,t){return n!==e?(t-n)/(e-n):0}function _d(n,e,t){return(1-t)*n+t*e}function M8(n,e,t,r){return _d(n,e,1-Math.exp(-t*r))}function E8(n,e=1){return e-Math.abs(dC(n,e*2)-e)}function C8(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function b8(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function T8(n,e){return n+Math.floor(Math.random()*(e-n+1))}function I8(n,e){return n+Math.random()*(e-n)}function P8(n){return n*(.5-Math.random())}function R8(n){n!==void 0&&(P2=n);let e=P2+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function L8(n){return n*oc}function D8(n){return n*Zd}function JA(n){return(n&n-1)===0&&n!==0}function Fk(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Uk(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function B8(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+r)/2),h=o((e+r)/2),d=s((e-r)/2),p=o((e-r)/2),m=s((r-e)/2),y=o((r-e)/2);switch(i){case"XYX":n.set(a*h,l*d,l*p,a*c);break;case"YZY":n.set(l*p,a*h,l*d,a*c);break;case"ZXZ":n.set(l*d,l*p,a*h,a*c);break;case"XZX":n.set(a*h,l*y,l*m,a*c);break;case"YXY":n.set(l*m,a*h,l*y,a*c);break;case"ZYZ":n.set(l*y,l*m,a*h,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function zo(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function on(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Oi={DEG2RAD:oc,RAD2DEG:Zd,generateUUID:Ui,clamp:jn,euclideanModulo:dC,mapLinear:S8,inverseLerp:A8,lerp:_d,damp:M8,pingpong:E8,smoothstep:C8,smootherstep:b8,randInt:T8,randFloat:I8,randFloatSpread:P8,seededRandom:R8,degToRad:L8,radToDeg:D8,isPowerOfTwo:JA,ceilPowerOfTwo:Fk,floorPowerOfTwo:Uk,setQuaternionFromProperEuler:B8,normalize:on,denormalize:zo};class ve{constructor(e=0,t=0){ve.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class vr{constructor(){vr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,r,i,s,o,a,l,c){const h=this.elements;return h[0]=e,h[1]=i,h[2]=a,h[3]=t,h[4]=s,h[5]=l,h[6]=r,h[7]=o,h[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],h=r[4],d=r[7],p=r[2],m=r[5],y=r[8],g=i[0],_=i[3],x=i[6],w=i[1],S=i[4],M=i[7],T=i[2],I=i[5],L=i[8];return s[0]=o*g+a*w+l*T,s[3]=o*_+a*S+l*I,s[6]=o*x+a*M+l*L,s[1]=c*g+h*w+d*T,s[4]=c*_+h*S+d*I,s[7]=c*x+h*M+d*L,s[2]=p*g+m*w+y*T,s[5]=p*_+m*S+y*I,s[8]=p*x+m*M+y*L,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8];return t*o*h-t*a*c-r*s*h+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],d=h*o-a*c,p=a*l-h*s,m=c*s-o*l,y=t*d+r*p+i*m;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);const g=1/y;return e[0]=d*g,e[1]=(i*c-h*r)*g,e[2]=(a*r-i*o)*g,e[3]=p*g,e[4]=(h*t-i*l)*g,e[5]=(i*s-a*t)*g,e[6]=m*g,e[7]=(r*l-c*t)*g,e[8]=(o*t-r*s)*g,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(z1.makeScale(e,t)),this}rotate(e){return this.premultiply(z1.makeRotation(-e)),this}translate(e,t){return this.premultiply(z1.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const z1=new vr;function zk(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const O8={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Fu(n,e){return new O8[n](e)}function ep(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}class $n{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],c=r[i+1],h=r[i+2],d=r[i+3];const p=s[o+0],m=s[o+1],y=s[o+2],g=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=h,e[t+3]=d;return}if(a===1){e[t+0]=p,e[t+1]=m,e[t+2]=y,e[t+3]=g;return}if(d!==g||l!==p||c!==m||h!==y){let _=1-a;const x=l*p+c*m+h*y+d*g,w=x>=0?1:-1,S=1-x*x;if(S>Number.EPSILON){const T=Math.sqrt(S),I=Math.atan2(T,x*w);_=Math.sin(_*I)/T,a=Math.sin(a*I)/T}const M=a*w;if(l=l*_+p*M,c=c*_+m*M,h=h*_+y*M,d=d*_+g*M,_===1-a){const T=1/Math.sqrt(l*l+c*c+h*h+d*d);l*=T,c*=T,h*=T,d*=T}}e[t]=l,e[t+1]=c,e[t+2]=h,e[t+3]=d}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],h=r[i+3],d=s[o],p=s[o+1],m=s[o+2],y=s[o+3];return e[t]=a*y+h*d+l*m-c*p,e[t+1]=l*y+h*p+c*d-a*m,e[t+2]=c*y+h*m+a*p-l*d,e[t+3]=h*y-a*d-l*p-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),h=a(i/2),d=a(s/2),p=l(r/2),m=l(i/2),y=l(s/2);switch(o){case"XYZ":this._x=p*h*d+c*m*y,this._y=c*m*d-p*h*y,this._z=c*h*y+p*m*d,this._w=c*h*d-p*m*y;break;case"YXZ":this._x=p*h*d+c*m*y,this._y=c*m*d-p*h*y,this._z=c*h*y-p*m*d,this._w=c*h*d+p*m*y;break;case"ZXY":this._x=p*h*d-c*m*y,this._y=c*m*d+p*h*y,this._z=c*h*y+p*m*d,this._w=c*h*d-p*m*y;break;case"ZYX":this._x=p*h*d-c*m*y,this._y=c*m*d+p*h*y,this._z=c*h*y-p*m*d,this._w=c*h*d+p*m*y;break;case"YZX":this._x=p*h*d+c*m*y,this._y=c*m*d+p*h*y,this._z=c*h*y-p*m*d,this._w=c*h*d-p*m*y;break;case"XZY":this._x=p*h*d-c*m*y,this._y=c*m*d-p*h*y,this._z=c*h*y+p*m*d,this._w=c*h*d+p*m*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],h=t[6],d=t[10],p=r+a+d;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(h-l)*m,this._y=(s-c)*m,this._z=(o-i)*m}else if(r>a&&r>d){const m=2*Math.sqrt(1+r-a-d);this._w=(h-l)/m,this._x=.25*m,this._y=(i+o)/m,this._z=(s+c)/m}else if(a>d){const m=2*Math.sqrt(1+a-r-d);this._w=(s-c)/m,this._x=(i+o)/m,this._y=.25*m,this._z=(l+h)/m}else{const m=2*Math.sqrt(1+d-r-a);this._w=(o-i)/m,this._x=(s+c)/m,this._y=(l+h)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(jn(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,h=t._w;return this._x=r*h+o*a+i*c-s*l,this._y=i*h+o*l+s*a-r*c,this._z=s*h+o*c+r*l-i*a,this._w=o*h-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*r+t*this._x,this._y=m*i+t*this._y,this._z=m*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),h=Math.atan2(c,a),d=Math.sin((1-t)*h)/c,p=Math.sin(t*h)/c;return this._w=o*d+this._w*p,this._x=r*d+this._x*p,this._y=i*d+this._y*p,this._z=s*d+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(s),r*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class N{constructor(e=0,t=0,r=0){N.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(R2.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(R2.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*i-a*r,h=l*r+a*t-s*i,d=l*i+s*r-o*t,p=-s*t-o*r-a*i;return this.x=c*l+p*-s+h*-a-d*-o,this.y=h*l+p*-o+d*-s-c*-a,this.z=d*l+p*-a+c*-o-h*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return G1.copy(this).projectOnVector(e),this.sub(G1)}reflect(e){return this.sub(G1.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(jn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const G1=new N,R2=new $n;function Yu(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function H1(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const k8=new vr().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),N8=new vr().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),Da=new N;function F8(n){return n.convertSRGBToLinear(),Da.set(n.r,n.g,n.b).applyMatrix3(N8),n.setRGB(Da.x,Da.y,Da.z)}function U8(n){return Da.set(n.r,n.g,n.b).applyMatrix3(k8),n.setRGB(Da.x,Da.y,Da.z).convertLinearToSRGB()}const z8={[Sh]:n=>n,[Is]:n=>n.convertSRGBToLinear(),[fC]:F8},G8={[Sh]:n=>n,[Is]:n=>n.convertLinearToSRGB(),[fC]:U8},Hr={enabled:!1,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return Sh},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=z8[e],i=G8[t];if(r===void 0||i===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}};let nu;class pC{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{nu===void 0&&(nu=ep("canvas")),nu.width=e.width,nu.height=e.height;const r=nu.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=nu}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=ep("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Yu(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Yu(t[r]/255)*255):t[r]=Yu(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class ql{constructor(e=null){this.isSource=!0,this.uuid=Ui(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(V1(i[o].image)):s.push(V1(i[o]))}else s=V1(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function V1(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?pC.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let H8=0;class cn extends go{constructor(e=cn.DEFAULT_IMAGE,t=cn.DEFAULT_MAPPING,r=or,i=or,s=Cn,o=ho,a=vi,l=Ko,c=cn.DEFAULT_ANISOTROPY,h=Xo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:H8++}),this.uuid=Ui(),this.name="",this.source=new ql(e),this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new ve(0,0),this.repeat=new ve(1,1),this.center=new ve(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new vr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==N0)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case uo:e.x=e.x-Math.floor(e.x);break;case or:e.x=e.x<0?0:1;break;case _h:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case uo:e.y=e.y-Math.floor(e.y);break;case or:e.y=e.y<0?0:1;break;case _h:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}cn.DEFAULT_IMAGE=null;cn.DEFAULT_MAPPING=N0;cn.DEFAULT_ANISOTROPY=1;class Ht{constructor(e=0,t=0,r=0,i=1){Ht.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,c=l[0],h=l[4],d=l[8],p=l[1],m=l[5],y=l[9],g=l[2],_=l[6],x=l[10];if(Math.abs(h-p)<.01&&Math.abs(d-g)<.01&&Math.abs(y-_)<.01){if(Math.abs(h+p)<.1&&Math.abs(d+g)<.1&&Math.abs(y+_)<.1&&Math.abs(c+m+x-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const S=(c+1)/2,M=(m+1)/2,T=(x+1)/2,I=(h+p)/4,L=(d+g)/4,b=(y+_)/4;return S>M&&S>T?S<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(S),i=I/r,s=L/r):M>T?M<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(M),r=I/i,s=b/i):T<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(T),r=L/s,i=b/s),this.set(r,i,s,t),this}let w=Math.sqrt((_-y)*(_-y)+(d-g)*(d-g)+(p-h)*(p-h));return Math.abs(w)<.001&&(w=1),this.x=(_-y)/w,this.y=(d-g)/w,this.z=(p-h)/w,this.w=Math.acos((c+m+x-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Us extends go{constructor(e=1,t=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Ht(0,0,e,t),this.scissorTest=!1,this.viewport=new Ht(0,0,e,t);const i={width:e,height:t,depth:1};this.texture=new cn(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Cn,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new ql(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class z0 extends cn{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Fn,this.minFilter=Fn,this.wrapR=or,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class V8 extends Us{constructor(e=1,t=1,r=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new z0(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class mC extends cn{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Fn,this.minFilter=Fn,this.wrapR=or,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class W8 extends Us{constructor(e=1,t=1,r=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new mC(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class j8 extends Us{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class ul{constructor(e=new N(1/0,1/0,1/0),t=new N(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.length;l<c;l+=3){const h=e[l],d=e[l+1],p=e[l+2];h<t&&(t=h),d<r&&(r=d),p<i&&(i=p),h>s&&(s=h),d>o&&(o=d),p>a&&(a=p)}return this.min.set(t,r,i),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.count;l<c;l++){const h=e.getX(l),d=e.getY(l),p=e.getZ(l);h<t&&(t=h),d<r&&(r=d),p<i&&(i=p),h>s&&(s=h),d>o&&(o=d),p>a&&(a=p)}return this.min.set(t,r,i),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=El.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0)if(t&&r.attributes!=null&&r.attributes.position!==void 0){const s=r.attributes.position;for(let o=0,a=s.count;o<a;o++)El.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(El)}else r.boundingBox===null&&r.computeBoundingBox(),W1.copy(r.boundingBox),W1.applyMatrix4(e.matrixWorld),this.union(W1);const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,El),El.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Df),bg.subVectors(this.max,Df),ru.subVectors(e.a,Df),iu.subVectors(e.b,Df),su.subVectors(e.c,Df),ma.subVectors(iu,ru),ga.subVectors(su,iu),Cl.subVectors(ru,su);let t=[0,-ma.z,ma.y,0,-ga.z,ga.y,0,-Cl.z,Cl.y,ma.z,0,-ma.x,ga.z,0,-ga.x,Cl.z,0,-Cl.x,-ma.y,ma.x,0,-ga.y,ga.x,0,-Cl.y,Cl.x,0];return!j1(t,ru,iu,su,bg)||(t=[1,0,0,0,1,0,0,0,1],!j1(t,ru,iu,su,bg))?!1:(Tg.crossVectors(ma,ga),t=[Tg.x,Tg.y,Tg.z],j1(t,ru,iu,su,bg))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,El).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(El).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Co[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Co[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Co[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Co[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Co[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Co[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Co[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Co[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Co),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Co=[new N,new N,new N,new N,new N,new N,new N,new N],El=new N,W1=new ul,ru=new N,iu=new N,su=new N,ma=new N,ga=new N,Cl=new N,Df=new N,bg=new N,Tg=new N,bl=new N;function j1(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){bl.fromArray(n,s);const a=i.x*Math.abs(bl.x)+i.y*Math.abs(bl.y)+i.z*Math.abs(bl.z),l=e.dot(bl),c=t.dot(bl),h=r.dot(bl);if(Math.max(-Math.max(l,c,h),Math.min(l,c,h))>a)return!1}return!0}const $8=new ul,Bf=new N,$1=new N;class hl{constructor(e=new N,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):$8.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Bf.subVectors(e,this.center);const t=Bf.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(Bf,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):($1.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Bf.copy(e.center).add($1)),this.expandByPoint(Bf.copy(e.center).sub($1))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const bo=new N,J1=new N,Ig=new N,ya=new N,K1=new N,Pg=new N,X1=new N;class Dp{constructor(e=new N,t=new N(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,bo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=bo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(bo.copy(this.origin).addScaledVector(this.direction,t),bo.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){J1.copy(e).add(t).multiplyScalar(.5),Ig.copy(t).sub(e).normalize(),ya.copy(this.origin).sub(J1);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Ig),a=ya.dot(this.direction),l=-ya.dot(Ig),c=ya.lengthSq(),h=Math.abs(1-o*o);let d,p,m,y;if(h>0)if(d=o*l-a,p=o*a-l,y=s*h,d>=0)if(p>=-y)if(p<=y){const g=1/h;d*=g,p*=g,m=d*(d+o*p+2*a)+p*(o*d+p+2*l)+c}else p=s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+c;else p=-s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+c;else p<=-y?(d=Math.max(0,-(-o*s+a)),p=d>0?-s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+c):p<=y?(d=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+c):(d=Math.max(0,-(o*s+a)),p=d>0?s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+c);else p=o>0?-s:s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(J1).addScaledVector(Ig,p),m}intersectSphere(e,t){bo.subVectors(e.center,this.origin);const r=bo.dot(this.direction),i=bo.dot(bo)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const c=1/this.direction.x,h=1/this.direction.y,d=1/this.direction.z,p=this.origin;return c>=0?(r=(e.min.x-p.x)*c,i=(e.max.x-p.x)*c):(r=(e.max.x-p.x)*c,i=(e.min.x-p.x)*c),h>=0?(s=(e.min.y-p.y)*h,o=(e.max.y-p.y)*h):(s=(e.max.y-p.y)*h,o=(e.min.y-p.y)*h),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),d>=0?(a=(e.min.z-p.z)*d,l=(e.max.z-p.z)*d):(a=(e.max.z-p.z)*d,l=(e.min.z-p.z)*d),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,bo)!==null}intersectTriangle(e,t,r,i,s){K1.subVectors(t,e),Pg.subVectors(r,e),X1.crossVectors(K1,Pg);let o=this.direction.dot(X1),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;ya.subVectors(this.origin,e);const l=a*this.direction.dot(Pg.crossVectors(ya,Pg));if(l<0)return null;const c=a*this.direction.dot(K1.cross(ya));if(c<0||l+c>o)return null;const h=-a*ya.dot(X1);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Xe{constructor(){Xe.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,r,i,s,o,a,l,c,h,d,p,m,y,g,_){const x=this.elements;return x[0]=e,x[4]=t,x[8]=r,x[12]=i,x[1]=s,x[5]=o,x[9]=a,x[13]=l,x[2]=c,x[6]=h,x[10]=d,x[14]=p,x[3]=m,x[7]=y,x[11]=g,x[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Xe().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/ou.setFromMatrixColumn(e,0).length(),s=1/ou.setFromMatrixColumn(e,1).length(),o=1/ou.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),h=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const p=o*h,m=o*d,y=a*h,g=a*d;t[0]=l*h,t[4]=-l*d,t[8]=c,t[1]=m+y*c,t[5]=p-g*c,t[9]=-a*l,t[2]=g-p*c,t[6]=y+m*c,t[10]=o*l}else if(e.order==="YXZ"){const p=l*h,m=l*d,y=c*h,g=c*d;t[0]=p+g*a,t[4]=y*a-m,t[8]=o*c,t[1]=o*d,t[5]=o*h,t[9]=-a,t[2]=m*a-y,t[6]=g+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*h,m=l*d,y=c*h,g=c*d;t[0]=p-g*a,t[4]=-o*d,t[8]=y+m*a,t[1]=m+y*a,t[5]=o*h,t[9]=g-p*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*h,m=o*d,y=a*h,g=a*d;t[0]=l*h,t[4]=y*c-m,t[8]=p*c+g,t[1]=l*d,t[5]=g*c+p,t[9]=m*c-y,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*c,y=a*l,g=a*c;t[0]=l*h,t[4]=g-p*d,t[8]=y*d+m,t[1]=d,t[5]=o*h,t[9]=-a*h,t[2]=-c*h,t[6]=m*d+y,t[10]=p-g*d}else if(e.order==="XZY"){const p=o*l,m=o*c,y=a*l,g=a*c;t[0]=l*h,t[4]=-d,t[8]=c*h,t[1]=p*d+g,t[5]=o*h,t[9]=m*d-y,t[2]=y*d-m,t[6]=a*h,t[10]=g*d+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(J8,e,K8)}lookAt(e,t,r){const i=this.elements;return Pi.subVectors(e,t),Pi.lengthSq()===0&&(Pi.z=1),Pi.normalize(),va.crossVectors(r,Pi),va.lengthSq()===0&&(Math.abs(r.z)===1?Pi.x+=1e-4:Pi.z+=1e-4,Pi.normalize(),va.crossVectors(r,Pi)),va.normalize(),Rg.crossVectors(Pi,va),i[0]=va.x,i[4]=Rg.x,i[8]=Pi.x,i[1]=va.y,i[5]=Rg.y,i[9]=Pi.y,i[2]=va.z,i[6]=Rg.z,i[10]=Pi.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],h=r[1],d=r[5],p=r[9],m=r[13],y=r[2],g=r[6],_=r[10],x=r[14],w=r[3],S=r[7],M=r[11],T=r[15],I=i[0],L=i[4],b=i[8],R=i[12],D=i[1],G=i[5],V=i[9],F=i[13],J=i[2],X=i[6],ne=i[10],le=i[14],U=i[3],W=i[7],B=i[11],ie=i[15];return s[0]=o*I+a*D+l*J+c*U,s[4]=o*L+a*G+l*X+c*W,s[8]=o*b+a*V+l*ne+c*B,s[12]=o*R+a*F+l*le+c*ie,s[1]=h*I+d*D+p*J+m*U,s[5]=h*L+d*G+p*X+m*W,s[9]=h*b+d*V+p*ne+m*B,s[13]=h*R+d*F+p*le+m*ie,s[2]=y*I+g*D+_*J+x*U,s[6]=y*L+g*G+_*X+x*W,s[10]=y*b+g*V+_*ne+x*B,s[14]=y*R+g*F+_*le+x*ie,s[3]=w*I+S*D+M*J+T*U,s[7]=w*L+S*G+M*X+T*W,s[11]=w*b+S*V+M*ne+T*B,s[15]=w*R+S*F+M*le+T*ie,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],h=e[2],d=e[6],p=e[10],m=e[14],y=e[3],g=e[7],_=e[11],x=e[15];return y*(+s*l*d-i*c*d-s*a*p+r*c*p+i*a*m-r*l*m)+g*(+t*l*m-t*c*p+s*o*p-i*o*m+i*c*h-s*l*h)+_*(+t*c*d-t*a*m-s*o*d+r*o*m+s*a*h-r*c*h)+x*(-i*a*h-t*l*d+t*a*p+i*o*d-r*o*p+r*l*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],d=e[9],p=e[10],m=e[11],y=e[12],g=e[13],_=e[14],x=e[15],w=d*_*c-g*p*c+g*l*m-a*_*m-d*l*x+a*p*x,S=y*p*c-h*_*c-y*l*m+o*_*m+h*l*x-o*p*x,M=h*g*c-y*d*c+y*a*m-o*g*m-h*a*x+o*d*x,T=y*d*l-h*g*l-y*a*p+o*g*p+h*a*_-o*d*_,I=t*w+r*S+i*M+s*T;if(I===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const L=1/I;return e[0]=w*L,e[1]=(g*p*s-d*_*s-g*i*m+r*_*m+d*i*x-r*p*x)*L,e[2]=(a*_*s-g*l*s+g*i*c-r*_*c-a*i*x+r*l*x)*L,e[3]=(d*l*s-a*p*s-d*i*c+r*p*c+a*i*m-r*l*m)*L,e[4]=S*L,e[5]=(h*_*s-y*p*s+y*i*m-t*_*m-h*i*x+t*p*x)*L,e[6]=(y*l*s-o*_*s-y*i*c+t*_*c+o*i*x-t*l*x)*L,e[7]=(o*p*s-h*l*s+h*i*c-t*p*c-o*i*m+t*l*m)*L,e[8]=M*L,e[9]=(y*d*s-h*g*s-y*r*m+t*g*m+h*r*x-t*d*x)*L,e[10]=(o*g*s-y*a*s+y*r*c-t*g*c-o*r*x+t*a*x)*L,e[11]=(h*a*s-o*d*s-h*r*c+t*d*c+o*r*m-t*a*m)*L,e[12]=T*L,e[13]=(h*g*i-y*d*i+y*r*p-t*g*p-h*r*_+t*d*_)*L,e[14]=(y*a*i-o*g*i-y*r*l+t*g*l+o*r*_-t*a*_)*L,e[15]=(o*d*i-h*a*i+h*r*l-t*d*l-o*r*p+t*a*p)*L,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,h=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,h*a+r,h*l-i*o,0,c*l-i*a,h*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,h=o+o,d=a+a,p=s*c,m=s*h,y=s*d,g=o*h,_=o*d,x=a*d,w=l*c,S=l*h,M=l*d,T=r.x,I=r.y,L=r.z;return i[0]=(1-(g+x))*T,i[1]=(m+M)*T,i[2]=(y-S)*T,i[3]=0,i[4]=(m-M)*I,i[5]=(1-(p+x))*I,i[6]=(_+w)*I,i[7]=0,i[8]=(y+S)*L,i[9]=(_-w)*L,i[10]=(1-(p+g))*L,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=ou.set(i[0],i[1],i[2]).length();const o=ou.set(i[4],i[5],i[6]).length(),a=ou.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],As.copy(this);const c=1/s,h=1/o,d=1/a;return As.elements[0]*=c,As.elements[1]*=c,As.elements[2]*=c,As.elements[4]*=h,As.elements[5]*=h,As.elements[6]*=h,As.elements[8]*=d,As.elements[9]*=d,As.elements[10]*=d,t.setFromRotationMatrix(As),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o){const a=this.elements,l=2*s/(t-e),c=2*s/(r-i),h=(t+e)/(t-e),d=(r+i)/(r-i),p=-(o+s)/(o-s),m=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=h,a[12]=0,a[1]=0,a[5]=c,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=p,a[14]=m,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,r,i,s,o){const a=this.elements,l=1/(t-e),c=1/(r-i),h=1/(o-s),d=(t+e)*l,p=(r+i)*c,m=(o+s)*h;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-p,a[2]=0,a[6]=0,a[10]=-2*h,a[14]=-m,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const ou=new N,As=new Xe,J8=new N(0,0,0),K8=new N(1,1,1),va=new N,Rg=new N,Pi=new N,L2=new Xe,D2=new $n;class us{constructor(e=0,t=0,r=0,i=us.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],h=i[9],d=i[2],p=i[6],m=i[10];switch(t){case"XYZ":this._y=Math.asin(jn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,c),this._z=0);break;case"YXZ":this._x=Math.asin(-jn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(jn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,m),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-jn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(jn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-jn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return L2.makeRotationFromQuaternion(e),this.setFromRotationMatrix(L2,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return D2.setFromEuler(this),this.setFromQuaternion(D2,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}us.DEFAULT_ORDER="XYZ";class ac{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let X8=0;const B2=new N,au=new $n,To=new Xe,Lg=new N,Of=new N,q8=new N,Q8=new $n,O2=new N(1,0,0),k2=new N(0,1,0),N2=new N(0,0,1),Y8={type:"added"},F2={type:"removed"};class kt extends go{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:X8++}),this.uuid=Ui(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=kt.DEFAULT_UP.clone();const e=new N,t=new us,r=new $n,i=new N(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Xe},normalMatrix:{value:new vr}}),this.matrix=new Xe,this.matrixWorld=new Xe,this.matrixAutoUpdate=kt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=kt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new ac,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return au.setFromAxisAngle(e,t),this.quaternion.multiply(au),this}rotateOnWorldAxis(e,t){return au.setFromAxisAngle(e,t),this.quaternion.premultiply(au),this}rotateX(e){return this.rotateOnAxis(O2,e)}rotateY(e){return this.rotateOnAxis(k2,e)}rotateZ(e){return this.rotateOnAxis(N2,e)}translateOnAxis(e,t){return B2.copy(e).applyQuaternion(this.quaternion),this.position.add(B2.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(O2,e)}translateY(e){return this.translateOnAxis(k2,e)}translateZ(e){return this.translateOnAxis(N2,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(To.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?Lg.copy(e):Lg.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Of.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?To.lookAt(Of,Lg,this.up):To.lookAt(Lg,Of,this.up),this.quaternion.setFromRotationMatrix(To),i&&(To.extractRotation(i.matrixWorld),au.setFromRotationMatrix(To),this.quaternion.premultiply(au.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Y8)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(F2)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(F2)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),To.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),To.multiply(e.parent.matrixWorld)),e.applyMatrix4(To),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t){let r=[];this[e]===t&&r.push(this);for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectsByProperty(e,t);o.length>0&&(r=r.concat(o))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Of,e,q8),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Of,Q8,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const s=t[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,h=l.length;c<h;c++){const d=l[c];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),h=o(e.images),d=o(e.shapes),p=o(e.skeletons),m=o(e.animations),y=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),h.length>0&&(r.images=h),d.length>0&&(r.shapes=d),p.length>0&&(r.skeletons=p),m.length>0&&(r.animations=m),y.length>0&&(r.nodes=y)}return r.object=i,r;function o(a){const l=[];for(const c in a){const h=a[c];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}kt.DEFAULT_UP=new N(0,1,0);kt.DEFAULT_MATRIX_AUTO_UPDATE=!0;kt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ms=new N,Io=new N,q1=new N,Po=new N,lu=new N,cu=new N,U2=new N,Q1=new N,Y1=new N,Z1=new N;class as{constructor(e=new N,t=new N,r=new N){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Ms.subVectors(e,t),i.cross(Ms);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){Ms.subVectors(i,t),Io.subVectors(r,t),q1.subVectors(e,t);const o=Ms.dot(Ms),a=Ms.dot(Io),l=Ms.dot(q1),c=Io.dot(Io),h=Io.dot(q1),d=o*c-a*a;if(d===0)return s.set(-2,-1,-1);const p=1/d,m=(c*l-a*h)*p,y=(o*h-a*l)*p;return s.set(1-m-y,y,m)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Po),Po.x>=0&&Po.y>=0&&Po.x+Po.y<=1}static getUV(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,Po),l.set(0,0),l.addScaledVector(s,Po.x),l.addScaledVector(o,Po.y),l.addScaledVector(a,Po.z),l}static isFrontFacing(e,t,r,i){return Ms.subVectors(r,t),Io.subVectors(e,t),Ms.cross(Io).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ms.subVectors(this.c,this.b),Io.subVectors(this.a,this.b),Ms.cross(Io).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return as.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return as.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,s){return as.getUV(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return as.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return as.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;lu.subVectors(i,r),cu.subVectors(s,r),Q1.subVectors(e,r);const l=lu.dot(Q1),c=cu.dot(Q1);if(l<=0&&c<=0)return t.copy(r);Y1.subVectors(e,i);const h=lu.dot(Y1),d=cu.dot(Y1);if(h>=0&&d<=h)return t.copy(i);const p=l*d-h*c;if(p<=0&&l>=0&&h<=0)return o=l/(l-h),t.copy(r).addScaledVector(lu,o);Z1.subVectors(e,s);const m=lu.dot(Z1),y=cu.dot(Z1);if(y>=0&&m<=y)return t.copy(s);const g=m*c-l*y;if(g<=0&&c>=0&&y<=0)return a=c/(c-y),t.copy(r).addScaledVector(cu,a);const _=h*y-m*d;if(_<=0&&d-h>=0&&m-y>=0)return U2.subVectors(s,i),a=(d-h)/(d-h+(m-y)),t.copy(i).addScaledVector(U2,a);const x=1/(_+g+p);return o=g*x,a=p*x,t.copy(r).addScaledVector(lu,o).addScaledVector(cu,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Z8=0;class nr extends go{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Z8++}),this.uuid=Ui(),this.name="",this.type="Material",this.blending=ic,this.side=co,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=oC,this.blendDst=aC,this.blendEquation=Hl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Gv,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Nk,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ky,this.stencilZFail=Ky,this.stencilZPass=Ky,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==ic&&(r.blending=this.blending),this.side!==co&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const Gk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Es={h:0,s:0,l:0},Dg={h:0,s:0,l:0};function ew(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class De{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Is){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Hr.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=Hr.workingColorSpace){return this.r=e,this.g=t,this.b=r,Hr.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=Hr.workingColorSpace){if(e=dC(e,1),t=jn(t,0,1),r=jn(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=ew(o,s,e+1/3),this.g=ew(o,s,e),this.b=ew(o,s,e-1/3)}return Hr.toWorkingColorSpace(this,i),this}setStyle(e,t=Is){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,Hr.toWorkingColorSpace(this,t),r(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,Hr.toWorkingColorSpace(this,t),r(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const l=parseFloat(s[1])/360,c=parseFloat(s[2])/100,h=parseFloat(s[3])/100;return r(s[4]),this.setHSL(l,c,h,t)}break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,Hr.toWorkingColorSpace(this,t),this;if(o===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,Hr.toWorkingColorSpace(this,t),this;console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Is){const r=Gk[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Yu(e.r),this.g=Yu(e.g),this.b=Yu(e.b),this}copyLinearToSRGB(e){return this.r=H1(e.r),this.g=H1(e.g),this.b=H1(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Is){return Hr.fromWorkingColorSpace(Gr.copy(this),e),jn(Gr.r*255,0,255)<<16^jn(Gr.g*255,0,255)<<8^jn(Gr.b*255,0,255)<<0}getHexString(e=Is){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Hr.workingColorSpace){Hr.fromWorkingColorSpace(Gr.copy(this),t);const r=Gr.r,i=Gr.g,s=Gr.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,c;const h=(a+o)/2;if(a===o)l=0,c=0;else{const d=o-a;switch(c=h<=.5?d/(o+a):d/(2-o-a),o){case r:l=(i-s)/d+(i<s?6:0);break;case i:l=(s-r)/d+2;break;case s:l=(r-i)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=h,e}getRGB(e,t=Hr.workingColorSpace){return Hr.fromWorkingColorSpace(Gr.copy(this),t),e.r=Gr.r,e.g=Gr.g,e.b=Gr.b,e}getStyle(e=Is){Hr.fromWorkingColorSpace(Gr.copy(this),e);const t=Gr.r,r=Gr.g,i=Gr.b;return e!==Is?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${t*255|0},${r*255|0},${i*255|0})`}offsetHSL(e,t,r){return this.getHSL(Es),Es.h+=e,Es.s+=t,Es.l+=r,this.setHSL(Es.h,Es.s,Es.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Es),e.getHSL(Dg);const r=_d(Es.h,Dg.h,t),i=_d(Es.s,Dg.s,t),s=_d(Es.l,Dg.l,t);return this.setHSL(r,i,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Gr=new De;De.NAMES=Gk;class Ni extends nr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new De(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Lp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const qn=new N,Bg=new ve;class Xt{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=Yd,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)Bg.fromBufferAttribute(this,t),Bg.applyMatrix3(e),this.setXY(t,Bg.x,Bg.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)qn.fromBufferAttribute(this,t),qn.applyMatrix3(e),this.setXYZ(t,qn.x,qn.y,qn.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)qn.fromBufferAttribute(this,t),qn.applyMatrix4(e),this.setXYZ(t,qn.x,qn.y,qn.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)qn.fromBufferAttribute(this,t),qn.applyNormalMatrix(e),this.setXYZ(t,qn.x,qn.y,qn.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)qn.fromBufferAttribute(this,t),qn.transformDirection(e),this.setXYZ(t,qn.x,qn.y,qn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=zo(t,this.array)),t}setX(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=zo(t,this.array)),t}setY(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=zo(t,this.array)),t}setZ(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=zo(t,this.array)),t}setW(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=on(t,this.array),r=on(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=on(t,this.array),r=on(r,this.array),i=on(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=on(t,this.array),r=on(r,this.array),i=on(i,this.array),s=on(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Yd&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class eW extends Xt{constructor(e,t,r){super(new Int8Array(e),t,r)}}class tW extends Xt{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class nW extends Xt{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class rW extends Xt{constructor(e,t,r){super(new Int16Array(e),t,r)}}class G0 extends Xt{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class iW extends Xt{constructor(e,t,r){super(new Int32Array(e),t,r)}}class gC extends Xt{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class sW extends Xt{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}}class $e extends Xt{constructor(e,t,r){super(new Float32Array(e),t,r)}}class oW extends Xt{constructor(e,t,r){super(new Float64Array(e),t,r)}}let aW=0;const ns=new Xe,tw=new kt,uu=new N,Ri=new ul,kf=new ul,mr=new N;class dt extends go{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:aW++}),this.uuid=Ui(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(zk(e)?gC:G0)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new vr().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ns.makeRotationFromQuaternion(e),this.applyMatrix4(ns),this}rotateX(e){return ns.makeRotationX(e),this.applyMatrix4(ns),this}rotateY(e){return ns.makeRotationY(e),this.applyMatrix4(ns),this}rotateZ(e){return ns.makeRotationZ(e),this.applyMatrix4(ns),this}translate(e,t,r){return ns.makeTranslation(e,t,r),this.applyMatrix4(ns),this}scale(e,t,r){return ns.makeScale(e,t,r),this.applyMatrix4(ns),this}lookAt(e){return tw.lookAt(e),tw.updateMatrix(),this.applyMatrix4(tw.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(uu).negate(),this.translate(uu.x,uu.y,uu.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new $e(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ul);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new N(-1/0,-1/0,-1/0),new N(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];Ri.setFromBufferAttribute(s),this.morphTargetsRelative?(mr.addVectors(this.boundingBox.min,Ri.min),this.boundingBox.expandByPoint(mr),mr.addVectors(this.boundingBox.max,Ri.max),this.boundingBox.expandByPoint(mr)):(this.boundingBox.expandByPoint(Ri.min),this.boundingBox.expandByPoint(Ri.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new hl);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new N,1/0);return}if(e){const r=this.boundingSphere.center;if(Ri.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];kf.setFromBufferAttribute(a),this.morphTargetsRelative?(mr.addVectors(Ri.min,kf.min),Ri.expandByPoint(mr),mr.addVectors(Ri.max,kf.max),Ri.expandByPoint(mr)):(Ri.expandByPoint(kf.min),Ri.expandByPoint(kf.max))}Ri.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)mr.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(mr));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,h=a.count;c<h;c++)mr.fromBufferAttribute(a,c),l&&(uu.fromBufferAttribute(e,c),mr.add(uu)),i=Math.max(i,r.distanceToSquared(mr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Xt(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],h=[];for(let D=0;D<a;D++)c[D]=new N,h[D]=new N;const d=new N,p=new N,m=new N,y=new ve,g=new ve,_=new ve,x=new N,w=new N;function S(D,G,V){d.fromArray(i,D*3),p.fromArray(i,G*3),m.fromArray(i,V*3),y.fromArray(o,D*2),g.fromArray(o,G*2),_.fromArray(o,V*2),p.sub(d),m.sub(d),g.sub(y),_.sub(y);const F=1/(g.x*_.y-_.x*g.y);isFinite(F)&&(x.copy(p).multiplyScalar(_.y).addScaledVector(m,-g.y).multiplyScalar(F),w.copy(m).multiplyScalar(g.x).addScaledVector(p,-_.x).multiplyScalar(F),c[D].add(x),c[G].add(x),c[V].add(x),h[D].add(w),h[G].add(w),h[V].add(w))}let M=this.groups;M.length===0&&(M=[{start:0,count:r.length}]);for(let D=0,G=M.length;D<G;++D){const V=M[D],F=V.start,J=V.count;for(let X=F,ne=F+J;X<ne;X+=3)S(r[X+0],r[X+1],r[X+2])}const T=new N,I=new N,L=new N,b=new N;function R(D){L.fromArray(s,D*3),b.copy(L);const G=c[D];T.copy(G),T.sub(L.multiplyScalar(L.dot(G))).normalize(),I.crossVectors(b,G);const F=I.dot(h[D])<0?-1:1;l[D*4]=T.x,l[D*4+1]=T.y,l[D*4+2]=T.z,l[D*4+3]=F}for(let D=0,G=M.length;D<G;++D){const V=M[D],F=V.start,J=V.count;for(let X=F,ne=F+J;X<ne;X+=3)R(r[X+0]),R(r[X+1]),R(r[X+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Xt(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let p=0,m=r.count;p<m;p++)r.setXYZ(p,0,0,0);const i=new N,s=new N,o=new N,a=new N,l=new N,c=new N,h=new N,d=new N;if(e)for(let p=0,m=e.count;p<m;p+=3){const y=e.getX(p+0),g=e.getX(p+1),_=e.getX(p+2);i.fromBufferAttribute(t,y),s.fromBufferAttribute(t,g),o.fromBufferAttribute(t,_),h.subVectors(o,s),d.subVectors(i,s),h.cross(d),a.fromBufferAttribute(r,y),l.fromBufferAttribute(r,g),c.fromBufferAttribute(r,_),a.add(h),l.add(h),c.add(h),r.setXYZ(y,a.x,a.y,a.z),r.setXYZ(g,l.x,l.y,l.z),r.setXYZ(_,c.x,c.y,c.z)}else for(let p=0,m=t.count;p<m;p+=3)i.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),h.subVectors(o,s),d.subVectors(i,s),h.cross(d),r.setXYZ(p+0,h.x,h.y,h.z),r.setXYZ(p+1,h.x,h.y,h.z),r.setXYZ(p+2,h.x,h.y,h.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)mr.fromBufferAttribute(e,t),mr.normalize(),e.setXYZ(t,mr.x,mr.y,mr.z)}toNonIndexed(){function e(a,l){const c=a.array,h=a.itemSize,d=a.normalized,p=new c.constructor(l.length*h);let m=0,y=0;for(let g=0,_=l.length;g<_;g++){a.isInterleavedBufferAttribute?m=l[g]*a.data.stride+a.offset:m=l[g]*h;for(let x=0;x<h;x++)p[y++]=c[m++]}return new Xt(p,h,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new dt,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let h=0,d=c.length;h<d;h++){const p=c[h],m=e(p,r);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],h=[];for(let d=0,p=c.length;d<p;d++){const m=c[d];h.push(m.toJSON(e.data))}h.length>0&&(i[l]=h,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const c in i){const h=i[c];this.setAttribute(c,h.clone(t))}const s=e.morphAttributes;for(const c in s){const h=[],d=s[c];for(let p=0,m=d.length;p<m;p++)h.push(d[p].clone(t));this.morphAttributes[c]=h}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,h=o.length;c<h;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const z2=new Xe,eo=new Dp,Og=new hl,G2=new N,Nf=new N,Ff=new N,Uf=new N,nw=new N,kg=new N,Ng=new ve,Fg=new ve,Ug=new ve,rw=new N,zg=new N;class tr extends kt{constructor(e=new dt,t=new Ni){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){kg.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const h=a[l],d=s[l];h!==0&&(nw.fromBufferAttribute(d,e),o?kg.addScaledVector(nw,h):kg.addScaledVector(nw.sub(t),h))}t.add(kg)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;if(i===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),Og.copy(r.boundingSphere),Og.applyMatrix4(s),eo.copy(e.ray).recast(e.near),Og.containsPoint(eo.origin)===!1&&(eo.intersectSphere(Og,G2)===null||eo.origin.distanceToSquared(G2)>(e.far-e.near)**2))||(z2.copy(s).invert(),eo.copy(e.ray).applyMatrix4(z2),r.boundingBox!==null&&eo.intersectsBox(r.boundingBox)===!1))return;let o;const a=r.index,l=r.attributes.position,c=r.attributes.uv,h=r.attributes.uv2,d=r.groups,p=r.drawRange;if(a!==null)if(Array.isArray(i))for(let m=0,y=d.length;m<y;m++){const g=d[m],_=i[g.materialIndex],x=Math.max(g.start,p.start),w=Math.min(a.count,Math.min(g.start+g.count,p.start+p.count));for(let S=x,M=w;S<M;S+=3){const T=a.getX(S),I=a.getX(S+1),L=a.getX(S+2);o=Gg(this,_,e,eo,c,h,T,I,L),o&&(o.faceIndex=Math.floor(S/3),o.face.materialIndex=g.materialIndex,t.push(o))}}else{const m=Math.max(0,p.start),y=Math.min(a.count,p.start+p.count);for(let g=m,_=y;g<_;g+=3){const x=a.getX(g),w=a.getX(g+1),S=a.getX(g+2);o=Gg(this,i,e,eo,c,h,x,w,S),o&&(o.faceIndex=Math.floor(g/3),t.push(o))}}else if(l!==void 0)if(Array.isArray(i))for(let m=0,y=d.length;m<y;m++){const g=d[m],_=i[g.materialIndex],x=Math.max(g.start,p.start),w=Math.min(l.count,Math.min(g.start+g.count,p.start+p.count));for(let S=x,M=w;S<M;S+=3){const T=S,I=S+1,L=S+2;o=Gg(this,_,e,eo,c,h,T,I,L),o&&(o.faceIndex=Math.floor(S/3),o.face.materialIndex=g.materialIndex,t.push(o))}}else{const m=Math.max(0,p.start),y=Math.min(l.count,p.start+p.count);for(let g=m,_=y;g<_;g+=3){const x=g,w=g+1,S=g+2;o=Gg(this,i,e,eo,c,h,x,w,S),o&&(o.faceIndex=Math.floor(g/3),t.push(o))}}}}function lW(n,e,t,r,i,s,o,a){let l;if(e.side===Ai?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===co,a),l===null)return null;zg.copy(a),zg.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(zg);return c<t.near||c>t.far?null:{distance:c,point:zg.clone(),object:n}}function Gg(n,e,t,r,i,s,o,a,l){n.getVertexPosition(o,Nf),n.getVertexPosition(a,Ff),n.getVertexPosition(l,Uf);const c=lW(n,e,t,r,Nf,Ff,Uf,rw);if(c){i&&(Ng.fromBufferAttribute(i,o),Fg.fromBufferAttribute(i,a),Ug.fromBufferAttribute(i,l),c.uv=as.getUV(rw,Nf,Ff,Uf,Ng,Fg,Ug,new ve)),s&&(Ng.fromBufferAttribute(s,o),Fg.fromBufferAttribute(s,a),Ug.fromBufferAttribute(s,l),c.uv2=as.getUV(rw,Nf,Ff,Uf,Ng,Fg,Ug,new ve));const h={a:o,b:a,c:l,normal:new N,materialIndex:0};as.getNormal(Nf,Ff,Uf,h.normal),c.face=h}return c}class fl extends dt{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],h=[],d=[];let p=0,m=0;y("z","y","x",-1,-1,r,t,e,o,s,0),y("z","y","x",1,-1,r,t,-e,o,s,1),y("x","z","y",1,1,e,r,t,i,o,2),y("x","z","y",1,-1,e,r,-t,i,o,3),y("x","y","z",1,-1,e,t,r,i,s,4),y("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new $e(c,3)),this.setAttribute("normal",new $e(h,3)),this.setAttribute("uv",new $e(d,2));function y(g,_,x,w,S,M,T,I,L,b,R){const D=M/L,G=T/b,V=M/2,F=T/2,J=I/2,X=L+1,ne=b+1;let le=0,U=0;const W=new N;for(let B=0;B<ne;B++){const ie=B*G-F;for(let z=0;z<X;z++){const te=z*D-V;W[g]=te*w,W[_]=ie*S,W[x]=J,c.push(W.x,W.y,W.z),W[g]=0,W[_]=0,W[x]=I>0?1:-1,h.push(W.x,W.y,W.z),d.push(z/L),d.push(1-B/b),le+=1}}for(let B=0;B<b;B++)for(let ie=0;ie<L;ie++){const z=p+ie+X*B,te=p+ie+X*(B+1),ae=p+(ie+1)+X*(B+1),Q=p+(ie+1)+X*B;l.push(z,te,Q),l.push(te,ae,Q),U+=6}a.addGroup(m,U,R),m+=U,p+=le}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Ah(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function ii(n){const e={};for(let t=0;t<n.length;t++){const r=Ah(n[t]);for(const i in r)e[i]=r[i]}return e}function cW(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function Hk(n){return n.getRenderTarget()===null&&n.outputEncoding===bt?Is:Sh}const Vk={clone:Ah,merge:ii};var uW=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,hW=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class fo extends nr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=uW,this.fragmentShader=hW,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ah(e.uniforms),this.uniformsGroups=cW(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class Bp extends kt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Xe,this.projectionMatrix=new Xe,this.projectionMatrixInverse=new Xe}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class rn extends Bp{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Zd*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(oc*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Zd*2*Math.atan(Math.tan(oc*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(oc*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const hu=-90,fu=1;class yC extends kt{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r;const i=new rn(hu,fu,e,t);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(1,0,0),this.add(i);const s=new rn(hu,fu,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const o=new rn(hu,fu,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new rn(hu,fu,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const l=new rn(hu,fu,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,1),this.add(l);const c=new rn(hu,fu,e,t);c.layers=this.layers,c.up.set(0,1,0),c.lookAt(0,0,-1),this.add(c)}update(e,t){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[i,s,o,a,l,c]=this.children,h=e.getRenderTarget(),d=e.toneMapping,p=e.xr.enabled;e.toneMapping=Ns,e.xr.enabled=!1;const m=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,s),e.setRenderTarget(r,2),e.render(t,o),e.setRenderTarget(r,3),e.render(t,a),e.setRenderTarget(r,4),e.render(t,l),r.texture.generateMipmaps=m,e.setRenderTarget(r,5),e.render(t,c),e.setRenderTarget(h),e.toneMapping=d,e.xr.enabled=p,r.texture.needsPMREMUpdate=!0}}class Op extends cn{constructor(e,t,r,i,s,o,a,l,c,h){e=e!==void 0?e:[],t=t!==void 0?t:el,super(e,t,r,i,s,o,a,l,c,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class vC extends Us{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new Op(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Cn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new fl(5,5,5),s=new fo({name:"CubemapFromEquirect",uniforms:Ah(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Ai,blending:Vo});s.uniforms.tEquirect.value=t;const o=new tr(i,s),a=t.minFilter;return t.minFilter===ho&&(t.minFilter=Cn),new yC(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}const iw=new N,fW=new N,dW=new vr;class Ea{constructor(e=new N(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=iw.subVectors(r,t).cross(fW.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(iw),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||dW.getNormalMatrix(e),i=this.coplanarPoint(iw).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const du=new hl,Hg=new N;class H0{constructor(e=new Ea,t=new Ea,r=new Ea,i=new Ea,s=new Ea,o=new Ea){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,i=r[0],s=r[1],o=r[2],a=r[3],l=r[4],c=r[5],h=r[6],d=r[7],p=r[8],m=r[9],y=r[10],g=r[11],_=r[12],x=r[13],w=r[14],S=r[15];return t[0].setComponents(a-i,d-l,g-p,S-_).normalize(),t[1].setComponents(a+i,d+l,g+p,S+_).normalize(),t[2].setComponents(a+s,d+c,g+m,S+x).normalize(),t[3].setComponents(a-s,d-c,g-m,S-x).normalize(),t[4].setComponents(a-o,d-h,g-y,S-w).normalize(),t[5].setComponents(a+o,d+h,g+y,S+w).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),du.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(du)}intersectsSprite(e){return du.center.set(0,0,0),du.radius=.7071067811865476,du.applyMatrix4(e.matrixWorld),this.intersectsSphere(du)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(Hg.x=i.normal.x>0?e.max.x:e.min.x,Hg.y=i.normal.y>0?e.max.y:e.min.y,Hg.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Hg)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Wk(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function pW(n,e){const t=e.isWebGL2,r=new WeakMap;function i(c,h){const d=c.array,p=c.usage,m=n.createBuffer();n.bindBuffer(h,m),n.bufferData(h,d,p),c.onUploadCallback();let y;if(d instanceof Float32Array)y=5126;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)y=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else y=5123;else if(d instanceof Int16Array)y=5122;else if(d instanceof Uint32Array)y=5125;else if(d instanceof Int32Array)y=5124;else if(d instanceof Int8Array)y=5120;else if(d instanceof Uint8Array)y=5121;else if(d instanceof Uint8ClampedArray)y=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:m,type:y,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version}}function s(c,h,d){const p=h.array,m=h.updateRange;n.bindBuffer(d,c),m.count===-1?n.bufferSubData(d,0,p):(t?n.bufferSubData(d,m.offset*p.BYTES_PER_ELEMENT,p,m.offset,m.count):n.bufferSubData(d,m.offset*p.BYTES_PER_ELEMENT,p.subarray(m.offset,m.offset+m.count)),m.count=-1),h.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const h=r.get(c);h&&(n.deleteBuffer(h.buffer),r.delete(c))}function l(c,h){if(c.isGLBufferAttribute){const p=r.get(c);(!p||p.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const d=r.get(c);d===void 0?r.set(c,i(c,h)):d.version<c.version&&(s(d.buffer,c,h),d.version=c.version)}return{get:o,remove:a,update:l}}class Hh extends dt{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),c=a+1,h=l+1,d=e/a,p=t/l,m=[],y=[],g=[],_=[];for(let x=0;x<h;x++){const w=x*p-o;for(let S=0;S<c;S++){const M=S*d-s;y.push(M,-w,0),g.push(0,0,1),_.push(S/a),_.push(1-x/l)}}for(let x=0;x<l;x++)for(let w=0;w<a;w++){const S=w+c*x,M=w+c*(x+1),T=w+1+c*(x+1),I=w+1+c*x;m.push(S,M,I),m.push(M,T,I)}this.setIndex(m),this.setAttribute("position",new $e(y,3)),this.setAttribute("normal",new $e(g,3)),this.setAttribute("uv",new $e(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hh(e.width,e.height,e.widthSegments,e.heightSegments)}}var mW=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,gW=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,yW=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,vW=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,_W=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,xW=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,wW="vec3 transformed = vec3( position );",SW=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,AW=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,MW=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,EW=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,CW=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,bW=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,TW=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,IW=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,PW=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,RW=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,LW=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,DW=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,BW=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,OW=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,kW=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,NW=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,FW=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,UW=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,zW=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,GW="gl_FragColor = linearToOutputTexel( gl_FragColor );",HW=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,VW=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,WW=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,jW=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,$W=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,JW=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,KW=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,XW=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,qW=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,QW=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,YW=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,ZW=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,ej=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,tj=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,nj=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,rj=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,ij=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,sj=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,oj=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,aj=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lj=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,cj=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,uj=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,hj=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,fj=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,dj=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,pj=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,mj=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,gj=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,yj=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,vj=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,_j=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,xj=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,wj=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Sj=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Aj=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Mj=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Ej=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Cj=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,bj=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Tj=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,Ij=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Pj=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Rj=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Lj=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Dj=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,Bj=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,Oj=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,kj=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,Nj=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Fj=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Uj=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,zj=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Gj=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Hj=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Vj=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Wj=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,jj=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,$j=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Jj=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Kj=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Xj=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,qj=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Qj=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,Yj=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Zj=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,e7=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,t7=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,n7=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,r7=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,i7=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,s7=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		
		vec2 lodFudge = pow( 1.95, lod ) / fullSize;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec2 fullSize = vec2( textureSize( sampler, 0 ) );
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,o7=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,a7=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,l7=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,c7=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,u7=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,h7=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,f7=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const d7=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,p7=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,m7=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,g7=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,y7=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,v7=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,_7=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,x7=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,w7=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,S7=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,A7=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,M7=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,E7=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,C7=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,b7=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,T7=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,I7=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,P7=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,R7=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,L7=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,D7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,B7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,O7=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,k7=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,N7=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,F7=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,U7=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,z7=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,G7=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,H7=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,V7=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,W7=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,j7=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,$7=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Mt={alphamap_fragment:mW,alphamap_pars_fragment:gW,alphatest_fragment:yW,alphatest_pars_fragment:vW,aomap_fragment:_W,aomap_pars_fragment:xW,begin_vertex:wW,beginnormal_vertex:SW,bsdfs:AW,iridescence_fragment:MW,bumpmap_pars_fragment:EW,clipping_planes_fragment:CW,clipping_planes_pars_fragment:bW,clipping_planes_pars_vertex:TW,clipping_planes_vertex:IW,color_fragment:PW,color_pars_fragment:RW,color_pars_vertex:LW,color_vertex:DW,common:BW,cube_uv_reflection_fragment:OW,defaultnormal_vertex:kW,displacementmap_pars_vertex:NW,displacementmap_vertex:FW,emissivemap_fragment:UW,emissivemap_pars_fragment:zW,encodings_fragment:GW,encodings_pars_fragment:HW,envmap_fragment:VW,envmap_common_pars_fragment:WW,envmap_pars_fragment:jW,envmap_pars_vertex:$W,envmap_physical_pars_fragment:ij,envmap_vertex:JW,fog_vertex:KW,fog_pars_vertex:XW,fog_fragment:qW,fog_pars_fragment:QW,gradientmap_pars_fragment:YW,lightmap_fragment:ZW,lightmap_pars_fragment:ej,lights_lambert_fragment:tj,lights_lambert_pars_fragment:nj,lights_pars_begin:rj,lights_toon_fragment:sj,lights_toon_pars_fragment:oj,lights_phong_fragment:aj,lights_phong_pars_fragment:lj,lights_physical_fragment:cj,lights_physical_pars_fragment:uj,lights_fragment_begin:hj,lights_fragment_maps:fj,lights_fragment_end:dj,logdepthbuf_fragment:pj,logdepthbuf_pars_fragment:mj,logdepthbuf_pars_vertex:gj,logdepthbuf_vertex:yj,map_fragment:vj,map_pars_fragment:_j,map_particle_fragment:xj,map_particle_pars_fragment:wj,metalnessmap_fragment:Sj,metalnessmap_pars_fragment:Aj,morphcolor_vertex:Mj,morphnormal_vertex:Ej,morphtarget_pars_vertex:Cj,morphtarget_vertex:bj,normal_fragment_begin:Tj,normal_fragment_maps:Ij,normal_pars_fragment:Pj,normal_pars_vertex:Rj,normal_vertex:Lj,normalmap_pars_fragment:Dj,clearcoat_normal_fragment_begin:Bj,clearcoat_normal_fragment_maps:Oj,clearcoat_pars_fragment:kj,iridescence_pars_fragment:Nj,output_fragment:Fj,packing:Uj,premultiplied_alpha_fragment:zj,project_vertex:Gj,dithering_fragment:Hj,dithering_pars_fragment:Vj,roughnessmap_fragment:Wj,roughnessmap_pars_fragment:jj,shadowmap_pars_fragment:$j,shadowmap_pars_vertex:Jj,shadowmap_vertex:Kj,shadowmask_pars_fragment:Xj,skinbase_vertex:qj,skinning_pars_vertex:Qj,skinning_vertex:Yj,skinnormal_vertex:Zj,specularmap_fragment:e7,specularmap_pars_fragment:t7,tonemapping_fragment:n7,tonemapping_pars_fragment:r7,transmission_fragment:i7,transmission_pars_fragment:s7,uv_pars_fragment:o7,uv_pars_vertex:a7,uv_vertex:l7,uv2_pars_fragment:c7,uv2_pars_vertex:u7,uv2_vertex:h7,worldpos_vertex:f7,background_vert:d7,background_frag:p7,backgroundCube_vert:m7,backgroundCube_frag:g7,cube_vert:y7,cube_frag:v7,depth_vert:_7,depth_frag:x7,distanceRGBA_vert:w7,distanceRGBA_frag:S7,equirect_vert:A7,equirect_frag:M7,linedashed_vert:E7,linedashed_frag:C7,meshbasic_vert:b7,meshbasic_frag:T7,meshlambert_vert:I7,meshlambert_frag:P7,meshmatcap_vert:R7,meshmatcap_frag:L7,meshnormal_vert:D7,meshnormal_frag:B7,meshphong_vert:O7,meshphong_frag:k7,meshphysical_vert:N7,meshphysical_frag:F7,meshtoon_vert:U7,meshtoon_frag:z7,points_vert:G7,points_frag:H7,shadow_vert:V7,shadow_frag:W7,sprite_vert:j7,sprite_frag:$7},Ue={common:{diffuse:{value:new De(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new vr},uv2Transform:{value:new vr},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ve(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new De(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new De(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new vr}},sprite:{diffuse:{value:new De(16777215)},opacity:{value:1},center:{value:new ve(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new vr}}},Rs={basic:{uniforms:ii([Ue.common,Ue.specularmap,Ue.envmap,Ue.aomap,Ue.lightmap,Ue.fog]),vertexShader:Mt.meshbasic_vert,fragmentShader:Mt.meshbasic_frag},lambert:{uniforms:ii([Ue.common,Ue.specularmap,Ue.envmap,Ue.aomap,Ue.lightmap,Ue.emissivemap,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.fog,Ue.lights,{emissive:{value:new De(0)}}]),vertexShader:Mt.meshlambert_vert,fragmentShader:Mt.meshlambert_frag},phong:{uniforms:ii([Ue.common,Ue.specularmap,Ue.envmap,Ue.aomap,Ue.lightmap,Ue.emissivemap,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.fog,Ue.lights,{emissive:{value:new De(0)},specular:{value:new De(1118481)},shininess:{value:30}}]),vertexShader:Mt.meshphong_vert,fragmentShader:Mt.meshphong_frag},standard:{uniforms:ii([Ue.common,Ue.envmap,Ue.aomap,Ue.lightmap,Ue.emissivemap,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.roughnessmap,Ue.metalnessmap,Ue.fog,Ue.lights,{emissive:{value:new De(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Mt.meshphysical_vert,fragmentShader:Mt.meshphysical_frag},toon:{uniforms:ii([Ue.common,Ue.aomap,Ue.lightmap,Ue.emissivemap,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.gradientmap,Ue.fog,Ue.lights,{emissive:{value:new De(0)}}]),vertexShader:Mt.meshtoon_vert,fragmentShader:Mt.meshtoon_frag},matcap:{uniforms:ii([Ue.common,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.fog,{matcap:{value:null}}]),vertexShader:Mt.meshmatcap_vert,fragmentShader:Mt.meshmatcap_frag},points:{uniforms:ii([Ue.points,Ue.fog]),vertexShader:Mt.points_vert,fragmentShader:Mt.points_frag},dashed:{uniforms:ii([Ue.common,Ue.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Mt.linedashed_vert,fragmentShader:Mt.linedashed_frag},depth:{uniforms:ii([Ue.common,Ue.displacementmap]),vertexShader:Mt.depth_vert,fragmentShader:Mt.depth_frag},normal:{uniforms:ii([Ue.common,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,{opacity:{value:1}}]),vertexShader:Mt.meshnormal_vert,fragmentShader:Mt.meshnormal_frag},sprite:{uniforms:ii([Ue.sprite,Ue.fog]),vertexShader:Mt.sprite_vert,fragmentShader:Mt.sprite_frag},background:{uniforms:{uvTransform:{value:new vr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Mt.background_vert,fragmentShader:Mt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Mt.backgroundCube_vert,fragmentShader:Mt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Mt.cube_vert,fragmentShader:Mt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Mt.equirect_vert,fragmentShader:Mt.equirect_frag},distanceRGBA:{uniforms:ii([Ue.common,Ue.displacementmap,{referencePosition:{value:new N},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Mt.distanceRGBA_vert,fragmentShader:Mt.distanceRGBA_frag},shadow:{uniforms:ii([Ue.lights,Ue.fog,{color:{value:new De(0)},opacity:{value:1}}]),vertexShader:Mt.shadow_vert,fragmentShader:Mt.shadow_frag}};Rs.physical={uniforms:ii([Rs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ve(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new De(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new ve},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new De(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new De(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Mt.meshphysical_vert,fragmentShader:Mt.meshphysical_frag};const Vg={r:0,b:0,g:0};function J7(n,e,t,r,i,s,o){const a=new De(0);let l=s===!0?0:1,c,h,d=null,p=0,m=null;function y(_,x){let w=!1,S=x.isScene===!0?x.background:null;S&&S.isTexture&&(S=(x.backgroundBlurriness>0?t:e).get(S));const M=n.xr,T=M.getSession&&M.getSession();T&&T.environmentBlendMode==="additive"&&(S=null),S===null?g(a,l):S&&S.isColor&&(g(S,1),w=!0),(n.autoClear||w)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),S&&(S.isCubeTexture||S.mapping===Gh)?(h===void 0&&(h=new tr(new fl(1,1,1),new fo({name:"BackgroundCubeMaterial",uniforms:Ah(Rs.backgroundCube.uniforms),vertexShader:Rs.backgroundCube.vertexShader,fragmentShader:Rs.backgroundCube.fragmentShader,side:Ai,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(I,L,b){this.matrixWorld.copyPosition(b.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(h)),h.material.uniforms.envMap.value=S,h.material.uniforms.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=x.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,h.material.toneMapped=S.encoding!==bt,(d!==S||p!==S.version||m!==n.toneMapping)&&(h.material.needsUpdate=!0,d=S,p=S.version,m=n.toneMapping),h.layers.enableAll(),_.unshift(h,h.geometry,h.material,0,0,null)):S&&S.isTexture&&(c===void 0&&(c=new tr(new Hh(2,2),new fo({name:"BackgroundMaterial",uniforms:Ah(Rs.background.uniforms),vertexShader:Rs.background.vertexShader,fragmentShader:Rs.background.fragmentShader,side:co,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=S,c.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,c.material.toneMapped=S.encoding!==bt,S.matrixAutoUpdate===!0&&S.updateMatrix(),c.material.uniforms.uvTransform.value.copy(S.matrix),(d!==S||p!==S.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,d=S,p=S.version,m=n.toneMapping),c.layers.enableAll(),_.unshift(c,c.geometry,c.material,0,0,null))}function g(_,x){_.getRGB(Vg,Hk(n)),r.buffers.color.setClear(Vg.r,Vg.g,Vg.b,x,o)}return{getClearColor:function(){return a},setClearColor:function(_,x=1){a.set(_),l=x,g(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,g(a,l)},render:y}}function K7(n,e,t,r){const i=n.getParameter(34921),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=_(null);let c=l,h=!1;function d(J,X,ne,le,U){let W=!1;if(o){const B=g(le,ne,X);c!==B&&(c=B,m(c.object)),W=x(J,le,ne,U),W&&w(J,le,ne,U)}else{const B=X.wireframe===!0;(c.geometry!==le.id||c.program!==ne.id||c.wireframe!==B)&&(c.geometry=le.id,c.program=ne.id,c.wireframe=B,W=!0)}U!==null&&t.update(U,34963),(W||h)&&(h=!1,b(J,X,ne,le),U!==null&&n.bindBuffer(34963,t.get(U).buffer))}function p(){return r.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function m(J){return r.isWebGL2?n.bindVertexArray(J):s.bindVertexArrayOES(J)}function y(J){return r.isWebGL2?n.deleteVertexArray(J):s.deleteVertexArrayOES(J)}function g(J,X,ne){const le=ne.wireframe===!0;let U=a[J.id];U===void 0&&(U={},a[J.id]=U);let W=U[X.id];W===void 0&&(W={},U[X.id]=W);let B=W[le];return B===void 0&&(B=_(p()),W[le]=B),B}function _(J){const X=[],ne=[],le=[];for(let U=0;U<i;U++)X[U]=0,ne[U]=0,le[U]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:X,enabledAttributes:ne,attributeDivisors:le,object:J,attributes:{},index:null}}function x(J,X,ne,le){const U=c.attributes,W=X.attributes;let B=0;const ie=ne.getAttributes();for(const z in ie)if(ie[z].location>=0){const ae=U[z];let Q=W[z];if(Q===void 0&&(z==="instanceMatrix"&&J.instanceMatrix&&(Q=J.instanceMatrix),z==="instanceColor"&&J.instanceColor&&(Q=J.instanceColor)),ae===void 0||ae.attribute!==Q||Q&&ae.data!==Q.data)return!0;B++}return c.attributesNum!==B||c.index!==le}function w(J,X,ne,le){const U={},W=X.attributes;let B=0;const ie=ne.getAttributes();for(const z in ie)if(ie[z].location>=0){let ae=W[z];ae===void 0&&(z==="instanceMatrix"&&J.instanceMatrix&&(ae=J.instanceMatrix),z==="instanceColor"&&J.instanceColor&&(ae=J.instanceColor));const Q={};Q.attribute=ae,ae&&ae.data&&(Q.data=ae.data),U[z]=Q,B++}c.attributes=U,c.attributesNum=B,c.index=le}function S(){const J=c.newAttributes;for(let X=0,ne=J.length;X<ne;X++)J[X]=0}function M(J){T(J,0)}function T(J,X){const ne=c.newAttributes,le=c.enabledAttributes,U=c.attributeDivisors;ne[J]=1,le[J]===0&&(n.enableVertexAttribArray(J),le[J]=1),U[J]!==X&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](J,X),U[J]=X)}function I(){const J=c.newAttributes,X=c.enabledAttributes;for(let ne=0,le=X.length;ne<le;ne++)X[ne]!==J[ne]&&(n.disableVertexAttribArray(ne),X[ne]=0)}function L(J,X,ne,le,U,W){r.isWebGL2===!0&&(ne===5124||ne===5125)?n.vertexAttribIPointer(J,X,ne,U,W):n.vertexAttribPointer(J,X,ne,le,U,W)}function b(J,X,ne,le){if(r.isWebGL2===!1&&(J.isInstancedMesh||le.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;S();const U=le.attributes,W=ne.getAttributes(),B=X.defaultAttributeValues;for(const ie in W){const z=W[ie];if(z.location>=0){let te=U[ie];if(te===void 0&&(ie==="instanceMatrix"&&J.instanceMatrix&&(te=J.instanceMatrix),ie==="instanceColor"&&J.instanceColor&&(te=J.instanceColor)),te!==void 0){const ae=te.normalized,Q=te.itemSize,we=t.get(te);if(we===void 0)continue;const Ae=we.buffer,Oe=we.type,ze=we.bytesPerElement;if(te.isInterleavedBufferAttribute){const be=te.data,Ee=be.stride,he=te.offset;if(be.isInstancedInterleavedBuffer){for(let fe=0;fe<z.locationSize;fe++)T(z.location+fe,be.meshPerAttribute);J.isInstancedMesh!==!0&&le._maxInstanceCount===void 0&&(le._maxInstanceCount=be.meshPerAttribute*be.count)}else for(let fe=0;fe<z.locationSize;fe++)M(z.location+fe);n.bindBuffer(34962,Ae);for(let fe=0;fe<z.locationSize;fe++)L(z.location+fe,Q/z.locationSize,Oe,ae,Ee*ze,(he+Q/z.locationSize*fe)*ze)}else{if(te.isInstancedBufferAttribute){for(let be=0;be<z.locationSize;be++)T(z.location+be,te.meshPerAttribute);J.isInstancedMesh!==!0&&le._maxInstanceCount===void 0&&(le._maxInstanceCount=te.meshPerAttribute*te.count)}else for(let be=0;be<z.locationSize;be++)M(z.location+be);n.bindBuffer(34962,Ae);for(let be=0;be<z.locationSize;be++)L(z.location+be,Q/z.locationSize,Oe,ae,Q*ze,Q/z.locationSize*be*ze)}}else if(B!==void 0){const ae=B[ie];if(ae!==void 0)switch(ae.length){case 2:n.vertexAttrib2fv(z.location,ae);break;case 3:n.vertexAttrib3fv(z.location,ae);break;case 4:n.vertexAttrib4fv(z.location,ae);break;default:n.vertexAttrib1fv(z.location,ae)}}}}I()}function R(){V();for(const J in a){const X=a[J];for(const ne in X){const le=X[ne];for(const U in le)y(le[U].object),delete le[U];delete X[ne]}delete a[J]}}function D(J){if(a[J.id]===void 0)return;const X=a[J.id];for(const ne in X){const le=X[ne];for(const U in le)y(le[U].object),delete le[U];delete X[ne]}delete a[J.id]}function G(J){for(const X in a){const ne=a[X];if(ne[J.id]===void 0)continue;const le=ne[J.id];for(const U in le)y(le[U].object),delete le[U];delete ne[J.id]}}function V(){F(),h=!0,c!==l&&(c=l,m(c.object))}function F(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:V,resetDefaultState:F,dispose:R,releaseStatesOfGeometry:D,releaseStatesOfProgram:G,initAttributes:S,enableAttribute:M,disableUnusedAttributes:I}}function X7(n,e,t,r){const i=r.isWebGL2;let s;function o(c){s=c}function a(c,h){n.drawArrays(s,c,h),t.update(h,s,1)}function l(c,h,d){if(d===0)return;let p,m;if(i)p=n,m="drawArraysInstanced";else if(p=e.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",p===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}p[m](s,c,h,d),t.update(h,s,d)}this.setMode=o,this.render=a,this.renderInstances=l}function q7(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const L=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(L.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(L){if(L==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";L="mediump"}return L==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext;let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),h=t.logarithmicDepthBuffer===!0,d=n.getParameter(34930),p=n.getParameter(35660),m=n.getParameter(3379),y=n.getParameter(34076),g=n.getParameter(34921),_=n.getParameter(36347),x=n.getParameter(36348),w=n.getParameter(36349),S=p>0,M=o||e.has("OES_texture_float"),T=S&&M,I=o?n.getParameter(36183):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:h,maxTextures:d,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:y,maxAttributes:g,maxVertexUniforms:_,maxVaryings:x,maxFragmentUniforms:w,vertexTextures:S,floatFragmentTextures:M,floatVertexTextures:T,maxSamples:I}}function Q7(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new Ea,a=new vr,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,p){const m=d.length!==0||p||r!==0||i;return i=p,r=d.length,m},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,p){t=h(d,p,0)},this.setState=function(d,p,m){const y=d.clippingPlanes,g=d.clipIntersection,_=d.clipShadows,x=n.get(d);if(!i||y===null||y.length===0||s&&!_)s?h(null):c();else{const w=s?0:r,S=w*4;let M=x.clippingState||null;l.value=M,M=h(y,p,S,m);for(let T=0;T!==S;++T)M[T]=t[T];x.clippingState=M,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=w}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function h(d,p,m,y){const g=d!==null?d.length:0;let _=null;if(g!==0){if(_=l.value,y!==!0||_===null){const x=m+g*4,w=p.matrixWorldInverse;a.getNormalMatrix(w),(_===null||_.length<x)&&(_=new Float32Array(x));for(let S=0,M=m;S!==g;++S,M+=4)o.copy(d[S]).applyMatrix4(w,a),o.normal.toArray(_,M),_[M+3]=o.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=g,e.numIntersection=0,_}}function Y7(n){let e=new WeakMap;function t(o,a){return a===vh?o.mapping=el:a===Xd&&(o.mapping=tl),o}function r(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===vh||a===Xd)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new vC(l.height/2);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",i),t(c.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class fs extends Bp{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=h*this.view.offsetY,l=a-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Uu=4,H2=[.125,.215,.35,.446,.526,.582],Vl=20,sw=new fs,V2=new De;let ow=null;const Fl=(1+Math.sqrt(5))/2,pu=1/Fl,W2=[new N(1,1,1),new N(-1,1,1),new N(1,1,-1),new N(-1,1,-1),new N(0,Fl,pu),new N(0,Fl,-pu),new N(pu,0,Fl),new N(-pu,0,Fl),new N(Fl,pu,0),new N(-Fl,pu,0)];class KA{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){ow=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=J2(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=$2(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(ow),e.scissorTest=!1,Wg(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===el||e.mapping===tl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),ow=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:Cn,minFilter:Cn,generateMipmaps:!1,type:xh,format:vi,encoding:Xo,depthBuffer:!1},i=j2(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=j2(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Z7(s)),this._blurMaterial=e$(s,e,t)}return i}_compileMaterial(e){const t=new tr(this._lodPlanes[0],e);this._renderer.compile(t,sw)}_sceneToCubeUV(e,t,r,i){const a=new rn(90,1,t,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],h=this._renderer,d=h.autoClear,p=h.toneMapping;h.getClearColor(V2),h.toneMapping=Ns,h.autoClear=!1;const m=new Ni({name:"PMREM.Background",side:Ai,depthWrite:!1,depthTest:!1}),y=new tr(new fl,m);let g=!1;const _=e.background;_?_.isColor&&(m.color.copy(_),e.background=null,g=!0):(m.color.copy(V2),g=!0);for(let x=0;x<6;x++){const w=x%3;w===0?(a.up.set(0,l[x],0),a.lookAt(c[x],0,0)):w===1?(a.up.set(0,0,l[x]),a.lookAt(0,c[x],0)):(a.up.set(0,l[x],0),a.lookAt(0,0,c[x]));const S=this._cubeSize;Wg(i,w*S,x>2?S:0,S,S),h.setRenderTarget(i),g&&h.render(y,a),h.render(e,a)}y.geometry.dispose(),y.material.dispose(),h.toneMapping=p,h.autoClear=d,e.background=_}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===el||e.mapping===tl;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=J2()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=$2());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new tr(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;Wg(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,sw)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=W2[(i-1)%W2.length];this._blur(e,i-1,i,s,o)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,d=new tr(this._lodPlanes[i],c),p=c.uniforms,m=this._sizeLods[r]-1,y=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*Vl-1),g=s/y,_=isFinite(s)?1+Math.floor(h*g):Vl;_>Vl&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${Vl}`);const x=[];let w=0;for(let L=0;L<Vl;++L){const b=L/g,R=Math.exp(-b*b/2);x.push(R),L===0?w+=R:L<_&&(w+=2*R)}for(let L=0;L<x.length;L++)x[L]=x[L]/w;p.envMap.value=e.texture,p.samples.value=_,p.weights.value=x,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:S}=this;p.dTheta.value=y,p.mipInt.value=S-r;const M=this._sizeLods[i],T=3*M*(i>S-Uu?i-S+Uu:0),I=4*(this._cubeSize-M);Wg(t,T,I,3*M,2*M),l.setRenderTarget(t),l.render(d,sw)}}function Z7(n){const e=[],t=[],r=[];let i=n;const s=n-Uu+1+H2.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-Uu?l=H2[o-n+Uu-1]:o===0&&(l=0),r.push(l);const c=1/(a-2),h=-c,d=1+c,p=[h,h,d,h,d,d,h,h,d,d,h,d],m=6,y=6,g=3,_=2,x=1,w=new Float32Array(g*y*m),S=new Float32Array(_*y*m),M=new Float32Array(x*y*m);for(let I=0;I<m;I++){const L=I%3*2/3-1,b=I>2?0:-1,R=[L,b,0,L+2/3,b,0,L+2/3,b+1,0,L,b,0,L+2/3,b+1,0,L,b+1,0];w.set(R,g*y*I),S.set(p,_*y*I);const D=[I,I,I,I,I,I];M.set(D,x*y*I)}const T=new dt;T.setAttribute("position",new Xt(w,g)),T.setAttribute("uv",new Xt(S,_)),T.setAttribute("faceIndex",new Xt(M,x)),e.push(T),i>Uu&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function j2(n,e,t){const r=new Us(n,e,t);return r.texture.mapping=Gh,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Wg(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function e$(n,e,t){const r=new Float32Array(Vl),i=new N(0,1,0);return new fo({name:"SphericalGaussianBlur",defines:{n:Vl,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:_C(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Vo,depthTest:!1,depthWrite:!1})}function $2(){return new fo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_C(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Vo,depthTest:!1,depthWrite:!1})}function J2(){return new fo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_C(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Vo,depthTest:!1,depthWrite:!1})}function _C(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function t$(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===vh||l===Xd,h=l===el||l===tl;if(c||h)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let d=e.get(a);return t===null&&(t=new KA(n)),d=c?t.fromEquirectangular(a,d):t.fromCubemap(a,d),e.set(a,d),d.texture}else{if(e.has(a))return e.get(a).texture;{const d=a.image;if(c&&d&&d.height>0||h&&d&&i(d)){t===null&&(t=new KA(n));const p=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}else return null}}}return a}function i(a){let l=0;const c=6;for(let h=0;h<c;h++)a[h]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function n$(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function r$(n,e,t,r){const i={},s=new WeakMap;function o(d){const p=d.target;p.index!==null&&e.remove(p.index);for(const y in p.attributes)e.remove(p.attributes[y]);p.removeEventListener("dispose",o),delete i[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),r.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(d,p){return i[p.id]===!0||(p.addEventListener("dispose",o),i[p.id]=!0,t.memory.geometries++),p}function l(d){const p=d.attributes;for(const y in p)e.update(p[y],34962);const m=d.morphAttributes;for(const y in m){const g=m[y];for(let _=0,x=g.length;_<x;_++)e.update(g[_],34962)}}function c(d){const p=[],m=d.index,y=d.attributes.position;let g=0;if(m!==null){const w=m.array;g=m.version;for(let S=0,M=w.length;S<M;S+=3){const T=w[S+0],I=w[S+1],L=w[S+2];p.push(T,I,I,L,L,T)}}else{const w=y.array;g=y.version;for(let S=0,M=w.length/3-1;S<M;S+=3){const T=S+0,I=S+1,L=S+2;p.push(T,I,I,L,L,T)}}const _=new(zk(p)?gC:G0)(p,1);_.version=g;const x=s.get(d);x&&e.remove(x),s.set(d,_)}function h(d){const p=s.get(d);if(p){const m=d.index;m!==null&&p.version<m.version&&c(d)}else c(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:h}}function i$(n,e,t,r){const i=r.isWebGL2;let s;function o(p){s=p}let a,l;function c(p){a=p.type,l=p.bytesPerElement}function h(p,m){n.drawElements(s,m,a,p*l),t.update(m,s,1)}function d(p,m,y){if(y===0)return;let g,_;if(i)g=n,_="drawElementsInstanced";else if(g=e.get("ANGLE_instanced_arrays"),_="drawElementsInstancedANGLE",g===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}g[_](s,m,a,p*l,y),t.update(m,s,y)}this.setMode=o,this.setIndex=c,this.render=h,this.renderInstances=d}function s$(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function o$(n,e){return n[0]-e[0]}function a$(n,e){return Math.abs(e[1])-Math.abs(n[1])}function l$(n,e,t){const r={},i=new Float32Array(8),s=new WeakMap,o=new Ht,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,h,d){const p=c.morphTargetInfluences;if(e.isWebGL2===!0){const y=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,g=y!==void 0?y.length:0;let _=s.get(h);if(_===void 0||_.count!==g){let X=function(){F.dispose(),s.delete(h),h.removeEventListener("dispose",X)};var m=X;_!==void 0&&_.texture.dispose();const S=h.morphAttributes.position!==void 0,M=h.morphAttributes.normal!==void 0,T=h.morphAttributes.color!==void 0,I=h.morphAttributes.position||[],L=h.morphAttributes.normal||[],b=h.morphAttributes.color||[];let R=0;S===!0&&(R=1),M===!0&&(R=2),T===!0&&(R=3);let D=h.attributes.position.count*R,G=1;D>e.maxTextureSize&&(G=Math.ceil(D/e.maxTextureSize),D=e.maxTextureSize);const V=new Float32Array(D*G*4*g),F=new z0(V,D,G,g);F.type=Uo,F.needsUpdate=!0;const J=R*4;for(let ne=0;ne<g;ne++){const le=I[ne],U=L[ne],W=b[ne],B=D*G*4*ne;for(let ie=0;ie<le.count;ie++){const z=ie*J;S===!0&&(o.fromBufferAttribute(le,ie),V[B+z+0]=o.x,V[B+z+1]=o.y,V[B+z+2]=o.z,V[B+z+3]=0),M===!0&&(o.fromBufferAttribute(U,ie),V[B+z+4]=o.x,V[B+z+5]=o.y,V[B+z+6]=o.z,V[B+z+7]=0),T===!0&&(o.fromBufferAttribute(W,ie),V[B+z+8]=o.x,V[B+z+9]=o.y,V[B+z+10]=o.z,V[B+z+11]=W.itemSize===4?o.w:1)}}_={count:g,texture:F,size:new ve(D,G)},s.set(h,_),h.addEventListener("dispose",X)}let x=0;for(let S=0;S<p.length;S++)x+=p[S];const w=h.morphTargetsRelative?1:1-x;d.getUniforms().setValue(n,"morphTargetBaseInfluence",w),d.getUniforms().setValue(n,"morphTargetInfluences",p),d.getUniforms().setValue(n,"morphTargetsTexture",_.texture,t),d.getUniforms().setValue(n,"morphTargetsTextureSize",_.size)}else{const y=p===void 0?0:p.length;let g=r[h.id];if(g===void 0||g.length!==y){g=[];for(let M=0;M<y;M++)g[M]=[M,0];r[h.id]=g}for(let M=0;M<y;M++){const T=g[M];T[0]=M,T[1]=p[M]}g.sort(a$);for(let M=0;M<8;M++)M<y&&g[M][1]?(a[M][0]=g[M][0],a[M][1]=g[M][1]):(a[M][0]=Number.MAX_SAFE_INTEGER,a[M][1]=0);a.sort(o$);const _=h.morphAttributes.position,x=h.morphAttributes.normal;let w=0;for(let M=0;M<8;M++){const T=a[M],I=T[0],L=T[1];I!==Number.MAX_SAFE_INTEGER&&L?(_&&h.getAttribute("morphTarget"+M)!==_[I]&&h.setAttribute("morphTarget"+M,_[I]),x&&h.getAttribute("morphNormal"+M)!==x[I]&&h.setAttribute("morphNormal"+M,x[I]),i[M]=L,w+=L):(_&&h.hasAttribute("morphTarget"+M)===!0&&h.deleteAttribute("morphTarget"+M),x&&h.hasAttribute("morphNormal"+M)===!0&&h.deleteAttribute("morphNormal"+M),i[M]=0)}const S=h.morphTargetsRelative?1:1-w;d.getUniforms().setValue(n,"morphTargetBaseInfluence",S),d.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function c$(n,e,t,r){let i=new WeakMap;function s(l){const c=r.render.frame,h=l.geometry,d=e.get(l,h);return i.get(d)!==c&&(e.update(d),i.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),l.instanceColor!==null&&t.update(l.instanceColor,34962)),d}function o(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}const jk=new cn,$k=new z0,Jk=new mC,Kk=new Op,K2=[],X2=[],q2=new Float32Array(16),Q2=new Float32Array(9),Y2=new Float32Array(4);function Vh(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=K2[i];if(s===void 0&&(s=new Float32Array(i),K2[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function ur(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function hr(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function V0(n,e){let t=X2[e];t===void 0&&(t=new Int32Array(e),X2[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function u$(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function h$(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ur(t,e))return;n.uniform2fv(this.addr,e),hr(t,e)}}function f$(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ur(t,e))return;n.uniform3fv(this.addr,e),hr(t,e)}}function d$(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ur(t,e))return;n.uniform4fv(this.addr,e),hr(t,e)}}function p$(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(ur(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),hr(t,e)}else{if(ur(t,r))return;Y2.set(r),n.uniformMatrix2fv(this.addr,!1,Y2),hr(t,r)}}function m$(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(ur(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),hr(t,e)}else{if(ur(t,r))return;Q2.set(r),n.uniformMatrix3fv(this.addr,!1,Q2),hr(t,r)}}function g$(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(ur(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),hr(t,e)}else{if(ur(t,r))return;q2.set(r),n.uniformMatrix4fv(this.addr,!1,q2),hr(t,r)}}function y$(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function v$(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ur(t,e))return;n.uniform2iv(this.addr,e),hr(t,e)}}function _$(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ur(t,e))return;n.uniform3iv(this.addr,e),hr(t,e)}}function x$(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ur(t,e))return;n.uniform4iv(this.addr,e),hr(t,e)}}function w$(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function S$(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ur(t,e))return;n.uniform2uiv(this.addr,e),hr(t,e)}}function A$(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ur(t,e))return;n.uniform3uiv(this.addr,e),hr(t,e)}}function M$(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ur(t,e))return;n.uniform4uiv(this.addr,e),hr(t,e)}}function E$(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2D(e||jk,i)}function C$(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||Jk,i)}function b$(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||Kk,i)}function T$(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||$k,i)}function I$(n){switch(n){case 5126:return u$;case 35664:return h$;case 35665:return f$;case 35666:return d$;case 35674:return p$;case 35675:return m$;case 35676:return g$;case 5124:case 35670:return y$;case 35667:case 35671:return v$;case 35668:case 35672:return _$;case 35669:case 35673:return x$;case 5125:return w$;case 36294:return S$;case 36295:return A$;case 36296:return M$;case 35678:case 36198:case 36298:case 36306:case 35682:return E$;case 35679:case 36299:case 36307:return C$;case 35680:case 36300:case 36308:case 36293:return b$;case 36289:case 36303:case 36311:case 36292:return T$}}function P$(n,e){n.uniform1fv(this.addr,e)}function R$(n,e){const t=Vh(e,this.size,2);n.uniform2fv(this.addr,t)}function L$(n,e){const t=Vh(e,this.size,3);n.uniform3fv(this.addr,t)}function D$(n,e){const t=Vh(e,this.size,4);n.uniform4fv(this.addr,t)}function B$(n,e){const t=Vh(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function O$(n,e){const t=Vh(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function k$(n,e){const t=Vh(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function N$(n,e){n.uniform1iv(this.addr,e)}function F$(n,e){n.uniform2iv(this.addr,e)}function U$(n,e){n.uniform3iv(this.addr,e)}function z$(n,e){n.uniform4iv(this.addr,e)}function G$(n,e){n.uniform1uiv(this.addr,e)}function H$(n,e){n.uniform2uiv(this.addr,e)}function V$(n,e){n.uniform3uiv(this.addr,e)}function W$(n,e){n.uniform4uiv(this.addr,e)}function j$(n,e,t){const r=this.cache,i=e.length,s=V0(t,i);ur(r,s)||(n.uniform1iv(this.addr,s),hr(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||jk,s[o])}function $$(n,e,t){const r=this.cache,i=e.length,s=V0(t,i);ur(r,s)||(n.uniform1iv(this.addr,s),hr(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||Jk,s[o])}function J$(n,e,t){const r=this.cache,i=e.length,s=V0(t,i);ur(r,s)||(n.uniform1iv(this.addr,s),hr(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||Kk,s[o])}function K$(n,e,t){const r=this.cache,i=e.length,s=V0(t,i);ur(r,s)||(n.uniform1iv(this.addr,s),hr(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||$k,s[o])}function X$(n){switch(n){case 5126:return P$;case 35664:return R$;case 35665:return L$;case 35666:return D$;case 35674:return B$;case 35675:return O$;case 35676:return k$;case 5124:case 35670:return N$;case 35667:case 35671:return F$;case 35668:case 35672:return U$;case 35669:case 35673:return z$;case 5125:return G$;case 36294:return H$;case 36295:return V$;case 36296:return W$;case 35678:case 36198:case 36298:case 36306:case 35682:return j$;case 35679:case 36299:case 36307:return $$;case 35680:case 36300:case 36308:case 36293:return J$;case 36289:case 36303:case 36311:case 36292:return K$}}class q${constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=I$(t.type)}}class Q${constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=X$(t.type)}}class Y${constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const aw=/(\w+)(\])?(\[|\.)?/g;function Z2(n,e){n.seq.push(e),n.map[e.id]=e}function Z$(n,e,t){const r=n.name,i=r.length;for(aw.lastIndex=0;;){const s=aw.exec(r),o=aw.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===i){Z2(t,c===void 0?new q$(a,n,e):new Q$(a,n,e));break}else{let d=t.map[a];d===void 0&&(d=new Y$(a),Z2(t,d)),t=d}}}class Xy{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,35718);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);Z$(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function eR(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}let eJ=0;function tJ(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}function nJ(n){switch(n){case Xo:return["Linear","( value )"];case bt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function tR(n,e,t){const r=n.getShaderParameter(e,35713),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+tJ(n.getShaderSource(e),o)}else return i}function rJ(n,e){const t=nJ(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function iJ(n,e){let t;switch(e){case hk:t="Linear";break;case fk:t="Reinhard";break;case dk:t="OptimizedCineon";break;case lC:t="ACESFilmic";break;case pk:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function sJ(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(nd).join(`
`)}function oJ(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function aJ(n,e){const t={},r=n.getProgramParameter(e,35721);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function nd(n){return n!==""}function nR(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function rR(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const lJ=/^[ \t]*#include +<([\w\d./]+)>/gm;function XA(n){return n.replace(lJ,cJ)}function cJ(n,e){const t=Mt[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return XA(t)}const uJ=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function iR(n){return n.replace(uJ,hJ)}function hJ(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function sR(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function fJ(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===k0?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===vd?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Jl&&(e="SHADOWMAP_TYPE_VSM"),e}function dJ(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case el:case tl:e="ENVMAP_TYPE_CUBE";break;case Gh:e="ENVMAP_TYPE_CUBE_UV";break}return e}function pJ(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case tl:e="ENVMAP_MODE_REFRACTION";break}return e}function mJ(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Lp:e="ENVMAP_BLENDING_MULTIPLY";break;case ck:e="ENVMAP_BLENDING_MIX";break;case uk:e="ENVMAP_BLENDING_ADD";break}return e}function gJ(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function yJ(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=fJ(t),c=dJ(t),h=pJ(t),d=mJ(t),p=gJ(t),m=t.isWebGL2?"":sJ(t),y=oJ(s),g=i.createProgram();let _,x,w=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(_=[y].filter(nd).join(`
`),_.length>0&&(_+=`
`),x=[m,y].filter(nd).join(`
`),x.length>0&&(x+=`
`)):(_=[sR(t),"#define SHADER_NAME "+t.shaderName,y,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(nd).join(`
`),x=[m,sR(t),"#define SHADER_NAME "+t.shaderName,y,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+h:"",t.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Ns?"#define TONE_MAPPING":"",t.toneMapping!==Ns?Mt.tonemapping_pars_fragment:"",t.toneMapping!==Ns?iJ("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Mt.encodings_pars_fragment,rJ("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(nd).join(`
`)),o=XA(o),o=nR(o,t),o=rR(o,t),a=XA(a),a=nR(a,t),a=rR(a,t),o=iR(o),a=iR(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(w=`#version 300 es
`,_=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,x=["#define varying in",t.glslVersion===$A?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===$A?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+x);const S=w+_+o,M=w+x+a,T=eR(i,35633,S),I=eR(i,35632,M);if(i.attachShader(g,T),i.attachShader(g,I),t.index0AttributeName!==void 0?i.bindAttribLocation(g,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(g,0,"position"),i.linkProgram(g),n.debug.checkShaderErrors){const R=i.getProgramInfoLog(g).trim(),D=i.getShaderInfoLog(T).trim(),G=i.getShaderInfoLog(I).trim();let V=!0,F=!0;if(i.getProgramParameter(g,35714)===!1){V=!1;const J=tR(i,T,"vertex"),X=tR(i,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(g,35715)+`

Program Info Log: `+R+`
`+J+`
`+X)}else R!==""?console.warn("THREE.WebGLProgram: Program Info Log:",R):(D===""||G==="")&&(F=!1);F&&(this.diagnostics={runnable:V,programLog:R,vertexShader:{log:D,prefix:_},fragmentShader:{log:G,prefix:x}})}i.deleteShader(T),i.deleteShader(I);let L;this.getUniforms=function(){return L===void 0&&(L=new Xy(i,g)),L};let b;return this.getAttributes=function(){return b===void 0&&(b=aJ(i,g)),b},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(g),this.program=void 0},this.name=t.shaderName,this.id=eJ++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=T,this.fragmentShader=I,this}let vJ=0;class _J{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new xJ(e),t.set(e,r)),r}}class xJ{constructor(e){this.id=vJ++,this.code=e,this.usedTimes=0}}function wJ(n,e,t,r,i,s,o){const a=new ac,l=new _J,c=[],h=i.isWebGL2,d=i.logarithmicDepthBuffer,p=i.vertexTextures;let m=i.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(b,R,D,G,V){const F=G.fog,J=V.geometry,X=b.isMeshStandardMaterial?G.environment:null,ne=(b.isMeshStandardMaterial?t:e).get(b.envMap||X),le=ne&&ne.mapping===Gh?ne.image.height:null,U=y[b.type];b.precision!==null&&(m=i.getMaxPrecision(b.precision),m!==b.precision&&console.warn("THREE.WebGLProgram.getParameters:",b.precision,"not supported, using",m,"instead."));const W=J.morphAttributes.position||J.morphAttributes.normal||J.morphAttributes.color,B=W!==void 0?W.length:0;let ie=0;J.morphAttributes.position!==void 0&&(ie=1),J.morphAttributes.normal!==void 0&&(ie=2),J.morphAttributes.color!==void 0&&(ie=3);let z,te,ae,Q;if(U){const Ee=Rs[U];z=Ee.vertexShader,te=Ee.fragmentShader}else z=b.vertexShader,te=b.fragmentShader,l.update(b),ae=l.getVertexShaderID(b),Q=l.getFragmentShaderID(b);const we=n.getRenderTarget(),Ae=b.alphaTest>0,Oe=b.clearcoat>0,ze=b.iridescence>0;return{isWebGL2:h,shaderID:U,shaderName:b.type,vertexShader:z,fragmentShader:te,defines:b.defines,customVertexShaderID:ae,customFragmentShaderID:Q,isRawShaderMaterial:b.isRawShaderMaterial===!0,glslVersion:b.glslVersion,precision:m,instancing:V.isInstancedMesh===!0,instancingColor:V.isInstancedMesh===!0&&V.instanceColor!==null,supportsVertexTextures:p,outputEncoding:we===null?n.outputEncoding:we.isXRRenderTarget===!0?we.texture.encoding:Xo,map:!!b.map,matcap:!!b.matcap,envMap:!!ne,envMapMode:ne&&ne.mapping,envMapCubeUVHeight:le,lightMap:!!b.lightMap,aoMap:!!b.aoMap,emissiveMap:!!b.emissiveMap,bumpMap:!!b.bumpMap,normalMap:!!b.normalMap,objectSpaceNormalMap:b.normalMapType===kk,tangentSpaceNormalMap:b.normalMapType===na,decodeVideoTexture:!!b.map&&b.map.isVideoTexture===!0&&b.map.encoding===bt,clearcoat:Oe,clearcoatMap:Oe&&!!b.clearcoatMap,clearcoatRoughnessMap:Oe&&!!b.clearcoatRoughnessMap,clearcoatNormalMap:Oe&&!!b.clearcoatNormalMap,iridescence:ze,iridescenceMap:ze&&!!b.iridescenceMap,iridescenceThicknessMap:ze&&!!b.iridescenceThicknessMap,displacementMap:!!b.displacementMap,roughnessMap:!!b.roughnessMap,metalnessMap:!!b.metalnessMap,specularMap:!!b.specularMap,specularIntensityMap:!!b.specularIntensityMap,specularColorMap:!!b.specularColorMap,opaque:b.transparent===!1&&b.blending===ic,alphaMap:!!b.alphaMap,alphaTest:Ae,gradientMap:!!b.gradientMap,sheen:b.sheen>0,sheenColorMap:!!b.sheenColorMap,sheenRoughnessMap:!!b.sheenRoughnessMap,transmission:b.transmission>0,transmissionMap:!!b.transmissionMap,thicknessMap:!!b.thicknessMap,combine:b.combine,vertexTangents:!!b.normalMap&&!!J.attributes.tangent,vertexColors:b.vertexColors,vertexAlphas:b.vertexColors===!0&&!!J.attributes.color&&J.attributes.color.itemSize===4,vertexUvs:!!b.map||!!b.bumpMap||!!b.normalMap||!!b.specularMap||!!b.alphaMap||!!b.emissiveMap||!!b.roughnessMap||!!b.metalnessMap||!!b.clearcoatMap||!!b.clearcoatRoughnessMap||!!b.clearcoatNormalMap||!!b.iridescenceMap||!!b.iridescenceThicknessMap||!!b.displacementMap||!!b.transmissionMap||!!b.thicknessMap||!!b.specularIntensityMap||!!b.specularColorMap||!!b.sheenColorMap||!!b.sheenRoughnessMap,uvsVertexOnly:!(b.map||b.bumpMap||b.normalMap||b.specularMap||b.alphaMap||b.emissiveMap||b.roughnessMap||b.metalnessMap||b.clearcoatNormalMap||b.iridescenceMap||b.iridescenceThicknessMap||b.transmission>0||b.transmissionMap||b.thicknessMap||b.specularIntensityMap||b.specularColorMap||b.sheen>0||b.sheenColorMap||b.sheenRoughnessMap)&&!!b.displacementMap,fog:!!F,useFog:b.fog===!0,fogExp2:F&&F.isFogExp2,flatShading:!!b.flatShading,sizeAttenuation:b.sizeAttenuation,logarithmicDepthBuffer:d,skinning:V.isSkinnedMesh===!0,morphTargets:J.morphAttributes.position!==void 0,morphNormals:J.morphAttributes.normal!==void 0,morphColors:J.morphAttributes.color!==void 0,morphTargetsCount:B,morphTextureStride:ie,numDirLights:R.directional.length,numPointLights:R.point.length,numSpotLights:R.spot.length,numSpotLightMaps:R.spotLightMap.length,numRectAreaLights:R.rectArea.length,numHemiLights:R.hemi.length,numDirLightShadows:R.directionalShadowMap.length,numPointLightShadows:R.pointShadowMap.length,numSpotLightShadows:R.spotShadowMap.length,numSpotLightShadowsWithMaps:R.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:b.dithering,shadowMapEnabled:n.shadowMap.enabled&&D.length>0,shadowMapType:n.shadowMap.type,toneMapping:b.toneMapped?n.toneMapping:Ns,useLegacyLights:n.useLegacyLights,premultipliedAlpha:b.premultipliedAlpha,doubleSided:b.side===Ds,flipSided:b.side===Ai,useDepthPacking:!!b.depthPacking,depthPacking:b.depthPacking||0,index0AttributeName:b.index0AttributeName,extensionDerivatives:b.extensions&&b.extensions.derivatives,extensionFragDepth:b.extensions&&b.extensions.fragDepth,extensionDrawBuffers:b.extensions&&b.extensions.drawBuffers,extensionShaderTextureLOD:b.extensions&&b.extensions.shaderTextureLOD,rendererExtensionFragDepth:h||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||r.has("EXT_shader_texture_lod"),customProgramCacheKey:b.customProgramCacheKey()}}function _(b){const R=[];if(b.shaderID?R.push(b.shaderID):(R.push(b.customVertexShaderID),R.push(b.customFragmentShaderID)),b.defines!==void 0)for(const D in b.defines)R.push(D),R.push(b.defines[D]);return b.isRawShaderMaterial===!1&&(x(R,b),w(R,b),R.push(n.outputEncoding)),R.push(b.customProgramCacheKey),R.join()}function x(b,R){b.push(R.precision),b.push(R.outputEncoding),b.push(R.envMapMode),b.push(R.envMapCubeUVHeight),b.push(R.combine),b.push(R.vertexUvs),b.push(R.fogExp2),b.push(R.sizeAttenuation),b.push(R.morphTargetsCount),b.push(R.morphAttributeCount),b.push(R.numDirLights),b.push(R.numPointLights),b.push(R.numSpotLights),b.push(R.numSpotLightMaps),b.push(R.numHemiLights),b.push(R.numRectAreaLights),b.push(R.numDirLightShadows),b.push(R.numPointLightShadows),b.push(R.numSpotLightShadows),b.push(R.numSpotLightShadowsWithMaps),b.push(R.shadowMapType),b.push(R.toneMapping),b.push(R.numClippingPlanes),b.push(R.numClipIntersection),b.push(R.depthPacking)}function w(b,R){a.disableAll(),R.isWebGL2&&a.enable(0),R.supportsVertexTextures&&a.enable(1),R.instancing&&a.enable(2),R.instancingColor&&a.enable(3),R.map&&a.enable(4),R.matcap&&a.enable(5),R.envMap&&a.enable(6),R.lightMap&&a.enable(7),R.aoMap&&a.enable(8),R.emissiveMap&&a.enable(9),R.bumpMap&&a.enable(10),R.normalMap&&a.enable(11),R.objectSpaceNormalMap&&a.enable(12),R.tangentSpaceNormalMap&&a.enable(13),R.clearcoat&&a.enable(14),R.clearcoatMap&&a.enable(15),R.clearcoatRoughnessMap&&a.enable(16),R.clearcoatNormalMap&&a.enable(17),R.iridescence&&a.enable(18),R.iridescenceMap&&a.enable(19),R.iridescenceThicknessMap&&a.enable(20),R.displacementMap&&a.enable(21),R.specularMap&&a.enable(22),R.roughnessMap&&a.enable(23),R.metalnessMap&&a.enable(24),R.gradientMap&&a.enable(25),R.alphaMap&&a.enable(26),R.alphaTest&&a.enable(27),R.vertexColors&&a.enable(28),R.vertexAlphas&&a.enable(29),R.vertexUvs&&a.enable(30),R.vertexTangents&&a.enable(31),R.uvsVertexOnly&&a.enable(32),b.push(a.mask),a.disableAll(),R.fog&&a.enable(0),R.useFog&&a.enable(1),R.flatShading&&a.enable(2),R.logarithmicDepthBuffer&&a.enable(3),R.skinning&&a.enable(4),R.morphTargets&&a.enable(5),R.morphNormals&&a.enable(6),R.morphColors&&a.enable(7),R.premultipliedAlpha&&a.enable(8),R.shadowMapEnabled&&a.enable(9),R.useLegacyLights&&a.enable(10),R.doubleSided&&a.enable(11),R.flipSided&&a.enable(12),R.useDepthPacking&&a.enable(13),R.dithering&&a.enable(14),R.specularIntensityMap&&a.enable(15),R.specularColorMap&&a.enable(16),R.transmission&&a.enable(17),R.transmissionMap&&a.enable(18),R.thicknessMap&&a.enable(19),R.sheen&&a.enable(20),R.sheenColorMap&&a.enable(21),R.sheenRoughnessMap&&a.enable(22),R.decodeVideoTexture&&a.enable(23),R.opaque&&a.enable(24),b.push(a.mask)}function S(b){const R=y[b.type];let D;if(R){const G=Rs[R];D=Vk.clone(G.uniforms)}else D=b.uniforms;return D}function M(b,R){let D;for(let G=0,V=c.length;G<V;G++){const F=c[G];if(F.cacheKey===R){D=F,++D.usedTimes;break}}return D===void 0&&(D=new yJ(n,R,b,s),c.push(D)),D}function T(b){if(--b.usedTimes===0){const R=c.indexOf(b);c[R]=c[c.length-1],c.pop(),b.destroy()}}function I(b){l.remove(b)}function L(){l.dispose()}return{getParameters:g,getProgramCacheKey:_,getUniforms:S,acquireProgram:M,releaseProgram:T,releaseShaderCache:I,programs:c,dispose:L}}function SJ(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function r(s,o,a){n.get(s)[o]=a}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function AJ(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function oR(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function aR(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(d,p,m,y,g,_){let x=n[e];return x===void 0?(x={id:d.id,object:d,geometry:p,material:m,groupOrder:y,renderOrder:d.renderOrder,z:g,group:_},n[e]=x):(x.id=d.id,x.object=d,x.geometry=p,x.material=m,x.groupOrder=y,x.renderOrder=d.renderOrder,x.z=g,x.group=_),e++,x}function a(d,p,m,y,g,_){const x=o(d,p,m,y,g,_);m.transmission>0?r.push(x):m.transparent===!0?i.push(x):t.push(x)}function l(d,p,m,y,g,_){const x=o(d,p,m,y,g,_);m.transmission>0?r.unshift(x):m.transparent===!0?i.unshift(x):t.unshift(x)}function c(d,p){t.length>1&&t.sort(d||AJ),r.length>1&&r.sort(p||oR),i.length>1&&i.sort(p||oR)}function h(){for(let d=e,p=n.length;d<p;d++){const m=n[d];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:h,sort:c}}function MJ(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new aR,n.set(r,[o])):i>=s.length?(o=new aR,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function EJ(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new N,color:new De};break;case"SpotLight":t={position:new N,direction:new N,color:new De,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new N,color:new De,distance:0,decay:0};break;case"HemisphereLight":t={direction:new N,skyColor:new De,groundColor:new De};break;case"RectAreaLight":t={color:new De,position:new N,halfWidth:new N,halfHeight:new N};break}return n[e.id]=t,t}}}function CJ(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ve};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ve};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ve,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let bJ=0;function TJ(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function IJ(n,e){const t=new EJ,r=CJ(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let h=0;h<9;h++)i.probe.push(new N);const s=new N,o=new Xe,a=new Xe;function l(h,d){let p=0,m=0,y=0;for(let G=0;G<9;G++)i.probe[G].set(0,0,0);let g=0,_=0,x=0,w=0,S=0,M=0,T=0,I=0,L=0,b=0;h.sort(TJ);const R=d===!0?Math.PI:1;for(let G=0,V=h.length;G<V;G++){const F=h[G],J=F.color,X=F.intensity,ne=F.distance,le=F.shadow&&F.shadow.map?F.shadow.map.texture:null;if(F.isAmbientLight)p+=J.r*X*R,m+=J.g*X*R,y+=J.b*X*R;else if(F.isLightProbe)for(let U=0;U<9;U++)i.probe[U].addScaledVector(F.sh.coefficients[U],X);else if(F.isDirectionalLight){const U=t.get(F);if(U.color.copy(F.color).multiplyScalar(F.intensity*R),F.castShadow){const W=F.shadow,B=r.get(F);B.shadowBias=W.bias,B.shadowNormalBias=W.normalBias,B.shadowRadius=W.radius,B.shadowMapSize=W.mapSize,i.directionalShadow[g]=B,i.directionalShadowMap[g]=le,i.directionalShadowMatrix[g]=F.shadow.matrix,M++}i.directional[g]=U,g++}else if(F.isSpotLight){const U=t.get(F);U.position.setFromMatrixPosition(F.matrixWorld),U.color.copy(J).multiplyScalar(X*R),U.distance=ne,U.coneCos=Math.cos(F.angle),U.penumbraCos=Math.cos(F.angle*(1-F.penumbra)),U.decay=F.decay,i.spot[x]=U;const W=F.shadow;if(F.map&&(i.spotLightMap[L]=F.map,L++,W.updateMatrices(F),F.castShadow&&b++),i.spotLightMatrix[x]=W.matrix,F.castShadow){const B=r.get(F);B.shadowBias=W.bias,B.shadowNormalBias=W.normalBias,B.shadowRadius=W.radius,B.shadowMapSize=W.mapSize,i.spotShadow[x]=B,i.spotShadowMap[x]=le,I++}x++}else if(F.isRectAreaLight){const U=t.get(F);U.color.copy(J).multiplyScalar(X),U.halfWidth.set(F.width*.5,0,0),U.halfHeight.set(0,F.height*.5,0),i.rectArea[w]=U,w++}else if(F.isPointLight){const U=t.get(F);if(U.color.copy(F.color).multiplyScalar(F.intensity*R),U.distance=F.distance,U.decay=F.decay,F.castShadow){const W=F.shadow,B=r.get(F);B.shadowBias=W.bias,B.shadowNormalBias=W.normalBias,B.shadowRadius=W.radius,B.shadowMapSize=W.mapSize,B.shadowCameraNear=W.camera.near,B.shadowCameraFar=W.camera.far,i.pointShadow[_]=B,i.pointShadowMap[_]=le,i.pointShadowMatrix[_]=F.shadow.matrix,T++}i.point[_]=U,_++}else if(F.isHemisphereLight){const U=t.get(F);U.skyColor.copy(F.color).multiplyScalar(X*R),U.groundColor.copy(F.groundColor).multiplyScalar(X*R),i.hemi[S]=U,S++}}w>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ue.LTC_FLOAT_1,i.rectAreaLTC2=Ue.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Ue.LTC_HALF_1,i.rectAreaLTC2=Ue.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=p,i.ambient[1]=m,i.ambient[2]=y;const D=i.hash;(D.directionalLength!==g||D.pointLength!==_||D.spotLength!==x||D.rectAreaLength!==w||D.hemiLength!==S||D.numDirectionalShadows!==M||D.numPointShadows!==T||D.numSpotShadows!==I||D.numSpotMaps!==L)&&(i.directional.length=g,i.spot.length=x,i.rectArea.length=w,i.point.length=_,i.hemi.length=S,i.directionalShadow.length=M,i.directionalShadowMap.length=M,i.pointShadow.length=T,i.pointShadowMap.length=T,i.spotShadow.length=I,i.spotShadowMap.length=I,i.directionalShadowMatrix.length=M,i.pointShadowMatrix.length=T,i.spotLightMatrix.length=I+L-b,i.spotLightMap.length=L,i.numSpotLightShadowsWithMaps=b,D.directionalLength=g,D.pointLength=_,D.spotLength=x,D.rectAreaLength=w,D.hemiLength=S,D.numDirectionalShadows=M,D.numPointShadows=T,D.numSpotShadows=I,D.numSpotMaps=L,i.version=bJ++)}function c(h,d){let p=0,m=0,y=0,g=0,_=0;const x=d.matrixWorldInverse;for(let w=0,S=h.length;w<S;w++){const M=h[w];if(M.isDirectionalLight){const T=i.directional[p];T.direction.setFromMatrixPosition(M.matrixWorld),s.setFromMatrixPosition(M.target.matrixWorld),T.direction.sub(s),T.direction.transformDirection(x),p++}else if(M.isSpotLight){const T=i.spot[y];T.position.setFromMatrixPosition(M.matrixWorld),T.position.applyMatrix4(x),T.direction.setFromMatrixPosition(M.matrixWorld),s.setFromMatrixPosition(M.target.matrixWorld),T.direction.sub(s),T.direction.transformDirection(x),y++}else if(M.isRectAreaLight){const T=i.rectArea[g];T.position.setFromMatrixPosition(M.matrixWorld),T.position.applyMatrix4(x),a.identity(),o.copy(M.matrixWorld),o.premultiply(x),a.extractRotation(o),T.halfWidth.set(M.width*.5,0,0),T.halfHeight.set(0,M.height*.5,0),T.halfWidth.applyMatrix4(a),T.halfHeight.applyMatrix4(a),g++}else if(M.isPointLight){const T=i.point[m];T.position.setFromMatrixPosition(M.matrixWorld),T.position.applyMatrix4(x),m++}else if(M.isHemisphereLight){const T=i.hemi[_];T.direction.setFromMatrixPosition(M.matrixWorld),T.direction.transformDirection(x),_++}}}return{setup:l,setupView:c,state:i}}function lR(n,e){const t=new IJ(n,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(d){r.push(d)}function a(d){i.push(d)}function l(d){t.setup(r,d)}function c(d){t.setupView(r,d)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function PJ(n,e){let t=new WeakMap;function r(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new lR(n,e),t.set(s,[l])):o>=a.length?(l=new lR(n,e),a.push(l)):l=a[o],l}function i(){t=new WeakMap}return{get:r,dispose:i}}class xC extends nr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Bk,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class wC extends nr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new N,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const RJ=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,LJ=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function DJ(n,e,t){let r=new H0;const i=new ve,s=new ve,o=new Ht,a=new xC({depthPacking:Ok}),l=new wC,c={},h=t.maxTextureSize,d={[co]:Ai,[Ai]:co,[Ds]:Ds},p=new fo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ve},radius:{value:4}},vertexShader:RJ,fragmentShader:LJ}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const y=new dt;y.setAttribute("position",new Xt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new tr(y,p),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=k0,this.render=function(M,T,I){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||M.length===0)return;const L=n.getRenderTarget(),b=n.getActiveCubeFace(),R=n.getActiveMipmapLevel(),D=n.state;D.setBlending(Vo),D.buffers.color.setClear(1,1,1,1),D.buffers.depth.setTest(!0),D.setScissorTest(!1);for(let G=0,V=M.length;G<V;G++){const F=M[G],J=F.shadow;if(J===void 0){console.warn("THREE.WebGLShadowMap:",F,"has no shadow.");continue}if(J.autoUpdate===!1&&J.needsUpdate===!1)continue;i.copy(J.mapSize);const X=J.getFrameExtents();if(i.multiply(X),s.copy(J.mapSize),(i.x>h||i.y>h)&&(i.x>h&&(s.x=Math.floor(h/X.x),i.x=s.x*X.x,J.mapSize.x=s.x),i.y>h&&(s.y=Math.floor(h/X.y),i.y=s.y*X.y,J.mapSize.y=s.y)),J.map===null){const le=this.type!==Jl?{minFilter:Fn,magFilter:Fn}:{};J.map=new Us(i.x,i.y,le),J.map.texture.name=F.name+".shadowMap",J.camera.updateProjectionMatrix()}n.setRenderTarget(J.map),n.clear();const ne=J.getViewportCount();for(let le=0;le<ne;le++){const U=J.getViewport(le);o.set(s.x*U.x,s.y*U.y,s.x*U.z,s.y*U.w),D.viewport(o),J.updateMatrices(F,le),r=J.getFrustum(),S(T,I,J.camera,F,this.type)}J.isPointLightShadow!==!0&&this.type===Jl&&x(J,I),J.needsUpdate=!1}_.needsUpdate=!1,n.setRenderTarget(L,b,R)};function x(M,T){const I=e.update(g);p.defines.VSM_SAMPLES!==M.blurSamples&&(p.defines.VSM_SAMPLES=M.blurSamples,m.defines.VSM_SAMPLES=M.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),M.mapPass===null&&(M.mapPass=new Us(i.x,i.y)),p.uniforms.shadow_pass.value=M.map.texture,p.uniforms.resolution.value=M.mapSize,p.uniforms.radius.value=M.radius,n.setRenderTarget(M.mapPass),n.clear(),n.renderBufferDirect(T,null,I,p,g,null),m.uniforms.shadow_pass.value=M.mapPass.texture,m.uniforms.resolution.value=M.mapSize,m.uniforms.radius.value=M.radius,n.setRenderTarget(M.map),n.clear(),n.renderBufferDirect(T,null,I,m,g,null)}function w(M,T,I,L,b,R){let D=null;const G=I.isPointLight===!0?M.customDistanceMaterial:M.customDepthMaterial;if(G!==void 0)D=G;else if(D=I.isPointLight===!0?l:a,n.localClippingEnabled&&T.clipShadows===!0&&Array.isArray(T.clippingPlanes)&&T.clippingPlanes.length!==0||T.displacementMap&&T.displacementScale!==0||T.alphaMap&&T.alphaTest>0||T.map&&T.alphaTest>0){const V=D.uuid,F=T.uuid;let J=c[V];J===void 0&&(J={},c[V]=J);let X=J[F];X===void 0&&(X=D.clone(),J[F]=X),D=X}return D.visible=T.visible,D.wireframe=T.wireframe,R===Jl?D.side=T.shadowSide!==null?T.shadowSide:T.side:D.side=T.shadowSide!==null?T.shadowSide:d[T.side],D.alphaMap=T.alphaMap,D.alphaTest=T.alphaTest,D.map=T.map,D.clipShadows=T.clipShadows,D.clippingPlanes=T.clippingPlanes,D.clipIntersection=T.clipIntersection,D.displacementMap=T.displacementMap,D.displacementScale=T.displacementScale,D.displacementBias=T.displacementBias,D.wireframeLinewidth=T.wireframeLinewidth,D.linewidth=T.linewidth,I.isPointLight===!0&&D.isMeshDistanceMaterial===!0&&(D.referencePosition.setFromMatrixPosition(I.matrixWorld),D.nearDistance=L,D.farDistance=b),D}function S(M,T,I,L,b){if(M.visible===!1)return;if(M.layers.test(T.layers)&&(M.isMesh||M.isLine||M.isPoints)&&(M.castShadow||M.receiveShadow&&b===Jl)&&(!M.frustumCulled||r.intersectsObject(M))){M.modelViewMatrix.multiplyMatrices(I.matrixWorldInverse,M.matrixWorld);const G=e.update(M),V=M.material;if(Array.isArray(V)){const F=G.groups;for(let J=0,X=F.length;J<X;J++){const ne=F[J],le=V[ne.materialIndex];if(le&&le.visible){const U=w(M,le,L,I.near,I.far,b);n.renderBufferDirect(I,null,G,U,M,ne)}}}else if(V.visible){const F=w(M,V,L,I.near,I.far,b);n.renderBufferDirect(I,null,G,F,M,null)}}const D=M.children;for(let G=0,V=D.length;G<V;G++)S(D[G],T,I,L,b)}}function BJ(n,e,t){const r=t.isWebGL2;function i(){let Y=!1;const de=new Ht;let Se=null;const Ke=new Ht(0,0,0,0);return{setMask:function(Ze){Se!==Ze&&!Y&&(n.colorMask(Ze,Ze,Ze,Ze),Se=Ze)},setLocked:function(Ze){Y=Ze},setClear:function(Ze,nn,zn,Ar,Ei){Ei===!0&&(Ze*=Ar,nn*=Ar,zn*=Ar),de.set(Ze,nn,zn,Ar),Ke.equals(de)===!1&&(n.clearColor(Ze,nn,zn,Ar),Ke.copy(de))},reset:function(){Y=!1,Se=null,Ke.set(-1,0,0,0)}}}function s(){let Y=!1,de=null,Se=null,Ke=null;return{setTest:function(Ze){Ze?Ae(2929):Oe(2929)},setMask:function(Ze){de!==Ze&&!Y&&(n.depthMask(Ze),de=Ze)},setFunc:function(Ze){if(Se!==Ze){switch(Ze){case nk:n.depthFunc(512);break;case rk:n.depthFunc(519);break;case ik:n.depthFunc(513);break;case Gv:n.depthFunc(515);break;case sk:n.depthFunc(514);break;case ok:n.depthFunc(518);break;case ak:n.depthFunc(516);break;case lk:n.depthFunc(517);break;default:n.depthFunc(515)}Se=Ze}},setLocked:function(Ze){Y=Ze},setClear:function(Ze){Ke!==Ze&&(n.clearDepth(Ze),Ke=Ze)},reset:function(){Y=!1,de=null,Se=null,Ke=null}}}function o(){let Y=!1,de=null,Se=null,Ke=null,Ze=null,nn=null,zn=null,Ar=null,Ei=null;return{setTest:function(mn){Y||(mn?Ae(2960):Oe(2960))},setMask:function(mn){de!==mn&&!Y&&(n.stencilMask(mn),de=mn)},setFunc:function(mn,Yr,Ji){(Se!==mn||Ke!==Yr||Ze!==Ji)&&(n.stencilFunc(mn,Yr,Ji),Se=mn,Ke=Yr,Ze=Ji)},setOp:function(mn,Yr,Ji){(nn!==mn||zn!==Yr||Ar!==Ji)&&(n.stencilOp(mn,Yr,Ji),nn=mn,zn=Yr,Ar=Ji)},setLocked:function(mn){Y=mn},setClear:function(mn){Ei!==mn&&(n.clearStencil(mn),Ei=mn)},reset:function(){Y=!1,de=null,Se=null,Ke=null,Ze=null,nn=null,zn=null,Ar=null,Ei=null}}}const a=new i,l=new s,c=new o,h=new WeakMap,d=new WeakMap;let p={},m={},y=new WeakMap,g=[],_=null,x=!1,w=null,S=null,M=null,T=null,I=null,L=null,b=null,R=!1,D=null,G=null,V=null,F=null,J=null;const X=n.getParameter(35661);let ne=!1,le=0;const U=n.getParameter(7938);U.indexOf("WebGL")!==-1?(le=parseFloat(/^WebGL (\d)/.exec(U)[1]),ne=le>=1):U.indexOf("OpenGL ES")!==-1&&(le=parseFloat(/^OpenGL ES (\d)/.exec(U)[1]),ne=le>=2);let W=null,B={};const ie=n.getParameter(3088),z=n.getParameter(2978),te=new Ht().fromArray(ie),ae=new Ht().fromArray(z);function Q(Y,de,Se){const Ke=new Uint8Array(4),Ze=n.createTexture();n.bindTexture(Y,Ze),n.texParameteri(Y,10241,9728),n.texParameteri(Y,10240,9728);for(let nn=0;nn<Se;nn++)n.texImage2D(de+nn,0,6408,1,1,0,6408,5121,Ke);return Ze}const we={};we[3553]=Q(3553,3553,1),we[34067]=Q(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),Ae(2929),l.setFunc(Gv),Te(!1),Fe(yA),Ae(2884),xe(Vo);function Ae(Y){p[Y]!==!0&&(n.enable(Y),p[Y]=!0)}function Oe(Y){p[Y]!==!1&&(n.disable(Y),p[Y]=!1)}function ze(Y,de){return m[Y]!==de?(n.bindFramebuffer(Y,de),m[Y]=de,r&&(Y===36009&&(m[36160]=de),Y===36160&&(m[36009]=de)),!0):!1}function be(Y,de){let Se=g,Ke=!1;if(Y)if(Se=y.get(de),Se===void 0&&(Se=[],y.set(de,Se)),Y.isWebGLMultipleRenderTargets){const Ze=Y.texture;if(Se.length!==Ze.length||Se[0]!==36064){for(let nn=0,zn=Ze.length;nn<zn;nn++)Se[nn]=36064+nn;Se.length=Ze.length,Ke=!0}}else Se[0]!==36064&&(Se[0]=36064,Ke=!0);else Se[0]!==1029&&(Se[0]=1029,Ke=!0);Ke&&(t.isWebGL2?n.drawBuffers(Se):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Se))}function Ee(Y){return _!==Y?(n.useProgram(Y),_=Y,!0):!1}const he={[Hl]:32774,[jO]:32778,[$O]:32779};if(r)he[wA]=32775,he[SA]=32776;else{const Y=e.get("EXT_blend_minmax");Y!==null&&(he[wA]=Y.MIN_EXT,he[SA]=Y.MAX_EXT)}const fe={[JO]:0,[KO]:1,[XO]:768,[oC]:770,[tk]:776,[ZO]:774,[QO]:772,[qO]:769,[aC]:771,[ek]:775,[YO]:773};function xe(Y,de,Se,Ke,Ze,nn,zn,Ar){if(Y===Vo){x===!0&&(Oe(3042),x=!1);return}if(x===!1&&(Ae(3042),x=!0),Y!==WO){if(Y!==w||Ar!==R){if((S!==Hl||I!==Hl)&&(n.blendEquation(32774),S=Hl,I=Hl),Ar)switch(Y){case ic:n.blendFuncSeparate(1,771,1,771);break;case vA:n.blendFunc(1,1);break;case _A:n.blendFuncSeparate(0,769,0,1);break;case xA:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Y);break}else switch(Y){case ic:n.blendFuncSeparate(770,771,1,771);break;case vA:n.blendFunc(770,1);break;case _A:n.blendFuncSeparate(0,769,0,1);break;case xA:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Y);break}M=null,T=null,L=null,b=null,w=Y,R=Ar}return}Ze=Ze||de,nn=nn||Se,zn=zn||Ke,(de!==S||Ze!==I)&&(n.blendEquationSeparate(he[de],he[Ze]),S=de,I=Ze),(Se!==M||Ke!==T||nn!==L||zn!==b)&&(n.blendFuncSeparate(fe[Se],fe[Ke],fe[nn],fe[zn]),M=Se,T=Ke,L=nn,b=zn),w=Y,R=!1}function Ge(Y,de){Y.side===Ds?Oe(2884):Ae(2884);let Se=Y.side===Ai;de&&(Se=!Se),Te(Se),Y.blending===ic&&Y.transparent===!1?xe(Vo):xe(Y.blending,Y.blendEquation,Y.blendSrc,Y.blendDst,Y.blendEquationAlpha,Y.blendSrcAlpha,Y.blendDstAlpha,Y.premultipliedAlpha),l.setFunc(Y.depthFunc),l.setTest(Y.depthTest),l.setMask(Y.depthWrite),a.setMask(Y.colorWrite);const Ke=Y.stencilWrite;c.setTest(Ke),Ke&&(c.setMask(Y.stencilWriteMask),c.setFunc(Y.stencilFunc,Y.stencilRef,Y.stencilFuncMask),c.setOp(Y.stencilFail,Y.stencilZFail,Y.stencilZPass)),Qe(Y.polygonOffset,Y.polygonOffsetFactor,Y.polygonOffsetUnits),Y.alphaToCoverage===!0?Ae(32926):Oe(32926)}function Te(Y){D!==Y&&(Y?n.frontFace(2304):n.frontFace(2305),D=Y)}function Fe(Y){Y!==GO?(Ae(2884),Y!==G&&(Y===yA?n.cullFace(1029):Y===HO?n.cullFace(1028):n.cullFace(1032))):Oe(2884),G=Y}function Je(Y){Y!==V&&(ne&&n.lineWidth(Y),V=Y)}function Qe(Y,de,Se){Y?(Ae(32823),(F!==de||J!==Se)&&(n.polygonOffset(de,Se),F=de,J=Se)):Oe(32823)}function ft(Y){Y?Ae(3089):Oe(3089)}function wt(Y){Y===void 0&&(Y=33984+X-1),W!==Y&&(n.activeTexture(Y),W=Y)}function j(Y,de,Se){Se===void 0&&(W===null?Se=33984+X-1:Se=W);let Ke=B[Se];Ke===void 0&&(Ke={type:void 0,texture:void 0},B[Se]=Ke),(Ke.type!==Y||Ke.texture!==de)&&(W!==Se&&(n.activeTexture(Se),W=Se),n.bindTexture(Y,de||we[Y]),Ke.type=Y,Ke.texture=de)}function O(){const Y=B[W];Y!==void 0&&Y.type!==void 0&&(n.bindTexture(Y.type,null),Y.type=void 0,Y.texture=void 0)}function ce(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function Pe(){try{n.compressedTexImage3D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function Re(){try{n.texSubImage2D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function Ne(){try{n.texSubImage3D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function rt(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function je(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function _e(){try{n.texStorage2D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function st(){try{n.texStorage3D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function K(){try{n.texImage2D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function ge(){try{n.texImage3D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function Me(Y){te.equals(Y)===!1&&(n.scissor(Y.x,Y.y,Y.z,Y.w),te.copy(Y))}function Be(Y){ae.equals(Y)===!1&&(n.viewport(Y.x,Y.y,Y.z,Y.w),ae.copy(Y))}function lt(Y,de){let Se=d.get(de);Se===void 0&&(Se=new WeakMap,d.set(de,Se));let Ke=Se.get(Y);Ke===void 0&&(Ke=n.getUniformBlockIndex(de,Y.name),Se.set(Y,Ke))}function Pt(Y,de){const Ke=d.get(de).get(Y);h.get(de)!==Ke&&(n.uniformBlockBinding(de,Ke,Y.__bindingPointIndex),h.set(de,Ke))}function un(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),r===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},W=null,B={},m={},y=new WeakMap,g=[],_=null,x=!1,w=null,S=null,M=null,T=null,I=null,L=null,b=null,R=!1,D=null,G=null,V=null,F=null,J=null,te.set(0,0,n.canvas.width,n.canvas.height),ae.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:Ae,disable:Oe,bindFramebuffer:ze,drawBuffers:be,useProgram:Ee,setBlending:xe,setMaterial:Ge,setFlipSided:Te,setCullFace:Fe,setLineWidth:Je,setPolygonOffset:Qe,setScissorTest:ft,activeTexture:wt,bindTexture:j,unbindTexture:O,compressedTexImage2D:ce,compressedTexImage3D:Pe,texImage2D:K,texImage3D:ge,updateUBOMapping:lt,uniformBlockBinding:Pt,texStorage2D:_e,texStorage3D:st,texSubImage2D:Re,texSubImage3D:Ne,compressedTexSubImage2D:rt,compressedTexSubImage3D:je,scissor:Me,viewport:Be,reset:un}}function OJ(n,e,t,r,i,s,o){const a=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,h=i.maxTextureSize,d=i.maxSamples,p=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,m=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),y=new WeakMap;let g;const _=new WeakMap;let x=!1;try{x=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function w(j,O){return x?new OffscreenCanvas(j,O):ep("canvas")}function S(j,O,ce,Pe){let Re=1;if((j.width>Pe||j.height>Pe)&&(Re=Pe/Math.max(j.width,j.height)),Re<1||O===!0)if(typeof HTMLImageElement<"u"&&j instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&j instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&j instanceof ImageBitmap){const Ne=O?Uk:Math.floor,rt=Ne(Re*j.width),je=Ne(Re*j.height);g===void 0&&(g=w(rt,je));const _e=ce?w(rt,je):g;return _e.width=rt,_e.height=je,_e.getContext("2d").drawImage(j,0,0,rt,je),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+j.width+"x"+j.height+") to ("+rt+"x"+je+")."),_e}else return"data"in j&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+j.width+"x"+j.height+")."),j;return j}function M(j){return JA(j.width)&&JA(j.height)}function T(j){return a?!1:j.wrapS!==or||j.wrapT!==or||j.minFilter!==Fn&&j.minFilter!==Cn}function I(j,O){return j.generateMipmaps&&O&&j.minFilter!==Fn&&j.minFilter!==Cn}function L(j){n.generateMipmap(j)}function b(j,O,ce,Pe,Re=!1){if(a===!1)return O;if(j!==null){if(n[j]!==void 0)return n[j];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+j+"'")}let Ne=O;return O===6403&&(ce===5126&&(Ne=33326),ce===5131&&(Ne=33325),ce===5121&&(Ne=33321)),O===33319&&(ce===5126&&(Ne=33328),ce===5131&&(Ne=33327),ce===5121&&(Ne=33323)),O===6408&&(ce===5126&&(Ne=34836),ce===5131&&(Ne=34842),ce===5121&&(Ne=Pe===bt&&Re===!1?35907:32856),ce===32819&&(Ne=32854),ce===32820&&(Ne=32855)),(Ne===33325||Ne===33326||Ne===33327||Ne===33328||Ne===34842||Ne===34836)&&e.get("EXT_color_buffer_float"),Ne}function R(j,O,ce){return I(j,ce)===!0||j.isFramebufferTexture&&j.minFilter!==Fn&&j.minFilter!==Cn?Math.log2(Math.max(O.width,O.height))+1:j.mipmaps!==void 0&&j.mipmaps.length>0?j.mipmaps.length:j.isCompressedTexture&&Array.isArray(j.image)?O.mipmaps.length:1}function D(j){return j===Fn||j===qd||j===Qu?9728:9729}function G(j){const O=j.target;O.removeEventListener("dispose",G),F(O),O.isVideoTexture&&y.delete(O)}function V(j){const O=j.target;O.removeEventListener("dispose",V),X(O)}function F(j){const O=r.get(j);if(O.__webglInit===void 0)return;const ce=j.source,Pe=_.get(ce);if(Pe){const Re=Pe[O.__cacheKey];Re.usedTimes--,Re.usedTimes===0&&J(j),Object.keys(Pe).length===0&&_.delete(ce)}r.remove(j)}function J(j){const O=r.get(j);n.deleteTexture(O.__webglTexture);const ce=j.source,Pe=_.get(ce);delete Pe[O.__cacheKey],o.memory.textures--}function X(j){const O=j.texture,ce=r.get(j),Pe=r.get(O);if(Pe.__webglTexture!==void 0&&(n.deleteTexture(Pe.__webglTexture),o.memory.textures--),j.depthTexture&&j.depthTexture.dispose(),j.isWebGLCubeRenderTarget)for(let Re=0;Re<6;Re++)n.deleteFramebuffer(ce.__webglFramebuffer[Re]),ce.__webglDepthbuffer&&n.deleteRenderbuffer(ce.__webglDepthbuffer[Re]);else{if(n.deleteFramebuffer(ce.__webglFramebuffer),ce.__webglDepthbuffer&&n.deleteRenderbuffer(ce.__webglDepthbuffer),ce.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ce.__webglMultisampledFramebuffer),ce.__webglColorRenderbuffer)for(let Re=0;Re<ce.__webglColorRenderbuffer.length;Re++)ce.__webglColorRenderbuffer[Re]&&n.deleteRenderbuffer(ce.__webglColorRenderbuffer[Re]);ce.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ce.__webglDepthRenderbuffer)}if(j.isWebGLMultipleRenderTargets)for(let Re=0,Ne=O.length;Re<Ne;Re++){const rt=r.get(O[Re]);rt.__webglTexture&&(n.deleteTexture(rt.__webglTexture),o.memory.textures--),r.remove(O[Re])}r.remove(O),r.remove(j)}let ne=0;function le(){ne=0}function U(){const j=ne;return j>=l&&console.warn("THREE.WebGLTextures: Trying to use "+j+" texture units while this GPU supports only "+l),ne+=1,j}function W(j){const O=[];return O.push(j.wrapS),O.push(j.wrapT),O.push(j.wrapR||0),O.push(j.magFilter),O.push(j.minFilter),O.push(j.anisotropy),O.push(j.internalFormat),O.push(j.format),O.push(j.type),O.push(j.generateMipmaps),O.push(j.premultiplyAlpha),O.push(j.flipY),O.push(j.unpackAlignment),O.push(j.encoding),O.join()}function B(j,O){const ce=r.get(j);if(j.isVideoTexture&&ft(j),j.isRenderTargetTexture===!1&&j.version>0&&ce.__version!==j.version){const Pe=j.image;if(Pe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Pe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Oe(ce,j,O);return}}t.bindTexture(3553,ce.__webglTexture,33984+O)}function ie(j,O){const ce=r.get(j);if(j.version>0&&ce.__version!==j.version){Oe(ce,j,O);return}t.bindTexture(35866,ce.__webglTexture,33984+O)}function z(j,O){const ce=r.get(j);if(j.version>0&&ce.__version!==j.version){Oe(ce,j,O);return}t.bindTexture(32879,ce.__webglTexture,33984+O)}function te(j,O){const ce=r.get(j);if(j.version>0&&ce.__version!==j.version){ze(ce,j,O);return}t.bindTexture(34067,ce.__webglTexture,33984+O)}const ae={[uo]:10497,[or]:33071,[_h]:33648},Q={[Fn]:9728,[qd]:9984,[Qu]:9986,[Cn]:9729,[F0]:9985,[ho]:9987};function we(j,O,ce){if(ce?(n.texParameteri(j,10242,ae[O.wrapS]),n.texParameteri(j,10243,ae[O.wrapT]),(j===32879||j===35866)&&n.texParameteri(j,32882,ae[O.wrapR]),n.texParameteri(j,10240,Q[O.magFilter]),n.texParameteri(j,10241,Q[O.minFilter])):(n.texParameteri(j,10242,33071),n.texParameteri(j,10243,33071),(j===32879||j===35866)&&n.texParameteri(j,32882,33071),(O.wrapS!==or||O.wrapT!==or)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(j,10240,D(O.magFilter)),n.texParameteri(j,10241,D(O.minFilter)),O.minFilter!==Fn&&O.minFilter!==Cn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const Pe=e.get("EXT_texture_filter_anisotropic");if(O.magFilter===Fn||O.minFilter!==Qu&&O.minFilter!==ho||O.type===Uo&&e.has("OES_texture_float_linear")===!1||a===!1&&O.type===xh&&e.has("OES_texture_half_float_linear")===!1)return;(O.anisotropy>1||r.get(O).__currentAnisotropy)&&(n.texParameterf(j,Pe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(O.anisotropy,i.getMaxAnisotropy())),r.get(O).__currentAnisotropy=O.anisotropy)}}function Ae(j,O){let ce=!1;j.__webglInit===void 0&&(j.__webglInit=!0,O.addEventListener("dispose",G));const Pe=O.source;let Re=_.get(Pe);Re===void 0&&(Re={},_.set(Pe,Re));const Ne=W(O);if(Ne!==j.__cacheKey){Re[Ne]===void 0&&(Re[Ne]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ce=!0),Re[Ne].usedTimes++;const rt=Re[j.__cacheKey];rt!==void 0&&(Re[j.__cacheKey].usedTimes--,rt.usedTimes===0&&J(O)),j.__cacheKey=Ne,j.__webglTexture=Re[Ne].texture}return ce}function Oe(j,O,ce){let Pe=3553;(O.isDataArrayTexture||O.isCompressedArrayTexture)&&(Pe=35866),O.isData3DTexture&&(Pe=32879);const Re=Ae(j,O),Ne=O.source;t.bindTexture(Pe,j.__webglTexture,33984+ce);const rt=r.get(Ne);if(Ne.version!==rt.__version||Re===!0){t.activeTexture(33984+ce),n.pixelStorei(37440,O.flipY),n.pixelStorei(37441,O.premultiplyAlpha),n.pixelStorei(3317,O.unpackAlignment),n.pixelStorei(37443,0);const je=T(O)&&M(O.image)===!1;let _e=S(O.image,je,!1,h);_e=wt(O,_e);const st=M(_e)||a,K=s.convert(O.format,O.encoding);let ge=s.convert(O.type),Me=b(O.internalFormat,K,ge,O.encoding,O.isVideoTexture);we(Pe,O,st);let Be;const lt=O.mipmaps,Pt=a&&O.isVideoTexture!==!0,un=rt.__version===void 0||Re===!0,Y=R(O,_e,st);if(O.isDepthTexture)Me=6402,a?O.type===Uo?Me=36012:O.type===La?Me=33190:O.type===sc?Me=35056:Me=33189:O.type===Uo&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),O.format===Ja&&Me===6402&&O.type!==cC&&O.type!==La&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),O.type=La,ge=s.convert(O.type)),O.format===vc&&Me===6402&&(Me=34041,O.type!==sc&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),O.type=sc,ge=s.convert(O.type))),un&&(Pt?t.texStorage2D(3553,1,Me,_e.width,_e.height):t.texImage2D(3553,0,Me,_e.width,_e.height,0,K,ge,null));else if(O.isDataTexture)if(lt.length>0&&st){Pt&&un&&t.texStorage2D(3553,Y,Me,lt[0].width,lt[0].height);for(let de=0,Se=lt.length;de<Se;de++)Be=lt[de],Pt?t.texSubImage2D(3553,de,0,0,Be.width,Be.height,K,ge,Be.data):t.texImage2D(3553,de,Me,Be.width,Be.height,0,K,ge,Be.data);O.generateMipmaps=!1}else Pt?(un&&t.texStorage2D(3553,Y,Me,_e.width,_e.height),t.texSubImage2D(3553,0,0,0,_e.width,_e.height,K,ge,_e.data)):t.texImage2D(3553,0,Me,_e.width,_e.height,0,K,ge,_e.data);else if(O.isCompressedTexture)if(O.isCompressedArrayTexture){Pt&&un&&t.texStorage3D(35866,Y,Me,lt[0].width,lt[0].height,_e.depth);for(let de=0,Se=lt.length;de<Se;de++)Be=lt[de],O.format!==vi?K!==null?Pt?t.compressedTexSubImage3D(35866,de,0,0,0,Be.width,Be.height,_e.depth,K,Be.data,0,0):t.compressedTexImage3D(35866,de,Me,Be.width,Be.height,_e.depth,0,Be.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Pt?t.texSubImage3D(35866,de,0,0,0,Be.width,Be.height,_e.depth,K,ge,Be.data):t.texImage3D(35866,de,Me,Be.width,Be.height,_e.depth,0,K,ge,Be.data)}else{Pt&&un&&t.texStorage2D(3553,Y,Me,lt[0].width,lt[0].height);for(let de=0,Se=lt.length;de<Se;de++)Be=lt[de],O.format!==vi?K!==null?Pt?t.compressedTexSubImage2D(3553,de,0,0,Be.width,Be.height,K,Be.data):t.compressedTexImage2D(3553,de,Me,Be.width,Be.height,0,Be.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Pt?t.texSubImage2D(3553,de,0,0,Be.width,Be.height,K,ge,Be.data):t.texImage2D(3553,de,Me,Be.width,Be.height,0,K,ge,Be.data)}else if(O.isDataArrayTexture)Pt?(un&&t.texStorage3D(35866,Y,Me,_e.width,_e.height,_e.depth),t.texSubImage3D(35866,0,0,0,0,_e.width,_e.height,_e.depth,K,ge,_e.data)):t.texImage3D(35866,0,Me,_e.width,_e.height,_e.depth,0,K,ge,_e.data);else if(O.isData3DTexture)Pt?(un&&t.texStorage3D(32879,Y,Me,_e.width,_e.height,_e.depth),t.texSubImage3D(32879,0,0,0,0,_e.width,_e.height,_e.depth,K,ge,_e.data)):t.texImage3D(32879,0,Me,_e.width,_e.height,_e.depth,0,K,ge,_e.data);else if(O.isFramebufferTexture){if(un)if(Pt)t.texStorage2D(3553,Y,Me,_e.width,_e.height);else{let de=_e.width,Se=_e.height;for(let Ke=0;Ke<Y;Ke++)t.texImage2D(3553,Ke,Me,de,Se,0,K,ge,null),de>>=1,Se>>=1}}else if(lt.length>0&&st){Pt&&un&&t.texStorage2D(3553,Y,Me,lt[0].width,lt[0].height);for(let de=0,Se=lt.length;de<Se;de++)Be=lt[de],Pt?t.texSubImage2D(3553,de,0,0,K,ge,Be):t.texImage2D(3553,de,Me,K,ge,Be);O.generateMipmaps=!1}else Pt?(un&&t.texStorage2D(3553,Y,Me,_e.width,_e.height),t.texSubImage2D(3553,0,0,0,K,ge,_e)):t.texImage2D(3553,0,Me,K,ge,_e);I(O,st)&&L(Pe),rt.__version=Ne.version,O.onUpdate&&O.onUpdate(O)}j.__version=O.version}function ze(j,O,ce){if(O.image.length!==6)return;const Pe=Ae(j,O),Re=O.source;t.bindTexture(34067,j.__webglTexture,33984+ce);const Ne=r.get(Re);if(Re.version!==Ne.__version||Pe===!0){t.activeTexture(33984+ce),n.pixelStorei(37440,O.flipY),n.pixelStorei(37441,O.premultiplyAlpha),n.pixelStorei(3317,O.unpackAlignment),n.pixelStorei(37443,0);const rt=O.isCompressedTexture||O.image[0].isCompressedTexture,je=O.image[0]&&O.image[0].isDataTexture,_e=[];for(let de=0;de<6;de++)!rt&&!je?_e[de]=S(O.image[de],!1,!0,c):_e[de]=je?O.image[de].image:O.image[de],_e[de]=wt(O,_e[de]);const st=_e[0],K=M(st)||a,ge=s.convert(O.format,O.encoding),Me=s.convert(O.type),Be=b(O.internalFormat,ge,Me,O.encoding),lt=a&&O.isVideoTexture!==!0,Pt=Ne.__version===void 0||Pe===!0;let un=R(O,st,K);we(34067,O,K);let Y;if(rt){lt&&Pt&&t.texStorage2D(34067,un,Be,st.width,st.height);for(let de=0;de<6;de++){Y=_e[de].mipmaps;for(let Se=0;Se<Y.length;Se++){const Ke=Y[Se];O.format!==vi?ge!==null?lt?t.compressedTexSubImage2D(34069+de,Se,0,0,Ke.width,Ke.height,ge,Ke.data):t.compressedTexImage2D(34069+de,Se,Be,Ke.width,Ke.height,0,Ke.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):lt?t.texSubImage2D(34069+de,Se,0,0,Ke.width,Ke.height,ge,Me,Ke.data):t.texImage2D(34069+de,Se,Be,Ke.width,Ke.height,0,ge,Me,Ke.data)}}}else{Y=O.mipmaps,lt&&Pt&&(Y.length>0&&un++,t.texStorage2D(34067,un,Be,_e[0].width,_e[0].height));for(let de=0;de<6;de++)if(je){lt?t.texSubImage2D(34069+de,0,0,0,_e[de].width,_e[de].height,ge,Me,_e[de].data):t.texImage2D(34069+de,0,Be,_e[de].width,_e[de].height,0,ge,Me,_e[de].data);for(let Se=0;Se<Y.length;Se++){const Ze=Y[Se].image[de].image;lt?t.texSubImage2D(34069+de,Se+1,0,0,Ze.width,Ze.height,ge,Me,Ze.data):t.texImage2D(34069+de,Se+1,Be,Ze.width,Ze.height,0,ge,Me,Ze.data)}}else{lt?t.texSubImage2D(34069+de,0,0,0,ge,Me,_e[de]):t.texImage2D(34069+de,0,Be,ge,Me,_e[de]);for(let Se=0;Se<Y.length;Se++){const Ke=Y[Se];lt?t.texSubImage2D(34069+de,Se+1,0,0,ge,Me,Ke.image[de]):t.texImage2D(34069+de,Se+1,Be,ge,Me,Ke.image[de])}}}I(O,K)&&L(34067),Ne.__version=Re.version,O.onUpdate&&O.onUpdate(O)}j.__version=O.version}function be(j,O,ce,Pe,Re){const Ne=s.convert(ce.format,ce.encoding),rt=s.convert(ce.type),je=b(ce.internalFormat,Ne,rt,ce.encoding);r.get(O).__hasExternalTextures||(Re===32879||Re===35866?t.texImage3D(Re,0,je,O.width,O.height,O.depth,0,Ne,rt,null):t.texImage2D(Re,0,je,O.width,O.height,0,Ne,rt,null)),t.bindFramebuffer(36160,j),Qe(O)?p.framebufferTexture2DMultisampleEXT(36160,Pe,Re,r.get(ce).__webglTexture,0,Je(O)):(Re===3553||Re>=34069&&Re<=34074)&&n.framebufferTexture2D(36160,Pe,Re,r.get(ce).__webglTexture,0),t.bindFramebuffer(36160,null)}function Ee(j,O,ce){if(n.bindRenderbuffer(36161,j),O.depthBuffer&&!O.stencilBuffer){let Pe=33189;if(ce||Qe(O)){const Re=O.depthTexture;Re&&Re.isDepthTexture&&(Re.type===Uo?Pe=36012:Re.type===La&&(Pe=33190));const Ne=Je(O);Qe(O)?p.renderbufferStorageMultisampleEXT(36161,Ne,Pe,O.width,O.height):n.renderbufferStorageMultisample(36161,Ne,Pe,O.width,O.height)}else n.renderbufferStorage(36161,Pe,O.width,O.height);n.framebufferRenderbuffer(36160,36096,36161,j)}else if(O.depthBuffer&&O.stencilBuffer){const Pe=Je(O);ce&&Qe(O)===!1?n.renderbufferStorageMultisample(36161,Pe,35056,O.width,O.height):Qe(O)?p.renderbufferStorageMultisampleEXT(36161,Pe,35056,O.width,O.height):n.renderbufferStorage(36161,34041,O.width,O.height),n.framebufferRenderbuffer(36160,33306,36161,j)}else{const Pe=O.isWebGLMultipleRenderTargets===!0?O.texture:[O.texture];for(let Re=0;Re<Pe.length;Re++){const Ne=Pe[Re],rt=s.convert(Ne.format,Ne.encoding),je=s.convert(Ne.type),_e=b(Ne.internalFormat,rt,je,Ne.encoding),st=Je(O);ce&&Qe(O)===!1?n.renderbufferStorageMultisample(36161,st,_e,O.width,O.height):Qe(O)?p.renderbufferStorageMultisampleEXT(36161,st,_e,O.width,O.height):n.renderbufferStorage(36161,_e,O.width,O.height)}}n.bindRenderbuffer(36161,null)}function he(j,O){if(O&&O.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,j),!(O.depthTexture&&O.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(O.depthTexture).__webglTexture||O.depthTexture.image.width!==O.width||O.depthTexture.image.height!==O.height)&&(O.depthTexture.image.width=O.width,O.depthTexture.image.height=O.height,O.depthTexture.needsUpdate=!0),B(O.depthTexture,0);const Pe=r.get(O.depthTexture).__webglTexture,Re=Je(O);if(O.depthTexture.format===Ja)Qe(O)?p.framebufferTexture2DMultisampleEXT(36160,36096,3553,Pe,0,Re):n.framebufferTexture2D(36160,36096,3553,Pe,0);else if(O.depthTexture.format===vc)Qe(O)?p.framebufferTexture2DMultisampleEXT(36160,33306,3553,Pe,0,Re):n.framebufferTexture2D(36160,33306,3553,Pe,0);else throw new Error("Unknown depthTexture format")}function fe(j){const O=r.get(j),ce=j.isWebGLCubeRenderTarget===!0;if(j.depthTexture&&!O.__autoAllocateDepthBuffer){if(ce)throw new Error("target.depthTexture not supported in Cube render targets");he(O.__webglFramebuffer,j)}else if(ce){O.__webglDepthbuffer=[];for(let Pe=0;Pe<6;Pe++)t.bindFramebuffer(36160,O.__webglFramebuffer[Pe]),O.__webglDepthbuffer[Pe]=n.createRenderbuffer(),Ee(O.__webglDepthbuffer[Pe],j,!1)}else t.bindFramebuffer(36160,O.__webglFramebuffer),O.__webglDepthbuffer=n.createRenderbuffer(),Ee(O.__webglDepthbuffer,j,!1);t.bindFramebuffer(36160,null)}function xe(j,O,ce){const Pe=r.get(j);O!==void 0&&be(Pe.__webglFramebuffer,j,j.texture,36064,3553),ce!==void 0&&fe(j)}function Ge(j){const O=j.texture,ce=r.get(j),Pe=r.get(O);j.addEventListener("dispose",V),j.isWebGLMultipleRenderTargets!==!0&&(Pe.__webglTexture===void 0&&(Pe.__webglTexture=n.createTexture()),Pe.__version=O.version,o.memory.textures++);const Re=j.isWebGLCubeRenderTarget===!0,Ne=j.isWebGLMultipleRenderTargets===!0,rt=M(j)||a;if(Re){ce.__webglFramebuffer=[];for(let je=0;je<6;je++)ce.__webglFramebuffer[je]=n.createFramebuffer()}else{if(ce.__webglFramebuffer=n.createFramebuffer(),Ne)if(i.drawBuffers){const je=j.texture;for(let _e=0,st=je.length;_e<st;_e++){const K=r.get(je[_e]);K.__webglTexture===void 0&&(K.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&j.samples>0&&Qe(j)===!1){const je=Ne?O:[O];ce.__webglMultisampledFramebuffer=n.createFramebuffer(),ce.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,ce.__webglMultisampledFramebuffer);for(let _e=0;_e<je.length;_e++){const st=je[_e];ce.__webglColorRenderbuffer[_e]=n.createRenderbuffer(),n.bindRenderbuffer(36161,ce.__webglColorRenderbuffer[_e]);const K=s.convert(st.format,st.encoding),ge=s.convert(st.type),Me=b(st.internalFormat,K,ge,st.encoding,j.isXRRenderTarget===!0),Be=Je(j);n.renderbufferStorageMultisample(36161,Be,Me,j.width,j.height),n.framebufferRenderbuffer(36160,36064+_e,36161,ce.__webglColorRenderbuffer[_e])}n.bindRenderbuffer(36161,null),j.depthBuffer&&(ce.__webglDepthRenderbuffer=n.createRenderbuffer(),Ee(ce.__webglDepthRenderbuffer,j,!0)),t.bindFramebuffer(36160,null)}}if(Re){t.bindTexture(34067,Pe.__webglTexture),we(34067,O,rt);for(let je=0;je<6;je++)be(ce.__webglFramebuffer[je],j,O,36064,34069+je);I(O,rt)&&L(34067),t.unbindTexture()}else if(Ne){const je=j.texture;for(let _e=0,st=je.length;_e<st;_e++){const K=je[_e],ge=r.get(K);t.bindTexture(3553,ge.__webglTexture),we(3553,K,rt),be(ce.__webglFramebuffer,j,K,36064+_e,3553),I(K,rt)&&L(3553)}t.unbindTexture()}else{let je=3553;(j.isWebGL3DRenderTarget||j.isWebGLArrayRenderTarget)&&(a?je=j.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(je,Pe.__webglTexture),we(je,O,rt),be(ce.__webglFramebuffer,j,O,36064,je),I(O,rt)&&L(je),t.unbindTexture()}j.depthBuffer&&fe(j)}function Te(j){const O=M(j)||a,ce=j.isWebGLMultipleRenderTargets===!0?j.texture:[j.texture];for(let Pe=0,Re=ce.length;Pe<Re;Pe++){const Ne=ce[Pe];if(I(Ne,O)){const rt=j.isWebGLCubeRenderTarget?34067:3553,je=r.get(Ne).__webglTexture;t.bindTexture(rt,je),L(rt),t.unbindTexture()}}}function Fe(j){if(a&&j.samples>0&&Qe(j)===!1){const O=j.isWebGLMultipleRenderTargets?j.texture:[j.texture],ce=j.width,Pe=j.height;let Re=16384;const Ne=[],rt=j.stencilBuffer?33306:36096,je=r.get(j),_e=j.isWebGLMultipleRenderTargets===!0;if(_e)for(let st=0;st<O.length;st++)t.bindFramebuffer(36160,je.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+st,36161,null),t.bindFramebuffer(36160,je.__webglFramebuffer),n.framebufferTexture2D(36009,36064+st,3553,null,0);t.bindFramebuffer(36008,je.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,je.__webglFramebuffer);for(let st=0;st<O.length;st++){Ne.push(36064+st),j.depthBuffer&&Ne.push(rt);const K=je.__ignoreDepthValues!==void 0?je.__ignoreDepthValues:!1;if(K===!1&&(j.depthBuffer&&(Re|=256),j.stencilBuffer&&(Re|=1024)),_e&&n.framebufferRenderbuffer(36008,36064,36161,je.__webglColorRenderbuffer[st]),K===!0&&(n.invalidateFramebuffer(36008,[rt]),n.invalidateFramebuffer(36009,[rt])),_e){const ge=r.get(O[st]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,ge,0)}n.blitFramebuffer(0,0,ce,Pe,0,0,ce,Pe,Re,9728),m&&n.invalidateFramebuffer(36008,Ne)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),_e)for(let st=0;st<O.length;st++){t.bindFramebuffer(36160,je.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+st,36161,je.__webglColorRenderbuffer[st]);const K=r.get(O[st]).__webglTexture;t.bindFramebuffer(36160,je.__webglFramebuffer),n.framebufferTexture2D(36009,36064+st,3553,K,0)}t.bindFramebuffer(36009,je.__webglMultisampledFramebuffer)}}function Je(j){return Math.min(d,j.samples)}function Qe(j){const O=r.get(j);return a&&j.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&O.__useRenderToTexture!==!1}function ft(j){const O=o.render.frame;y.get(j)!==O&&(y.set(j,O),j.update())}function wt(j,O){const ce=j.encoding,Pe=j.format,Re=j.type;return j.isCompressedTexture===!0||j.isVideoTexture===!0||j.format===Hv||ce!==Xo&&(ce===bt?a===!1?e.has("EXT_sRGB")===!0&&Pe===vi?(j.format=Hv,j.minFilter=Cn,j.generateMipmaps=!1):O=pC.sRGBToLinear(O):(Pe!==vi||Re!==Ko)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ce)),O}this.allocateTextureUnit=U,this.resetTextureUnits=le,this.setTexture2D=B,this.setTexture2DArray=ie,this.setTexture3D=z,this.setTextureCube=te,this.rebindTextures=xe,this.setupRenderTarget=Ge,this.updateRenderTargetMipmap=Te,this.updateMultisampleRenderTarget=Fe,this.setupDepthRenderbuffer=fe,this.setupFrameBufferTexture=be,this.useMultisampledRTT=Qe}function Xk(n,e,t){const r=t.isWebGL2;function i(s,o=null){let a;if(s===Ko)return 5121;if(s===vk)return 32819;if(s===_k)return 32820;if(s===mk)return 5120;if(s===gk)return 5122;if(s===cC)return 5123;if(s===yk)return 5124;if(s===La)return 5125;if(s===Uo)return 5126;if(s===xh)return r?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===xk)return 6406;if(s===vi)return 6408;if(s===wk)return 6409;if(s===Sk)return 6410;if(s===Ja)return 6402;if(s===vc)return 34041;if(s===Hv)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===Ak)return 6403;if(s===Mk)return 36244;if(s===Ek)return 33319;if(s===Ck)return 33320;if(s===bk)return 36249;if(s===Hy||s===Vy||s===Wy||s===jy)if(o===bt)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===Hy)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Vy)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Wy)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===jy)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===Hy)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Vy)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Wy)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===jy)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===AA||s===MA||s===EA||s===CA)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===AA)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===MA)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===EA)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===CA)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===Tk)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===bA||s===TA)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===bA)return o===bt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===TA)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===IA||s===PA||s===RA||s===LA||s===DA||s===BA||s===OA||s===kA||s===NA||s===FA||s===UA||s===zA||s===GA||s===HA)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===IA)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===PA)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===RA)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===LA)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===DA)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===BA)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===OA)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===kA)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===NA)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===FA)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===UA)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===zA)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===GA)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===HA)return o===bt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===$y)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===$y)return o===bt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===Ik||s===VA||s===WA||s===jA)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===$y)return a.COMPRESSED_RED_RGTC1_EXT;if(s===VA)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===WA)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===jA)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===sc?r?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:i}}class qk extends rn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Bs extends kt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const kJ={type:"move"};class lw{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Bs,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Bs,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new N,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new N),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Bs,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new N,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new N),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const g of e.hand.values()){const _=t.getJointPose(g,r),x=this._getHandJoint(c,g);_!==null&&(x.matrix.fromArray(_.transform.matrix),x.matrix.decompose(x.position,x.rotation,x.scale),x.jointRadius=_.radius),x.visible=_!==null}const h=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],p=h.position.distanceTo(d.position),m=.02,y=.005;c.inputState.pinching&&p>m+y?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=m-y&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(kJ)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new Bs;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class Qk extends cn{constructor(e,t,r,i,s,o,a,l,c,h){if(h=h!==void 0?h:Ja,h!==Ja&&h!==vc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&h===Ja&&(r=La),r===void 0&&h===vc&&(r=sc),super(null,i,s,o,a,l,h,r,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Fn,this.minFilter=l!==void 0?l:Fn,this.flipY=!1,this.generateMipmaps=!1}}class NJ extends go{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,c=null,h=null,d=null,p=null,m=null,y=null;const g=t.getContextAttributes();let _=null,x=null;const w=[],S=[],M=new Set,T=new Map,I=new rn;I.layers.enable(1),I.viewport=new Ht;const L=new rn;L.layers.enable(2),L.viewport=new Ht;const b=[I,L],R=new qk;R.layers.enable(1),R.layers.enable(2);let D=null,G=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(z){let te=w[z];return te===void 0&&(te=new lw,w[z]=te),te.getTargetRaySpace()},this.getControllerGrip=function(z){let te=w[z];return te===void 0&&(te=new lw,w[z]=te),te.getGripSpace()},this.getHand=function(z){let te=w[z];return te===void 0&&(te=new lw,w[z]=te),te.getHandSpace()};function V(z){const te=S.indexOf(z.inputSource);if(te===-1)return;const ae=w[te];ae!==void 0&&ae.dispatchEvent({type:z.type,data:z.inputSource})}function F(){i.removeEventListener("select",V),i.removeEventListener("selectstart",V),i.removeEventListener("selectend",V),i.removeEventListener("squeeze",V),i.removeEventListener("squeezestart",V),i.removeEventListener("squeezeend",V),i.removeEventListener("end",F),i.removeEventListener("inputsourceschange",J);for(let z=0;z<w.length;z++){const te=S[z];te!==null&&(S[z]=null,w[z].disconnect(te))}D=null,G=null,e.setRenderTarget(_),m=null,p=null,d=null,i=null,x=null,ie.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(z){s=z,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(z){a=z,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(z){c=z},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return d},this.getFrame=function(){return y},this.getSession=function(){return i},this.setSession=async function(z){if(i=z,i!==null){if(_=e.getRenderTarget(),i.addEventListener("select",V),i.addEventListener("selectstart",V),i.addEventListener("selectend",V),i.addEventListener("squeeze",V),i.addEventListener("squeezestart",V),i.addEventListener("squeezeend",V),i.addEventListener("end",F),i.addEventListener("inputsourceschange",J),g.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const te={antialias:i.renderState.layers===void 0?g.antialias:!0,alpha:g.alpha,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(i,t,te),i.updateRenderState({baseLayer:m}),x=new Us(m.framebufferWidth,m.framebufferHeight,{format:vi,type:Ko,encoding:e.outputEncoding,stencilBuffer:g.stencil})}else{let te=null,ae=null,Q=null;g.depth&&(Q=g.stencil?35056:33190,te=g.stencil?vc:Ja,ae=g.stencil?sc:La);const we={colorFormat:32856,depthFormat:Q,scaleFactor:s};d=new XRWebGLBinding(i,t),p=d.createProjectionLayer(we),i.updateRenderState({layers:[p]}),x=new Us(p.textureWidth,p.textureHeight,{format:vi,type:Ko,depthTexture:new Qk(p.textureWidth,p.textureHeight,ae,void 0,void 0,void 0,void 0,void 0,void 0,te),stencilBuffer:g.stencil,encoding:e.outputEncoding,samples:g.antialias?4:0});const Ae=e.properties.get(x);Ae.__ignoreDepthValues=p.ignoreDepthValues}x.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await i.requestReferenceSpace(a),ie.setContext(i),ie.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function J(z){for(let te=0;te<z.removed.length;te++){const ae=z.removed[te],Q=S.indexOf(ae);Q>=0&&(S[Q]=null,w[Q].disconnect(ae))}for(let te=0;te<z.added.length;te++){const ae=z.added[te];let Q=S.indexOf(ae);if(Q===-1){for(let Ae=0;Ae<w.length;Ae++)if(Ae>=S.length){S.push(ae),Q=Ae;break}else if(S[Ae]===null){S[Ae]=ae,Q=Ae;break}if(Q===-1)break}const we=w[Q];we&&we.connect(ae)}}const X=new N,ne=new N;function le(z,te,ae){X.setFromMatrixPosition(te.matrixWorld),ne.setFromMatrixPosition(ae.matrixWorld);const Q=X.distanceTo(ne),we=te.projectionMatrix.elements,Ae=ae.projectionMatrix.elements,Oe=we[14]/(we[10]-1),ze=we[14]/(we[10]+1),be=(we[9]+1)/we[5],Ee=(we[9]-1)/we[5],he=(we[8]-1)/we[0],fe=(Ae[8]+1)/Ae[0],xe=Oe*he,Ge=Oe*fe,Te=Q/(-he+fe),Fe=Te*-he;te.matrixWorld.decompose(z.position,z.quaternion,z.scale),z.translateX(Fe),z.translateZ(Te),z.matrixWorld.compose(z.position,z.quaternion,z.scale),z.matrixWorldInverse.copy(z.matrixWorld).invert();const Je=Oe+Te,Qe=ze+Te,ft=xe-Fe,wt=Ge+(Q-Fe),j=be*ze/Qe*Je,O=Ee*ze/Qe*Je;z.projectionMatrix.makePerspective(ft,wt,j,O,Je,Qe)}function U(z,te){te===null?z.matrixWorld.copy(z.matrix):z.matrixWorld.multiplyMatrices(te.matrixWorld,z.matrix),z.matrixWorldInverse.copy(z.matrixWorld).invert()}this.updateCamera=function(z){if(i===null)return;R.near=L.near=I.near=z.near,R.far=L.far=I.far=z.far,(D!==R.near||G!==R.far)&&(i.updateRenderState({depthNear:R.near,depthFar:R.far}),D=R.near,G=R.far);const te=z.parent,ae=R.cameras;U(R,te);for(let we=0;we<ae.length;we++)U(ae[we],te);R.matrixWorld.decompose(R.position,R.quaternion,R.scale),z.matrix.copy(R.matrix),z.matrix.decompose(z.position,z.quaternion,z.scale);const Q=z.children;for(let we=0,Ae=Q.length;we<Ae;we++)Q[we].updateMatrixWorld(!0);ae.length===2?le(R,I,L):R.projectionMatrix.copy(I.projectionMatrix)},this.getCamera=function(){return R},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(z){l=z,p!==null&&(p.fixedFoveation=z),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=z)},this.getPlanes=function(){return M};let W=null;function B(z,te){if(h=te.getViewerPose(c||o),y=te,h!==null){const ae=h.views;m!==null&&(e.setRenderTargetFramebuffer(x,m.framebuffer),e.setRenderTarget(x));let Q=!1;ae.length!==R.cameras.length&&(R.cameras.length=0,Q=!0);for(let we=0;we<ae.length;we++){const Ae=ae[we];let Oe=null;if(m!==null)Oe=m.getViewport(Ae);else{const be=d.getViewSubImage(p,Ae);Oe=be.viewport,we===0&&(e.setRenderTargetTextures(x,be.colorTexture,p.ignoreDepthValues?void 0:be.depthStencilTexture),e.setRenderTarget(x))}let ze=b[we];ze===void 0&&(ze=new rn,ze.layers.enable(we),ze.viewport=new Ht,b[we]=ze),ze.matrix.fromArray(Ae.transform.matrix),ze.projectionMatrix.fromArray(Ae.projectionMatrix),ze.viewport.set(Oe.x,Oe.y,Oe.width,Oe.height),we===0&&R.matrix.copy(ze.matrix),Q===!0&&R.cameras.push(ze)}}for(let ae=0;ae<w.length;ae++){const Q=S[ae],we=w[ae];Q!==null&&we!==void 0&&we.update(Q,te,c||o)}if(W&&W(z,te),te.detectedPlanes){r.dispatchEvent({type:"planesdetected",data:te.detectedPlanes});let ae=null;for(const Q of M)te.detectedPlanes.has(Q)||(ae===null&&(ae=[]),ae.push(Q));if(ae!==null)for(const Q of ae)M.delete(Q),T.delete(Q),r.dispatchEvent({type:"planeremoved",data:Q});for(const Q of te.detectedPlanes)if(!M.has(Q))M.add(Q),T.set(Q,te.lastChangedTime),r.dispatchEvent({type:"planeadded",data:Q});else{const we=T.get(Q);Q.lastChangedTime>we&&(T.set(Q,Q.lastChangedTime),r.dispatchEvent({type:"planechanged",data:Q}))}}y=null}const ie=new Wk;ie.setAnimationLoop(B),this.setAnimationLoop=function(z){W=z},this.dispose=function(){}}}function FJ(n,e){function t(g,_){_.color.getRGB(g.fogColor.value,Hk(n)),_.isFog?(g.fogNear.value=_.near,g.fogFar.value=_.far):_.isFogExp2&&(g.fogDensity.value=_.density)}function r(g,_,x,w,S){_.isMeshBasicMaterial||_.isMeshLambertMaterial?i(g,_):_.isMeshToonMaterial?(i(g,_),h(g,_)):_.isMeshPhongMaterial?(i(g,_),c(g,_)):_.isMeshStandardMaterial?(i(g,_),d(g,_),_.isMeshPhysicalMaterial&&p(g,_,S)):_.isMeshMatcapMaterial?(i(g,_),m(g,_)):_.isMeshDepthMaterial?i(g,_):_.isMeshDistanceMaterial?(i(g,_),y(g,_)):_.isMeshNormalMaterial?i(g,_):_.isLineBasicMaterial?(s(g,_),_.isLineDashedMaterial&&o(g,_)):_.isPointsMaterial?a(g,_,x,w):_.isSpriteMaterial?l(g,_):_.isShadowMaterial?(g.color.value.copy(_.color),g.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function i(g,_){g.opacity.value=_.opacity,_.color&&g.diffuse.value.copy(_.color),_.emissive&&g.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(g.map.value=_.map),_.alphaMap&&(g.alphaMap.value=_.alphaMap),_.bumpMap&&(g.bumpMap.value=_.bumpMap,g.bumpScale.value=_.bumpScale,_.side===Ai&&(g.bumpScale.value*=-1)),_.displacementMap&&(g.displacementMap.value=_.displacementMap,g.displacementScale.value=_.displacementScale,g.displacementBias.value=_.displacementBias),_.emissiveMap&&(g.emissiveMap.value=_.emissiveMap),_.normalMap&&(g.normalMap.value=_.normalMap,g.normalScale.value.copy(_.normalScale),_.side===Ai&&g.normalScale.value.negate()),_.specularMap&&(g.specularMap.value=_.specularMap),_.alphaTest>0&&(g.alphaTest.value=_.alphaTest);const x=e.get(_).envMap;if(x&&(g.envMap.value=x,g.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=_.reflectivity,g.ior.value=_.ior,g.refractionRatio.value=_.refractionRatio),_.lightMap){g.lightMap.value=_.lightMap;const M=n.useLegacyLights===!0?Math.PI:1;g.lightMapIntensity.value=_.lightMapIntensity*M}_.aoMap&&(g.aoMap.value=_.aoMap,g.aoMapIntensity.value=_.aoMapIntensity);let w;_.map?w=_.map:_.specularMap?w=_.specularMap:_.displacementMap?w=_.displacementMap:_.normalMap?w=_.normalMap:_.bumpMap?w=_.bumpMap:_.roughnessMap?w=_.roughnessMap:_.metalnessMap?w=_.metalnessMap:_.alphaMap?w=_.alphaMap:_.emissiveMap?w=_.emissiveMap:_.clearcoatMap?w=_.clearcoatMap:_.clearcoatNormalMap?w=_.clearcoatNormalMap:_.clearcoatRoughnessMap?w=_.clearcoatRoughnessMap:_.iridescenceMap?w=_.iridescenceMap:_.iridescenceThicknessMap?w=_.iridescenceThicknessMap:_.specularIntensityMap?w=_.specularIntensityMap:_.specularColorMap?w=_.specularColorMap:_.transmissionMap?w=_.transmissionMap:_.thicknessMap?w=_.thicknessMap:_.sheenColorMap?w=_.sheenColorMap:_.sheenRoughnessMap&&(w=_.sheenRoughnessMap),w!==void 0&&(w.isWebGLRenderTarget&&(w=w.texture),w.matrixAutoUpdate===!0&&w.updateMatrix(),g.uvTransform.value.copy(w.matrix));let S;_.aoMap?S=_.aoMap:_.lightMap&&(S=_.lightMap),S!==void 0&&(S.isWebGLRenderTarget&&(S=S.texture),S.matrixAutoUpdate===!0&&S.updateMatrix(),g.uv2Transform.value.copy(S.matrix))}function s(g,_){g.diffuse.value.copy(_.color),g.opacity.value=_.opacity}function o(g,_){g.dashSize.value=_.dashSize,g.totalSize.value=_.dashSize+_.gapSize,g.scale.value=_.scale}function a(g,_,x,w){g.diffuse.value.copy(_.color),g.opacity.value=_.opacity,g.size.value=_.size*x,g.scale.value=w*.5,_.map&&(g.map.value=_.map),_.alphaMap&&(g.alphaMap.value=_.alphaMap),_.alphaTest>0&&(g.alphaTest.value=_.alphaTest);let S;_.map?S=_.map:_.alphaMap&&(S=_.alphaMap),S!==void 0&&(S.matrixAutoUpdate===!0&&S.updateMatrix(),g.uvTransform.value.copy(S.matrix))}function l(g,_){g.diffuse.value.copy(_.color),g.opacity.value=_.opacity,g.rotation.value=_.rotation,_.map&&(g.map.value=_.map),_.alphaMap&&(g.alphaMap.value=_.alphaMap),_.alphaTest>0&&(g.alphaTest.value=_.alphaTest);let x;_.map?x=_.map:_.alphaMap&&(x=_.alphaMap),x!==void 0&&(x.matrixAutoUpdate===!0&&x.updateMatrix(),g.uvTransform.value.copy(x.matrix))}function c(g,_){g.specular.value.copy(_.specular),g.shininess.value=Math.max(_.shininess,1e-4)}function h(g,_){_.gradientMap&&(g.gradientMap.value=_.gradientMap)}function d(g,_){g.roughness.value=_.roughness,g.metalness.value=_.metalness,_.roughnessMap&&(g.roughnessMap.value=_.roughnessMap),_.metalnessMap&&(g.metalnessMap.value=_.metalnessMap),e.get(_).envMap&&(g.envMapIntensity.value=_.envMapIntensity)}function p(g,_,x){g.ior.value=_.ior,_.sheen>0&&(g.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),g.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(g.sheenColorMap.value=_.sheenColorMap),_.sheenRoughnessMap&&(g.sheenRoughnessMap.value=_.sheenRoughnessMap)),_.clearcoat>0&&(g.clearcoat.value=_.clearcoat,g.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(g.clearcoatMap.value=_.clearcoatMap),_.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap),_.clearcoatNormalMap&&(g.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),g.clearcoatNormalMap.value=_.clearcoatNormalMap,_.side===Ai&&g.clearcoatNormalScale.value.negate())),_.iridescence>0&&(g.iridescence.value=_.iridescence,g.iridescenceIOR.value=_.iridescenceIOR,g.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(g.iridescenceMap.value=_.iridescenceMap),_.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=_.iridescenceThicknessMap)),_.transmission>0&&(g.transmission.value=_.transmission,g.transmissionSamplerMap.value=x.texture,g.transmissionSamplerSize.value.set(x.width,x.height),_.transmissionMap&&(g.transmissionMap.value=_.transmissionMap),g.thickness.value=_.thickness,_.thicknessMap&&(g.thicknessMap.value=_.thicknessMap),g.attenuationDistance.value=_.attenuationDistance,g.attenuationColor.value.copy(_.attenuationColor)),g.specularIntensity.value=_.specularIntensity,g.specularColor.value.copy(_.specularColor),_.specularIntensityMap&&(g.specularIntensityMap.value=_.specularIntensityMap),_.specularColorMap&&(g.specularColorMap.value=_.specularColorMap)}function m(g,_){_.matcap&&(g.matcap.value=_.matcap)}function y(g,_){g.referencePosition.value.copy(_.referencePosition),g.nearDistance.value=_.nearDistance,g.farDistance.value=_.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:r}}function UJ(n,e,t,r){let i={},s={},o=[];const a=t.isWebGL2?n.getParameter(35375):0;function l(w,S){const M=S.program;r.uniformBlockBinding(w,M)}function c(w,S){let M=i[w.id];M===void 0&&(y(w),M=h(w),i[w.id]=M,w.addEventListener("dispose",_));const T=S.program;r.updateUBOMapping(w,T);const I=e.render.frame;s[w.id]!==I&&(p(w),s[w.id]=I)}function h(w){const S=d();w.__bindingPointIndex=S;const M=n.createBuffer(),T=w.__size,I=w.usage;return n.bindBuffer(35345,M),n.bufferData(35345,T,I),n.bindBuffer(35345,null),n.bindBufferBase(35345,S,M),M}function d(){for(let w=0;w<a;w++)if(o.indexOf(w)===-1)return o.push(w),w;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(w){const S=i[w.id],M=w.uniforms,T=w.__cache;n.bindBuffer(35345,S);for(let I=0,L=M.length;I<L;I++){const b=M[I];if(m(b,I,T)===!0){const R=b.__offset,D=Array.isArray(b.value)?b.value:[b.value];let G=0;for(let V=0;V<D.length;V++){const F=D[V],J=g(F);typeof F=="number"?(b.__data[0]=F,n.bufferSubData(35345,R+G,b.__data)):F.isMatrix3?(b.__data[0]=F.elements[0],b.__data[1]=F.elements[1],b.__data[2]=F.elements[2],b.__data[3]=F.elements[0],b.__data[4]=F.elements[3],b.__data[5]=F.elements[4],b.__data[6]=F.elements[5],b.__data[7]=F.elements[0],b.__data[8]=F.elements[6],b.__data[9]=F.elements[7],b.__data[10]=F.elements[8],b.__data[11]=F.elements[0]):(F.toArray(b.__data,G),G+=J.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(35345,R,b.__data)}}n.bindBuffer(35345,null)}function m(w,S,M){const T=w.value;if(M[S]===void 0){if(typeof T=="number")M[S]=T;else{const I=Array.isArray(T)?T:[T],L=[];for(let b=0;b<I.length;b++)L.push(I[b].clone());M[S]=L}return!0}else if(typeof T=="number"){if(M[S]!==T)return M[S]=T,!0}else{const I=Array.isArray(M[S])?M[S]:[M[S]],L=Array.isArray(T)?T:[T];for(let b=0;b<I.length;b++){const R=I[b];if(R.equals(L[b])===!1)return R.copy(L[b]),!0}}return!1}function y(w){const S=w.uniforms;let M=0;const T=16;let I=0;for(let L=0,b=S.length;L<b;L++){const R=S[L],D={boundary:0,storage:0},G=Array.isArray(R.value)?R.value:[R.value];for(let V=0,F=G.length;V<F;V++){const J=G[V],X=g(J);D.boundary+=X.boundary,D.storage+=X.storage}if(R.__data=new Float32Array(D.storage/Float32Array.BYTES_PER_ELEMENT),R.__offset=M,L>0){I=M%T;const V=T-I;I!==0&&V-D.boundary<0&&(M+=T-I,R.__offset=M)}M+=D.storage}return I=M%T,I>0&&(M+=T-I),w.__size=M,w.__cache={},this}function g(w){const S={boundary:0,storage:0};return typeof w=="number"?(S.boundary=4,S.storage=4):w.isVector2?(S.boundary=8,S.storage=8):w.isVector3||w.isColor?(S.boundary=16,S.storage=12):w.isVector4?(S.boundary=16,S.storage=16):w.isMatrix3?(S.boundary=48,S.storage=48):w.isMatrix4?(S.boundary=64,S.storage=64):w.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",w),S}function _(w){const S=w.target;S.removeEventListener("dispose",_);const M=o.indexOf(S.__bindingPointIndex);o.splice(M,1),n.deleteBuffer(i[S.id]),delete i[S.id],delete s[S.id]}function x(){for(const w in i)n.deleteBuffer(i[w]);o=[],i={},s={}}return{bind:l,update:c,dispose:x}}function zJ(){const n=ep("canvas");return n.style.display="block",n}function W0(n={}){this.isWebGLRenderer=!0;const e=n.canvas!==void 0?n.canvas:zJ(),t=n.context!==void 0?n.context:null,r=n.depth!==void 0?n.depth:!0,i=n.stencil!==void 0?n.stencil:!0,s=n.antialias!==void 0?n.antialias:!1,o=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,a=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,l=n.powerPreference!==void 0?n.powerPreference:"default",c=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let h;t!==null?h=t.getContextAttributes().alpha:h=n.alpha!==void 0?n.alpha:!1;let d=null,p=null;const m=[],y=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Xo,this.useLegacyLights=!0,this.toneMapping=Ns,this.toneMappingExposure=1;const g=this;let _=!1,x=0,w=0,S=null,M=-1,T=null;const I=new Ht,L=new Ht;let b=null,R=e.width,D=e.height,G=1,V=null,F=null;const J=new Ht(0,0,R,D),X=new Ht(0,0,R,D);let ne=!1;const le=new H0;let U=!1,W=!1,B=null;const ie=new Xe,z=new N,te={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ae(){return S===null?G:1}let Q=t;function we(H,oe){for(let me=0;me<H.length;me++){const re=H[me],ye=e.getContext(re,oe);if(ye!==null)return ye}return null}try{const H={alpha:!0,depth:r,stencil:i,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${O0}`),e.addEventListener("webglcontextlost",ge,!1),e.addEventListener("webglcontextrestored",Me,!1),e.addEventListener("webglcontextcreationerror",Be,!1),Q===null){const oe=["webgl2","webgl","experimental-webgl"];if(g.isWebGL1Renderer===!0&&oe.shift(),Q=we(oe,H),Q===null)throw we(oe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Q.getShaderPrecisionFormat===void 0&&(Q.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(H){throw console.error("THREE.WebGLRenderer: "+H.message),H}let Ae,Oe,ze,be,Ee,he,fe,xe,Ge,Te,Fe,Je,Qe,ft,wt,j,O,ce,Pe,Re,Ne,rt,je,_e;function st(){Ae=new n$(Q),Oe=new q7(Q,Ae,n),Ae.init(Oe),rt=new Xk(Q,Ae,Oe),ze=new BJ(Q,Ae,Oe),be=new s$,Ee=new SJ,he=new OJ(Q,Ae,ze,Ee,Oe,rt,be),fe=new Y7(g),xe=new t$(g),Ge=new pW(Q,Oe),je=new K7(Q,Ae,Ge,Oe),Te=new r$(Q,Ge,be,je),Fe=new c$(Q,Te,Ge,be),Pe=new l$(Q,Oe,he),j=new Q7(Ee),Je=new wJ(g,fe,xe,Ae,Oe,je,j),Qe=new FJ(g,Ee),ft=new MJ,wt=new PJ(Ae,Oe),ce=new J7(g,fe,xe,ze,Fe,h,o),O=new DJ(g,Fe,Oe),_e=new UJ(Q,be,Oe,ze),Re=new X7(Q,Ae,be,Oe),Ne=new i$(Q,Ae,be,Oe),be.programs=Je.programs,g.capabilities=Oe,g.extensions=Ae,g.properties=Ee,g.renderLists=ft,g.shadowMap=O,g.state=ze,g.info=be}st();const K=new NJ(g,Q);this.xr=K,this.getContext=function(){return Q},this.getContextAttributes=function(){return Q.getContextAttributes()},this.forceContextLoss=function(){const H=Ae.get("WEBGL_lose_context");H&&H.loseContext()},this.forceContextRestore=function(){const H=Ae.get("WEBGL_lose_context");H&&H.restoreContext()},this.getPixelRatio=function(){return G},this.setPixelRatio=function(H){H!==void 0&&(G=H,this.setSize(R,D,!1))},this.getSize=function(H){return H.set(R,D)},this.setSize=function(H,oe,me=!0){if(K.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}R=H,D=oe,e.width=Math.floor(H*G),e.height=Math.floor(oe*G),me===!0&&(e.style.width=H+"px",e.style.height=oe+"px"),this.setViewport(0,0,H,oe)},this.getDrawingBufferSize=function(H){return H.set(R*G,D*G).floor()},this.setDrawingBufferSize=function(H,oe,me){R=H,D=oe,G=me,e.width=Math.floor(H*me),e.height=Math.floor(oe*me),this.setViewport(0,0,H,oe)},this.getCurrentViewport=function(H){return H.copy(I)},this.getViewport=function(H){return H.copy(J)},this.setViewport=function(H,oe,me,re){H.isVector4?J.set(H.x,H.y,H.z,H.w):J.set(H,oe,me,re),ze.viewport(I.copy(J).multiplyScalar(G).floor())},this.getScissor=function(H){return H.copy(X)},this.setScissor=function(H,oe,me,re){H.isVector4?X.set(H.x,H.y,H.z,H.w):X.set(H,oe,me,re),ze.scissor(L.copy(X).multiplyScalar(G).floor())},this.getScissorTest=function(){return ne},this.setScissorTest=function(H){ze.setScissorTest(ne=H)},this.setOpaqueSort=function(H){V=H},this.setTransparentSort=function(H){F=H},this.getClearColor=function(H){return H.copy(ce.getClearColor())},this.setClearColor=function(){ce.setClearColor.apply(ce,arguments)},this.getClearAlpha=function(){return ce.getClearAlpha()},this.setClearAlpha=function(){ce.setClearAlpha.apply(ce,arguments)},this.clear=function(H=!0,oe=!0,me=!0){let re=0;H&&(re|=16384),oe&&(re|=256),me&&(re|=1024),Q.clear(re)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ge,!1),e.removeEventListener("webglcontextrestored",Me,!1),e.removeEventListener("webglcontextcreationerror",Be,!1),ft.dispose(),wt.dispose(),Ee.dispose(),fe.dispose(),xe.dispose(),Fe.dispose(),je.dispose(),_e.dispose(),Je.dispose(),K.dispose(),K.removeEventListener("sessionstart",Se),K.removeEventListener("sessionend",Ke),B&&(B.dispose(),B=null),Ze.stop()};function ge(H){H.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),_=!0}function Me(){console.log("THREE.WebGLRenderer: Context Restored."),_=!1;const H=be.autoReset,oe=O.enabled,me=O.autoUpdate,re=O.needsUpdate,ye=O.type;st(),be.autoReset=H,O.enabled=oe,O.autoUpdate=me,O.needsUpdate=re,O.type=ye}function Be(H){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",H.statusMessage)}function lt(H){const oe=H.target;oe.removeEventListener("dispose",lt),Pt(oe)}function Pt(H){un(H),Ee.remove(H)}function un(H){const oe=Ee.get(H).programs;oe!==void 0&&(oe.forEach(function(me){Je.releaseProgram(me)}),H.isShaderMaterial&&Je.releaseShaderCache(H))}this.renderBufferDirect=function(H,oe,me,re,ye,at){oe===null&&(oe=te);const pt=ye.isMesh&&ye.matrixWorld.determinant()<0,St=K_(H,oe,me,re,ye);ze.setMaterial(re,pt);let Et=me.index,Ut=1;re.wireframe===!0&&(Et=Te.getWireframeAttribute(me),Ut=2);const Rt=me.drawRange,Nt=me.attributes.position;let Rn=Rt.start*Ut,Zr=(Rt.start+Rt.count)*Ut;at!==null&&(Rn=Math.max(Rn,at.start*Ut),Zr=Math.min(Zr,(at.start+at.count)*Ut)),Et!==null?(Rn=Math.max(Rn,0),Zr=Math.min(Zr,Et.count)):Nt!=null&&(Rn=Math.max(Rn,0),Zr=Math.min(Zr,Nt.count));const ys=Zr-Rn;if(ys<0||ys===1/0)return;je.setup(ye,re,St,me,Et);let yo,Ln=Re;if(Et!==null&&(yo=Ge.get(Et),Ln=Ne,Ln.setIndex(yo)),ye.isMesh)re.wireframe===!0?(ze.setLineWidth(re.wireframeLinewidth*ae()),Ln.setMode(1)):Ln.setMode(4);else if(ye.isLine){let Tt=re.linewidth;Tt===void 0&&(Tt=1),ze.setLineWidth(Tt*ae()),ye.isLineSegments?Ln.setMode(1):ye.isLineLoop?Ln.setMode(2):Ln.setMode(3)}else ye.isPoints?Ln.setMode(0):ye.isSprite&&Ln.setMode(4);if(ye.isInstancedMesh)Ln.renderInstances(Rn,ys,ye.count);else if(me.isInstancedBufferGeometry){const Tt=me._maxInstanceCount!==void 0?me._maxInstanceCount:1/0,vo=Math.min(me.instanceCount,Tt);Ln.renderInstances(Rn,ys,vo)}else Ln.render(Rn,ys)},this.compile=function(H,oe){function me(re,ye,at){re.transparent===!0&&re.side===Ds&&re.forceSinglePass===!1?(re.side=Ai,re.needsUpdate=!0,Yr(re,ye,at),re.side=co,re.needsUpdate=!0,Yr(re,ye,at),re.side=Ds):Yr(re,ye,at)}p=wt.get(H),p.init(),y.push(p),H.traverseVisible(function(re){re.isLight&&re.layers.test(oe.layers)&&(p.pushLight(re),re.castShadow&&p.pushShadow(re))}),p.setupLights(g.useLegacyLights),H.traverse(function(re){const ye=re.material;if(ye)if(Array.isArray(ye))for(let at=0;at<ye.length;at++){const pt=ye[at];me(pt,H,re)}else me(ye,H,re)}),y.pop(),p=null};let Y=null;function de(H){Y&&Y(H)}function Se(){Ze.stop()}function Ke(){Ze.start()}const Ze=new Wk;Ze.setAnimationLoop(de),typeof self<"u"&&Ze.setContext(self),this.setAnimationLoop=function(H){Y=H,K.setAnimationLoop(H),H===null?Ze.stop():Ze.start()},K.addEventListener("sessionstart",Se),K.addEventListener("sessionend",Ke),this.render=function(H,oe){if(oe!==void 0&&oe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(_===!0)return;H.matrixWorldAutoUpdate===!0&&H.updateMatrixWorld(),oe.parent===null&&oe.matrixWorldAutoUpdate===!0&&oe.updateMatrixWorld(),K.enabled===!0&&K.isPresenting===!0&&(K.cameraAutoUpdate===!0&&K.updateCamera(oe),oe=K.getCamera()),H.isScene===!0&&H.onBeforeRender(g,H,oe,S),p=wt.get(H,y.length),p.init(),y.push(p),ie.multiplyMatrices(oe.projectionMatrix,oe.matrixWorldInverse),le.setFromProjectionMatrix(ie),W=this.localClippingEnabled,U=j.init(this.clippingPlanes,W),d=ft.get(H,m.length),d.init(),m.push(d),nn(H,oe,0,g.sortObjects),d.finish(),g.sortObjects===!0&&d.sort(V,F),U===!0&&j.beginShadows();const me=p.state.shadowsArray;if(O.render(me,H,oe),U===!0&&j.endShadows(),this.info.autoReset===!0&&this.info.reset(),ce.render(d,H),p.setupLights(g.useLegacyLights),oe.isArrayCamera){const re=oe.cameras;for(let ye=0,at=re.length;ye<at;ye++){const pt=re[ye];zn(d,H,pt,pt.viewport)}}else zn(d,H,oe);S!==null&&(he.updateMultisampleRenderTarget(S),he.updateRenderTargetMipmap(S)),H.isScene===!0&&H.onAfterRender(g,H,oe),je.resetDefaultState(),M=-1,T=null,y.pop(),y.length>0?p=y[y.length-1]:p=null,m.pop(),m.length>0?d=m[m.length-1]:d=null};function nn(H,oe,me,re){if(H.visible===!1)return;if(H.layers.test(oe.layers)){if(H.isGroup)me=H.renderOrder;else if(H.isLOD)H.autoUpdate===!0&&H.update(oe);else if(H.isLight)p.pushLight(H),H.castShadow&&p.pushShadow(H);else if(H.isSprite){if(!H.frustumCulled||le.intersectsSprite(H)){re&&z.setFromMatrixPosition(H.matrixWorld).applyMatrix4(ie);const pt=Fe.update(H),St=H.material;St.visible&&d.push(H,pt,St,me,z.z,null)}}else if((H.isMesh||H.isLine||H.isPoints)&&(H.isSkinnedMesh&&H.skeleton.frame!==be.render.frame&&(H.skeleton.update(),H.skeleton.frame=be.render.frame),!H.frustumCulled||le.intersectsObject(H))){re&&z.setFromMatrixPosition(H.matrixWorld).applyMatrix4(ie);const pt=Fe.update(H),St=H.material;if(Array.isArray(St)){const Et=pt.groups;for(let Ut=0,Rt=Et.length;Ut<Rt;Ut++){const Nt=Et[Ut],Rn=St[Nt.materialIndex];Rn&&Rn.visible&&d.push(H,pt,Rn,me,z.z,Nt)}}else St.visible&&d.push(H,pt,St,me,z.z,null)}}const at=H.children;for(let pt=0,St=at.length;pt<St;pt++)nn(at[pt],oe,me,re)}function zn(H,oe,me,re){const ye=H.opaque,at=H.transmissive,pt=H.transparent;p.setupLightsView(me),U===!0&&j.setGlobalState(g.clippingPlanes,me),at.length>0&&Ar(ye,oe,me),re&&ze.viewport(I.copy(re)),ye.length>0&&Ei(ye,oe,me),at.length>0&&Ei(at,oe,me),pt.length>0&&Ei(pt,oe,me),ze.buffers.depth.setTest(!0),ze.buffers.depth.setMask(!0),ze.buffers.color.setMask(!0),ze.setPolygonOffset(!1)}function Ar(H,oe,me){const re=Oe.isWebGL2;B===null&&(B=new Us(1024,1024,{generateMipmaps:!0,type:Ae.has("EXT_color_buffer_half_float")?xh:Ko,minFilter:ho,samples:re&&s===!0?4:0}));const ye=g.getRenderTarget();g.setRenderTarget(B),g.clear();const at=g.toneMapping;g.toneMapping=Ns,Ei(H,oe,me),g.toneMapping=at,he.updateMultisampleRenderTarget(B),he.updateRenderTargetMipmap(B),g.setRenderTarget(ye)}function Ei(H,oe,me){const re=oe.isScene===!0?oe.overrideMaterial:null;for(let ye=0,at=H.length;ye<at;ye++){const pt=H[ye],St=pt.object,Et=pt.geometry,Ut=re===null?pt.material:re,Rt=pt.group;St.layers.test(me.layers)&&mn(St,oe,me,Et,Ut,Rt)}}function mn(H,oe,me,re,ye,at){H.onBeforeRender(g,oe,me,re,ye,at),H.modelViewMatrix.multiplyMatrices(me.matrixWorldInverse,H.matrixWorld),H.normalMatrix.getNormalMatrix(H.modelViewMatrix),ye.onBeforeRender(g,oe,me,re,H,at),ye.transparent===!0&&ye.side===Ds&&ye.forceSinglePass===!1?(ye.side=Ai,ye.needsUpdate=!0,g.renderBufferDirect(me,oe,re,ye,H,at),ye.side=co,ye.needsUpdate=!0,g.renderBufferDirect(me,oe,re,ye,H,at),ye.side=Ds):g.renderBufferDirect(me,oe,re,ye,H,at),H.onAfterRender(g,oe,me,re,ye,at)}function Yr(H,oe,me){oe.isScene!==!0&&(oe=te);const re=Ee.get(H),ye=p.state.lights,at=p.state.shadowsArray,pt=ye.state.version,St=Je.getParameters(H,ye.state,at,oe,me),Et=Je.getProgramCacheKey(St);let Ut=re.programs;re.environment=H.isMeshStandardMaterial?oe.environment:null,re.fog=oe.fog,re.envMap=(H.isMeshStandardMaterial?xe:fe).get(H.envMap||re.environment),Ut===void 0&&(H.addEventListener("dispose",lt),Ut=new Map,re.programs=Ut);let Rt=Ut.get(Et);if(Rt!==void 0){if(re.currentProgram===Rt&&re.lightsStateVersion===pt)return Ji(H,St),Rt}else St.uniforms=Je.getUniforms(H),H.onBuild(me,St,g),H.onBeforeCompile(St,g),Rt=Je.acquireProgram(St,Et),Ut.set(Et,Rt),re.uniforms=St.uniforms;const Nt=re.uniforms;(!H.isShaderMaterial&&!H.isRawShaderMaterial||H.clipping===!0)&&(Nt.clippingPlanes=j.uniform),Ji(H,St),re.needsLights=fm(H),re.lightsStateVersion=pt,re.needsLights&&(Nt.ambientLightColor.value=ye.state.ambient,Nt.lightProbe.value=ye.state.probe,Nt.directionalLights.value=ye.state.directional,Nt.directionalLightShadows.value=ye.state.directionalShadow,Nt.spotLights.value=ye.state.spot,Nt.spotLightShadows.value=ye.state.spotShadow,Nt.rectAreaLights.value=ye.state.rectArea,Nt.ltc_1.value=ye.state.rectAreaLTC1,Nt.ltc_2.value=ye.state.rectAreaLTC2,Nt.pointLights.value=ye.state.point,Nt.pointLightShadows.value=ye.state.pointShadow,Nt.hemisphereLights.value=ye.state.hemi,Nt.directionalShadowMap.value=ye.state.directionalShadowMap,Nt.directionalShadowMatrix.value=ye.state.directionalShadowMatrix,Nt.spotShadowMap.value=ye.state.spotShadowMap,Nt.spotLightMatrix.value=ye.state.spotLightMatrix,Nt.spotLightMap.value=ye.state.spotLightMap,Nt.pointShadowMap.value=ye.state.pointShadowMap,Nt.pointShadowMatrix.value=ye.state.pointShadowMatrix);const Rn=Rt.getUniforms(),Zr=Xy.seqWithValue(Rn.seq,Nt);return re.currentProgram=Rt,re.uniformsList=Zr,Rt}function Ji(H,oe){const me=Ee.get(H);me.outputEncoding=oe.outputEncoding,me.instancing=oe.instancing,me.skinning=oe.skinning,me.morphTargets=oe.morphTargets,me.morphNormals=oe.morphNormals,me.morphColors=oe.morphColors,me.morphTargetsCount=oe.morphTargetsCount,me.numClippingPlanes=oe.numClippingPlanes,me.numIntersection=oe.numClipIntersection,me.vertexAlphas=oe.vertexAlphas,me.vertexTangents=oe.vertexTangents,me.toneMapping=oe.toneMapping}function K_(H,oe,me,re,ye){oe.isScene!==!0&&(oe=te),he.resetTextureUnits();const at=oe.fog,pt=re.isMeshStandardMaterial?oe.environment:null,St=S===null?g.outputEncoding:S.isXRRenderTarget===!0?S.texture.encoding:Xo,Et=(re.isMeshStandardMaterial?xe:fe).get(re.envMap||pt),Ut=re.vertexColors===!0&&!!me.attributes.color&&me.attributes.color.itemSize===4,Rt=!!re.normalMap&&!!me.attributes.tangent,Nt=!!me.morphAttributes.position,Rn=!!me.morphAttributes.normal,Zr=!!me.morphAttributes.color,ys=re.toneMapped?g.toneMapping:Ns,yo=me.morphAttributes.position||me.morphAttributes.normal||me.morphAttributes.color,Ln=yo!==void 0?yo.length:0,Tt=Ee.get(re),vo=p.state.lights;if(U===!0&&(W===!0||H!==T)){const Bn=H===T&&re.id===M;j.setState(re,H,Bn)}let Dn=!1;re.version===Tt.__version?(Tt.needsLights&&Tt.lightsStateVersion!==vo.state.version||Tt.outputEncoding!==St||ye.isInstancedMesh&&Tt.instancing===!1||!ye.isInstancedMesh&&Tt.instancing===!0||ye.isSkinnedMesh&&Tt.skinning===!1||!ye.isSkinnedMesh&&Tt.skinning===!0||Tt.envMap!==Et||re.fog===!0&&Tt.fog!==at||Tt.numClippingPlanes!==void 0&&(Tt.numClippingPlanes!==j.numPlanes||Tt.numIntersection!==j.numIntersection)||Tt.vertexAlphas!==Ut||Tt.vertexTangents!==Rt||Tt.morphTargets!==Nt||Tt.morphNormals!==Rn||Tt.morphColors!==Zr||Tt.toneMapping!==ys||Oe.isWebGL2===!0&&Tt.morphTargetsCount!==Ln)&&(Dn=!0):(Dn=!0,Tt.__version=re.version);let vs=Tt.currentProgram;Dn===!0&&(vs=Yr(re,oe,ye));let dm=!1,_o=!1,Ws=!1;const gn=vs.getUniforms(),Gt=Tt.uniforms;if(ze.useProgram(vs.program)&&(dm=!0,_o=!0,Ws=!0),re.id!==M&&(M=re.id,_o=!0),dm||T!==H){if(gn.setValue(Q,"projectionMatrix",H.projectionMatrix),Oe.logarithmicDepthBuffer&&gn.setValue(Q,"logDepthBufFC",2/(Math.log(H.far+1)/Math.LN2)),T!==H&&(T=H,_o=!0,Ws=!0),re.isShaderMaterial||re.isMeshPhongMaterial||re.isMeshToonMaterial||re.isMeshStandardMaterial||re.envMap){const Bn=gn.map.cameraPosition;Bn!==void 0&&Bn.setValue(Q,z.setFromMatrixPosition(H.matrixWorld))}(re.isMeshPhongMaterial||re.isMeshToonMaterial||re.isMeshLambertMaterial||re.isMeshBasicMaterial||re.isMeshStandardMaterial||re.isShaderMaterial)&&gn.setValue(Q,"isOrthographic",H.isOrthographicCamera===!0),(re.isMeshPhongMaterial||re.isMeshToonMaterial||re.isMeshLambertMaterial||re.isMeshBasicMaterial||re.isMeshStandardMaterial||re.isShaderMaterial||re.isShadowMaterial||ye.isSkinnedMesh)&&gn.setValue(Q,"viewMatrix",H.matrixWorldInverse)}if(ye.isSkinnedMesh){gn.setOptional(Q,ye,"bindMatrix"),gn.setOptional(Q,ye,"bindMatrixInverse");const Bn=ye.skeleton;Bn&&(Oe.floatVertexTextures?(Bn.boneTexture===null&&Bn.computeBoneTexture(),gn.setValue(Q,"boneTexture",Bn.boneTexture,he),gn.setValue(Q,"boneTextureSize",Bn.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const qt=me.morphAttributes;if((qt.position!==void 0||qt.normal!==void 0||qt.color!==void 0&&Oe.isWebGL2===!0)&&Pe.update(ye,me,vs),(_o||Tt.receiveShadow!==ye.receiveShadow)&&(Tt.receiveShadow=ye.receiveShadow,gn.setValue(Q,"receiveShadow",ye.receiveShadow)),re.isMeshGouraudMaterial&&re.envMap!==null&&(Gt.envMap.value=Et,Gt.flipEnvMap.value=Et.isCubeTexture&&Et.isRenderTargetTexture===!1?-1:1),_o&&(gn.setValue(Q,"toneMappingExposure",g.toneMappingExposure),Tt.needsLights&&X_(Gt,Ws),at&&re.fog===!0&&Qe.refreshFogUniforms(Gt,at),Qe.refreshMaterialUniforms(Gt,re,G,D,B),Xy.upload(Q,Tt.uniformsList,Gt,he)),re.isShaderMaterial&&re.uniformsNeedUpdate===!0&&(Xy.upload(Q,Tt.uniformsList,Gt,he),re.uniformsNeedUpdate=!1),re.isSpriteMaterial&&gn.setValue(Q,"center",ye.center),gn.setValue(Q,"modelViewMatrix",ye.modelViewMatrix),gn.setValue(Q,"normalMatrix",ye.normalMatrix),gn.setValue(Q,"modelMatrix",ye.matrixWorld),re.isShaderMaterial||re.isRawShaderMaterial){const Bn=re.uniformsGroups;for(let Jn=0,Dr=Bn.length;Jn<Dr;Jn++)if(Oe.isWebGL2){const js=Bn[Jn];_e.update(js,vs),_e.bind(js,vs)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return vs}function X_(H,oe){H.ambientLightColor.needsUpdate=oe,H.lightProbe.needsUpdate=oe,H.directionalLights.needsUpdate=oe,H.directionalLightShadows.needsUpdate=oe,H.pointLights.needsUpdate=oe,H.pointLightShadows.needsUpdate=oe,H.spotLights.needsUpdate=oe,H.spotLightShadows.needsUpdate=oe,H.rectAreaLights.needsUpdate=oe,H.hemisphereLights.needsUpdate=oe}function fm(H){return H.isMeshLambertMaterial||H.isMeshToonMaterial||H.isMeshPhongMaterial||H.isMeshStandardMaterial||H.isShadowMaterial||H.isShaderMaterial&&H.lights===!0}this.getActiveCubeFace=function(){return x},this.getActiveMipmapLevel=function(){return w},this.getRenderTarget=function(){return S},this.setRenderTargetTextures=function(H,oe,me){Ee.get(H.texture).__webglTexture=oe,Ee.get(H.depthTexture).__webglTexture=me;const re=Ee.get(H);re.__hasExternalTextures=!0,re.__hasExternalTextures&&(re.__autoAllocateDepthBuffer=me===void 0,re.__autoAllocateDepthBuffer||Ae.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),re.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(H,oe){const me=Ee.get(H);me.__webglFramebuffer=oe,me.__useDefaultFramebuffer=oe===void 0},this.setRenderTarget=function(H,oe=0,me=0){S=H,x=oe,w=me;let re=!0,ye=null,at=!1,pt=!1;if(H){const Et=Ee.get(H);Et.__useDefaultFramebuffer!==void 0?(ze.bindFramebuffer(36160,null),re=!1):Et.__webglFramebuffer===void 0?he.setupRenderTarget(H):Et.__hasExternalTextures&&he.rebindTextures(H,Ee.get(H.texture).__webglTexture,Ee.get(H.depthTexture).__webglTexture);const Ut=H.texture;(Ut.isData3DTexture||Ut.isDataArrayTexture||Ut.isCompressedArrayTexture)&&(pt=!0);const Rt=Ee.get(H).__webglFramebuffer;H.isWebGLCubeRenderTarget?(ye=Rt[oe],at=!0):Oe.isWebGL2&&H.samples>0&&he.useMultisampledRTT(H)===!1?ye=Ee.get(H).__webglMultisampledFramebuffer:ye=Rt,I.copy(H.viewport),L.copy(H.scissor),b=H.scissorTest}else I.copy(J).multiplyScalar(G).floor(),L.copy(X).multiplyScalar(G).floor(),b=ne;if(ze.bindFramebuffer(36160,ye)&&Oe.drawBuffers&&re&&ze.drawBuffers(H,ye),ze.viewport(I),ze.scissor(L),ze.setScissorTest(b),at){const Et=Ee.get(H.texture);Q.framebufferTexture2D(36160,36064,34069+oe,Et.__webglTexture,me)}else if(pt){const Et=Ee.get(H.texture),Ut=oe||0;Q.framebufferTextureLayer(36160,36064,Et.__webglTexture,me||0,Ut)}M=-1},this.readRenderTargetPixels=function(H,oe,me,re,ye,at,pt){if(!(H&&H.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let St=Ee.get(H).__webglFramebuffer;if(H.isWebGLCubeRenderTarget&&pt!==void 0&&(St=St[pt]),St){ze.bindFramebuffer(36160,St);try{const Et=H.texture,Ut=Et.format,Rt=Et.type;if(Ut!==vi&&rt.convert(Ut)!==Q.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Nt=Rt===xh&&(Ae.has("EXT_color_buffer_half_float")||Oe.isWebGL2&&Ae.has("EXT_color_buffer_float"));if(Rt!==Ko&&rt.convert(Rt)!==Q.getParameter(35738)&&!(Rt===Uo&&(Oe.isWebGL2||Ae.has("OES_texture_float")||Ae.has("WEBGL_color_buffer_float")))&&!Nt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}oe>=0&&oe<=H.width-re&&me>=0&&me<=H.height-ye&&Q.readPixels(oe,me,re,ye,rt.convert(Ut),rt.convert(Rt),at)}finally{const Et=S!==null?Ee.get(S).__webglFramebuffer:null;ze.bindFramebuffer(36160,Et)}}},this.copyFramebufferToTexture=function(H,oe,me=0){const re=Math.pow(2,-me),ye=Math.floor(oe.image.width*re),at=Math.floor(oe.image.height*re);he.setTexture2D(oe,0),Q.copyTexSubImage2D(3553,me,0,0,H.x,H.y,ye,at),ze.unbindTexture()},this.copyTextureToTexture=function(H,oe,me,re=0){const ye=oe.image.width,at=oe.image.height,pt=rt.convert(me.format),St=rt.convert(me.type);he.setTexture2D(me,0),Q.pixelStorei(37440,me.flipY),Q.pixelStorei(37441,me.premultiplyAlpha),Q.pixelStorei(3317,me.unpackAlignment),oe.isDataTexture?Q.texSubImage2D(3553,re,H.x,H.y,ye,at,pt,St,oe.image.data):oe.isCompressedTexture?Q.compressedTexSubImage2D(3553,re,H.x,H.y,oe.mipmaps[0].width,oe.mipmaps[0].height,pt,oe.mipmaps[0].data):Q.texSubImage2D(3553,re,H.x,H.y,pt,St,oe.image),re===0&&me.generateMipmaps&&Q.generateMipmap(3553),ze.unbindTexture()},this.copyTextureToTexture3D=function(H,oe,me,re,ye=0){if(g.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const at=H.max.x-H.min.x+1,pt=H.max.y-H.min.y+1,St=H.max.z-H.min.z+1,Et=rt.convert(re.format),Ut=rt.convert(re.type);let Rt;if(re.isData3DTexture)he.setTexture3D(re,0),Rt=32879;else if(re.isDataArrayTexture)he.setTexture2DArray(re,0),Rt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Q.pixelStorei(37440,re.flipY),Q.pixelStorei(37441,re.premultiplyAlpha),Q.pixelStorei(3317,re.unpackAlignment);const Nt=Q.getParameter(3314),Rn=Q.getParameter(32878),Zr=Q.getParameter(3316),ys=Q.getParameter(3315),yo=Q.getParameter(32877),Ln=me.isCompressedTexture?me.mipmaps[0]:me.image;Q.pixelStorei(3314,Ln.width),Q.pixelStorei(32878,Ln.height),Q.pixelStorei(3316,H.min.x),Q.pixelStorei(3315,H.min.y),Q.pixelStorei(32877,H.min.z),me.isDataTexture||me.isData3DTexture?Q.texSubImage3D(Rt,ye,oe.x,oe.y,oe.z,at,pt,St,Et,Ut,Ln.data):me.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Q.compressedTexSubImage3D(Rt,ye,oe.x,oe.y,oe.z,at,pt,St,Et,Ln.data)):Q.texSubImage3D(Rt,ye,oe.x,oe.y,oe.z,at,pt,St,Et,Ut,Ln),Q.pixelStorei(3314,Nt),Q.pixelStorei(32878,Rn),Q.pixelStorei(3316,Zr),Q.pixelStorei(3315,ys),Q.pixelStorei(32877,yo),ye===0&&re.generateMipmaps&&Q.generateMipmap(Rt),ze.unbindTexture()},this.initTexture=function(H){H.isCubeTexture?he.setTextureCube(H,0):H.isData3DTexture?he.setTexture3D(H,0):H.isDataArrayTexture||H.isCompressedArrayTexture?he.setTexture2DArray(H,0):he.setTexture2D(H,0),ze.unbindTexture()},this.resetState=function(){x=0,w=0,S=null,ze.reset(),je.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Object.defineProperties(W0.prototype,{physicallyCorrectLights:{get:function(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights},set:function(n){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!n}}});class Yk extends W0{}Yk.prototype.isWebGL1Renderer=!0;class j0{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new De(e),this.density=t}clone(){return new j0(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class $0{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new De(e),this.near=t,this.far=r}clone(){return new $0(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class SC extends kt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class kp{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Yd,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ui()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ui()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ui()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ri=new N;class nl{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)ri.fromBufferAttribute(this,t),ri.applyMatrix4(e),this.setXYZ(t,ri.x,ri.y,ri.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)ri.fromBufferAttribute(this,t),ri.applyNormalMatrix(e),this.setXYZ(t,ri.x,ri.y,ri.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)ri.fromBufferAttribute(this,t),ri.transformDirection(e),this.setXYZ(t,ri.x,ri.y,ri.z);return this}setX(e,t){return this.normalized&&(t=on(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=on(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=on(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=on(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=zo(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=zo(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=zo(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=zo(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=on(t,this.array),r=on(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=on(t,this.array),r=on(r,this.array),i=on(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=on(t,this.array),r=on(r,this.array),i=on(i,this.array),s=on(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Xt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new nl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class AC extends nr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new De(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let mu;const zf=new N,gu=new N,yu=new N,vu=new ve,Gf=new ve,Zk=new Xe,jg=new N,Hf=new N,$g=new N,cR=new ve,cw=new ve,uR=new ve;class eN extends kt{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",mu===void 0){mu=new dt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new kp(t,5);mu.setIndex([0,1,2,0,2,3]),mu.setAttribute("position",new nl(r,3,0,!1)),mu.setAttribute("uv",new nl(r,2,3,!1))}this.geometry=mu,this.material=e!==void 0?e:new AC,this.center=new ve(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),gu.setFromMatrixScale(this.matrixWorld),Zk.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),yu.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&gu.multiplyScalar(-yu.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;Jg(jg.set(-.5,-.5,0),yu,o,gu,i,s),Jg(Hf.set(.5,-.5,0),yu,o,gu,i,s),Jg($g.set(.5,.5,0),yu,o,gu,i,s),cR.set(0,0),cw.set(1,0),uR.set(1,1);let a=e.ray.intersectTriangle(jg,Hf,$g,!1,zf);if(a===null&&(Jg(Hf.set(-.5,.5,0),yu,o,gu,i,s),cw.set(0,1),a=e.ray.intersectTriangle(jg,$g,Hf,!1,zf),a===null))return;const l=e.ray.origin.distanceTo(zf);l<e.near||l>e.far||t.push({distance:l,point:zf.clone(),uv:as.getUV(zf,jg,Hf,$g,cR,cw,uR,new ve),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Jg(n,e,t,r,i,s){vu.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(Gf.x=s*vu.x-i*vu.y,Gf.y=i*vu.x+s*vu.y):Gf.copy(vu),n.copy(e),n.x+=Gf.x,n.y+=Gf.y,n.applyMatrix4(Zk)}const Kg=new N,hR=new N;class tN extends kt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),e<s)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){Kg.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Kg);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Kg.setFromMatrixPosition(e.matrixWorld),hR.setFromMatrixPosition(this.matrixWorld);const r=Kg.distanceTo(hR)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),r>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const fR=new N,dR=new Ht,pR=new Ht,GJ=new N,mR=new Xe;class J0 extends tr{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Xe,this.bindMatrixInverse=new Xe}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ht,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const r=this.skeleton,i=this.geometry;dR.fromBufferAttribute(i.attributes.skinIndex,e),pR.fromBufferAttribute(i.attributes.skinWeight,e),fR.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=pR.getComponent(s);if(o!==0){const a=dR.getComponent(s);mR.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(GJ.copy(fR).applyMatrix4(mR),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Mh extends kt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Zu extends cn{constructor(e=null,t=1,r=1,i,s,o,a,l,c=Fn,h=Fn,d,p){super(null,o,a,l,c,h,i,s,d,p),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const gR=new Xe,HJ=new Xe;class Wh{constructor(e=[],t=[]){this.uuid=Ui(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Xe)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Xe;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:HJ;gR.multiplyMatrices(a,t[s]),gR.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Wh(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Fk(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new Zu(t,e,e,vi,Uo);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Mh),this.bones.push(o),this.boneInverses.push(new Xe().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class Eh extends Xt{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const yR=new Xe,vR=new Xe,Xg=[],VJ=new Xe,Vf=new tr;class nN extends tr{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Eh(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1;for(let i=0;i<r;i++)this.setMatrixAt(i,VJ)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(Vf.geometry=this.geometry,Vf.material=this.material,Vf.material!==void 0)for(let s=0;s<i;s++){this.getMatrixAt(s,yR),vR.multiplyMatrices(r,yR),Vf.matrixWorld=vR,Vf.raycast(e,Xg);for(let o=0,a=Xg.length;o<a;o++){const l=Xg[o];l.instanceId=s,l.object=this,t.push(l)}Xg.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Eh(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Rr extends nr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new De(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const _R=new N,xR=new N,wR=new Xe,uw=new Dp,qg=new hl;class po extends kt{constructor(e=new dt,t=new Rr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)_R.fromBufferAttribute(t,i-1),xR.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=_R.distanceTo(xR);e.setAttribute("lineDistance",new $e(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),qg.copy(r.boundingSphere),qg.applyMatrix4(i),qg.radius+=s,e.ray.intersectsSphere(qg)===!1)return;wR.copy(i).invert(),uw.copy(e.ray).applyMatrix4(wR);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new N,h=new N,d=new N,p=new N,m=this.isLineSegments?2:1,y=r.index,_=r.attributes.position;if(y!==null){const x=Math.max(0,o.start),w=Math.min(y.count,o.start+o.count);for(let S=x,M=w-1;S<M;S+=m){const T=y.getX(S),I=y.getX(S+1);if(c.fromBufferAttribute(_,T),h.fromBufferAttribute(_,I),uw.distanceSqToSegment(c,h,p,d)>l)continue;p.applyMatrix4(this.matrixWorld);const b=e.ray.origin.distanceTo(p);b<e.near||b>e.far||t.push({distance:b,point:d.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}else{const x=Math.max(0,o.start),w=Math.min(_.count,o.start+o.count);for(let S=x,M=w-1;S<M;S+=m){if(c.fromBufferAttribute(_,S),h.fromBufferAttribute(_,S+1),uw.distanceSqToSegment(c,h,p,d)>l)continue;p.applyMatrix4(this.matrixWorld);const I=e.ray.origin.distanceTo(p);I<e.near||I>e.far||t.push({distance:I,point:d.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const SR=new N,AR=new N;class Gs extends po{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)SR.fromBufferAttribute(t,i),AR.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+SR.distanceTo(AR);e.setAttribute("lineDistance",new $e(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class MC extends po{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class K0 extends nr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new De(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const MR=new Xe,qA=new Dp,Qg=new hl,Yg=new N;class EC extends kt{constructor(e=new dt,t=new K0){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Qg.copy(r.boundingSphere),Qg.applyMatrix4(i),Qg.radius+=s,e.ray.intersectsSphere(Qg)===!1)return;MR.copy(i).invert(),qA.copy(e.ray).applyMatrix4(MR);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=r.index,d=r.attributes.position;if(c!==null){const p=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);for(let y=p,g=m;y<g;y++){const _=c.getX(y);Yg.fromBufferAttribute(d,_),ER(Yg,_,l,i,e,t,this)}}else{const p=Math.max(0,o.start),m=Math.min(d.count,o.start+o.count);for(let y=p,g=m;y<g;y++)Yg.fromBufferAttribute(d,y),ER(Yg,y,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function ER(n,e,t,r,i,s,o){const a=qA.distanceSqToPoint(n);if(a<t){const l=new N;qA.closestPointToPoint(n,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class WJ extends cn{constructor(e,t,r,i,s,o,a,l,c){super(e,t,r,i,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Cn,this.magFilter=s!==void 0?s:Cn,this.generateMipmaps=!1;const h=this;function d(){h.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class jJ extends cn{constructor(e,t,r){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=r,this.magFilter=Fn,this.minFilter=Fn,this.generateMipmaps=!1,this.needsUpdate=!0}}class CC extends cn{constructor(e,t,r,i,s,o,a,l,c,h,d,p){super(null,o,a,l,c,h,i,s,d,p),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class $J extends CC{constructor(e,t,r,i,s,o){super(e,t,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=or}}class JJ extends cn{constructor(e,t,r,i,s,o,a,l,c){super(e,t,r,i,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class ms{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,c;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=r[i]-o,c<0)a=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const h=r[i],p=r[i+1]-h,m=(o-h)/p;return(i+m)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new ve:new N);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new N,i=[],s=[],o=[],a=new N,l=new Xe;for(let m=0;m<=e;m++){const y=m/e;i[m]=this.getTangentAt(y,new N)}s[0]=new N,o[0]=new N;let c=Number.MAX_VALUE;const h=Math.abs(i[0].x),d=Math.abs(i[0].y),p=Math.abs(i[0].z);h<=c&&(c=h,r.set(1,0,0)),d<=c&&(c=d,r.set(0,1,0)),p<=c&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(i[m-1],i[m]),a.length()>Number.EPSILON){a.normalize();const y=Math.acos(jn(i[m-1].dot(i[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,y))}o[m].crossVectors(i[m],s[m])}if(t===!0){let m=Math.acos(jn(s[0].dot(s[e]),-1,1));m/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let y=1;y<=e;y++)s[y].applyMatrix4(l.makeRotationAxis(i[y],m*y)),o[y].crossVectors(i[y],s[y])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class X0 extends ms{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const r=t||new ve,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const h=Math.cos(this.aRotation),d=Math.sin(this.aRotation),p=l-this.aX,m=c-this.aY;l=p*h-m*d+this.aX,c=p*d+m*h+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class rN extends X0{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function bC(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){i(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,h,d){let p=(o-s)/c-(a-s)/(c+h)+(a-o)/h,m=(a-o)/h-(l-o)/(h+d)+(l-a)/d;p*=h,m*=h,i(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const Zg=new N,hw=new bC,fw=new bC,dw=new bC;class iN extends ms{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new N){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,h;this.closed||a>0?c=i[(a-1)%s]:(Zg.subVectors(i[0],i[1]).add(i[0]),c=Zg);const d=i[a%s],p=i[(a+1)%s];if(this.closed||a+2<s?h=i[(a+2)%s]:(Zg.subVectors(i[s-1],i[s-2]).add(i[s-1]),h=Zg),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let y=Math.pow(c.distanceToSquared(d),m),g=Math.pow(d.distanceToSquared(p),m),_=Math.pow(p.distanceToSquared(h),m);g<1e-4&&(g=1),y<1e-4&&(y=g),_<1e-4&&(_=g),hw.initNonuniformCatmullRom(c.x,d.x,p.x,h.x,y,g,_),fw.initNonuniformCatmullRom(c.y,d.y,p.y,h.y,y,g,_),dw.initNonuniformCatmullRom(c.z,d.z,p.z,h.z,y,g,_)}else this.curveType==="catmullrom"&&(hw.initCatmullRom(c.x,d.x,p.x,h.x,this.tension),fw.initCatmullRom(c.y,d.y,p.y,h.y,this.tension),dw.initCatmullRom(c.z,d.z,p.z,h.z,this.tension));return r.set(hw.calc(l),fw.calc(l),dw.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new N().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function CR(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+s+o)*l+(-3*t+3*r-2*s-o)*a+s*n+t}function KJ(n,e){const t=1-n;return t*t*e}function XJ(n,e){return 2*(1-n)*n*e}function qJ(n,e){return n*n*e}function xd(n,e,t,r){return KJ(n,e)+XJ(n,t)+qJ(n,r)}function QJ(n,e){const t=1-n;return t*t*t*e}function YJ(n,e){const t=1-n;return 3*t*t*n*e}function ZJ(n,e){return 3*(1-n)*n*n*e}function eK(n,e){return n*n*n*e}function wd(n,e,t,r,i){return QJ(n,e)+YJ(n,t)+ZJ(n,r)+eK(n,i)}class TC extends ms{constructor(e=new ve,t=new ve,r=new ve,i=new ve){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new ve){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(wd(e,i.x,s.x,o.x,a.x),wd(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class sN extends ms{constructor(e=new N,t=new N,r=new N,i=new N){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new N){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(wd(e,i.x,s.x,o.x,a.x),wd(e,i.y,s.y,o.y,a.y),wd(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class q0 extends ms{constructor(e=new ve,t=new ve){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ve){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ve){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class oN extends ms{constructor(e=new N,t=new N){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new N){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new N){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class IC extends ms{constructor(e=new ve,t=new ve,r=new ve){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new ve){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(xd(e,i.x,s.x,o.x),xd(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class PC extends ms{constructor(e=new N,t=new N,r=new N){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new N){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(xd(e,i.x,s.x,o.x),xd(e,i.y,s.y,o.y),xd(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class RC extends ms{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new ve){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],c=i[o],h=i[o>i.length-2?i.length-1:o+1],d=i[o>i.length-3?i.length-1:o+2];return r.set(CR(a,l.x,c.x,h.x,d.x),CR(a,l.y,c.y,h.y,d.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new ve().fromArray(i))}return this}}var LC=Object.freeze({__proto__:null,ArcCurve:rN,CatmullRomCurve3:iN,CubicBezierCurve:TC,CubicBezierCurve3:sN,EllipseCurve:X0,LineCurve:q0,LineCurve3:oN,QuadraticBezierCurve:IC,QuadraticBezierCurve3:PC,SplineCurve:RC});class aN extends ms{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new q0(t,e))}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const h=l[c];r&&r.equals(h)||(t.push(h),r=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new LC[i.type]().fromJSON(i))}return this}}class tp extends aN{constructor(e){super(),this.type="Path",this.currentPoint=new ve,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new q0(this.currentPoint.clone(),new ve(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new IC(this.currentPoint.clone(),new ve(e,t),new ve(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new TC(this.currentPoint.clone(),new ve(e,t),new ve(r,i),new ve(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new RC(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,l){const c=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+c,t+h,r,i,s,o,a,l),this}absellipse(e,t,r,i,s,o,a,l){const c=new X0(e,t,r,i,s,o,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const h=c.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class jh extends dt{constructor(e=[new ve(0,-.5),new ve(.5,0),new ve(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=jn(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],h=1/t,d=new N,p=new ve,m=new N,y=new N,g=new N;let _=0,x=0;for(let w=0;w<=e.length-1;w++)switch(w){case 0:_=e[w+1].x-e[w].x,x=e[w+1].y-e[w].y,m.x=x*1,m.y=-_,m.z=x*0,g.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(g.x,g.y,g.z);break;default:_=e[w+1].x-e[w].x,x=e[w+1].y-e[w].y,m.x=x*1,m.y=-_,m.z=x*0,y.copy(m),m.x+=g.x,m.y+=g.y,m.z+=g.z,m.normalize(),l.push(m.x,m.y,m.z),g.copy(y)}for(let w=0;w<=t;w++){const S=r+w*h*i,M=Math.sin(S),T=Math.cos(S);for(let I=0;I<=e.length-1;I++){d.x=e[I].x*M,d.y=e[I].y,d.z=e[I].x*T,o.push(d.x,d.y,d.z),p.x=w/t,p.y=I/(e.length-1),a.push(p.x,p.y);const L=l[3*I+0]*M,b=l[3*I+1],R=l[3*I+0]*T;c.push(L,b,R)}}for(let w=0;w<t;w++)for(let S=0;S<e.length-1;S++){const M=S+w*e.length,T=M,I=M+e.length,L=M+e.length+1,b=M+1;s.push(T,I,b),s.push(L,b,I)}this.setIndex(s),this.setAttribute("position",new $e(o,3)),this.setAttribute("uv",new $e(a,2)),this.setAttribute("normal",new $e(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jh(e.points,e.segments,e.phiStart,e.phiLength)}}class Np extends jh{constructor(e=1,t=1,r=4,i=8){const s=new tp;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new Np(e.radius,e.length,e.capSegments,e.radialSegments)}}class Fp extends dt{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new N,h=new ve;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,p=3;d<=t;d++,p+=3){const m=r+d/t*i;c.x=e*Math.cos(m),c.y=e*Math.sin(m),o.push(c.x,c.y,c.z),a.push(0,0,1),h.x=(o[p]/e+1)/2,h.y=(o[p+1]/e+1)/2,l.push(h.x,h.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new $e(o,3)),this.setAttribute("normal",new $e(a,3)),this.setAttribute("uv",new $e(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fp(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Bc extends dt{constructor(e=1,t=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const h=[],d=[],p=[],m=[];let y=0;const g=[],_=r/2;let x=0;w(),o===!1&&(e>0&&S(!0),t>0&&S(!1)),this.setIndex(h),this.setAttribute("position",new $e(d,3)),this.setAttribute("normal",new $e(p,3)),this.setAttribute("uv",new $e(m,2));function w(){const M=new N,T=new N;let I=0;const L=(t-e)/r;for(let b=0;b<=s;b++){const R=[],D=b/s,G=D*(t-e)+e;for(let V=0;V<=i;V++){const F=V/i,J=F*l+a,X=Math.sin(J),ne=Math.cos(J);T.x=G*X,T.y=-D*r+_,T.z=G*ne,d.push(T.x,T.y,T.z),M.set(X,L,ne).normalize(),p.push(M.x,M.y,M.z),m.push(F,1-D),R.push(y++)}g.push(R)}for(let b=0;b<i;b++)for(let R=0;R<s;R++){const D=g[R][b],G=g[R+1][b],V=g[R+1][b+1],F=g[R][b+1];h.push(D,G,F),h.push(G,V,F),I+=6}c.addGroup(x,I,0),x+=I}function S(M){const T=y,I=new ve,L=new N;let b=0;const R=M===!0?e:t,D=M===!0?1:-1;for(let V=1;V<=i;V++)d.push(0,_*D,0),p.push(0,D,0),m.push(.5,.5),y++;const G=y;for(let V=0;V<=i;V++){const J=V/i*l+a,X=Math.cos(J),ne=Math.sin(J);L.x=R*ne,L.y=_*D,L.z=R*X,d.push(L.x,L.y,L.z),p.push(0,D,0),I.x=X*.5+.5,I.y=ne*.5*D+.5,m.push(I.x,I.y),y++}for(let V=0;V<i;V++){const F=T+V,J=G+V;M===!0?h.push(J,J+1,F):h.push(J+1,J,F),b+=3}c.addGroup(x,b,M===!0?1:2),x+=b}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bc(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Up extends Bc{constructor(e=1,t=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Up(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ra extends dt{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];a(i),c(r),h(),this.setAttribute("position",new $e(s,3)),this.setAttribute("normal",new $e(s.slice(),3)),this.setAttribute("uv",new $e(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(w){const S=new N,M=new N,T=new N;for(let I=0;I<t.length;I+=3)m(t[I+0],S),m(t[I+1],M),m(t[I+2],T),l(S,M,T,w)}function l(w,S,M,T){const I=T+1,L=[];for(let b=0;b<=I;b++){L[b]=[];const R=w.clone().lerp(M,b/I),D=S.clone().lerp(M,b/I),G=I-b;for(let V=0;V<=G;V++)V===0&&b===I?L[b][V]=R:L[b][V]=R.clone().lerp(D,V/G)}for(let b=0;b<I;b++)for(let R=0;R<2*(I-b)-1;R++){const D=Math.floor(R/2);R%2===0?(p(L[b][D+1]),p(L[b+1][D]),p(L[b][D])):(p(L[b][D+1]),p(L[b+1][D+1]),p(L[b+1][D]))}}function c(w){const S=new N;for(let M=0;M<s.length;M+=3)S.x=s[M+0],S.y=s[M+1],S.z=s[M+2],S.normalize().multiplyScalar(w),s[M+0]=S.x,s[M+1]=S.y,s[M+2]=S.z}function h(){const w=new N;for(let S=0;S<s.length;S+=3){w.x=s[S+0],w.y=s[S+1],w.z=s[S+2];const M=_(w)/2/Math.PI+.5,T=x(w)/Math.PI+.5;o.push(M,1-T)}y(),d()}function d(){for(let w=0;w<o.length;w+=6){const S=o[w+0],M=o[w+2],T=o[w+4],I=Math.max(S,M,T),L=Math.min(S,M,T);I>.9&&L<.1&&(S<.2&&(o[w+0]+=1),M<.2&&(o[w+2]+=1),T<.2&&(o[w+4]+=1))}}function p(w){s.push(w.x,w.y,w.z)}function m(w,S){const M=w*3;S.x=e[M+0],S.y=e[M+1],S.z=e[M+2]}function y(){const w=new N,S=new N,M=new N,T=new N,I=new ve,L=new ve,b=new ve;for(let R=0,D=0;R<s.length;R+=9,D+=6){w.set(s[R+0],s[R+1],s[R+2]),S.set(s[R+3],s[R+4],s[R+5]),M.set(s[R+6],s[R+7],s[R+8]),I.set(o[D+0],o[D+1]),L.set(o[D+2],o[D+3]),b.set(o[D+4],o[D+5]),T.copy(w).add(S).add(M).divideScalar(3);const G=_(T);g(I,D+0,w,G),g(L,D+2,S,G),g(b,D+4,M,G)}}function g(w,S,M,T){T<0&&w.x===1&&(o[S]=w.x-1),M.x===0&&M.z===0&&(o[S]=T/2/Math.PI+.5)}function _(w){return Math.atan2(w.z,-w.x)}function x(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ra(e.vertices,e.indices,e.radius,e.details)}}class zp extends ra{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new zp(e.radius,e.detail)}}const ey=new N,ty=new N,pw=new N,ny=new as;class lN extends dt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(oc*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],h=["a","b","c"],d=new Array(3),p={},m=[];for(let y=0;y<l;y+=3){o?(c[0]=o.getX(y),c[1]=o.getX(y+1),c[2]=o.getX(y+2)):(c[0]=y,c[1]=y+1,c[2]=y+2);const{a:g,b:_,c:x}=ny;if(g.fromBufferAttribute(a,c[0]),_.fromBufferAttribute(a,c[1]),x.fromBufferAttribute(a,c[2]),ny.getNormal(pw),d[0]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,d[1]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,d[2]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let w=0;w<3;w++){const S=(w+1)%3,M=d[w],T=d[S],I=ny[h[w]],L=ny[h[S]],b=`${M}_${T}`,R=`${T}_${M}`;R in p&&p[R]?(pw.dot(p[R].normal)<=s&&(m.push(I.x,I.y,I.z),m.push(L.x,L.y,L.z)),p[R]=null):b in p||(p[b]={index0:c[w],index1:c[S],normal:pw.clone()})}}for(const y in p)if(p[y]){const{index0:g,index1:_}=p[y];ey.fromBufferAttribute(a,g),ty.fromBufferAttribute(a,_),m.push(ey.x,ey.y,ey.z),m.push(ty.x,ty.y,ty.z)}this.setAttribute("position",new $e(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class lc extends tp{constructor(e){super(e),this.uuid=Ui(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new tp().fromJSON(i))}return this}}const tK={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=cN(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,h,d,p,m;if(r&&(s=oK(n,e,s,t)),n.length>80*t){a=c=n[0],l=h=n[1];for(let y=t;y<i;y+=t)d=n[y],p=n[y+1],d<a&&(a=d),p<l&&(l=p),d>c&&(c=d),p>h&&(h=p);m=Math.max(c-a,h-l),m=m!==0?32767/m:0}return np(s,o,t,a,l,m,0),o}};function cN(n,e,t,r,i){let s,o;if(i===yK(n,e,t,r)>0)for(s=e;s<t;s+=r)o=bR(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=bR(s,n[s],n[s+1],o);return o&&Q0(o,o.next)&&(ip(o),o=o.next),o}function xc(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(Q0(t,t.next)||Tn(t.prev,t,t.next)===0)){if(ip(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function np(n,e,t,r,i,s,o){if(!n)return;!o&&s&&hK(n,r,i,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?rK(n,r,i,s):nK(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),ip(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=iK(xc(n),e,t),np(n,e,t,r,i,s,2)):o===2&&sK(n,e,t,r,i,s):np(xc(n),e,t,r,i,s,1);break}}}function nK(n){const e=n.prev,t=n,r=n.next;if(Tn(e,t,r)>=0)return!1;const i=e.x,s=t.x,o=r.x,a=e.y,l=t.y,c=r.y,h=i<s?i<o?i:o:s<o?s:o,d=a<l?a<c?a:c:l<c?l:c,p=i>s?i>o?i:o:s>o?s:o,m=a>l?a>c?a:c:l>c?l:c;let y=r.next;for(;y!==e;){if(y.x>=h&&y.x<=p&&y.y>=d&&y.y<=m&&zu(i,a,s,l,o,c,y.x,y.y)&&Tn(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function rK(n,e,t,r){const i=n.prev,s=n,o=n.next;if(Tn(i,s,o)>=0)return!1;const a=i.x,l=s.x,c=o.x,h=i.y,d=s.y,p=o.y,m=a<l?a<c?a:c:l<c?l:c,y=h<d?h<p?h:p:d<p?d:p,g=a>l?a>c?a:c:l>c?l:c,_=h>d?h>p?h:p:d>p?d:p,x=QA(m,y,e,t,r),w=QA(g,_,e,t,r);let S=n.prevZ,M=n.nextZ;for(;S&&S.z>=x&&M&&M.z<=w;){if(S.x>=m&&S.x<=g&&S.y>=y&&S.y<=_&&S!==i&&S!==o&&zu(a,h,l,d,c,p,S.x,S.y)&&Tn(S.prev,S,S.next)>=0||(S=S.prevZ,M.x>=m&&M.x<=g&&M.y>=y&&M.y<=_&&M!==i&&M!==o&&zu(a,h,l,d,c,p,M.x,M.y)&&Tn(M.prev,M,M.next)>=0))return!1;M=M.nextZ}for(;S&&S.z>=x;){if(S.x>=m&&S.x<=g&&S.y>=y&&S.y<=_&&S!==i&&S!==o&&zu(a,h,l,d,c,p,S.x,S.y)&&Tn(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;M&&M.z<=w;){if(M.x>=m&&M.x<=g&&M.y>=y&&M.y<=_&&M!==i&&M!==o&&zu(a,h,l,d,c,p,M.x,M.y)&&Tn(M.prev,M,M.next)>=0)return!1;M=M.nextZ}return!0}function iK(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!Q0(i,s)&&uN(i,r,r.next,s)&&rp(i,s)&&rp(s,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(s.i/t|0),ip(r),ip(r.next),r=n=s),r=r.next}while(r!==n);return xc(r)}function sK(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&pK(o,a)){let l=hN(o,a);o=xc(o,o.next),l=xc(l,l.next),np(o,e,t,r,i,s,0),np(l,e,t,r,i,s,0);return}a=a.next}o=o.next}while(o!==n)}function oK(n,e,t,r){const i=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,c=cN(n,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(dK(c));for(i.sort(aK),s=0;s<i.length;s++)t=lK(i[s],t);return t}function aK(n,e){return n.x-e.x}function lK(n,e){const t=cK(n,e);if(!t)return e;const r=hN(t,n);return xc(r,r.next),xc(t,t.next)}function cK(n,e){let t=e,r=-1/0,i;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>r&&(r=p,i=t.x<t.next.x?t:t.next,p===s))return i}t=t.next}while(t!==e);if(!i)return null;const a=i,l=i.x,c=i.y;let h=1/0,d;t=i;do s>=t.x&&t.x>=l&&s!==t.x&&zu(o<c?s:r,o,l,c,o<c?r:s,o,t.x,t.y)&&(d=Math.abs(o-t.y)/(s-t.x),rp(t,n)&&(d<h||d===h&&(t.x>i.x||t.x===i.x&&uK(i,t)))&&(i=t,h=d)),t=t.next;while(t!==a);return i}function uK(n,e){return Tn(n.prev,n,e.prev)<0&&Tn(e.next,n,n.next)<0}function hK(n,e,t,r){let i=n;do i.z===0&&(i.z=QA(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,fK(i)}function fK(n){let e,t,r,i,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,c*=2}while(o>1);return n}function QA(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function dK(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function zu(n,e,t,r,i,s,o,a){return(i-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(r-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(r-a)}function pK(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!mK(n,e)&&(rp(n,e)&&rp(e,n)&&gK(n,e)&&(Tn(n.prev,n,e.prev)||Tn(n,e.prev,e))||Q0(n,e)&&Tn(n.prev,n,n.next)>0&&Tn(e.prev,e,e.next)>0)}function Tn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Q0(n,e){return n.x===e.x&&n.y===e.y}function uN(n,e,t,r){const i=iy(Tn(n,e,t)),s=iy(Tn(n,e,r)),o=iy(Tn(t,r,n)),a=iy(Tn(t,r,e));return!!(i!==s&&o!==a||i===0&&ry(n,t,e)||s===0&&ry(n,r,e)||o===0&&ry(t,n,r)||a===0&&ry(t,e,r))}function ry(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function iy(n){return n>0?1:n<0?-1:0}function mK(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&uN(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function rp(n,e){return Tn(n.prev,n,n.next)<0?Tn(n,e,n.next)>=0&&Tn(n,n.prev,e)>=0:Tn(n,e,n.prev)<0||Tn(n,n.next,e)<0}function gK(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function hN(n,e){const t=new YA(n.i,n.x,n.y),r=new YA(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function bR(n,e,t,r){const i=new YA(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function ip(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function YA(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function yK(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class ao{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return ao.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];TR(e),IR(r,e);let o=e.length;t.forEach(TR);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,IR(r,t[l]);const a=tK.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function TR(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function IR(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Gp extends dt{constructor(e=new lc([new ve(.5,.5),new ve(-.5,.5),new ve(-.5,-.5),new ve(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new $e(i,3)),this.setAttribute("uv",new $e(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,y=t.bevelSize!==void 0?t.bevelSize:m-.1,g=t.bevelOffset!==void 0?t.bevelOffset:0,_=t.bevelSegments!==void 0?t.bevelSegments:3;const x=t.extrudePath,w=t.UVGenerator!==void 0?t.UVGenerator:vK;let S,M=!1,T,I,L,b;x&&(S=x.getSpacedPoints(h),M=!0,p=!1,T=x.computeFrenetFrames(h,!1),I=new N,L=new N,b=new N),p||(_=0,m=0,y=0,g=0);const R=a.extractPoints(c);let D=R.shape;const G=R.holes;if(!ao.isClockWise(D)){D=D.reverse();for(let he=0,fe=G.length;he<fe;he++){const xe=G[he];ao.isClockWise(xe)&&(G[he]=xe.reverse())}}const F=ao.triangulateShape(D,G),J=D;for(let he=0,fe=G.length;he<fe;he++){const xe=G[he];D=D.concat(xe)}function X(he,fe,xe){return fe||console.error("THREE.ExtrudeGeometry: vec does not exist"),he.clone().addScaledVector(fe,xe)}const ne=D.length,le=F.length;function U(he,fe,xe){let Ge,Te,Fe;const Je=he.x-fe.x,Qe=he.y-fe.y,ft=xe.x-he.x,wt=xe.y-he.y,j=Je*Je+Qe*Qe,O=Je*wt-Qe*ft;if(Math.abs(O)>Number.EPSILON){const ce=Math.sqrt(j),Pe=Math.sqrt(ft*ft+wt*wt),Re=fe.x-Qe/ce,Ne=fe.y+Je/ce,rt=xe.x-wt/Pe,je=xe.y+ft/Pe,_e=((rt-Re)*wt-(je-Ne)*ft)/(Je*wt-Qe*ft);Ge=Re+Je*_e-he.x,Te=Ne+Qe*_e-he.y;const st=Ge*Ge+Te*Te;if(st<=2)return new ve(Ge,Te);Fe=Math.sqrt(st/2)}else{let ce=!1;Je>Number.EPSILON?ft>Number.EPSILON&&(ce=!0):Je<-Number.EPSILON?ft<-Number.EPSILON&&(ce=!0):Math.sign(Qe)===Math.sign(wt)&&(ce=!0),ce?(Ge=-Qe,Te=Je,Fe=Math.sqrt(j)):(Ge=Je,Te=Qe,Fe=Math.sqrt(j/2))}return new ve(Ge/Fe,Te/Fe)}const W=[];for(let he=0,fe=J.length,xe=fe-1,Ge=he+1;he<fe;he++,xe++,Ge++)xe===fe&&(xe=0),Ge===fe&&(Ge=0),W[he]=U(J[he],J[xe],J[Ge]);const B=[];let ie,z=W.concat();for(let he=0,fe=G.length;he<fe;he++){const xe=G[he];ie=[];for(let Ge=0,Te=xe.length,Fe=Te-1,Je=Ge+1;Ge<Te;Ge++,Fe++,Je++)Fe===Te&&(Fe=0),Je===Te&&(Je=0),ie[Ge]=U(xe[Ge],xe[Fe],xe[Je]);B.push(ie),z=z.concat(ie)}for(let he=0;he<_;he++){const fe=he/_,xe=m*Math.cos(fe*Math.PI/2),Ge=y*Math.sin(fe*Math.PI/2)+g;for(let Te=0,Fe=J.length;Te<Fe;Te++){const Je=X(J[Te],W[Te],Ge);Ae(Je.x,Je.y,-xe)}for(let Te=0,Fe=G.length;Te<Fe;Te++){const Je=G[Te];ie=B[Te];for(let Qe=0,ft=Je.length;Qe<ft;Qe++){const wt=X(Je[Qe],ie[Qe],Ge);Ae(wt.x,wt.y,-xe)}}}const te=y+g;for(let he=0;he<ne;he++){const fe=p?X(D[he],z[he],te):D[he];M?(L.copy(T.normals[0]).multiplyScalar(fe.x),I.copy(T.binormals[0]).multiplyScalar(fe.y),b.copy(S[0]).add(L).add(I),Ae(b.x,b.y,b.z)):Ae(fe.x,fe.y,0)}for(let he=1;he<=h;he++)for(let fe=0;fe<ne;fe++){const xe=p?X(D[fe],z[fe],te):D[fe];M?(L.copy(T.normals[he]).multiplyScalar(xe.x),I.copy(T.binormals[he]).multiplyScalar(xe.y),b.copy(S[he]).add(L).add(I),Ae(b.x,b.y,b.z)):Ae(xe.x,xe.y,d/h*he)}for(let he=_-1;he>=0;he--){const fe=he/_,xe=m*Math.cos(fe*Math.PI/2),Ge=y*Math.sin(fe*Math.PI/2)+g;for(let Te=0,Fe=J.length;Te<Fe;Te++){const Je=X(J[Te],W[Te],Ge);Ae(Je.x,Je.y,d+xe)}for(let Te=0,Fe=G.length;Te<Fe;Te++){const Je=G[Te];ie=B[Te];for(let Qe=0,ft=Je.length;Qe<ft;Qe++){const wt=X(Je[Qe],ie[Qe],Ge);M?Ae(wt.x,wt.y+S[h-1].y,S[h-1].x+xe):Ae(wt.x,wt.y,d+xe)}}}ae(),Q();function ae(){const he=i.length/3;if(p){let fe=0,xe=ne*fe;for(let Ge=0;Ge<le;Ge++){const Te=F[Ge];Oe(Te[2]+xe,Te[1]+xe,Te[0]+xe)}fe=h+_*2,xe=ne*fe;for(let Ge=0;Ge<le;Ge++){const Te=F[Ge];Oe(Te[0]+xe,Te[1]+xe,Te[2]+xe)}}else{for(let fe=0;fe<le;fe++){const xe=F[fe];Oe(xe[2],xe[1],xe[0])}for(let fe=0;fe<le;fe++){const xe=F[fe];Oe(xe[0]+ne*h,xe[1]+ne*h,xe[2]+ne*h)}}r.addGroup(he,i.length/3-he,0)}function Q(){const he=i.length/3;let fe=0;we(J,fe),fe+=J.length;for(let xe=0,Ge=G.length;xe<Ge;xe++){const Te=G[xe];we(Te,fe),fe+=Te.length}r.addGroup(he,i.length/3-he,1)}function we(he,fe){let xe=he.length;for(;--xe>=0;){const Ge=xe;let Te=xe-1;Te<0&&(Te=he.length-1);for(let Fe=0,Je=h+_*2;Fe<Je;Fe++){const Qe=ne*Fe,ft=ne*(Fe+1),wt=fe+Ge+Qe,j=fe+Te+Qe,O=fe+Te+ft,ce=fe+Ge+ft;ze(wt,j,O,ce)}}}function Ae(he,fe,xe){l.push(he),l.push(fe),l.push(xe)}function Oe(he,fe,xe){be(he),be(fe),be(xe);const Ge=i.length/3,Te=w.generateTopUV(r,i,Ge-3,Ge-2,Ge-1);Ee(Te[0]),Ee(Te[1]),Ee(Te[2])}function ze(he,fe,xe,Ge){be(he),be(fe),be(Ge),be(fe),be(xe),be(Ge);const Te=i.length/3,Fe=w.generateSideWallUV(r,i,Te-6,Te-3,Te-2,Te-1);Ee(Fe[0]),Ee(Fe[1]),Ee(Fe[3]),Ee(Fe[1]),Ee(Fe[2]),Ee(Fe[3])}function be(he){i.push(l[he*3+0]),i.push(l[he*3+1]),i.push(l[he*3+2])}function Ee(he){s.push(he.x),s.push(he.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return _K(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new LC[i.type]().fromJSON(i)),new Gp(r,e.options)}}const vK={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],a=e[r*3],l=e[r*3+1],c=e[i*3],h=e[i*3+1];return[new ve(s,o),new ve(a,l),new ve(c,h)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[r*3],h=e[r*3+1],d=e[r*3+2],p=e[i*3],m=e[i*3+1],y=e[i*3+2],g=e[s*3],_=e[s*3+1],x=e[s*3+2];return Math.abs(a-h)<Math.abs(o-c)?[new ve(o,1-l),new ve(c,1-d),new ve(p,1-y),new ve(g,1-x)]:[new ve(a,1-l),new ve(h,1-d),new ve(m,1-y),new ve(_,1-x)]}};function _K(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Hp extends ra{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Hp(e.radius,e.detail)}}class $h extends ra{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new $h(e.radius,e.detail)}}class Vp extends dt{constructor(e=.5,t=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],c=[],h=[];let d=e;const p=(t-e)/i,m=new N,y=new ve;for(let g=0;g<=i;g++){for(let _=0;_<=r;_++){const x=s+_/r*o;m.x=d*Math.cos(x),m.y=d*Math.sin(x),l.push(m.x,m.y,m.z),c.push(0,0,1),y.x=(m.x/t+1)/2,y.y=(m.y/t+1)/2,h.push(y.x,y.y)}d+=p}for(let g=0;g<i;g++){const _=g*(r+1);for(let x=0;x<r;x++){const w=x+_,S=w,M=w+r+1,T=w+r+2,I=w+1;a.push(S,M,I),a.push(M,T,I)}}this.setIndex(a),this.setAttribute("position",new $e(l,3)),this.setAttribute("normal",new $e(c,3)),this.setAttribute("uv",new $e(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vp(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Wp extends dt{constructor(e=new lc([new ve(0,.5),new ve(-.5,-.5),new ve(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let h=0;h<e.length;h++)c(e[h]),this.addGroup(a,l,h),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new $e(i,3)),this.setAttribute("normal",new $e(s,3)),this.setAttribute("uv",new $e(o,2));function c(h){const d=i.length/3,p=h.extractPoints(t);let m=p.shape;const y=p.holes;ao.isClockWise(m)===!1&&(m=m.reverse());for(let _=0,x=y.length;_<x;_++){const w=y[_];ao.isClockWise(w)===!0&&(y[_]=w.reverse())}const g=ao.triangulateShape(m,y);for(let _=0,x=y.length;_<x;_++){const w=y[_];m=m.concat(w)}for(let _=0,x=m.length;_<x;_++){const w=m[_];i.push(w.x,w.y,0),s.push(0,0,1),o.push(w.x,w.y)}for(let _=0,x=g.length;_<x;_++){const w=g[_],S=w[0]+d,M=w[1]+d,T=w[2]+d;r.push(S,M,T),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return xK(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new Wp(r,e.curveSegments)}}function xK(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class Jh extends dt{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const h=[],d=new N,p=new N,m=[],y=[],g=[],_=[];for(let x=0;x<=r;x++){const w=[],S=x/r;let M=0;x==0&&o==0?M=.5/t:x==r&&l==Math.PI&&(M=-.5/t);for(let T=0;T<=t;T++){const I=T/t;d.x=-e*Math.cos(i+I*s)*Math.sin(o+S*a),d.y=e*Math.cos(o+S*a),d.z=e*Math.sin(i+I*s)*Math.sin(o+S*a),y.push(d.x,d.y,d.z),p.copy(d).normalize(),g.push(p.x,p.y,p.z),_.push(I+M,1-S),w.push(c++)}h.push(w)}for(let x=0;x<r;x++)for(let w=0;w<t;w++){const S=h[x][w+1],M=h[x][w],T=h[x+1][w],I=h[x+1][w+1];(x!==0||o>0)&&m.push(S,M,I),(x!==r-1||l<Math.PI)&&m.push(M,T,I)}this.setIndex(m),this.setAttribute("position",new $e(y,3)),this.setAttribute("normal",new $e(g,3)),this.setAttribute("uv",new $e(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Jh(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class jp extends ra{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new jp(e.radius,e.detail)}}class $p extends dt{constructor(e=1,t=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],c=[],h=new N,d=new N,p=new N;for(let m=0;m<=r;m++)for(let y=0;y<=i;y++){const g=y/i*s,_=m/r*Math.PI*2;d.x=(e+t*Math.cos(_))*Math.cos(g),d.y=(e+t*Math.cos(_))*Math.sin(g),d.z=t*Math.sin(_),a.push(d.x,d.y,d.z),h.x=e*Math.cos(g),h.y=e*Math.sin(g),p.subVectors(d,h).normalize(),l.push(p.x,p.y,p.z),c.push(y/i),c.push(m/r)}for(let m=1;m<=r;m++)for(let y=1;y<=i;y++){const g=(i+1)*m+y-1,_=(i+1)*(m-1)+y-1,x=(i+1)*(m-1)+y,w=(i+1)*m+y;o.push(g,_,w),o.push(_,x,w)}this.setIndex(o),this.setAttribute("position",new $e(a,3)),this.setAttribute("normal",new $e(l,3)),this.setAttribute("uv",new $e(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $p(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Jp extends dt{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],c=[],h=[],d=new N,p=new N,m=new N,y=new N,g=new N,_=new N,x=new N;for(let S=0;S<=r;++S){const M=S/r*s*Math.PI*2;w(M,s,o,e,m),w(M+.01,s,o,e,y),_.subVectors(y,m),x.addVectors(y,m),g.crossVectors(_,x),x.crossVectors(g,_),g.normalize(),x.normalize();for(let T=0;T<=i;++T){const I=T/i*Math.PI*2,L=-t*Math.cos(I),b=t*Math.sin(I);d.x=m.x+(L*x.x+b*g.x),d.y=m.y+(L*x.y+b*g.y),d.z=m.z+(L*x.z+b*g.z),l.push(d.x,d.y,d.z),p.subVectors(d,m).normalize(),c.push(p.x,p.y,p.z),h.push(S/r),h.push(T/i)}}for(let S=1;S<=r;S++)for(let M=1;M<=i;M++){const T=(i+1)*(S-1)+(M-1),I=(i+1)*S+(M-1),L=(i+1)*S+M,b=(i+1)*(S-1)+M;a.push(T,I,b),a.push(I,L,b)}this.setIndex(a),this.setAttribute("position",new $e(l,3)),this.setAttribute("normal",new $e(c,3)),this.setAttribute("uv",new $e(h,2));function w(S,M,T,I,L){const b=Math.cos(S),R=Math.sin(S),D=T/M*S,G=Math.cos(D);L.x=I*(2+G)*.5*b,L.y=I*(2+G)*R*.5,L.z=I*Math.sin(D)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Jp(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Kp extends dt{constructor(e=new PC(new N(-1,-1,0),new N(-1,1,0),new N(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new N,l=new N,c=new ve;let h=new N;const d=[],p=[],m=[],y=[];g(),this.setIndex(y),this.setAttribute("position",new $e(d,3)),this.setAttribute("normal",new $e(p,3)),this.setAttribute("uv",new $e(m,2));function g(){for(let S=0;S<t;S++)_(S);_(s===!1?t:0),w(),x()}function _(S){h=e.getPointAt(S/t,h);const M=o.normals[S],T=o.binormals[S];for(let I=0;I<=i;I++){const L=I/i*Math.PI*2,b=Math.sin(L),R=-Math.cos(L);l.x=R*M.x+b*T.x,l.y=R*M.y+b*T.y,l.z=R*M.z+b*T.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=h.x+r*l.x,a.y=h.y+r*l.y,a.z=h.z+r*l.z,d.push(a.x,a.y,a.z)}}function x(){for(let S=1;S<=t;S++)for(let M=1;M<=i;M++){const T=(i+1)*(S-1)+(M-1),I=(i+1)*S+(M-1),L=(i+1)*S+M,b=(i+1)*(S-1)+M;y.push(T,I,b),y.push(I,L,b)}}function w(){for(let S=0;S<=t;S++)for(let M=0;M<=i;M++)c.x=S/t,c.y=M/i,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Kp(new LC[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class fN extends dt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new N,s=new N;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,h=l.length;c<h;++c){const d=l[c],p=d.start,m=d.count;for(let y=p,g=p+m;y<g;y+=3)for(let _=0;_<3;_++){const x=a.getX(y+_),w=a.getX(y+(_+1)%3);i.fromBufferAttribute(o,x),s.fromBufferAttribute(o,w),PR(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const h=3*a+c,d=3*a+(c+1)%3;i.fromBufferAttribute(o,h),s.fromBufferAttribute(o,d),PR(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new $e(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function PR(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var RR=Object.freeze({__proto__:null,BoxGeometry:fl,CapsuleGeometry:Np,CircleGeometry:Fp,ConeGeometry:Up,CylinderGeometry:Bc,DodecahedronGeometry:zp,EdgesGeometry:lN,ExtrudeGeometry:Gp,IcosahedronGeometry:Hp,LatheGeometry:jh,OctahedronGeometry:$h,PlaneGeometry:Hh,PolyhedronGeometry:ra,RingGeometry:Vp,ShapeGeometry:Wp,SphereGeometry:Jh,TetrahedronGeometry:jp,TorusGeometry:$p,TorusKnotGeometry:Jp,TubeGeometry:Kp,WireframeGeometry:fN});class dN extends nr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new De(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class pN extends fo{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Kh extends nr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new De(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new De(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=na,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ia extends Kh{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ve(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return jn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new De(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new De(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new De(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Sd extends nr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new De(16777215),this.specular=new De(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new De(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=na,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Lp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class mN extends nr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new De(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new De(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=na,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class gN extends nr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=na,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class DC extends nr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new De(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new De(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=na,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Lp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class yN extends nr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new De(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=na,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class vN extends Rr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function is(n,e,t){return BC(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function Ql(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function BC(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function _N(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function ZA(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i}function OC(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}function wK(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],h=c.getValueSize(),d=[],p=[];for(let m=0;m<c.times.length;++m){const y=c.times[m]*i;if(!(y<t||y>=r)){d.push(c.times[m]);for(let g=0;g<h;++g)p.push(c.values[m*h+g])}}d.length!==0&&(c.times=Ql(d,c.times.constructor),c.values=Ql(p,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function SK(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(x){return x.name===a.name&&x.ValueTypeName===l});if(c===void 0)continue;let h=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=d/3);let p=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const y=a.times.length-1;let g;if(s<=a.times[0]){const x=h,w=d-h;g=is(a.values,x,w)}else if(s>=a.times[y]){const x=y*d+h,w=x+d-h;g=is(a.values,x,w)}else{const x=a.createInterpolant(),w=h,S=d-h;x.evaluate(s),g=is(x.resultBuffer,w,S)}l==="quaternion"&&new $n().fromArray(g).normalize().conjugate().toArray(g);const _=c.times.length;for(let x=0;x<_;++x){const w=x*m+p;if(l==="quaternion")$n.multiplyQuaternionsFlat(c.values,w,g,0,c.values,w);else{const S=m-p*2;for(let M=0;M<S;++M)c.values[w+M]-=g[M]}}}return n.blendMode=uC,n}const AK={arraySlice:is,convertArray:Ql,isTypedArray:BC,getKeyframeOrder:_N,sortedArray:ZA,flattenJSON:OC,subclip:wK,makeClipAdditive:SK};class Xh{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class xN extends Xh{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Kl,endingEnd:Kl}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case Xl:s=e,a=2*t-r;break;case Qd:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Xl:o=e,l=2*r-t;break;case Qd:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const c=(r-t)*.5,h=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-r),this._offsetPrev=s*h,this._offsetNext=o*h}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,h=this._offsetPrev,d=this._offsetNext,p=this._weightPrev,m=this._weightNext,y=(r-t)/(i-t),g=y*y,_=g*y,x=-p*_+2*p*g-p*y,w=(1+p)*_+(-1.5-2*p)*g+(-.5+p)*y+1,S=(-1-m)*_+(1.5+m)*g+.5*y,M=m*_-m*g;for(let T=0;T!==a;++T)s[T]=x*o[h+T]+w*o[c+T]+S*o[l+T]+M*o[d+T];return s}}class kC extends Xh{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,h=(r-t)/(i-t),d=1-h;for(let p=0;p!==a;++p)s[p]=o[c+p]*d+o[l+p]*h;return s}}class wN extends Xh{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Hs{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ql(t,this.TimeBufferType),this.values=Ql(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Ql(e.times,Array),values:Ql(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new wN(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new kC(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new xN(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case wh:t=this.InterpolantFactoryMethodDiscrete;break;case _c:t=this.InterpolantFactoryMethodLinear;break;case Jy:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return wh;case this.InterpolantFactoryMethodLinear:return _c;case this.InterpolantFactoryMethodSmooth:return Jy}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=is(r,s,o),this.values=is(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&BC(i))for(let a=0,l=i.length;a!==l;++a){const c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=is(this.times),t=is(this.values),r=this.getValueSize(),i=this.getInterpolation()===Jy,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],h=e[a+1];if(c!==h&&(a!==1||c!==e[0]))if(i)l=!0;else{const d=a*r,p=d-r,m=d+r;for(let y=0;y!==r;++y){const g=t[d+y];if(g!==t[p+y]||g!==t[m+y]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*r,p=o*r;for(let m=0;m!==r;++m)t[p+m]=t[d+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,c=0;c!==r;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=is(e,0,o),this.values=is(t,0,o*r)):(this.times=e,this.values=t),this}clone(){const e=is(this.times,0),t=is(this.values,0),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Hs.prototype.TimeBufferType=Float32Array;Hs.prototype.ValueBufferType=Float32Array;Hs.prototype.DefaultInterpolation=_c;class Oc extends Hs{}Oc.prototype.ValueTypeName="bool";Oc.prototype.ValueBufferType=Array;Oc.prototype.DefaultInterpolation=wh;Oc.prototype.InterpolantFactoryMethodLinear=void 0;Oc.prototype.InterpolantFactoryMethodSmooth=void 0;class NC extends Hs{}NC.prototype.ValueTypeName="color";class wc extends Hs{}wc.prototype.ValueTypeName="number";class SN extends Xh{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let c=e*a;for(let h=c+a;c!==h;c+=4)$n.slerpFlat(s,0,o,c-a,o,c,l);return s}}class qo extends Hs{InterpolantFactoryMethodLinear(e){return new SN(this.times,this.values,this.getValueSize(),e)}}qo.prototype.ValueTypeName="quaternion";qo.prototype.DefaultInterpolation=_c;qo.prototype.InterpolantFactoryMethodSmooth=void 0;class kc extends Hs{}kc.prototype.ValueTypeName="string";kc.prototype.ValueBufferType=Array;kc.prototype.DefaultInterpolation=wh;kc.prototype.InterpolantFactoryMethodLinear=void 0;kc.prototype.InterpolantFactoryMethodSmooth=void 0;class Sc extends Hs{}Sc.prototype.ValueTypeName="vector";class Ac{constructor(e,t=-1,r,i=U0){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Ui(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(EK(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(Hs.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const h=_N(l);l=ZA(l,1,h),c=ZA(c,1,h),!i&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new wc(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],h=c.name.match(s);if(h&&h.length>1){const d=h[1];let p=i[d];p||(i[d]=p=[]),p.push(c)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(d,p,m,y,g){if(m.length!==0){const _=[],x=[];OC(m,_,x,y),_.length!==0&&g.push(new d(p,_,x))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const p=c[d].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let y;for(y=0;y<p.length;y++)if(p[y].morphTargets)for(let g=0;g<p[y].morphTargets.length;g++)m[p[y].morphTargets[g]]=-1;for(const g in m){const _=[],x=[];for(let w=0;w!==p[y].morphTargets.length;++w){const S=p[y];_.push(S.time),x.push(S.morphTarget===g?1:0)}i.push(new wc(".morphTargetInfluence["+g+"]",_,x))}l=m.length*o}else{const m=".bones["+t[d].name+"]";r(Sc,m+".position",p,"pos",i),r(qo,m+".quaternion",p,"rot",i),r(Sc,m+".scale",p,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function MK(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return wc;case"vector":case"vector2":case"vector3":case"vector4":return Sc;case"color":return NC;case"quaternion":return qo;case"bool":case"boolean":return Oc;case"string":return kc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function EK(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=MK(n.type);if(n.times===void 0){const t=[],r=[];OC(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Mc={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class FC{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(h){a++,s===!1&&i.onStart!==void 0&&i.onStart(h,o,a),s=!0},this.itemEnd=function(h){o++,i.onProgress!==void 0&&i.onProgress(h,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(h){i.onError!==void 0&&i.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,d){return c.push(h,d),this},this.removeHandler=function(h){const d=c.indexOf(h);return d!==-1&&c.splice(d,2),this},this.getHandler=function(h){for(let d=0,p=c.length;d<p;d+=2){const m=c[d],y=c[d+1];if(m.global&&(m.lastIndex=0),m.test(h))return y}return null}}}const Gu=new FC;class Qr{constructor(e){this.manager=e!==void 0?e:Gu,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Ro={};class CK extends Error{constructor(e,t){super(e),this.response=t}}class Mi extends Qr{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Mc.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Ro[e]!==void 0){Ro[e].push({onLoad:t,onProgress:r,onError:i});return}Ro[e]=[],Ro[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const h=Ro[e],d=c.body.getReader(),p=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),m=p?parseInt(p):0,y=m!==0;let g=0;const _=new ReadableStream({start(x){w();function w(){d.read().then(({done:S,value:M})=>{if(S)x.close();else{g+=M.byteLength;const T=new ProgressEvent("progress",{lengthComputable:y,loaded:g,total:m});for(let I=0,L=h.length;I<L;I++){const b=h[I];b.onProgress&&b.onProgress(T)}x.enqueue(M),w()}})}}});return new Response(_)}else throw new CK(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(h=>new DOMParser().parseFromString(h,a));case"json":return c.json();default:if(a===void 0)return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),p=d&&d[1]?d[1].toLowerCase():void 0,m=new TextDecoder(p);return c.arrayBuffer().then(y=>m.decode(y))}}}).then(c=>{Mc.add(e,c);const h=Ro[e];delete Ro[e];for(let d=0,p=h.length;d<p;d++){const m=h[d];m.onLoad&&m.onLoad(c)}}).catch(c=>{const h=Ro[e];if(h===void 0)throw this.manager.itemError(e),c;delete Ro[e];for(let d=0,p=h.length;d<p;d++){const m=h[d];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class bK extends Qr{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Mi(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=Ac.parse(e[r]);t.push(i)}return t}}class TK extends Qr{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],a=new CC,l=new Mi(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function h(d){l.load(e[d],function(p){const m=s.parse(p,!0);o[d]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(a.minFilter=Cn),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let d=0,p=e.length;d<p;++d)h(d);else l.load(e,function(d){const p=s.parse(d,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let y=0;y<m;y++){o[y]={mipmaps:[]};for(let g=0;g<p.mipmapCount;g++)o[y].mipmaps.push(p.mipmaps[y*p.mipmapCount+g]),o[y].format=p.format,o[y].width=p.width,o[y].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=Cn),a.format=p.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}class sp extends Qr{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Mc.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=ep("img");function l(){h(),Mc.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(d){h(),i&&i(d),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class IK extends Qr{constructor(e){super(e)}load(e,t,r,i){const s=new Op,o=new sp(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(h){s.images[c]=h,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return s}}class PK extends Qr{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Zu,a=new Mi(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const c=s.parse(l);c&&(c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:or,o.wrapT=c.wrapT!==void 0?c.wrapT:or,o.magFilter=c.magFilter!==void 0?c.magFilter:Cn,o.minFilter=c.minFilter!==void 0?c.minFilter:Cn,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=ho),c.mipmapCount===1&&(o.minFilter=Cn),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c))},r,i),o}}class qh extends Qr{constructor(e){super(e)}load(e,t,r,i){const s=new cn,o=new sp(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class dl extends kt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new De(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class AN extends dl{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(kt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new De(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const mw=new Xe,LR=new N,DR=new N;class UC{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ve(512,512),this.map=null,this.mapPass=null,this.matrix=new Xe,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new H0,this._frameExtents=new ve(1,1),this._viewportCount=1,this._viewports=[new Ht(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;LR.setFromMatrixPosition(e.matrixWorld),t.position.copy(LR),DR.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(DR),t.updateMatrixWorld(),mw.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(mw),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(mw)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class RK extends UC{constructor(){super(new rn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=Zd*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Y0 extends dl{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(kt.DEFAULT_UP),this.updateMatrix(),this.target=new kt,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new RK}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const BR=new Xe,Wf=new N,gw=new N;class LK extends UC{constructor(){super(new rn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ve(4,2),this._viewportCount=6,this._viewports=[new Ht(2,1,1,1),new Ht(0,1,1,1),new Ht(3,1,1,1),new Ht(1,1,1,1),new Ht(3,0,1,1),new Ht(1,0,1,1)],this._cubeDirections=[new N(1,0,0),new N(-1,0,0),new N(0,0,1),new N(0,0,-1),new N(0,1,0),new N(0,-1,0)],this._cubeUps=[new N(0,1,0),new N(0,1,0),new N(0,1,0),new N(0,1,0),new N(0,0,1),new N(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),Wf.setFromMatrixPosition(e.matrixWorld),r.position.copy(Wf),gw.copy(r.position),gw.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(gw),r.updateMatrixWorld(),i.makeTranslation(-Wf.x,-Wf.y,-Wf.z),BR.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(BR)}}class op extends dl{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new LK}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class DK extends UC{constructor(){super(new fs(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Z0 extends dl{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(kt.DEFAULT_UP),this.updateMatrix(),this.target=new kt,this.shadow=new DK}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class zC extends dl{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class MN extends dl{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class EN{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new N)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class e_ extends dl{constructor(e=new EN,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class t_ extends Qr{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,o=new Mi(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=t_.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new De().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==1&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new De().setHex(o.value);break;case"v2":i.uniforms[s].value=new ve().fromArray(o.value);break;case"v3":i.uniforms[s].value=new N().fromArray(o.value);break;case"v4":i.uniforms[s].value=new Ht().fromArray(o.value);break;case"m3":i.uniforms[s].value=new vr().fromArray(o.value);break;case"m4":i.uniforms[s].value=new Xe().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new ve().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new ve().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:dN,SpriteMaterial:AC,RawShaderMaterial:pN,ShaderMaterial:fo,PointsMaterial:K0,MeshPhysicalMaterial:ia,MeshStandardMaterial:Kh,MeshPhongMaterial:Sd,MeshToonMaterial:mN,MeshNormalMaterial:gN,MeshLambertMaterial:DC,MeshDepthMaterial:xC,MeshDistanceMaterial:wC,MeshBasicMaterial:Ni,MeshMatcapMaterial:yN,LineDashedMaterial:vN,LineBasicMaterial:Rr,Material:nr};return new t[e]}}class zi{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class CN extends dt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class bN extends Qr{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Mi(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(m,y){if(t[y]!==void 0)return t[y];const _=m.interleavedBuffers[y],x=s(m,_.buffer),w=Fu(_.type,x),S=new kp(w,_.stride);return S.uuid=_.uuid,t[y]=S,S}function s(m,y){if(r[y]!==void 0)return r[y];const _=m.arrayBuffers[y],x=new Uint32Array(_).buffer;return r[y]=x,x}const o=e.isInstancedBufferGeometry?new CN:new dt,a=e.data.index;if(a!==void 0){const m=Fu(a.type,a.array);o.setIndex(new Xt(m,1))}const l=e.data.attributes;for(const m in l){const y=l[m];let g;if(y.isInterleavedBufferAttribute){const _=i(e.data,y.data);g=new nl(_,y.itemSize,y.offset,y.normalized)}else{const _=Fu(y.type,y.array),x=y.isInstancedBufferAttribute?Eh:Xt;g=new x(_,y.itemSize,y.normalized)}y.name!==void 0&&(g.name=y.name),y.usage!==void 0&&g.setUsage(y.usage),y.updateRange!==void 0&&(g.updateRange.offset=y.updateRange.offset,g.updateRange.count=y.updateRange.count),o.setAttribute(m,g)}const c=e.data.morphAttributes;if(c)for(const m in c){const y=c[m],g=[];for(let _=0,x=y.length;_<x;_++){const w=y[_];let S;if(w.isInterleavedBufferAttribute){const M=i(e.data,w.data);S=new nl(M,w.itemSize,w.offset,w.normalized)}else{const M=Fu(w.type,w.array);S=new Xt(M,w.itemSize,w.normalized)}w.name!==void 0&&(S.name=w.name),g.push(S)}o.morphAttributes[m]=g}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let m=0,y=d.length;m!==y;++m){const g=d[m];o.addGroup(g.start,g.count,g.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new N;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new hl(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class BK extends Qr{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?zi.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Mi(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(d){i!==void 0&&i(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const h=c.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?zi.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new Mi(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,r),h=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,h),t!==void 0){let d=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new lc().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Wh().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new bN;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in RR?a=RR[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new t_;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=Ac.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:r.resourcePath+c;return o(h)}else return l.data?{data:Fu(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new FC(t);s=new sp(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,h=e.length;c<h;c++){const d=e[c],p=d.url;if(Array.isArray(p)){const m=[];for(let y=0,g=p.length;y<g;y++){const _=p[y],x=a(_);x!==null&&(x instanceof HTMLImageElement?m.push(x):m.push(new Zu(x.data,x.width,x.height)))}i[d.uuid]=new ql(m)}else{const m=a(d.url);i[d.uuid]=new ql(m)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:Fu(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new sp(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const h=[];for(let d=0,p=c.length;d<p;d++){const m=c[d],y=await s(m);y!==null&&(y instanceof HTMLImageElement?h.push(y):h.push(new Zu(y.data,y.width,y.height)))}r[l.uuid]=new ql(h)}else{const h=await s(l.url);r[l.uuid]=new ql(h)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let h;Array.isArray(c)?(h=new Op,c.length===6&&(h.needsUpdate=!0)):(c&&c.data?h=new Zu:h=new cn,c&&(h.needsUpdate=!0)),h.source=l,h.uuid=a.uuid,a.name!==void 0&&(h.name=a.name),a.mapping!==void 0&&(h.mapping=r(a.mapping,OK)),a.offset!==void 0&&h.offset.fromArray(a.offset),a.repeat!==void 0&&h.repeat.fromArray(a.repeat),a.center!==void 0&&h.center.fromArray(a.center),a.rotation!==void 0&&(h.rotation=a.rotation),a.wrap!==void 0&&(h.wrapS=r(a.wrap[0],OR),h.wrapT=r(a.wrap[1],OR)),a.format!==void 0&&(h.format=a.format),a.internalFormat!==void 0&&(h.internalFormat=a.internalFormat),a.type!==void 0&&(h.type=a.type),a.encoding!==void 0&&(h.encoding=a.encoding),a.minFilter!==void 0&&(h.minFilter=r(a.minFilter,kR)),a.magFilter!==void 0&&(h.magFilter=r(a.magFilter,kR)),a.anisotropy!==void 0&&(h.anisotropy=a.anisotropy),a.flipY!==void 0&&(h.flipY=a.flipY),a.generateMipmaps!==void 0&&(h.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(h.unpackAlignment=a.unpackAlignment),a.userData!==void 0&&(h.userData=a.userData),i[a.uuid]=h}return i}parseObject(e,t,r,i,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let y=0,g=p.length;y<g;y++){const _=p[y];r[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),m.push(r[_])}return m}return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),r[p]}}function c(p){return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),i[p]}let h,d;switch(e.type){case"Scene":o=new SC,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new De(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new $0(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new j0(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new rn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new fs(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new zC(e.color,e.intensity);break;case"DirectionalLight":o=new Z0(e.color,e.intensity);break;case"PointLight":o=new op(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new MN(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new Y0(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new AN(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new e_().fromJSON(e);break;case"SkinnedMesh":h=a(e.geometry),d=l(e.material),o=new J0(h,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":h=a(e.geometry),d=l(e.material),o=new tr(h,d);break;case"InstancedMesh":h=a(e.geometry),d=l(e.material);const p=e.count,m=e.instanceMatrix,y=e.instanceColor;o=new nN(h,d,p),o.instanceMatrix=new Eh(new Float32Array(m.array),16),y!==void 0&&(o.instanceColor=new Eh(new Float32Array(y.array),y.itemSize));break;case"LOD":o=new tN;break;case"Line":o=new po(a(e.geometry),l(e.material));break;case"LineLoop":o=new MC(a(e.geometry),l(e.material));break;case"LineSegments":o=new Gs(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new EC(a(e.geometry),l(e.material));break;case"Sprite":o=new eN(l(e.material));break;case"Group":o=new Bs;break;case"Bone":o=new Mh;break;default:o=new kt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,r,i,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const y=p[m];o.animations.push(s[y])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const y=p[m],g=o.getObjectByProperty("uuid",y.object);g!==void 0&&o.addLevel(g,y.distance,y.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const OK={UVMapping:N0,CubeReflectionMapping:el,CubeRefractionMapping:tl,EquirectangularReflectionMapping:vh,EquirectangularRefractionMapping:Xd,CubeUVReflectionMapping:Gh},OR={RepeatWrapping:uo,ClampToEdgeWrapping:or,MirroredRepeatWrapping:_h},kR={NearestFilter:Fn,NearestMipmapNearestFilter:qd,NearestMipmapLinearFilter:Qu,LinearFilter:Cn,LinearMipmapNearestFilter:F0,LinearMipmapLinearFilter:ho};class TN extends Qr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Mc.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){Mc.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){i&&i(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let sy;class GC{static getContext(){return sy===void 0&&(sy=new(window.AudioContext||window.webkitAudioContext)),sy}static setContext(e){sy=e}}class kK extends Qr{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Mi(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{const l=a.slice(0);GC.getContext().decodeAudioData(l,function(h){t(h)})}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}}class NK extends e_{constructor(e,t,r=1){super(void 0,r),this.isHemisphereLightProbe=!0;const i=new De().set(e),s=new De().set(t),o=new N(i.r,i.g,i.b),a=new N(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}class FK extends e_{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const r=new De().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const NR=new Xe,FR=new Xe,Tl=new Xe;class UK{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new rn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new rn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Tl.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(oc*t.fov*.5)/t.zoom;let a,l;FR.elements[12]=-i,NR.elements[12]=i,a=-o*t.aspect+s,l=o*t.aspect+s,Tl.elements[0]=2*t.near/(l-a),Tl.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Tl),a=-o*t.aspect-s,l=o*t.aspect-s,Tl.elements[0]=2*t.near/(l-a),Tl.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Tl)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(FR),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(NR)}}class HC{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=UR(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=UR();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function UR(){return(typeof performance>"u"?Date:performance).now()}const Il=new N,zR=new $n,zK=new N,Pl=new N;class GK extends kt{constructor(){super(),this.type="AudioListener",this.context=GC.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new HC}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Il,zR,zK),Pl.set(0,0,-1).applyQuaternion(zR),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Il.x,i),t.positionY.linearRampToValueAtTime(Il.y,i),t.positionZ.linearRampToValueAtTime(Il.z,i),t.forwardX.linearRampToValueAtTime(Pl.x,i),t.forwardY.linearRampToValueAtTime(Pl.y,i),t.forwardZ.linearRampToValueAtTime(Pl.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(Il.x,Il.y,Il.z),t.setOrientation(Pl.x,Pl.y,Pl.z,r.x,r.y,r.z)}}class IN extends kt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Rl=new N,GR=new $n,HK=new N,Ll=new N;class VK extends IN{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Rl,GR,HK),Ll.set(0,0,1).applyQuaternion(GR);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Rl.x,r),t.positionY.linearRampToValueAtTime(Rl.y,r),t.positionZ.linearRampToValueAtTime(Rl.z,r),t.orientationX.linearRampToValueAtTime(Ll.x,r),t.orientationY.linearRampToValueAtTime(Ll.y,r),t.orientationZ.linearRampToValueAtTime(Ll.z,r)}else t.setPosition(Rl.x,Rl.y,Rl.z),t.setOrientation(Ll.x,Ll.y,Ll.z)}}class WK{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class PN{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){$n.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;$n.multiplyQuaternionsFlat(e,o,e,t,e,r),$n.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const VC="\\[\\]\\.:\\/",jK=new RegExp("["+VC+"]","g"),WC="[^"+VC+"]",$K="[^"+VC.replace("\\.","")+"]",JK=/((?:WC+[\/:])*)/.source.replace("WC",WC),KK=/(WCOD+)?/.source.replace("WCOD",$K),XK=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",WC),qK=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",WC),QK=new RegExp("^"+JK+KK+XK+qK+"$"),YK=["material","materials","bones","map"];class ZK{constructor(e,t,r){const i=r||It.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class It{constructor(e,t,r){this.path=t,this.parsedPath=r||It.parseTrackName(t),this.node=It.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new It.Composite(e,t,r):new It(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(jK,"")}static parseTrackName(e){const t=QK.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);YK.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=It.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let c=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===c){c=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[i];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}It.Composite=ZK;It.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};It.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};It.prototype.GetterByBindingType=[It.prototype._getValue_direct,It.prototype._getValue_array,It.prototype._getValue_arrayElement,It.prototype._getValue_toArray];It.prototype.SetterByBindingTypeAndVersioning=[[It.prototype._setValue_direct,It.prototype._setValue_direct_setNeedsUpdate,It.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[It.prototype._setValue_array,It.prototype._setValue_array_setNeedsUpdate,It.prototype._setValue_array_setMatrixWorldNeedsUpdate],[It.prototype._setValue_arrayElement,It.prototype._setValue_arrayElement_setNeedsUpdate,It.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[It.prototype._setValue_fromArray,It.prototype._setValue_fromArray_setNeedsUpdate,It.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class eX{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ui(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let h=0,d=arguments.length;h!==d;++h){const p=arguments[h],m=p.uuid;let y=t[m];if(y===void 0){y=l++,t[m]=y,e.push(p);for(let g=0,_=o;g!==_;++g)s[g].push(new It(p,r[g],i[g]))}else if(y<c){a=e[y];const g=--c,_=e[g];t[_.uuid]=y,e[y]=_,t[m]=g,e[g]=p;for(let x=0,w=o;x!==w;++x){const S=s[x],M=S[g];let T=S[y];S[y]=M,T===void 0&&(T=new It(p,r[x],i[x])),S[g]=T}}else e[y]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,h=t[c];if(h!==void 0&&h>=s){const d=s++,p=e[d];t[p.uuid]=h,e[h]=p,t[c]=d,e[d]=l;for(let m=0,y=i;m!==y;++m){const g=r[m],_=g[d],x=g[h];g[h]=_,g[d]=x}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],h=c.uuid,d=t[h];if(d!==void 0)if(delete t[h],d<s){const p=--s,m=e[p],y=--o,g=e[y];t[m.uuid]=d,e[d]=m,t[g.uuid]=p,e[p]=g,e.pop();for(let _=0,x=i;_!==x;++_){const w=r[_],S=w[p],M=w[y];w[d]=S,w[p]=M,w.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=d),e[d]=m,e.pop();for(let y=0,g=i;y!==g;++y){const _=r[y];_[d]=_[p],_.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,h=this.nCachedObjects_,d=new Array(c);i=s.length,r[e]=i,o.push(e),a.push(t),s.push(d);for(let p=h,m=l.length;p!==m;++p){const y=l[p];d[p]=new It(y,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class tX{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Kl,endingEnd:Kl};for(let c=0;c!==o;++c){const h=s[c].createInterpolant(null);a[c]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Rk,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+r,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case uC:for(let h=0,d=l.length;h!==d;++h)l[h].evaluate(o),c[h].accumulateAdditive(a);break;case U0:default:for(let h=0,d=l.length;h!==d;++h)l[h].evaluate(o),c[h].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===Lk;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===Pk){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=Xl,i.endingEnd=Xl):(e?i.endingStart=this.zeroSlopeAtStart?Xl:Kl:i.endingStart=Qd,t?i.endingEnd=this.zeroSlopeAtEnd?Xl:Kl:i.endingEnd=Qd)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}const nX=new Float32Array(1);class rX extends go{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let h=c[l];h===void 0&&(h={},c[l]=h);for(let d=0;d!==s;++d){const p=i[d],m=p.name;let y=h[m];if(y!==void 0)++y.referenceCount,o[d]=y;else{if(y=o[d],y!==void 0){y._cacheIndex===null&&(++y.referenceCount,this._addInactiveBinding(y,l,m));continue}const g=t&&t._propertyBindings[d].binding.parsedPath;y=new PN(It.create(r,m,g),p.ValueTypeName,p.getValueSize()),++y.referenceCount,this._addInactiveBinding(y,l,m),o[d]=y}a[d].resultBuffer=y.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],h=e._byClipCacheIndex;c._byClipCacheIndex=h,l[h]=c,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete d[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new kC(new Float32Array(2),new Float32Array(2),1,nX),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?Ac.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(r===void 0&&(o!==null?r=o.blendMode:r=U0),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===r)return d;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const h=new tX(this,o,t,r);return this._bindAction(h,c),this._addInactiveAction(h,a,s),h}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?Ac.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==r;++c)t[c]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const h=c._cacheIndex,d=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=h,t[h]=d,t.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class jC{constructor(e){this.value=e}clone(){return new jC(this.value.clone===void 0?this.value:this.value.clone())}}let iX=0;class sX extends go{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:iX++}),this.name="",this.usage=Yd,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++)this.uniforms.push(t[r].clone());return this}clone(){return new this.constructor().copy(this)}}class oX extends kp{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class aX{constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class RN{constructor(e,t,r=0,i=1/0){this.ray=new Dp(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new ac,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return eM(e,this,r,t),r.sort(HR),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)eM(e[i],this,r,t);return r.sort(HR),r}}function HR(n,e){return n.distance-e.distance}function eM(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let s=0,o=i.length;s<o;s++)eM(i[s],e,t,!0)}}class tM{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(jn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class lX{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const VR=new ve;class cX{constructor(e=new ve(1/0,1/0),t=new ve(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=VR.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,VR).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const WR=new N,oy=new N;class uX{constructor(e=new N,t=new N){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){WR.subVectors(e,this.start),oy.subVectors(this.end,this.start);const r=oy.dot(oy);let s=oy.dot(WR)/r;return t&&(s=jn(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const jR=new N;class hX extends kt{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new dt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,h=a/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(h),Math.sin(h),1)}r.setAttribute("position",new $e(i,3));const s=new Rr({fog:!1,toneMapped:!1});this.cone=new Gs(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),jR.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(jR),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const _a=new N,ay=new Xe,yw=new Xe;class fX extends Gs{constructor(e){const t=LN(e),r=new dt,i=[],s=[],o=new De(0,0,1),a=new De(0,1,0);for(let c=0;c<t.length;c++){const h=t[c];h.parent&&h.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new $e(i,3)),r.setAttribute("color",new $e(s,3));const l=new Rr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");yw.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(ay.multiplyMatrices(yw,a.matrixWorld),_a.setFromMatrixPosition(ay),i.setXYZ(o,_a.x,_a.y,_a.z),ay.multiplyMatrices(yw,a.parent.matrixWorld),_a.setFromMatrixPosition(ay),i.setXYZ(o+1,_a.x,_a.y,_a.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function LN(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,LN(n.children[t]));return e}class dX extends tr{constructor(e,t,r){const i=new Jh(t,4,2),s=new Ni({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const pX=new N,$R=new De,JR=new De;class mX extends kt{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new $h(t);i.rotateY(Math.PI*.5),this.material=new Ni({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new Xt(o,3)),this.add(new tr(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");$R.copy(this.light.color),JR.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?$R:JR;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(pX.setFromMatrixPosition(this.light.matrixWorld).negate())}}class gX extends Gs{constructor(e=10,t=10,r=4473924,i=8947848){r=new De(r),i=new De(i);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let p=0,m=0,y=-a;p<=t;p++,y+=o){l.push(-a,0,y,a,0,y),l.push(y,0,-a,y,0,a);const g=p===s?r:i;g.toArray(c,m),m+=3,g.toArray(c,m),m+=3,g.toArray(c,m),m+=3,g.toArray(c,m),m+=3}const h=new dt;h.setAttribute("position",new $e(l,3)),h.setAttribute("color",new $e(c,3));const d=new Rr({vertexColors:!0,toneMapped:!1});super(h,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class yX extends Gs{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new De(s),o=new De(o);const a=[],l=[];if(t>1)for(let d=0;d<t;d++){const p=d/t*(Math.PI*2),m=Math.sin(p)*e,y=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,y);const g=d&1?s:o;l.push(g.r,g.g,g.b),l.push(g.r,g.g,g.b)}for(let d=0;d<r;d++){const p=d&1?s:o,m=e-e/r*d;for(let y=0;y<i;y++){let g=y/i*(Math.PI*2),_=Math.sin(g)*m,x=Math.cos(g)*m;a.push(_,0,x),l.push(p.r,p.g,p.b),g=(y+1)/i*(Math.PI*2),_=Math.sin(g)*m,x=Math.cos(g)*m,a.push(_,0,x),l.push(p.r,p.g,p.b)}}const c=new dt;c.setAttribute("position",new $e(a,3)),c.setAttribute("color",new $e(l,3));const h=new Rr({vertexColors:!0,toneMapped:!1});super(c,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const KR=new N,ly=new N,XR=new N;class vX extends kt{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new dt;i.setAttribute("position",new $e([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Rr({fog:!1,toneMapped:!1});this.lightPlane=new po(i,s),this.add(this.lightPlane),i=new dt,i.setAttribute("position",new $e([0,0,0,0,0,1],3)),this.targetLine=new po(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),KR.setFromMatrixPosition(this.light.matrixWorld),ly.setFromMatrixPosition(this.light.target.matrixWorld),XR.subVectors(ly,KR),this.lightPlane.lookAt(ly),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(ly),this.targetLine.scale.z=XR.length()}}const cy=new N,kn=new Bp;class _X extends Gs{constructor(e){const t=new dt,r=new Rr({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(y,g){l(y),l(g)}function l(y){i.push(0,0,0),s.push(0,0,0),o[y]===void 0&&(o[y]=[]),o[y].push(i.length/3-1)}t.setAttribute("position",new $e(i,3)),t.setAttribute("color",new $e(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new De(16755200),h=new De(16711680),d=new De(43775),p=new De(16777215),m=new De(3355443);this.setColors(c,h,d,p,m)}setColors(e,t,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;kn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Hn("c",t,e,kn,0,0,-1),Hn("t",t,e,kn,0,0,1),Hn("n1",t,e,kn,-r,-i,-1),Hn("n2",t,e,kn,r,-i,-1),Hn("n3",t,e,kn,-r,i,-1),Hn("n4",t,e,kn,r,i,-1),Hn("f1",t,e,kn,-r,-i,1),Hn("f2",t,e,kn,r,-i,1),Hn("f3",t,e,kn,-r,i,1),Hn("f4",t,e,kn,r,i,1),Hn("u1",t,e,kn,r*.7,i*1.1,-1),Hn("u2",t,e,kn,-r*.7,i*1.1,-1),Hn("u3",t,e,kn,0,i*2,-1),Hn("cf1",t,e,kn,-r,0,1),Hn("cf2",t,e,kn,r,0,1),Hn("cf3",t,e,kn,0,-i,1),Hn("cf4",t,e,kn,0,i,1),Hn("cn1",t,e,kn,-r,0,-1),Hn("cn2",t,e,kn,r,0,-1),Hn("cn3",t,e,kn,0,-i,-1),Hn("cn4",t,e,kn,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Hn(n,e,t,r,i,s,o){cy.set(i,s,o).unproject(r);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,h=a.length;c<h;c++)l.setXYZ(a[c],cy.x,cy.y,cy.z)}}const uy=new ul;class xX extends Gs{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new dt;s.setIndex(new Xt(r,1)),s.setAttribute("position",new Xt(i,3)),super(s,new Rr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&uy.setFromObject(this.object),uy.isEmpty())return;const t=uy.min,r=uy.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=t.x,s[4]=r.y,s[5]=r.z,s[6]=t.x,s[7]=t.y,s[8]=r.z,s[9]=r.x,s[10]=t.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=t.z,s[15]=t.x,s[16]=r.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=r.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class wX extends Gs{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new dt;s.setIndex(new Xt(r,1)),s.setAttribute("position",new $e(i,3)),super(s,new Rr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class SX extends po{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new dt;o.setAttribute("position",new $e(s,3)),o.computeBoundingSphere(),super(o,new Rr({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new dt;l.setAttribute("position",new $e(a,3)),l.computeBoundingSphere(),this.add(new tr(l,new Ni({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const qR=new N;let hy,vw;class AX extends kt{constructor(e=new N(0,0,1),t=new N(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",hy===void 0&&(hy=new dt,hy.setAttribute("position",new $e([0,0,0,0,1,0],3)),vw=new Bc(0,.5,1,5,1),vw.translate(0,-.5,0)),this.position.copy(t),this.line=new po(hy,new Rr({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new tr(vw,new Ni({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{qR.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(qR,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class MX extends Gs{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new dt;i.setAttribute("position",new $e(t,3)),i.setAttribute("color",new $e(r,3));const s=new Rr({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new De,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class EX{constructor(){this.type="ShapePath",this.color=new De,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new tp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(x){const w=[];for(let S=0,M=x.length;S<M;S++){const T=x[S],I=new lc;I.curves=T.curves,w.push(I)}return w}function r(x,w){const S=w.length;let M=!1;for(let T=S-1,I=0;I<S;T=I++){let L=w[T],b=w[I],R=b.x-L.x,D=b.y-L.y;if(Math.abs(D)>Number.EPSILON){if(D<0&&(L=w[I],R=-R,b=w[T],D=-D),x.y<L.y||x.y>b.y)continue;if(x.y===L.y){if(x.x===L.x)return!0}else{const G=D*(x.x-L.x)-R*(x.y-L.y);if(G===0)return!0;if(G<0)continue;M=!M}}else{if(x.y!==L.y)continue;if(b.x<=x.x&&x.x<=L.x||L.x<=x.x&&x.x<=b.x)return!0}}return M}const i=ao.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new lc,l.curves=a.curves,c.push(l),c;let h=!i(s[0].getPoints());h=e?!h:h;const d=[],p=[];let m=[],y=0,g;p[y]=void 0,m[y]=[];for(let x=0,w=s.length;x<w;x++)a=s[x],g=a.getPoints(),o=i(g),o=e?!o:o,o?(!h&&p[y]&&y++,p[y]={s:new lc,p:g},p[y].s.curves=a.curves,h&&y++,m[y]=[]):m[y].push({h:a,p:g[0]});if(!p[0])return t(s);if(p.length>1){let x=!1,w=0;for(let S=0,M=p.length;S<M;S++)d[S]=[];for(let S=0,M=p.length;S<M;S++){const T=m[S];for(let I=0;I<T.length;I++){const L=T[I];let b=!0;for(let R=0;R<p.length;R++)r(L.p,p[R].p)&&(S!==R&&w++,b?(b=!1,d[R].push(L)):x=!0);b&&d[S].push(L)}}w>0&&x===!1&&(m=d)}let _;for(let x=0,w=p.length;x<w;x++){l=p[x].s,c.push(l),_=m[x];for(let S=0,M=_.length;S<M;S++)l.holes.push(_[S].h)}return c}}const Oo=CX();function CX(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,h=0;for(;!(c&8388608);)c<<=1,h-=8388608;c&=-8388609,h+=947912704,s[l]=c|h}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function bX(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=jn(n,-65504,65504),Oo.floatView[0]=n;const e=Oo.uint32View[0],t=e>>23&511;return Oo.baseTable[t]+((e&8388607)>>Oo.shiftTable[t])}function TX(n){const e=n>>10;return Oo.uint32View[0]=Oo.mantissaTable[Oo.offsetTable[e]+(n&1023)]+Oo.exponentTable[e],Oo.floatView[0]}const IX={toHalfFloat:bX,fromHalfFloat:TX};class PX extends fl{constructor(e,t,r,i,s,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,r,i,s,o)}}class RX extends Np{constructor(e,t,r,i){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,r,i)}}class LX extends Fp{constructor(e,t,r,i){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,r,i)}}class DX extends Up{constructor(e,t,r,i,s,o,a){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,r,i,s,o,a)}}class BX extends Bc{constructor(e,t,r,i,s,o,a,l){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,r,i,s,o,a,l)}}class OX extends zp{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class kX extends Gp{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class NX extends Hp{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class FX extends jh{constructor(e,t,r,i){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,r,i)}}class UX extends $h{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class zX extends Hh{constructor(e,t,r,i){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,r,i)}}class GX extends ra{constructor(e,t,r,i){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,r,i)}}class HX extends Vp{constructor(e,t,r,i,s,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,r,i,s,o)}}class VX extends Wp{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class WX extends Jh{constructor(e,t,r,i,s,o,a){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,r,i,s,o,a)}}class jX extends jp{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class $X extends $p{constructor(e,t,r,i,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,r,i,s)}}class JX extends Jp{constructor(e,t,r,i,s,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,r,i,s,o)}}class KX extends Kp{constructor(e,t,r,i,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,r,i,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:O0}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=O0);const nM=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:lC,AddEquation:Hl,AddOperation:uk,AdditiveAnimationBlendMode:uC,AdditiveBlending:vA,AlphaFormat:xk,AlwaysDepth:rk,AlwaysStencilFunc:Nk,AmbientLight:zC,AmbientLightProbe:FK,AnimationClip:Ac,AnimationLoader:bK,AnimationMixer:rX,AnimationObjectGroup:eX,AnimationUtils:AK,ArcCurve:rN,ArrayCamera:qk,ArrowHelper:AX,Audio:IN,AudioAnalyser:WK,AudioContext:GC,AudioListener:GK,AudioLoader:kK,AxesHelper:MX,BackSide:Ai,BasicDepthPacking:Bk,BasicShadowMap:VO,Bone:Mh,BooleanKeyframeTrack:Oc,Box2:cX,Box3:ul,Box3Helper:wX,BoxBufferGeometry:PX,BoxGeometry:fl,BoxHelper:xX,BufferAttribute:Xt,BufferGeometry:dt,BufferGeometryLoader:bN,ByteType:mk,Cache:Mc,Camera:Bp,CameraHelper:_X,CanvasTexture:JJ,CapsuleBufferGeometry:RX,CapsuleGeometry:Np,CatmullRomCurve3:iN,CineonToneMapping:dk,CircleBufferGeometry:LX,CircleGeometry:Fp,ClampToEdgeWrapping:or,Clock:HC,Color:De,ColorKeyframeTrack:NC,ColorManagement:Hr,CompressedArrayTexture:$J,CompressedTexture:CC,CompressedTextureLoader:TK,ConeBufferGeometry:DX,ConeGeometry:Up,CubeCamera:yC,CubeReflectionMapping:el,CubeRefractionMapping:tl,CubeTexture:Op,CubeTextureLoader:IK,CubeUVReflectionMapping:Gh,CubicBezierCurve:TC,CubicBezierCurve3:sN,CubicInterpolant:xN,CullFaceBack:yA,CullFaceFront:HO,CullFaceFrontBack:jV,CullFaceNone:GO,Curve:ms,CurvePath:aN,CustomBlending:WO,CustomToneMapping:pk,CylinderBufferGeometry:BX,CylinderGeometry:Bc,Cylindrical:lX,Data3DTexture:mC,DataArrayTexture:z0,DataTexture:Zu,DataTextureLoader:PK,DataUtils:IX,DecrementStencilOp:n8,DecrementWrapStencilOp:i8,DefaultLoadingManager:Gu,DepthFormat:Ja,DepthStencilFormat:vc,DepthTexture:Qk,DirectionalLight:Z0,DirectionalLightHelper:vX,DiscreteInterpolant:wN,DisplayP3ColorSpace:fC,DodecahedronBufferGeometry:OX,DodecahedronGeometry:zp,DoubleSide:Ds,DstAlphaFactor:QO,DstColorFactor:ZO,DynamicCopyUsage:_8,DynamicDrawUsage:d8,DynamicReadUsage:g8,EdgesGeometry:lN,EllipseCurve:X0,EqualDepth:sk,EqualStencilFunc:l8,EquirectangularReflectionMapping:vh,EquirectangularRefractionMapping:Xd,Euler:us,EventDispatcher:go,ExtrudeBufferGeometry:kX,ExtrudeGeometry:Gp,FileLoader:Mi,Float16BufferAttribute:sW,Float32BufferAttribute:$e,Float64BufferAttribute:oW,FloatType:Uo,Fog:$0,FogExp2:j0,FramebufferTexture:jJ,FrontSide:co,Frustum:H0,GLBufferAttribute:aX,GLSL1:w8,GLSL3:$A,GreaterDepth:ak,GreaterEqualDepth:ok,GreaterEqualStencilFunc:f8,GreaterStencilFunc:u8,GridHelper:gX,Group:Bs,HalfFloatType:xh,HemisphereLight:AN,HemisphereLightHelper:mX,HemisphereLightProbe:NK,IcosahedronBufferGeometry:NX,IcosahedronGeometry:Hp,ImageBitmapLoader:TN,ImageLoader:sp,ImageUtils:pC,IncrementStencilOp:t8,IncrementWrapStencilOp:r8,InstancedBufferAttribute:Eh,InstancedBufferGeometry:CN,InstancedInterleavedBuffer:oX,InstancedMesh:nN,Int16BufferAttribute:rW,Int32BufferAttribute:iW,Int8BufferAttribute:eW,IntType:yk,InterleavedBuffer:kp,InterleavedBufferAttribute:nl,Interpolant:Xh,InterpolateDiscrete:wh,InterpolateLinear:_c,InterpolateSmooth:Jy,InvertStencilOp:s8,KeepStencilOp:Ky,KeyframeTrack:Hs,LOD:tN,LatheBufferGeometry:FX,LatheGeometry:jh,Layers:ac,LessDepth:ik,LessEqualDepth:Gv,LessEqualStencilFunc:c8,LessStencilFunc:a8,Light:dl,LightProbe:e_,Line:po,Line3:uX,LineBasicMaterial:Rr,LineCurve:q0,LineCurve3:oN,LineDashedMaterial:vN,LineLoop:MC,LineSegments:Gs,LinearEncoding:Xo,LinearFilter:Cn,LinearInterpolant:kC,LinearMipMapLinearFilter:qV,LinearMipMapNearestFilter:XV,LinearMipmapLinearFilter:ho,LinearMipmapNearestFilter:F0,LinearSRGBColorSpace:Sh,LinearToneMapping:hk,Loader:Qr,LoaderUtils:zi,LoadingManager:FC,LoopOnce:Pk,LoopPingPong:Lk,LoopRepeat:Rk,LuminanceAlphaFormat:Sk,LuminanceFormat:wk,MOUSE:kl,Material:nr,MaterialLoader:t_,MathUtils:Oi,Matrix3:vr,Matrix4:Xe,MaxEquation:SA,Mesh:tr,MeshBasicMaterial:Ni,MeshDepthMaterial:xC,MeshDistanceMaterial:wC,MeshLambertMaterial:DC,MeshMatcapMaterial:yN,MeshNormalMaterial:gN,MeshPhongMaterial:Sd,MeshPhysicalMaterial:ia,MeshStandardMaterial:Kh,MeshToonMaterial:mN,MinEquation:wA,MirroredRepeatWrapping:_h,MixOperation:ck,MultiplyBlending:xA,MultiplyOperation:Lp,NearestFilter:Fn,NearestMipMapLinearFilter:KV,NearestMipMapNearestFilter:JV,NearestMipmapLinearFilter:Qu,NearestMipmapNearestFilter:qd,NeverDepth:nk,NeverStencilFunc:o8,NoBlending:Vo,NoColorSpace:YV,NoToneMapping:Ns,NormalAnimationBlendMode:U0,NormalBlending:ic,NotEqualDepth:lk,NotEqualStencilFunc:h8,NumberKeyframeTrack:wc,Object3D:kt,ObjectLoader:BK,ObjectSpaceNormalMap:kk,OctahedronBufferGeometry:UX,OctahedronGeometry:$h,OneFactor:KO,OneMinusDstAlphaFactor:YO,OneMinusDstColorFactor:ek,OneMinusSrcAlphaFactor:aC,OneMinusSrcColorFactor:qO,OrthographicCamera:fs,PCFShadowMap:k0,PCFSoftShadowMap:vd,PMREMGenerator:KA,Path:tp,PerspectiveCamera:rn,Plane:Ea,PlaneBufferGeometry:zX,PlaneGeometry:Hh,PlaneHelper:SX,PointLight:op,PointLightHelper:dX,Points:EC,PointsMaterial:K0,PolarGridHelper:yX,PolyhedronBufferGeometry:GX,PolyhedronGeometry:ra,PositionalAudio:VK,PropertyBinding:It,PropertyMixer:PN,QuadraticBezierCurve:IC,QuadraticBezierCurve3:PC,Quaternion:$n,QuaternionKeyframeTrack:qo,QuaternionLinearInterpolant:SN,RED_GREEN_RGTC2_Format:WA,RED_RGTC1_Format:Ik,REVISION:O0,RGBADepthPacking:Ok,RGBAFormat:vi,RGBAIntegerFormat:bk,RGBA_ASTC_10x10_Format:zA,RGBA_ASTC_10x5_Format:NA,RGBA_ASTC_10x6_Format:FA,RGBA_ASTC_10x8_Format:UA,RGBA_ASTC_12x10_Format:GA,RGBA_ASTC_12x12_Format:HA,RGBA_ASTC_4x4_Format:IA,RGBA_ASTC_5x4_Format:PA,RGBA_ASTC_5x5_Format:RA,RGBA_ASTC_6x5_Format:LA,RGBA_ASTC_6x6_Format:DA,RGBA_ASTC_8x5_Format:BA,RGBA_ASTC_8x6_Format:OA,RGBA_ASTC_8x8_Format:kA,RGBA_BPTC_Format:$y,RGBA_ETC2_EAC_Format:TA,RGBA_PVRTC_2BPPV1_Format:CA,RGBA_PVRTC_4BPPV1_Format:EA,RGBA_S3TC_DXT1_Format:Vy,RGBA_S3TC_DXT3_Format:Wy,RGBA_S3TC_DXT5_Format:jy,RGB_ETC1_Format:Tk,RGB_ETC2_Format:bA,RGB_PVRTC_2BPPV1_Format:MA,RGB_PVRTC_4BPPV1_Format:AA,RGB_S3TC_DXT1_Format:Hy,RGFormat:Ek,RGIntegerFormat:Ck,RawShaderMaterial:pN,Ray:Dp,Raycaster:RN,RectAreaLight:MN,RedFormat:Ak,RedIntegerFormat:Mk,ReinhardToneMapping:fk,RepeatWrapping:uo,ReplaceStencilOp:e8,ReverseSubtractEquation:$O,RingBufferGeometry:HX,RingGeometry:Vp,SIGNED_RED_GREEN_RGTC2_Format:jA,SIGNED_RED_RGTC1_Format:VA,SRGBColorSpace:Is,Scene:SC,ShaderChunk:Mt,ShaderLib:Rs,ShaderMaterial:fo,ShadowMaterial:dN,Shape:lc,ShapeBufferGeometry:VX,ShapeGeometry:Wp,ShapePath:EX,ShapeUtils:ao,ShortType:gk,Skeleton:Wh,SkeletonHelper:fX,SkinnedMesh:J0,Source:ql,Sphere:hl,SphereBufferGeometry:WX,SphereGeometry:Jh,Spherical:tM,SphericalHarmonics3:EN,SplineCurve:RC,SpotLight:Y0,SpotLightHelper:hX,Sprite:eN,SpriteMaterial:AC,SrcAlphaFactor:oC,SrcAlphaSaturateFactor:tk,SrcColorFactor:XO,StaticCopyUsage:v8,StaticDrawUsage:Yd,StaticReadUsage:m8,StereoCamera:UK,StreamCopyUsage:x8,StreamDrawUsage:p8,StreamReadUsage:y8,StringKeyframeTrack:kc,SubtractEquation:jO,SubtractiveBlending:_A,TOUCH:Nl,TangentSpaceNormalMap:na,TetrahedronBufferGeometry:jX,TetrahedronGeometry:jp,Texture:cn,TextureLoader:qh,TorusBufferGeometry:$X,TorusGeometry:$p,TorusKnotBufferGeometry:JX,TorusKnotGeometry:Jp,Triangle:as,TriangleFanDrawMode:hC,TriangleStripDrawMode:Dk,TrianglesDrawMode:QV,TubeBufferGeometry:KX,TubeGeometry:Kp,TwoPassDoubleSide:$V,UVMapping:N0,Uint16BufferAttribute:G0,Uint32BufferAttribute:gC,Uint8BufferAttribute:tW,Uint8ClampedBufferAttribute:nW,Uniform:jC,UniformsGroup:sX,UniformsLib:Ue,UniformsUtils:Vk,UnsignedByteType:Ko,UnsignedInt248Type:sc,UnsignedIntType:La,UnsignedShort4444Type:vk,UnsignedShort5551Type:_k,UnsignedShortType:cC,VSMShadowMap:Jl,Vector2:ve,Vector3:N,Vector4:Ht,VectorKeyframeTrack:Sc,VideoTexture:WJ,WebGL1Renderer:Yk,WebGL3DRenderTarget:W8,WebGLArrayRenderTarget:V8,WebGLCubeRenderTarget:vC,WebGLMultipleRenderTargets:j8,WebGLRenderTarget:Us,WebGLRenderer:W0,WebGLUtils:Xk,WireframeGeometry:fN,WrapAroundEnding:Qd,ZeroCurvatureEnding:Kl,ZeroFactor:JO,ZeroSlopeEnding:Xl,ZeroStencilOp:ZV,_SRGBAFormat:Hv,sRGBEncoding:bt},Symbol.toStringTag,{value:"Module"}));var Ba={},XX={get exports(){return Ba},set exports(n){Ba=n}},Nc={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Nc.ConcurrentRoot=1;Nc.ContinuousEventPriority=4;Nc.DefaultEventPriority=16;Nc.DiscreteEventPriority=1;Nc.IdleEventPriority=536870912;Nc.LegacyRoot=0;(function(n){n.exports=Nc})(XX);function qX(n){let e;const t=new Set,r=(c,h)=>{const d=typeof c=="function"?c(e):c;if(d!==e){const p=e;e=h?d:Object.assign({},e,d),t.forEach(m=>m(e,p))}},i=()=>e,s=(c,h=i,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=h(e);function m(){const y=h(e);if(!d(p,y)){const g=p;c(p=y,g)}}return t.add(m),()=>t.delete(m)},l={setState:r,getState:i,subscribe:(c,h,d)=>h||d?s(c,h,d):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(r,i,l),l}const QX=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),QR=QX?q.useEffect:q.useLayoutEffect;function DN(n){const e=typeof n=="function"?qX(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=q.useReducer(_=>_+1,0),o=e.getState(),a=q.useRef(o),l=q.useRef(r),c=q.useRef(i),h=q.useRef(!1),d=q.useRef();d.current===void 0&&(d.current=r(o));let p,m=!1;(a.current!==o||l.current!==r||c.current!==i||h.current)&&(p=r(o),m=!i(d.current,p)),QR(()=>{m&&(d.current=p),a.current=o,l.current=r,c.current=i,h.current=!1});const y=q.useRef(o);QR(()=>{const _=()=>{try{const w=e.getState(),S=l.current(w);c.current(d.current,S)||(a.current=w,d.current=S,s())}catch{h.current=!0,s()}},x=e.subscribe(_);return e.getState()!==y.current&&_(),x},[]);const g=m?p:d.current;return q.useDebugValue(g),g};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}var rM={},YX={get exports(){return rM},set exports(n){rM=n}},ap={},ZX={get exports(){return ap},set exports(n){ap=n}},BN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(U,W){var B=U.length;U.push(W);e:for(;0<B;){var ie=B-1>>>1,z=U[ie];if(0<i(z,W))U[ie]=W,U[B]=z,B=ie;else break e}}function t(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var W=U[0],B=U.pop();if(B!==W){U[0]=B;e:for(var ie=0,z=U.length,te=z>>>1;ie<te;){var ae=2*(ie+1)-1,Q=U[ae],we=ae+1,Ae=U[we];if(0>i(Q,B))we<z&&0>i(Ae,Q)?(U[ie]=Ae,U[we]=B,ie=we):(U[ie]=Q,U[ae]=B,ie=ae);else if(we<z&&0>i(Ae,B))U[ie]=Ae,U[we]=B,ie=we;else break e}}return W}function i(U,W){var B=U.sortIndex-W.sortIndex;return B!==0?B:U.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,p=3,m=!1,y=!1,g=!1,_=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(U){for(var W=t(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=U)r(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=t(c)}}function M(U){if(g=!1,S(U),!y)if(t(l)!==null)y=!0,ne(T);else{var W=t(c);W!==null&&le(M,W.startTime-U)}}function T(U,W){y=!1,g&&(g=!1,x(b),b=-1),m=!0;var B=p;try{for(S(W),d=t(l);d!==null&&(!(d.expirationTime>W)||U&&!G());){var ie=d.callback;if(typeof ie=="function"){d.callback=null,p=d.priorityLevel;var z=ie(d.expirationTime<=W);W=n.unstable_now(),typeof z=="function"?d.callback=z:d===t(l)&&r(l),S(W)}else r(l);d=t(l)}if(d!==null)var te=!0;else{var ae=t(c);ae!==null&&le(M,ae.startTime-W),te=!1}return te}finally{d=null,p=B,m=!1}}var I=!1,L=null,b=-1,R=5,D=-1;function G(){return!(n.unstable_now()-D<R)}function V(){if(L!==null){var U=n.unstable_now();D=U;var W=!0;try{W=L(!0,U)}finally{W?F():(I=!1,L=null)}}else I=!1}var F;if(typeof w=="function")F=function(){w(V)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,X=J.port2;J.port1.onmessage=V,F=function(){X.postMessage(null)}}else F=function(){_(V,0)};function ne(U){L=U,I||(I=!0,F())}function le(U,W){b=_(function(){U(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,ne(T))},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(U){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var B=p;p=W;try{return U()}finally{p=B}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(U,W){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var B=p;p=U;try{return W()}finally{p=B}},n.unstable_scheduleCallback=function(U,W,B){var ie=n.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?ie+B:ie):B=ie,U){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=B+z,U={id:h++,callback:W,priorityLevel:U,startTime:B,expirationTime:z,sortIndex:-1},B>ie?(U.sortIndex=B,e(c,U),t(l)===null&&U===t(c)&&(g?(x(b),b=-1):g=!0,le(M,B-ie))):(U.sortIndex=z,e(l,U),y||m||(y=!0,ne(T))),U},n.unstable_shouldYield=G,n.unstable_wrapCallback=function(U){var W=p;return function(){var B=p;p=W;try{return U.apply(this,arguments)}finally{p=B}}}})(BN);(function(n){n.exports=BN})(ZX);/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eq=function(e){var t={},r=q,i=ap,s=Object.assign;function o(u){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+u,v=1;v<arguments.length;v++)f+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),y=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),M=Symbol.for("react.offscreen"),T=Symbol.iterator;function I(u){return u===null||typeof u!="object"?null:(u=T&&u[T]||u["@@iterator"],typeof u=="function"?u:null)}function L(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case h:return"Fragment";case c:return"Portal";case p:return"Profiler";case d:return"StrictMode";case _:return"Suspense";case x:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case y:return(u.displayName||"Context")+".Consumer";case m:return(u._context.displayName||"Context")+".Provider";case g:var f=u.render;return u=u.displayName,u||(u=f.displayName||f.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case w:return f=u.displayName||null,f!==null?f:L(u.type)||"Memo";case S:f=u._payload,u=u._init;try{return L(u(f))}catch{}}return null}function b(u){var f=u.type;switch(u.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=f.render,u=u.displayName||u.name||"",f.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return L(f);case 8:return f===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function R(u){var f=u,v=u;if(u.alternate)for(;f.return;)f=f.return;else{u=f;do f=u,f.flags&4098&&(v=f.return),u=f.return;while(u)}return f.tag===3?v:null}function D(u){if(R(u)!==u)throw Error(o(188))}function G(u){var f=u.alternate;if(!f){if(f=R(u),f===null)throw Error(o(188));return f!==u?null:u}for(var v=u,A=f;;){var C=v.return;if(C===null)break;var P=C.alternate;if(P===null){if(A=C.return,A!==null){v=A;continue}break}if(C.child===P.child){for(P=C.child;P;){if(P===v)return D(C),u;if(P===A)return D(C),f;P=P.sibling}throw Error(o(188))}if(v.return!==A.return)v=C,A=P;else{for(var $=!1,Z=C.child;Z;){if(Z===v){$=!0,v=C,A=P;break}if(Z===A){$=!0,A=C,v=P;break}Z=Z.sibling}if(!$){for(Z=P.child;Z;){if(Z===v){$=!0,v=P,A=C;break}if(Z===A){$=!0,A=P,v=C;break}Z=Z.sibling}if(!$)throw Error(o(189))}}if(v.alternate!==A)throw Error(o(190))}if(v.tag!==3)throw Error(o(188));return v.stateNode.current===v?u:f}function V(u){return u=G(u),u!==null?F(u):null}function F(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var f=F(u);if(f!==null)return f;u=u.sibling}return null}function J(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){if(u.tag!==4){var f=J(u);if(f!==null)return f}u=u.sibling}return null}var X=Array.isArray,ne=e.getPublicInstance,le=e.getRootHostContext,U=e.getChildHostContext,W=e.prepareForCommit,B=e.resetAfterCommit,ie=e.createInstance,z=e.appendInitialChild,te=e.finalizeInitialChildren,ae=e.prepareUpdate,Q=e.shouldSetTextContent,we=e.createTextInstance,Ae=e.scheduleTimeout,Oe=e.cancelTimeout,ze=e.noTimeout,be=e.isPrimaryRenderer,Ee=e.supportsMutation,he=e.supportsPersistence,fe=e.supportsHydration,xe=e.getInstanceFromNode,Ge=e.preparePortalMount,Te=e.getCurrentEventPriority,Fe=e.detachDeletedInstance,Je=e.supportsMicrotasks,Qe=e.scheduleMicrotask,ft=e.supportsTestSelectors,wt=e.findFiberRoot,j=e.getBoundingRect,O=e.getTextContent,ce=e.isHiddenSubtree,Pe=e.matchAccessibilityRole,Re=e.setFocusIfFocusable,Ne=e.setupIntersectionObserver,rt=e.appendChild,je=e.appendChildToContainer,_e=e.commitTextUpdate,st=e.commitMount,K=e.commitUpdate,ge=e.insertBefore,Me=e.insertInContainerBefore,Be=e.removeChild,lt=e.removeChildFromContainer,Pt=e.resetTextContent,un=e.hideInstance,Y=e.hideTextInstance,de=e.unhideInstance,Se=e.unhideTextInstance,Ke=e.clearContainer,Ze=e.cloneInstance,nn=e.createContainerChildSet,zn=e.appendChildToContainerChildSet,Ar=e.finalizeContainerChildren,Ei=e.replaceContainerChildren,mn=e.cloneHiddenInstance,Yr=e.cloneHiddenTextInstance,Ji=e.canHydrateInstance,K_=e.canHydrateTextInstance,X_=e.canHydrateSuspenseInstance,fm=e.isSuspenseInstancePending,H=e.isSuspenseInstanceFallback,oe=e.registerSuspenseInstanceRetry,me=e.getNextHydratableSibling,re=e.getFirstHydratableChild,ye=e.getFirstHydratableChildWithinContainer,at=e.getFirstHydratableChildWithinSuspenseInstance,pt=e.hydrateInstance,St=e.hydrateTextInstance,Et=e.hydrateSuspenseInstance,Ut=e.getNextHydratableInstanceAfterSuspenseInstance,Rt=e.commitHydratedContainer,Nt=e.commitHydratedSuspenseInstance,Rn=e.clearSuspenseBoundary,Zr=e.clearSuspenseBoundaryFromContainer,ys=e.shouldDeleteUnhydratedTailInstances,yo=e.didNotMatchHydratedContainerTextInstance,Ln=e.didNotMatchHydratedTextInstance,Tt;function vo(u){if(Tt===void 0)try{throw Error()}catch(v){var f=v.stack.trim().match(/\n( *(at )?)/);Tt=f&&f[1]||""}return`
`+Tt+u}var Dn=!1;function vs(u,f){if(!u||Dn)return"";Dn=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(Le){var A=Le}Reflect.construct(u,[],f)}else{try{f.call()}catch(Le){A=Le}u.call(f.prototype)}else{try{throw Error()}catch(Le){A=Le}u()}}catch(Le){if(Le&&A&&typeof Le.stack=="string"){for(var C=Le.stack.split(`
`),P=A.stack.split(`
`),$=C.length-1,Z=P.length-1;1<=$&&0<=Z&&C[$]!==P[Z];)Z--;for(;1<=$&&0<=Z;$--,Z--)if(C[$]!==P[Z]){if($!==1||Z!==1)do if($--,Z--,0>Z||C[$]!==P[Z]){var pe=`
`+C[$].replace(" at new "," at ");return u.displayName&&pe.includes("<anonymous>")&&(pe=pe.replace("<anonymous>",u.displayName)),pe}while(1<=$&&0<=Z);break}}}finally{Dn=!1,Error.prepareStackTrace=v}return(u=u?u.displayName||u.name:"")?vo(u):""}var dm=Object.prototype.hasOwnProperty,_o=[],Ws=-1;function gn(u){return{current:u}}function Gt(u){0>Ws||(u.current=_o[Ws],_o[Ws]=null,Ws--)}function qt(u,f){Ws++,_o[Ws]=u.current,u.current=f}var Bn={},Jn=gn(Bn),Dr=gn(!1),js=Bn;function zc(u,f){var v=u.type.contextTypes;if(!v)return Bn;var A=u.stateNode;if(A&&A.__reactInternalMemoizedUnmaskedChildContext===f)return A.__reactInternalMemoizedMaskedChildContext;var C={},P;for(P in v)C[P]=f[P];return A&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=f,u.__reactInternalMemoizedMaskedChildContext=C),C}function hi(u){return u=u.childContextTypes,u!=null}function pm(){Gt(Dr),Gt(Jn)}function uT(u,f,v){if(Jn.current!==Bn)throw Error(o(168));qt(Jn,f),qt(Dr,v)}function hT(u,f,v){var A=u.stateNode;if(f=f.childContextTypes,typeof A.getChildContext!="function")return v;A=A.getChildContext();for(var C in A)if(!(C in f))throw Error(o(108,b(u)||"Unknown",C));return s({},v,A)}function mm(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||Bn,js=Jn.current,qt(Jn,u),qt(Dr,Dr.current),!0}function fT(u,f,v){var A=u.stateNode;if(!A)throw Error(o(169));v?(u=hT(u,f,js),A.__reactInternalMemoizedMergedChildContext=u,Gt(Dr),Gt(Jn),qt(Jn,u)):Gt(Dr),qt(Dr,v)}var _s=Math.clz32?Math.clz32:Qz,Xz=Math.log,qz=Math.LN2;function Qz(u){return u>>>=0,u===0?32:31-(Xz(u)/qz|0)|0}var gm=64,ym=4194304;function of(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function vm(u,f){var v=u.pendingLanes;if(v===0)return 0;var A=0,C=u.suspendedLanes,P=u.pingedLanes,$=v&268435455;if($!==0){var Z=$&~C;Z!==0?A=of(Z):(P&=$,P!==0&&(A=of(P)))}else $=v&~C,$!==0?A=of($):P!==0&&(A=of(P));if(A===0)return 0;if(f!==0&&f!==A&&!(f&C)&&(C=A&-A,P=f&-f,C>=P||C===16&&(P&4194240)!==0))return f;if(A&4&&(A|=v&16),f=u.entangledLanes,f!==0)for(u=u.entanglements,f&=A;0<f;)v=31-_s(f),C=1<<v,A|=u[v],f&=~C;return A}function Yz(u,f){switch(u){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zz(u,f){for(var v=u.suspendedLanes,A=u.pingedLanes,C=u.expirationTimes,P=u.pendingLanes;0<P;){var $=31-_s(P),Z=1<<$,pe=C[$];pe===-1?(!(Z&v)||Z&A)&&(C[$]=Yz(Z,f)):pe<=f&&(u.expiredLanes|=Z),P&=~Z}}function q_(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function Q_(u){for(var f=[],v=0;31>v;v++)f.push(u);return f}function af(u,f,v){u.pendingLanes|=f,f!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,f=31-_s(f),u[f]=v}function e4(u,f){var v=u.pendingLanes&~f;u.pendingLanes=f,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=f,u.mutableReadLanes&=f,u.entangledLanes&=f,f=u.entanglements;var A=u.eventTimes;for(u=u.expirationTimes;0<v;){var C=31-_s(v),P=1<<C;f[C]=0,A[C]=-1,u[C]=-1,v&=~P}}function Y_(u,f){var v=u.entangledLanes|=f;for(u=u.entanglements;v;){var A=31-_s(v),C=1<<A;C&f|u[A]&f&&(u[A]|=f),v&=~C}}var jt=0;function dT(u){return u&=-u,1<u?4<u?u&268435455?16:536870912:4:1}var Z_=i.unstable_scheduleCallback,pT=i.unstable_cancelCallback,t4=i.unstable_shouldYield,n4=i.unstable_requestPaint,fr=i.unstable_now,ex=i.unstable_ImmediatePriority,r4=i.unstable_UserBlockingPriority,tx=i.unstable_NormalPriority,i4=i.unstable_IdlePriority,_m=null,$s=null;function s4(u){if($s&&typeof $s.onCommitFiberRoot=="function")try{$s.onCommitFiberRoot(_m,u,void 0,(u.current.flags&128)===128)}catch{}}function o4(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var Js=typeof Object.is=="function"?Object.is:o4,xo=null,xm=!1,nx=!1;function mT(u){xo===null?xo=[u]:xo.push(u)}function a4(u){xm=!0,mT(u)}function Ks(){if(!nx&&xo!==null){nx=!0;var u=0,f=jt;try{var v=xo;for(jt=1;u<v.length;u++){var A=v[u];do A=A(!0);while(A!==null)}xo=null,xm=!1}catch(C){throw xo!==null&&(xo=xo.slice(u+1)),Z_(ex,Ks),C}finally{jt=f,nx=!1}}return null}var l4=a.ReactCurrentBatchConfig;function wm(u,f){if(Js(u,f))return!0;if(typeof u!="object"||u===null||typeof f!="object"||f===null)return!1;var v=Object.keys(u),A=Object.keys(f);if(v.length!==A.length)return!1;for(A=0;A<v.length;A++){var C=v[A];if(!dm.call(f,C)||!Js(u[C],f[C]))return!1}return!0}function c4(u){switch(u.tag){case 5:return vo(u.type);case 16:return vo("Lazy");case 13:return vo("Suspense");case 19:return vo("SuspenseList");case 0:case 2:case 15:return u=vs(u.type,!1),u;case 11:return u=vs(u.type.render,!1),u;case 1:return u=vs(u.type,!0),u;default:return""}}function xs(u,f){if(u&&u.defaultProps){f=s({},f),u=u.defaultProps;for(var v in u)f[v]===void 0&&(f[v]=u[v]);return f}return f}var Sm=gn(null),Am=null,Gc=null,rx=null;function ix(){rx=Gc=Am=null}function gT(u,f,v){be?(qt(Sm,f._currentValue),f._currentValue=v):(qt(Sm,f._currentValue2),f._currentValue2=v)}function sx(u){var f=Sm.current;Gt(Sm),be?u._currentValue=f:u._currentValue2=f}function ox(u,f,v){for(;u!==null;){var A=u.alternate;if((u.childLanes&f)!==f?(u.childLanes|=f,A!==null&&(A.childLanes|=f)):A!==null&&(A.childLanes&f)!==f&&(A.childLanes|=f),u===v)break;u=u.return}}function Hc(u,f){Am=u,rx=Gc=null,u=u.dependencies,u!==null&&u.firstContext!==null&&(u.lanes&f&&(Ti=!0),u.firstContext=null)}function Ki(u){var f=be?u._currentValue:u._currentValue2;if(rx!==u)if(u={context:u,memoizedValue:f,next:null},Gc===null){if(Am===null)throw Error(o(308));Gc=u,Am.dependencies={lanes:0,firstContext:u}}else Gc=Gc.next=u;return f}var Xs=null,oa=!1;function ax(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yT(u,f){u=u.updateQueue,f.updateQueue===u&&(f.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function wo(u,f){return{eventTime:u,lane:f,tag:0,payload:null,callback:null,next:null}}function aa(u,f){var v=u.updateQueue;v!==null&&(v=v.shared,Kn!==null&&u.mode&1&&!(Ct&2)?(u=v.interleaved,u===null?(f.next=f,Xs===null?Xs=[v]:Xs.push(v)):(f.next=u.next,u.next=f),v.interleaved=f):(u=v.pending,u===null?f.next=f:(f.next=u.next,u.next=f),v.pending=f))}function Mm(u,f,v){if(f=f.updateQueue,f!==null&&(f=f.shared,(v&4194240)!==0)){var A=f.lanes;A&=u.pendingLanes,v|=A,f.lanes=v,Y_(u,v)}}function vT(u,f){var v=u.updateQueue,A=u.alternate;if(A!==null&&(A=A.updateQueue,v===A)){var C=null,P=null;if(v=v.firstBaseUpdate,v!==null){do{var $={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};P===null?C=P=$:P=P.next=$,v=v.next}while(v!==null);P===null?C=P=f:P=P.next=f}else C=P=f;v={baseState:A.baseState,firstBaseUpdate:C,lastBaseUpdate:P,shared:A.shared,effects:A.effects},u.updateQueue=v;return}u=v.lastBaseUpdate,u===null?v.firstBaseUpdate=f:u.next=f,v.lastBaseUpdate=f}function Em(u,f,v,A){var C=u.updateQueue;oa=!1;var P=C.firstBaseUpdate,$=C.lastBaseUpdate,Z=C.shared.pending;if(Z!==null){C.shared.pending=null;var pe=Z,Le=pe.next;pe.next=null,$===null?P=Le:$.next=Le,$=pe;var Ye=u.alternate;Ye!==null&&(Ye=Ye.updateQueue,Z=Ye.lastBaseUpdate,Z!==$&&(Z===null?Ye.firstBaseUpdate=Le:Z.next=Le,Ye.lastBaseUpdate=pe))}if(P!==null){var yt=C.baseState;$=0,Ye=Le=pe=null,Z=P;do{var ct=Z.lane,sn=Z.eventTime;if((A&ct)===ct){Ye!==null&&(Ye=Ye.next={eventTime:sn,lane:0,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null});e:{var it=u,Nr=Z;switch(ct=f,sn=v,Nr.tag){case 1:if(it=Nr.payload,typeof it=="function"){yt=it.call(sn,yt,ct);break e}yt=it;break e;case 3:it.flags=it.flags&-65537|128;case 0:if(it=Nr.payload,ct=typeof it=="function"?it.call(sn,yt,ct):it,ct==null)break e;yt=s({},yt,ct);break e;case 2:oa=!0}}Z.callback!==null&&Z.lane!==0&&(u.flags|=64,ct=C.effects,ct===null?C.effects=[Z]:ct.push(Z))}else sn={eventTime:sn,lane:ct,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},Ye===null?(Le=Ye=sn,pe=yt):Ye=Ye.next=sn,$|=ct;if(Z=Z.next,Z===null){if(Z=C.shared.pending,Z===null)break;ct=Z,Z=ct.next,ct.next=null,C.lastBaseUpdate=ct,C.shared.pending=null}}while(1);if(Ye===null&&(pe=yt),C.baseState=pe,C.firstBaseUpdate=Le,C.lastBaseUpdate=Ye,f=C.shared.interleaved,f!==null){C=f;do $|=C.lane,C=C.next;while(C!==f)}else P===null&&(C.shared.lanes=0);Qc|=$,u.lanes=$,u.memoizedState=yt}}function _T(u,f,v){if(u=f.effects,f.effects=null,u!==null)for(f=0;f<u.length;f++){var A=u[f],C=A.callback;if(C!==null){if(A.callback=null,A=v,typeof C!="function")throw Error(o(191,C));C.call(A)}}}var xT=new r.Component().refs;function lx(u,f,v,A){f=u.memoizedState,v=v(A,f),v=v==null?f:s({},f,v),u.memoizedState=v,u.lanes===0&&(u.updateQueue.baseState=v)}var Cm={isMounted:function(u){return(u=u._reactInternals)?R(u)===u:!1},enqueueSetState:function(u,f,v){u=u._reactInternals;var A=ti(),C=ua(u),P=wo(A,C);P.payload=f,v!=null&&(P.callback=v),aa(u,P),f=Zi(u,C,A),f!==null&&Mm(f,u,C)},enqueueReplaceState:function(u,f,v){u=u._reactInternals;var A=ti(),C=ua(u),P=wo(A,C);P.tag=1,P.payload=f,v!=null&&(P.callback=v),aa(u,P),f=Zi(u,C,A),f!==null&&Mm(f,u,C)},enqueueForceUpdate:function(u,f){u=u._reactInternals;var v=ti(),A=ua(u),C=wo(v,A);C.tag=2,f!=null&&(C.callback=f),aa(u,C),f=Zi(u,A,v),f!==null&&Mm(f,u,A)}};function wT(u,f,v,A,C,P,$){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(A,P,$):f.prototype&&f.prototype.isPureReactComponent?!wm(v,A)||!wm(C,P):!0}function ST(u,f,v){var A=!1,C=Bn,P=f.contextType;return typeof P=="object"&&P!==null?P=Ki(P):(C=hi(f)?js:Jn.current,A=f.contextTypes,P=(A=A!=null)?zc(u,C):Bn),f=new f(v,P),u.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Cm,u.stateNode=f,f._reactInternals=u,A&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=C,u.__reactInternalMemoizedMaskedChildContext=P),f}function AT(u,f,v,A){u=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(v,A),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(v,A),f.state!==u&&Cm.enqueueReplaceState(f,f.state,null)}function cx(u,f,v,A){var C=u.stateNode;C.props=v,C.state=u.memoizedState,C.refs=xT,ax(u);var P=f.contextType;typeof P=="object"&&P!==null?C.context=Ki(P):(P=hi(f)?js:Jn.current,C.context=zc(u,P)),C.state=u.memoizedState,P=f.getDerivedStateFromProps,typeof P=="function"&&(lx(u,f,P,v),C.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(f=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),f!==C.state&&Cm.enqueueReplaceState(C,C.state,null),Em(u,v,C,A),C.state=u.memoizedState),typeof C.componentDidMount=="function"&&(u.flags|=4194308)}var Vc=[],Wc=0,bm=null,Tm=0,Xi=[],qi=0,gl=null,So=1,Ao="";function yl(u,f){Vc[Wc++]=Tm,Vc[Wc++]=bm,bm=u,Tm=f}function MT(u,f,v){Xi[qi++]=So,Xi[qi++]=Ao,Xi[qi++]=gl,gl=u;var A=So;u=Ao;var C=32-_s(A)-1;A&=~(1<<C),v+=1;var P=32-_s(f)+C;if(30<P){var $=C-C%5;P=(A&(1<<$)-1).toString(32),A>>=$,C-=$,So=1<<32-_s(f)+C|v<<C|A,Ao=P+u}else So=1<<P|v<<C|A,Ao=u}function ux(u){u.return!==null&&(yl(u,1),MT(u,1,0))}function hx(u){for(;u===bm;)bm=Vc[--Wc],Vc[Wc]=null,Tm=Vc[--Wc],Vc[Wc]=null;for(;u===gl;)gl=Xi[--qi],Xi[qi]=null,Ao=Xi[--qi],Xi[qi]=null,So=Xi[--qi],Xi[qi]=null}var Ci=null,bi=null,yn=!1,lf=!1,ws=null;function ET(u,f){var v=es(5,null,null,0);v.elementType="DELETED",v.stateNode=f,v.return=u,f=u.deletions,f===null?(u.deletions=[v],u.flags|=16):f.push(v)}function CT(u,f){switch(u.tag){case 5:return f=Ji(f,u.type,u.pendingProps),f!==null?(u.stateNode=f,Ci=u,bi=re(f),!0):!1;case 6:return f=K_(f,u.pendingProps),f!==null?(u.stateNode=f,Ci=u,bi=null,!0):!1;case 13:if(f=X_(f),f!==null){var v=gl!==null?{id:So,overflow:Ao}:null;return u.memoizedState={dehydrated:f,treeContext:v,retryLane:1073741824},v=es(18,null,null,0),v.stateNode=f,v.return=u,u.child=v,Ci=u,bi=null,!0}return!1;default:return!1}}function fx(u){return(u.mode&1)!==0&&(u.flags&128)===0}function dx(u){if(yn){var f=bi;if(f){var v=f;if(!CT(u,f)){if(fx(u))throw Error(o(418));f=me(v);var A=Ci;f&&CT(u,f)?ET(A,v):(u.flags=u.flags&-4097|2,yn=!1,Ci=u)}}else{if(fx(u))throw Error(o(418));u.flags=u.flags&-4097|2,yn=!1,Ci=u}}}function bT(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;Ci=u}function cf(u){if(!fe||u!==Ci)return!1;if(!yn)return bT(u),yn=!0,!1;if(u.tag!==3&&(u.tag!==5||ys(u.type)&&!Q(u.type,u.memoizedProps))){var f=bi;if(f){if(fx(u)){for(u=bi;u;)u=me(u);throw Error(o(418))}for(;f;)ET(u,f),f=me(f)}}if(bT(u),u.tag===13){if(!fe)throw Error(o(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));bi=Ut(u)}else bi=Ci?me(u.stateNode):null;return!0}function jc(){fe&&(bi=Ci=null,lf=yn=!1)}function px(u){ws===null?ws=[u]:ws.push(u)}function uf(u,f,v){if(u=v.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(o(309));var A=v.stateNode}if(!A)throw Error(o(147,u));var C=A,P=""+u;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===P?f.ref:(f=function($){var Z=C.refs;Z===xT&&(Z=C.refs={}),$===null?delete Z[P]:Z[P]=$},f._stringRef=P,f)}if(typeof u!="string")throw Error(o(284));if(!v._owner)throw Error(o(290,u))}return u}function Im(u,f){throw u=Object.prototype.toString.call(f),Error(o(31,u==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":u))}function TT(u){var f=u._init;return f(u._payload)}function IT(u){function f(se,ee){if(u){var ue=se.deletions;ue===null?(se.deletions=[ee],se.flags|=16):ue.push(ee)}}function v(se,ee){if(!u)return null;for(;ee!==null;)f(se,ee),ee=ee.sibling;return null}function A(se,ee){for(se=new Map;ee!==null;)ee.key!==null?se.set(ee.key,ee):se.set(ee.index,ee),ee=ee.sibling;return se}function C(se,ee){return se=fa(se,ee),se.index=0,se.sibling=null,se}function P(se,ee,ue){return se.index=ue,u?(ue=se.alternate,ue!==null?(ue=ue.index,ue<ee?(se.flags|=2,ee):ue):(se.flags|=2,ee)):(se.flags|=1048576,ee)}function $(se){return u&&se.alternate===null&&(se.flags|=2),se}function Z(se,ee,ue,We){return ee===null||ee.tag!==6?(ee=Qx(ue,se.mode,We),ee.return=se,ee):(ee=C(ee,ue),ee.return=se,ee)}function pe(se,ee,ue,We){var nt=ue.type;return nt===h?Ye(se,ee,ue.props.children,We,ue.key):ee!==null&&(ee.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===S&&TT(nt)===ee.type)?(We=C(ee,ue.props),We.ref=uf(se,ee,ue),We.return=se,We):(We=og(ue.type,ue.key,ue.props,null,se.mode,We),We.ref=uf(se,ee,ue),We.return=se,We)}function Le(se,ee,ue,We){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==ue.containerInfo||ee.stateNode.implementation!==ue.implementation?(ee=Yx(ue,se.mode,We),ee.return=se,ee):(ee=C(ee,ue.children||[]),ee.return=se,ee)}function Ye(se,ee,ue,We,nt){return ee===null||ee.tag!==7?(ee=Ml(ue,se.mode,We,nt),ee.return=se,ee):(ee=C(ee,ue),ee.return=se,ee)}function yt(se,ee,ue){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=Qx(""+ee,se.mode,ue),ee.return=se,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case l:return ue=og(ee.type,ee.key,ee.props,null,se.mode,ue),ue.ref=uf(se,null,ee),ue.return=se,ue;case c:return ee=Yx(ee,se.mode,ue),ee.return=se,ee;case S:var We=ee._init;return yt(se,We(ee._payload),ue)}if(X(ee)||I(ee))return ee=Ml(ee,se.mode,ue,null),ee.return=se,ee;Im(se,ee)}return null}function ct(se,ee,ue,We){var nt=ee!==null?ee.key:null;if(typeof ue=="string"&&ue!==""||typeof ue=="number")return nt!==null?null:Z(se,ee,""+ue,We);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case l:return ue.key===nt?pe(se,ee,ue,We):null;case c:return ue.key===nt?Le(se,ee,ue,We):null;case S:return nt=ue._init,ct(se,ee,nt(ue._payload),We)}if(X(ue)||I(ue))return nt!==null?null:Ye(se,ee,ue,We,null);Im(se,ue)}return null}function sn(se,ee,ue,We,nt){if(typeof We=="string"&&We!==""||typeof We=="number")return se=se.get(ue)||null,Z(ee,se,""+We,nt);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case l:return se=se.get(We.key===null?ue:We.key)||null,pe(ee,se,We,nt);case c:return se=se.get(We.key===null?ue:We.key)||null,Le(ee,se,We,nt);case S:var At=We._init;return sn(se,ee,ue,At(We._payload),nt)}if(X(We)||I(We))return se=se.get(ue)||null,Ye(ee,se,We,nt,null);Im(ee,We)}return null}function it(se,ee,ue,We){for(var nt=null,At=null,vt=ee,$t=ee=0,pr=null;vt!==null&&$t<ue.length;$t++){vt.index>$t?(pr=vt,vt=null):pr=vt.sibling;var Jt=ct(se,vt,ue[$t],We);if(Jt===null){vt===null&&(vt=pr);break}u&&vt&&Jt.alternate===null&&f(se,vt),ee=P(Jt,ee,$t),At===null?nt=Jt:At.sibling=Jt,At=Jt,vt=pr}if($t===ue.length)return v(se,vt),yn&&yl(se,$t),nt;if(vt===null){for(;$t<ue.length;$t++)vt=yt(se,ue[$t],We),vt!==null&&(ee=P(vt,ee,$t),At===null?nt=vt:At.sibling=vt,At=vt);return yn&&yl(se,$t),nt}for(vt=A(se,vt);$t<ue.length;$t++)pr=sn(vt,se,$t,ue[$t],We),pr!==null&&(u&&pr.alternate!==null&&vt.delete(pr.key===null?$t:pr.key),ee=P(pr,ee,$t),At===null?nt=pr:At.sibling=pr,At=pr);return u&&vt.forEach(function(da){return f(se,da)}),yn&&yl(se,$t),nt}function Nr(se,ee,ue,We){var nt=I(ue);if(typeof nt!="function")throw Error(o(150));if(ue=nt.call(ue),ue==null)throw Error(o(151));for(var At=nt=null,vt=ee,$t=ee=0,pr=null,Jt=ue.next();vt!==null&&!Jt.done;$t++,Jt=ue.next()){vt.index>$t?(pr=vt,vt=null):pr=vt.sibling;var da=ct(se,vt,Jt.value,We);if(da===null){vt===null&&(vt=pr);break}u&&vt&&da.alternate===null&&f(se,vt),ee=P(da,ee,$t),At===null?nt=da:At.sibling=da,At=da,vt=pr}if(Jt.done)return v(se,vt),yn&&yl(se,$t),nt;if(vt===null){for(;!Jt.done;$t++,Jt=ue.next())Jt=yt(se,Jt.value,We),Jt!==null&&(ee=P(Jt,ee,$t),At===null?nt=Jt:At.sibling=Jt,At=Jt);return yn&&yl(se,$t),nt}for(vt=A(se,vt);!Jt.done;$t++,Jt=ue.next())Jt=sn(vt,se,$t,Jt.value,We),Jt!==null&&(u&&Jt.alternate!==null&&vt.delete(Jt.key===null?$t:Jt.key),ee=P(Jt,ee,$t),At===null?nt=Jt:At.sibling=Jt,At=Jt);return u&&vt.forEach(function(U4){return f(se,U4)}),yn&&yl(se,$t),nt}function ts(se,ee,ue,We){if(typeof ue=="object"&&ue!==null&&ue.type===h&&ue.key===null&&(ue=ue.props.children),typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case l:e:{for(var nt=ue.key,At=ee;At!==null;){if(At.key===nt){if(nt=ue.type,nt===h){if(At.tag===7){v(se,At.sibling),ee=C(At,ue.props.children),ee.return=se,se=ee;break e}}else if(At.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===S&&TT(nt)===At.type){v(se,At.sibling),ee=C(At,ue.props),ee.ref=uf(se,At,ue),ee.return=se,se=ee;break e}v(se,At);break}else f(se,At);At=At.sibling}ue.type===h?(ee=Ml(ue.props.children,se.mode,We,ue.key),ee.return=se,se=ee):(We=og(ue.type,ue.key,ue.props,null,se.mode,We),We.ref=uf(se,ee,ue),We.return=se,se=We)}return $(se);case c:e:{for(At=ue.key;ee!==null;){if(ee.key===At)if(ee.tag===4&&ee.stateNode.containerInfo===ue.containerInfo&&ee.stateNode.implementation===ue.implementation){v(se,ee.sibling),ee=C(ee,ue.children||[]),ee.return=se,se=ee;break e}else{v(se,ee);break}else f(se,ee);ee=ee.sibling}ee=Yx(ue,se.mode,We),ee.return=se,se=ee}return $(se);case S:return At=ue._init,ts(se,ee,At(ue._payload),We)}if(X(ue))return it(se,ee,ue,We);if(I(ue))return Nr(se,ee,ue,We);Im(se,ue)}return typeof ue=="string"&&ue!==""||typeof ue=="number"?(ue=""+ue,ee!==null&&ee.tag===6?(v(se,ee.sibling),ee=C(ee,ue),ee.return=se,se=ee):(v(se,ee),ee=Qx(ue,se.mode,We),ee.return=se,se=ee),$(se)):v(se,ee)}return ts}var $c=IT(!0),PT=IT(!1),hf={},Qi=gn(hf),ff=gn(hf),Jc=gn(hf);function qs(u){if(u===hf)throw Error(o(174));return u}function mx(u,f){qt(Jc,f),qt(ff,u),qt(Qi,hf),u=le(f),Gt(Qi),qt(Qi,u)}function Kc(){Gt(Qi),Gt(ff),Gt(Jc)}function RT(u){var f=qs(Jc.current),v=qs(Qi.current);f=U(v,u.type,f),v!==f&&(qt(ff,u),qt(Qi,f))}function gx(u){ff.current===u&&(Gt(Qi),Gt(ff))}var Sn=gn(0);function Pm(u){for(var f=u;f!==null;){if(f.tag===13){var v=f.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||fm(v)||H(v)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if(f.flags&128)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var yx=[];function vx(){for(var u=0;u<yx.length;u++){var f=yx[u];be?f._workInProgressVersionPrimary=null:f._workInProgressVersionSecondary=null}yx.length=0}var Rm=a.ReactCurrentDispatcher,Yi=a.ReactCurrentBatchConfig,Xc=0,On=null,Br=null,dr=null,Lm=!1,df=!1,pf=0,u4=0;function Or(){throw Error(o(321))}function _x(u,f){if(f===null)return!1;for(var v=0;v<f.length&&v<u.length;v++)if(!Js(u[v],f[v]))return!1;return!0}function xx(u,f,v,A,C,P){if(Xc=P,On=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,Rm.current=u===null||u.memoizedState===null?p4:m4,u=v(A,C),df){P=0;do{if(df=!1,pf=0,25<=P)throw Error(o(301));P+=1,dr=Br=null,f.updateQueue=null,Rm.current=g4,u=v(A,C)}while(df)}if(Rm.current=Nm,f=Br!==null&&Br.next!==null,Xc=0,dr=Br=On=null,Lm=!1,f)throw Error(o(300));return u}function wx(){var u=pf!==0;return pf=0,u}function Mo(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dr===null?On.memoizedState=dr=u:dr=dr.next=u,dr}function Qs(){if(Br===null){var u=On.alternate;u=u!==null?u.memoizedState:null}else u=Br.next;var f=dr===null?On.memoizedState:dr.next;if(f!==null)dr=f,Br=u;else{if(u===null)throw Error(o(310));Br=u,u={memoizedState:Br.memoizedState,baseState:Br.baseState,baseQueue:Br.baseQueue,queue:Br.queue,next:null},dr===null?On.memoizedState=dr=u:dr=dr.next=u}return dr}function vl(u,f){return typeof f=="function"?f(u):f}function Dm(u){var f=Qs(),v=f.queue;if(v===null)throw Error(o(311));v.lastRenderedReducer=u;var A=Br,C=A.baseQueue,P=v.pending;if(P!==null){if(C!==null){var $=C.next;C.next=P.next,P.next=$}A.baseQueue=C=P,v.pending=null}if(C!==null){P=C.next,A=A.baseState;var Z=$=null,pe=null,Le=P;do{var Ye=Le.lane;if((Xc&Ye)===Ye)pe!==null&&(pe=pe.next={lane:0,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null}),A=Le.hasEagerState?Le.eagerState:u(A,Le.action);else{var yt={lane:Ye,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null};pe===null?(Z=pe=yt,$=A):pe=pe.next=yt,On.lanes|=Ye,Qc|=Ye}Le=Le.next}while(Le!==null&&Le!==P);pe===null?$=A:pe.next=Z,Js(A,f.memoizedState)||(Ti=!0),f.memoizedState=A,f.baseState=$,f.baseQueue=pe,v.lastRenderedState=A}if(u=v.interleaved,u!==null){C=u;do P=C.lane,On.lanes|=P,Qc|=P,C=C.next;while(C!==u)}else C===null&&(v.lanes=0);return[f.memoizedState,v.dispatch]}function Bm(u){var f=Qs(),v=f.queue;if(v===null)throw Error(o(311));v.lastRenderedReducer=u;var A=v.dispatch,C=v.pending,P=f.memoizedState;if(C!==null){v.pending=null;var $=C=C.next;do P=u(P,$.action),$=$.next;while($!==C);Js(P,f.memoizedState)||(Ti=!0),f.memoizedState=P,f.baseQueue===null&&(f.baseState=P),v.lastRenderedState=P}return[P,A]}function LT(){}function DT(u,f){var v=On,A=Qs(),C=f(),P=!Js(A.memoizedState,C);if(P&&(A.memoizedState=C,Ti=!0),A=A.queue,gf(kT.bind(null,v,A,u),[u]),A.getSnapshot!==f||P||dr!==null&&dr.memoizedState.tag&1){if(v.flags|=2048,mf(9,OT.bind(null,v,A,C,f),void 0,null),Kn===null)throw Error(o(349));Xc&30||BT(v,f,C)}return C}function BT(u,f,v){u.flags|=16384,u={getSnapshot:f,value:v},f=On.updateQueue,f===null?(f={lastEffect:null,stores:null},On.updateQueue=f,f.stores=[u]):(v=f.stores,v===null?f.stores=[u]:v.push(u))}function OT(u,f,v,A){f.value=v,f.getSnapshot=A,NT(f)&&Zi(u,1,-1)}function kT(u,f,v){return v(function(){NT(f)&&Zi(u,1,-1)})}function NT(u){var f=u.getSnapshot;u=u.value;try{var v=f();return!Js(u,v)}catch{return!0}}function Sx(u){var f=Mo();return typeof u=="function"&&(u=u()),f.memoizedState=f.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vl,lastRenderedState:u},f.queue=u,u=u.dispatch=d4.bind(null,On,u),[f.memoizedState,u]}function mf(u,f,v,A){return u={tag:u,create:f,destroy:v,deps:A,next:null},f=On.updateQueue,f===null?(f={lastEffect:null,stores:null},On.updateQueue=f,f.lastEffect=u.next=u):(v=f.lastEffect,v===null?f.lastEffect=u.next=u:(A=v.next,v.next=u,u.next=A,f.lastEffect=u)),u}function FT(){return Qs().memoizedState}function Om(u,f,v,A){var C=Mo();On.flags|=u,C.memoizedState=mf(1|f,v,void 0,A===void 0?null:A)}function km(u,f,v,A){var C=Qs();A=A===void 0?null:A;var P=void 0;if(Br!==null){var $=Br.memoizedState;if(P=$.destroy,A!==null&&_x(A,$.deps)){C.memoizedState=mf(f,v,P,A);return}}On.flags|=u,C.memoizedState=mf(1|f,v,P,A)}function Ax(u,f){return Om(8390656,8,u,f)}function gf(u,f){return km(2048,8,u,f)}function UT(u,f){return km(4,2,u,f)}function zT(u,f){return km(4,4,u,f)}function GT(u,f){if(typeof f=="function")return u=u(),f(u),function(){f(null)};if(f!=null)return u=u(),f.current=u,function(){f.current=null}}function HT(u,f,v){return v=v!=null?v.concat([u]):null,km(4,4,GT.bind(null,f,u),v)}function Mx(){}function VT(u,f){var v=Qs();f=f===void 0?null:f;var A=v.memoizedState;return A!==null&&f!==null&&_x(f,A[1])?A[0]:(v.memoizedState=[u,f],u)}function WT(u,f){var v=Qs();f=f===void 0?null:f;var A=v.memoizedState;return A!==null&&f!==null&&_x(f,A[1])?A[0]:(u=u(),v.memoizedState=[u,f],u)}function h4(u,f){var v=jt;jt=v!==0&&4>v?v:4,u(!0);var A=Yi.transition;Yi.transition={};try{u(!1),f()}finally{jt=v,Yi.transition=A}}function jT(){return Qs().memoizedState}function f4(u,f,v){var A=ua(u);v={lane:A,action:v,hasEagerState:!1,eagerState:null,next:null},$T(u)?JT(f,v):(KT(u,f,v),v=ti(),u=Zi(u,A,v),u!==null&&XT(u,f,A))}function d4(u,f,v){var A=ua(u),C={lane:A,action:v,hasEagerState:!1,eagerState:null,next:null};if($T(u))JT(f,C);else{KT(u,f,C);var P=u.alternate;if(u.lanes===0&&(P===null||P.lanes===0)&&(P=f.lastRenderedReducer,P!==null))try{var $=f.lastRenderedState,Z=P($,v);if(C.hasEagerState=!0,C.eagerState=Z,Js(Z,$))return}catch{}finally{}v=ti(),u=Zi(u,A,v),u!==null&&XT(u,f,A)}}function $T(u){var f=u.alternate;return u===On||f!==null&&f===On}function JT(u,f){df=Lm=!0;var v=u.pending;v===null?f.next=f:(f.next=v.next,v.next=f),u.pending=f}function KT(u,f,v){Kn!==null&&u.mode&1&&!(Ct&2)?(u=f.interleaved,u===null?(v.next=v,Xs===null?Xs=[f]:Xs.push(f)):(v.next=u.next,u.next=v),f.interleaved=v):(u=f.pending,u===null?v.next=v:(v.next=u.next,u.next=v),f.pending=v)}function XT(u,f,v){if(v&4194240){var A=f.lanes;A&=u.pendingLanes,v|=A,f.lanes=v,Y_(u,v)}}var Nm={readContext:Ki,useCallback:Or,useContext:Or,useEffect:Or,useImperativeHandle:Or,useInsertionEffect:Or,useLayoutEffect:Or,useMemo:Or,useReducer:Or,useRef:Or,useState:Or,useDebugValue:Or,useDeferredValue:Or,useTransition:Or,useMutableSource:Or,useSyncExternalStore:Or,useId:Or,unstable_isNewReconciler:!1},p4={readContext:Ki,useCallback:function(u,f){return Mo().memoizedState=[u,f===void 0?null:f],u},useContext:Ki,useEffect:Ax,useImperativeHandle:function(u,f,v){return v=v!=null?v.concat([u]):null,Om(4194308,4,GT.bind(null,f,u),v)},useLayoutEffect:function(u,f){return Om(4194308,4,u,f)},useInsertionEffect:function(u,f){return Om(4,2,u,f)},useMemo:function(u,f){var v=Mo();return f=f===void 0?null:f,u=u(),v.memoizedState=[u,f],u},useReducer:function(u,f,v){var A=Mo();return f=v!==void 0?v(f):f,A.memoizedState=A.baseState=f,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:f},A.queue=u,u=u.dispatch=f4.bind(null,On,u),[A.memoizedState,u]},useRef:function(u){var f=Mo();return u={current:u},f.memoizedState=u},useState:Sx,useDebugValue:Mx,useDeferredValue:function(u){var f=Sx(u),v=f[0],A=f[1];return Ax(function(){var C=Yi.transition;Yi.transition={};try{A(u)}finally{Yi.transition=C}},[u]),v},useTransition:function(){var u=Sx(!1),f=u[0];return u=h4.bind(null,u[1]),Mo().memoizedState=u,[f,u]},useMutableSource:function(){},useSyncExternalStore:function(u,f,v){var A=On,C=Mo();if(yn){if(v===void 0)throw Error(o(407));v=v()}else{if(v=f(),Kn===null)throw Error(o(349));Xc&30||BT(A,f,v)}C.memoizedState=v;var P={value:v,getSnapshot:f};return C.queue=P,Ax(kT.bind(null,A,P,u),[u]),A.flags|=2048,mf(9,OT.bind(null,A,P,v,f),void 0,null),v},useId:function(){var u=Mo(),f=Kn.identifierPrefix;if(yn){var v=Ao,A=So;v=(A&~(1<<32-_s(A)-1)).toString(32)+v,f=":"+f+"R"+v,v=pf++,0<v&&(f+="H"+v.toString(32)),f+=":"}else v=u4++,f=":"+f+"r"+v.toString(32)+":";return u.memoizedState=f},unstable_isNewReconciler:!1},m4={readContext:Ki,useCallback:VT,useContext:Ki,useEffect:gf,useImperativeHandle:HT,useInsertionEffect:UT,useLayoutEffect:zT,useMemo:WT,useReducer:Dm,useRef:FT,useState:function(){return Dm(vl)},useDebugValue:Mx,useDeferredValue:function(u){var f=Dm(vl),v=f[0],A=f[1];return gf(function(){var C=Yi.transition;Yi.transition={};try{A(u)}finally{Yi.transition=C}},[u]),v},useTransition:function(){var u=Dm(vl)[0],f=Qs().memoizedState;return[u,f]},useMutableSource:LT,useSyncExternalStore:DT,useId:jT,unstable_isNewReconciler:!1},g4={readContext:Ki,useCallback:VT,useContext:Ki,useEffect:gf,useImperativeHandle:HT,useInsertionEffect:UT,useLayoutEffect:zT,useMemo:WT,useReducer:Bm,useRef:FT,useState:function(){return Bm(vl)},useDebugValue:Mx,useDeferredValue:function(u){var f=Bm(vl),v=f[0],A=f[1];return gf(function(){var C=Yi.transition;Yi.transition={};try{A(u)}finally{Yi.transition=C}},[u]),v},useTransition:function(){var u=Bm(vl)[0],f=Qs().memoizedState;return[u,f]},useMutableSource:LT,useSyncExternalStore:DT,useId:jT,unstable_isNewReconciler:!1};function Ex(u,f){try{var v="",A=f;do v+=c4(A),A=A.return;while(A);var C=v}catch(P){C=`
Error generating stack: `+P.message+`
`+P.stack}return{value:u,source:f,stack:C}}function Cx(u,f){try{console.error(f.value)}catch(v){setTimeout(function(){throw v})}}var y4=typeof WeakMap=="function"?WeakMap:Map;function qT(u,f,v){v=wo(-1,v),v.tag=3,v.payload={element:null};var A=f.value;return v.callback=function(){Zm||(Zm=!0,Wx=A),Cx(u,f)},v}function QT(u,f,v){v=wo(-1,v),v.tag=3;var A=u.type.getDerivedStateFromError;if(typeof A=="function"){var C=f.value;v.payload=function(){return A(C)},v.callback=function(){Cx(u,f)}}var P=u.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(v.callback=function(){Cx(u,f),typeof A!="function"&&(la===null?la=new Set([this]):la.add(this));var $=f.stack;this.componentDidCatch(f.value,{componentStack:$!==null?$:""})}),v}function YT(u,f,v){var A=u.pingCache;if(A===null){A=u.pingCache=new y4;var C=new Set;A.set(f,C)}else C=A.get(f),C===void 0&&(C=new Set,A.set(f,C));C.has(v)||(C.add(v),u=R4.bind(null,u,f,v),f.then(u,u))}function ZT(u){do{var f;if((f=u.tag===13)&&(f=u.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return u;u=u.return}while(u!==null);return null}function eI(u,f,v,A,C){return u.mode&1?(u.flags|=65536,u.lanes=C,u):(u===f?u.flags|=65536:(u.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(f=wo(-1,1),f.tag=2,aa(v,f))),v.lanes|=1),u)}function Ys(u){u.flags|=4}function tI(u,f){if(u!==null&&u.child===f.child)return!0;if(f.flags&16)return!1;for(u=f.child;u!==null;){if(u.flags&12854||u.subtreeFlags&12854)return!1;u=u.sibling}return!0}var yf,vf,Fm,Um;if(Ee)yf=function(u,f){for(var v=f.child;v!==null;){if(v.tag===5||v.tag===6)z(u,v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===f)break;for(;v.sibling===null;){if(v.return===null||v.return===f)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},vf=function(){},Fm=function(u,f,v,A,C){if(u=u.memoizedProps,u!==A){var P=f.stateNode,$=qs(Qi.current);v=ae(P,v,u,A,C,$),(f.updateQueue=v)&&Ys(f)}},Um=function(u,f,v,A){v!==A&&Ys(f)};else if(he){yf=function(u,f,v,A){for(var C=f.child;C!==null;){if(C.tag===5){var P=C.stateNode;v&&A&&(P=mn(P,C.type,C.memoizedProps,C)),z(u,P)}else if(C.tag===6)P=C.stateNode,v&&A&&(P=Yr(P,C.memoizedProps,C)),z(u,P);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)P=C.child,P!==null&&(P.return=C),yf(u,C,!0,!0);else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===f)break;for(;C.sibling===null;){if(C.return===null||C.return===f)return;C=C.return}C.sibling.return=C.return,C=C.sibling}};var nI=function(u,f,v,A){for(var C=f.child;C!==null;){if(C.tag===5){var P=C.stateNode;v&&A&&(P=mn(P,C.type,C.memoizedProps,C)),zn(u,P)}else if(C.tag===6)P=C.stateNode,v&&A&&(P=Yr(P,C.memoizedProps,C)),zn(u,P);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)P=C.child,P!==null&&(P.return=C),nI(u,C,!0,!0);else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===f)break;for(;C.sibling===null;){if(C.return===null||C.return===f)return;C=C.return}C.sibling.return=C.return,C=C.sibling}};vf=function(u,f){var v=f.stateNode;if(!tI(u,f)){u=v.containerInfo;var A=nn(u);nI(A,f,!1,!1),v.pendingChildren=A,Ys(f),Ar(u,A)}},Fm=function(u,f,v,A,C){var P=u.stateNode,$=u.memoizedProps;if((u=tI(u,f))&&$===A)f.stateNode=P;else{var Z=f.stateNode,pe=qs(Qi.current),Le=null;$!==A&&(Le=ae(Z,v,$,A,C,pe)),u&&Le===null?f.stateNode=P:(P=Ze(P,Le,v,$,A,f,u,Z),te(P,v,A,C,pe)&&Ys(f),f.stateNode=P,u?Ys(f):yf(P,f,!1,!1))}},Um=function(u,f,v,A){v!==A?(u=qs(Jc.current),v=qs(Qi.current),f.stateNode=we(A,u,v,f),Ys(f)):f.stateNode=u.stateNode}}else vf=function(){},Fm=function(){},Um=function(){};function _f(u,f){if(!yn)switch(u.tailMode){case"hidden":f=u.tail;for(var v=null;f!==null;)f.alternate!==null&&(v=f),f=f.sibling;v===null?u.tail=null:v.sibling=null;break;case"collapsed":v=u.tail;for(var A=null;v!==null;)v.alternate!==null&&(A=v),v=v.sibling;A===null?f||u.tail===null?u.tail=null:u.tail.sibling=null:A.sibling=null}}function kr(u){var f=u.alternate!==null&&u.alternate.child===u.child,v=0,A=0;if(f)for(var C=u.child;C!==null;)v|=C.lanes|C.childLanes,A|=C.subtreeFlags&14680064,A|=C.flags&14680064,C.return=u,C=C.sibling;else for(C=u.child;C!==null;)v|=C.lanes|C.childLanes,A|=C.subtreeFlags,A|=C.flags,C.return=u,C=C.sibling;return u.subtreeFlags|=A,u.childLanes=v,f}function v4(u,f,v){var A=f.pendingProps;switch(hx(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kr(f),null;case 1:return hi(f.type)&&pm(),kr(f),null;case 3:return A=f.stateNode,Kc(),Gt(Dr),Gt(Jn),vx(),A.pendingContext&&(A.context=A.pendingContext,A.pendingContext=null),(u===null||u.child===null)&&(cf(f)?Ys(f):u===null||u.memoizedState.isDehydrated&&!(f.flags&256)||(f.flags|=1024,ws!==null&&(Jx(ws),ws=null))),vf(u,f),kr(f),null;case 5:gx(f),v=qs(Jc.current);var C=f.type;if(u!==null&&f.stateNode!=null)Fm(u,f,C,A,v),u.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!A){if(f.stateNode===null)throw Error(o(166));return kr(f),null}if(u=qs(Qi.current),cf(f)){if(!fe)throw Error(o(175));u=pt(f.stateNode,f.type,f.memoizedProps,v,u,f,!lf),f.updateQueue=u,u!==null&&Ys(f)}else{var P=ie(C,A,v,u,f);yf(P,f,!1,!1),f.stateNode=P,te(P,C,A,v,u)&&Ys(f)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return kr(f),null;case 6:if(u&&f.stateNode!=null)Um(u,f,u.memoizedProps,A);else{if(typeof A!="string"&&f.stateNode===null)throw Error(o(166));if(u=qs(Jc.current),v=qs(Qi.current),cf(f)){if(!fe)throw Error(o(176));if(u=f.stateNode,A=f.memoizedProps,(v=St(u,A,f,!lf))&&(C=Ci,C!==null))switch(P=(C.mode&1)!==0,C.tag){case 3:yo(C.stateNode.containerInfo,u,A,P);break;case 5:Ln(C.type,C.memoizedProps,C.stateNode,u,A,P)}v&&Ys(f)}else f.stateNode=we(A,u,v,f)}return kr(f),null;case 13:if(Gt(Sn),A=f.memoizedState,yn&&bi!==null&&f.mode&1&&!(f.flags&128)){for(u=bi;u;)u=me(u);return jc(),f.flags|=98560,f}if(A!==null&&A.dehydrated!==null){if(A=cf(f),u===null){if(!A)throw Error(o(318));if(!fe)throw Error(o(344));if(u=f.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));Et(u,f)}else jc(),!(f.flags&128)&&(f.memoizedState=null),f.flags|=4;return kr(f),null}return ws!==null&&(Jx(ws),ws=null),f.flags&128?(f.lanes=v,f):(A=A!==null,v=!1,u===null?cf(f):v=u.memoizedState!==null,A&&!v&&(f.child.flags|=8192,f.mode&1&&(u===null||Sn.current&1?ir===0&&(ir=3):Xx())),f.updateQueue!==null&&(f.flags|=4),kr(f),null);case 4:return Kc(),vf(u,f),u===null&&Ge(f.stateNode.containerInfo),kr(f),null;case 10:return sx(f.type._context),kr(f),null;case 17:return hi(f.type)&&pm(),kr(f),null;case 19:if(Gt(Sn),C=f.memoizedState,C===null)return kr(f),null;if(A=(f.flags&128)!==0,P=C.rendering,P===null)if(A)_f(C,!1);else{if(ir!==0||u!==null&&u.flags&128)for(u=f.child;u!==null;){if(P=Pm(u),P!==null){for(f.flags|=128,_f(C,!1),u=P.updateQueue,u!==null&&(f.updateQueue=u,f.flags|=4),f.subtreeFlags=0,u=v,A=f.child;A!==null;)v=A,C=u,v.flags&=14680066,P=v.alternate,P===null?(v.childLanes=0,v.lanes=C,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=P.childLanes,v.lanes=P.lanes,v.child=P.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=P.memoizedProps,v.memoizedState=P.memoizedState,v.updateQueue=P.updateQueue,v.type=P.type,C=P.dependencies,v.dependencies=C===null?null:{lanes:C.lanes,firstContext:C.firstContext}),A=A.sibling;return qt(Sn,Sn.current&1|2),f.child}u=u.sibling}C.tail!==null&&fr()>Vx&&(f.flags|=128,A=!0,_f(C,!1),f.lanes=4194304)}else{if(!A)if(u=Pm(P),u!==null){if(f.flags|=128,A=!0,u=u.updateQueue,u!==null&&(f.updateQueue=u,f.flags|=4),_f(C,!0),C.tail===null&&C.tailMode==="hidden"&&!P.alternate&&!yn)return kr(f),null}else 2*fr()-C.renderingStartTime>Vx&&v!==1073741824&&(f.flags|=128,A=!0,_f(C,!1),f.lanes=4194304);C.isBackwards?(P.sibling=f.child,f.child=P):(u=C.last,u!==null?u.sibling=P:f.child=P,C.last=P)}return C.tail!==null?(f=C.tail,C.rendering=f,C.tail=f.sibling,C.renderingStartTime=fr(),f.sibling=null,u=Sn.current,qt(Sn,A?u&1|2:u&1),f):(kr(f),null);case 22:case 23:return Kx(),A=f.memoizedState!==null,u!==null&&u.memoizedState!==null!==A&&(f.flags|=8192),A&&f.mode&1?Ii&1073741824&&(kr(f),Ee&&f.subtreeFlags&6&&(f.flags|=8192)):kr(f),null;case 24:return null;case 25:return null}throw Error(o(156,f.tag))}var _4=a.ReactCurrentOwner,Ti=!1;function ei(u,f,v,A){f.child=u===null?PT(f,null,v,A):$c(f,u.child,v,A)}function rI(u,f,v,A,C){v=v.render;var P=f.ref;return Hc(f,C),A=xx(u,f,v,A,P,C),v=wx(),u!==null&&!Ti?(f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~C,Eo(u,f,C)):(yn&&v&&ux(f),f.flags|=1,ei(u,f,A,C),f.child)}function iI(u,f,v,A,C){if(u===null){var P=v.type;return typeof P=="function"&&!qx(P)&&P.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(f.tag=15,f.type=P,sI(u,f,P,A,C)):(u=og(v.type,null,A,f,f.mode,C),u.ref=f.ref,u.return=f,f.child=u)}if(P=u.child,!(u.lanes&C)){var $=P.memoizedProps;if(v=v.compare,v=v!==null?v:wm,v($,A)&&u.ref===f.ref)return Eo(u,f,C)}return f.flags|=1,u=fa(P,A),u.ref=f.ref,u.return=f,f.child=u}function sI(u,f,v,A,C){if(u!==null&&wm(u.memoizedProps,A)&&u.ref===f.ref)if(Ti=!1,(u.lanes&C)!==0)u.flags&131072&&(Ti=!0);else return f.lanes=u.lanes,Eo(u,f,C);return bx(u,f,v,A,C)}function oI(u,f,v){var A=f.pendingProps,C=A.children,P=u!==null?u.memoizedState:null;if(A.mode==="hidden")if(!(f.mode&1))f.memoizedState={baseLanes:0,cachePool:null},qt(qc,Ii),Ii|=v;else if(v&1073741824)f.memoizedState={baseLanes:0,cachePool:null},A=P!==null?P.baseLanes:v,qt(qc,Ii),Ii|=A;else return u=P!==null?P.baseLanes|v:v,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:u,cachePool:null},f.updateQueue=null,qt(qc,Ii),Ii|=u,null;else P!==null?(A=P.baseLanes|v,f.memoizedState=null):A=v,qt(qc,Ii),Ii|=A;return ei(u,f,C,v),f.child}function aI(u,f){var v=f.ref;(u===null&&v!==null||u!==null&&u.ref!==v)&&(f.flags|=512,f.flags|=2097152)}function bx(u,f,v,A,C){var P=hi(v)?js:Jn.current;return P=zc(f,P),Hc(f,C),v=xx(u,f,v,A,P,C),A=wx(),u!==null&&!Ti?(f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~C,Eo(u,f,C)):(yn&&A&&ux(f),f.flags|=1,ei(u,f,v,C),f.child)}function lI(u,f,v,A,C){if(hi(v)){var P=!0;mm(f)}else P=!1;if(Hc(f,C),f.stateNode===null)u!==null&&(u.alternate=null,f.alternate=null,f.flags|=2),ST(f,v,A),cx(f,v,A,C),A=!0;else if(u===null){var $=f.stateNode,Z=f.memoizedProps;$.props=Z;var pe=$.context,Le=v.contextType;typeof Le=="object"&&Le!==null?Le=Ki(Le):(Le=hi(v)?js:Jn.current,Le=zc(f,Le));var Ye=v.getDerivedStateFromProps,yt=typeof Ye=="function"||typeof $.getSnapshotBeforeUpdate=="function";yt||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(Z!==A||pe!==Le)&&AT(f,$,A,Le),oa=!1;var ct=f.memoizedState;$.state=ct,Em(f,A,$,C),pe=f.memoizedState,Z!==A||ct!==pe||Dr.current||oa?(typeof Ye=="function"&&(lx(f,v,Ye,A),pe=f.memoizedState),(Z=oa||wT(f,v,Z,A,ct,pe,Le))?(yt||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(f.flags|=4194308)):(typeof $.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=A,f.memoizedState=pe),$.props=A,$.state=pe,$.context=Le,A=Z):(typeof $.componentDidMount=="function"&&(f.flags|=4194308),A=!1)}else{$=f.stateNode,yT(u,f),Z=f.memoizedProps,Le=f.type===f.elementType?Z:xs(f.type,Z),$.props=Le,yt=f.pendingProps,ct=$.context,pe=v.contextType,typeof pe=="object"&&pe!==null?pe=Ki(pe):(pe=hi(v)?js:Jn.current,pe=zc(f,pe));var sn=v.getDerivedStateFromProps;(Ye=typeof sn=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(Z!==yt||ct!==pe)&&AT(f,$,A,pe),oa=!1,ct=f.memoizedState,$.state=ct,Em(f,A,$,C);var it=f.memoizedState;Z!==yt||ct!==it||Dr.current||oa?(typeof sn=="function"&&(lx(f,v,sn,A),it=f.memoizedState),(Le=oa||wT(f,v,Le,A,ct,it,pe)||!1)?(Ye||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(A,it,pe),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(A,it,pe)),typeof $.componentDidUpdate=="function"&&(f.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof $.componentDidUpdate!="function"||Z===u.memoizedProps&&ct===u.memoizedState||(f.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||Z===u.memoizedProps&&ct===u.memoizedState||(f.flags|=1024),f.memoizedProps=A,f.memoizedState=it),$.props=A,$.state=it,$.context=pe,A=Le):(typeof $.componentDidUpdate!="function"||Z===u.memoizedProps&&ct===u.memoizedState||(f.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||Z===u.memoizedProps&&ct===u.memoizedState||(f.flags|=1024),A=!1)}return Tx(u,f,v,A,P,C)}function Tx(u,f,v,A,C,P){aI(u,f);var $=(f.flags&128)!==0;if(!A&&!$)return C&&fT(f,v,!1),Eo(u,f,P);A=f.stateNode,_4.current=f;var Z=$&&typeof v.getDerivedStateFromError!="function"?null:A.render();return f.flags|=1,u!==null&&$?(f.child=$c(f,u.child,null,P),f.child=$c(f,null,Z,P)):ei(u,f,Z,P),f.memoizedState=A.state,C&&fT(f,v,!0),f.child}function cI(u){var f=u.stateNode;f.pendingContext?uT(u,f.pendingContext,f.pendingContext!==f.context):f.context&&uT(u,f.context,!1),mx(u,f.containerInfo)}function uI(u,f,v,A,C){return jc(),px(C),f.flags|=256,ei(u,f,v,A),f.child}var zm={dehydrated:null,treeContext:null,retryLane:0};function Gm(u){return{baseLanes:u,cachePool:null}}function hI(u,f,v){var A=f.pendingProps,C=Sn.current,P=!1,$=(f.flags&128)!==0,Z;if((Z=$)||(Z=u!==null&&u.memoizedState===null?!1:(C&2)!==0),Z?(P=!0,f.flags&=-129):(u===null||u.memoizedState!==null)&&(C|=1),qt(Sn,C&1),u===null)return dx(f),u=f.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?(f.mode&1?H(u)?f.lanes=8:f.lanes=1073741824:f.lanes=1,null):(C=A.children,u=A.fallback,P?(A=f.mode,P=f.child,C={mode:"hidden",children:C},!(A&1)&&P!==null?(P.childLanes=0,P.pendingProps=C):P=ag(C,A,0,null),u=Ml(u,A,v,null),P.return=f,u.return=f,P.sibling=u,f.child=P,f.child.memoizedState=Gm(v),f.memoizedState=zm,u):Ix(f,C));if(C=u.memoizedState,C!==null){if(Z=C.dehydrated,Z!==null){if($)return f.flags&256?(f.flags&=-257,Hm(u,f,v,Error(o(422)))):f.memoizedState!==null?(f.child=u.child,f.flags|=128,null):(P=A.fallback,C=f.mode,A=ag({mode:"visible",children:A.children},C,0,null),P=Ml(P,C,v,null),P.flags|=2,A.return=f,P.return=f,A.sibling=P,f.child=A,f.mode&1&&$c(f,u.child,null,v),f.child.memoizedState=Gm(v),f.memoizedState=zm,P);if(!(f.mode&1))f=Hm(u,f,v,null);else if(H(Z))f=Hm(u,f,v,Error(o(419)));else if(A=(v&u.childLanes)!==0,Ti||A){if(A=Kn,A!==null){switch(v&-v){case 4:P=2;break;case 16:P=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:P=32;break;case 536870912:P=268435456;break;default:P=0}A=P&(A.suspendedLanes|v)?0:P,A!==0&&A!==C.retryLane&&(C.retryLane=A,Zi(u,A,-1))}Xx(),f=Hm(u,f,v,Error(o(421)))}else fm(Z)?(f.flags|=128,f.child=u.child,f=L4.bind(null,u),oe(Z,f),f=null):(v=C.treeContext,fe&&(bi=at(Z),Ci=f,yn=!0,ws=null,lf=!1,v!==null&&(Xi[qi++]=So,Xi[qi++]=Ao,Xi[qi++]=gl,So=v.id,Ao=v.overflow,gl=f)),f=Ix(f,f.pendingProps.children),f.flags|=4096);return f}return P?(A=dI(u,f,A.children,A.fallback,v),P=f.child,C=u.child.memoizedState,P.memoizedState=C===null?Gm(v):{baseLanes:C.baseLanes|v,cachePool:null},P.childLanes=u.childLanes&~v,f.memoizedState=zm,A):(v=fI(u,f,A.children,v),f.memoizedState=null,v)}return P?(A=dI(u,f,A.children,A.fallback,v),P=f.child,C=u.child.memoizedState,P.memoizedState=C===null?Gm(v):{baseLanes:C.baseLanes|v,cachePool:null},P.childLanes=u.childLanes&~v,f.memoizedState=zm,A):(v=fI(u,f,A.children,v),f.memoizedState=null,v)}function Ix(u,f){return f=ag({mode:"visible",children:f},u.mode,0,null),f.return=u,u.child=f}function fI(u,f,v,A){var C=u.child;return u=C.sibling,v=fa(C,{mode:"visible",children:v}),!(f.mode&1)&&(v.lanes=A),v.return=f,v.sibling=null,u!==null&&(A=f.deletions,A===null?(f.deletions=[u],f.flags|=16):A.push(u)),f.child=v}function dI(u,f,v,A,C){var P=f.mode;u=u.child;var $=u.sibling,Z={mode:"hidden",children:v};return!(P&1)&&f.child!==u?(v=f.child,v.childLanes=0,v.pendingProps=Z,f.deletions=null):(v=fa(u,Z),v.subtreeFlags=u.subtreeFlags&14680064),$!==null?A=fa($,A):(A=Ml(A,P,C,null),A.flags|=2),A.return=f,v.return=f,v.sibling=A,f.child=v,A}function Hm(u,f,v,A){return A!==null&&px(A),$c(f,u.child,null,v),u=Ix(f,f.pendingProps.children),u.flags|=2,f.memoizedState=null,u}function pI(u,f,v){u.lanes|=f;var A=u.alternate;A!==null&&(A.lanes|=f),ox(u.return,f,v)}function Px(u,f,v,A,C){var P=u.memoizedState;P===null?u.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:A,tail:v,tailMode:C}:(P.isBackwards=f,P.rendering=null,P.renderingStartTime=0,P.last=A,P.tail=v,P.tailMode=C)}function mI(u,f,v){var A=f.pendingProps,C=A.revealOrder,P=A.tail;if(ei(u,f,A.children,v),A=Sn.current,A&2)A=A&1|2,f.flags|=128;else{if(u!==null&&u.flags&128)e:for(u=f.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&pI(u,v,f);else if(u.tag===19)pI(u,v,f);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===f)break e;for(;u.sibling===null;){if(u.return===null||u.return===f)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}A&=1}if(qt(Sn,A),!(f.mode&1))f.memoizedState=null;else switch(C){case"forwards":for(v=f.child,C=null;v!==null;)u=v.alternate,u!==null&&Pm(u)===null&&(C=v),v=v.sibling;v=C,v===null?(C=f.child,f.child=null):(C=v.sibling,v.sibling=null),Px(f,!1,C,v,P);break;case"backwards":for(v=null,C=f.child,f.child=null;C!==null;){if(u=C.alternate,u!==null&&Pm(u)===null){f.child=C;break}u=C.sibling,C.sibling=v,v=C,C=u}Px(f,!0,v,null,P);break;case"together":Px(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function Eo(u,f,v){if(u!==null&&(f.dependencies=u.dependencies),Qc|=f.lanes,!(v&f.childLanes))return null;if(u!==null&&f.child!==u.child)throw Error(o(153));if(f.child!==null){for(u=f.child,v=fa(u,u.pendingProps),f.child=v,v.return=f;u.sibling!==null;)u=u.sibling,v=v.sibling=fa(u,u.pendingProps),v.return=f;v.sibling=null}return f.child}function x4(u,f,v){switch(f.tag){case 3:cI(f),jc();break;case 5:RT(f);break;case 1:hi(f.type)&&mm(f);break;case 4:mx(f,f.stateNode.containerInfo);break;case 10:gT(f,f.type._context,f.memoizedProps.value);break;case 13:var A=f.memoizedState;if(A!==null)return A.dehydrated!==null?(qt(Sn,Sn.current&1),f.flags|=128,null):v&f.child.childLanes?hI(u,f,v):(qt(Sn,Sn.current&1),u=Eo(u,f,v),u!==null?u.sibling:null);qt(Sn,Sn.current&1);break;case 19:if(A=(v&f.childLanes)!==0,u.flags&128){if(A)return mI(u,f,v);f.flags|=128}var C=f.memoizedState;if(C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),qt(Sn,Sn.current),A)break;return null;case 22:case 23:return f.lanes=0,oI(u,f,v)}return Eo(u,f,v)}function w4(u,f){switch(hx(f),f.tag){case 1:return hi(f.type)&&pm(),u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 3:return Kc(),Gt(Dr),Gt(Jn),vx(),u=f.flags,u&65536&&!(u&128)?(f.flags=u&-65537|128,f):null;case 5:return gx(f),null;case 13:if(Gt(Sn),u=f.memoizedState,u!==null&&u.dehydrated!==null){if(f.alternate===null)throw Error(o(340));jc()}return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 19:return Gt(Sn),null;case 4:return Kc(),null;case 10:return sx(f.type._context),null;case 22:case 23:return Kx(),null;case 24:return null;default:return null}}var Vm=!1,_l=!1,S4=typeof WeakSet=="function"?WeakSet:Set,He=null;function Wm(u,f){var v=u.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(A){pi(u,f,A)}else v.current=null}function Rx(u,f,v){try{v()}catch(A){pi(u,f,A)}}var gI=!1;function A4(u,f){for(W(u.containerInfo),He=f;He!==null;)if(u=He,f=u.child,(u.subtreeFlags&1028)!==0&&f!==null)f.return=u,He=f;else for(;He!==null;){u=He;try{var v=u.alternate;if(u.flags&1024)switch(u.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var A=v.memoizedProps,C=v.memoizedState,P=u.stateNode,$=P.getSnapshotBeforeUpdate(u.elementType===u.type?A:xs(u.type,A),C);P.__reactInternalSnapshotBeforeUpdate=$}break;case 3:Ee&&Ke(u.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Z){pi(u,u.return,Z)}if(f=u.sibling,f!==null){f.return=u.return,He=f;break}He=u.return}return v=gI,gI=!1,v}function xl(u,f,v){var A=f.updateQueue;if(A=A!==null?A.lastEffect:null,A!==null){var C=A=A.next;do{if((C.tag&u)===u){var P=C.destroy;C.destroy=void 0,P!==void 0&&Rx(f,v,P)}C=C.next}while(C!==A)}}function xf(u,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var v=f=f.next;do{if((v.tag&u)===u){var A=v.create;v.destroy=A()}v=v.next}while(v!==f)}}function Lx(u){var f=u.ref;if(f!==null){var v=u.stateNode;switch(u.tag){case 5:u=ne(v);break;default:u=v}typeof f=="function"?f(u):f.current=u}}function yI(u,f,v){if($s&&typeof $s.onCommitFiberUnmount=="function")try{$s.onCommitFiberUnmount(_m,f)}catch{}switch(f.tag){case 0:case 11:case 14:case 15:if(u=f.updateQueue,u!==null&&(u=u.lastEffect,u!==null)){var A=u=u.next;do{var C=A,P=C.destroy;C=C.tag,P!==void 0&&(C&2||C&4)&&Rx(f,v,P),A=A.next}while(A!==u)}break;case 1:if(Wm(f,v),u=f.stateNode,typeof u.componentWillUnmount=="function")try{u.props=f.memoizedProps,u.state=f.memoizedState,u.componentWillUnmount()}catch($){pi(f,v,$)}break;case 5:Wm(f,v);break;case 4:Ee?AI(u,f,v):he&&he&&(f=f.stateNode.containerInfo,v=nn(f),Ei(f,v))}}function vI(u,f,v){for(var A=f;;)if(yI(u,A,v),A.child===null||Ee&&A.tag===4){if(A===f)break;for(;A.sibling===null;){if(A.return===null||A.return===f)return;A=A.return}A.sibling.return=A.return,A=A.sibling}else A.child.return=A,A=A.child}function _I(u){var f=u.alternate;f!==null&&(u.alternate=null,_I(f)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(f=u.stateNode,f!==null&&Fe(f)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function xI(u){return u.tag===5||u.tag===3||u.tag===4}function wI(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||xI(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function SI(u){if(Ee){e:{for(var f=u.return;f!==null;){if(xI(f))break e;f=f.return}throw Error(o(160))}var v=f;switch(v.tag){case 5:f=v.stateNode,v.flags&32&&(Pt(f),v.flags&=-33),v=wI(u),Bx(u,v,f);break;case 3:case 4:f=v.stateNode.containerInfo,v=wI(u),Dx(u,v,f);break;default:throw Error(o(161))}}}function Dx(u,f,v){var A=u.tag;if(A===5||A===6)u=u.stateNode,f?Me(v,u,f):je(v,u);else if(A!==4&&(u=u.child,u!==null))for(Dx(u,f,v),u=u.sibling;u!==null;)Dx(u,f,v),u=u.sibling}function Bx(u,f,v){var A=u.tag;if(A===5||A===6)u=u.stateNode,f?ge(v,u,f):rt(v,u);else if(A!==4&&(u=u.child,u!==null))for(Bx(u,f,v),u=u.sibling;u!==null;)Bx(u,f,v),u=u.sibling}function AI(u,f,v){for(var A=f,C=!1,P,$;;){if(!C){C=A.return;e:for(;;){if(C===null)throw Error(o(160));switch(P=C.stateNode,C.tag){case 5:$=!1;break e;case 3:P=P.containerInfo,$=!0;break e;case 4:P=P.containerInfo,$=!0;break e}C=C.return}C=!0}if(A.tag===5||A.tag===6)vI(u,A,v),$?lt(P,A.stateNode):Be(P,A.stateNode);else if(A.tag===18)$?Zr(P,A.stateNode):Rn(P,A.stateNode);else if(A.tag===4){if(A.child!==null){P=A.stateNode.containerInfo,$=!0,A.child.return=A,A=A.child;continue}}else if(yI(u,A,v),A.child!==null){A.child.return=A,A=A.child;continue}if(A===f)break;for(;A.sibling===null;){if(A.return===null||A.return===f)return;A=A.return,A.tag===4&&(C=!1)}A.sibling.return=A.return,A=A.sibling}}function Ox(u,f){if(Ee){switch(f.tag){case 0:case 11:case 14:case 15:xl(3,f,f.return),xf(3,f),xl(5,f,f.return);return;case 1:return;case 5:var v=f.stateNode;if(v!=null){var A=f.memoizedProps;u=u!==null?u.memoizedProps:A;var C=f.type,P=f.updateQueue;f.updateQueue=null,P!==null&&K(v,P,C,u,A,f)}return;case 6:if(f.stateNode===null)throw Error(o(162));v=f.memoizedProps,_e(f.stateNode,u!==null?u.memoizedProps:v,v);return;case 3:fe&&u!==null&&u.memoizedState.isDehydrated&&Rt(f.stateNode.containerInfo);return;case 12:return;case 13:jm(f);return;case 19:jm(f);return;case 17:return}throw Error(o(163))}switch(f.tag){case 0:case 11:case 14:case 15:xl(3,f,f.return),xf(3,f),xl(5,f,f.return);return;case 12:return;case 13:jm(f);return;case 19:jm(f);return;case 3:fe&&u!==null&&u.memoizedState.isDehydrated&&Rt(f.stateNode.containerInfo);break;case 22:case 23:return}e:if(he){switch(f.tag){case 1:case 5:case 6:break e;case 3:case 4:f=f.stateNode,Ei(f.containerInfo,f.pendingChildren);break e}throw Error(o(163))}}function jm(u){var f=u.updateQueue;if(f!==null){u.updateQueue=null;var v=u.stateNode;v===null&&(v=u.stateNode=new S4),f.forEach(function(A){var C=D4.bind(null,u,A);v.has(A)||(v.add(A),A.then(C,C))})}}function M4(u,f){for(He=f;He!==null;){f=He;var v=f.deletions;if(v!==null)for(var A=0;A<v.length;A++){var C=v[A];try{var P=u;Ee?AI(P,C,f):vI(P,C,f);var $=C.alternate;$!==null&&($.return=null),C.return=null}catch(nt){pi(C,f,nt)}}if(v=f.child,f.subtreeFlags&12854&&v!==null)v.return=f,He=v;else for(;He!==null;){f=He;try{var Z=f.flags;if(Z&32&&Ee&&Pt(f.stateNode),Z&512){var pe=f.alternate;if(pe!==null){var Le=pe.ref;Le!==null&&(typeof Le=="function"?Le(null):Le.current=null)}}if(Z&8192)switch(f.tag){case 13:if(f.memoizedState!==null){var Ye=f.alternate;(Ye===null||Ye.memoizedState===null)&&(Hx=fr())}break;case 22:var yt=f.memoizedState!==null,ct=f.alternate,sn=ct!==null&&ct.memoizedState!==null;if(v=f,Ee){e:if(A=v,C=yt,P=null,Ee)for(var it=A;;){if(it.tag===5){if(P===null){P=it;var Nr=it.stateNode;C?un(Nr):de(it.stateNode,it.memoizedProps)}}else if(it.tag===6){if(P===null){var ts=it.stateNode;C?Y(ts):Se(ts,it.memoizedProps)}}else if((it.tag!==22&&it.tag!==23||it.memoizedState===null||it===A)&&it.child!==null){it.child.return=it,it=it.child;continue}if(it===A)break;for(;it.sibling===null;){if(it.return===null||it.return===A)break e;P===it&&(P=null),it=it.return}P===it&&(P=null),it.sibling.return=it.return,it=it.sibling}}if(yt&&!sn&&v.mode&1){He=v;for(var se=v.child;se!==null;){for(v=He=se;He!==null;){A=He;var ee=A.child;switch(A.tag){case 0:case 11:case 14:case 15:xl(4,A,A.return);break;case 1:Wm(A,A.return);var ue=A.stateNode;if(typeof ue.componentWillUnmount=="function"){var We=A.return;try{ue.props=A.memoizedProps,ue.state=A.memoizedState,ue.componentWillUnmount()}catch(nt){pi(A,We,nt)}}break;case 5:Wm(A,A.return);break;case 22:if(A.memoizedState!==null){CI(v);continue}}ee!==null?(ee.return=A,He=ee):CI(v)}se=se.sibling}}}switch(Z&4102){case 2:SI(f),f.flags&=-3;break;case 6:SI(f),f.flags&=-3,Ox(f.alternate,f);break;case 4096:f.flags&=-4097;break;case 4100:f.flags&=-4097,Ox(f.alternate,f);break;case 4:Ox(f.alternate,f)}}catch(nt){pi(f,f.return,nt)}if(v=f.sibling,v!==null){v.return=f.return,He=v;break}He=f.return}}}function E4(u,f,v){He=u,MI(u)}function MI(u,f,v){for(var A=(u.mode&1)!==0;He!==null;){var C=He,P=C.child;if(C.tag===22&&A){var $=C.memoizedState!==null||Vm;if(!$){var Z=C.alternate,pe=Z!==null&&Z.memoizedState!==null||_l;Z=Vm;var Le=_l;if(Vm=$,(_l=pe)&&!Le)for(He=C;He!==null;)$=He,pe=$.child,$.tag===22&&$.memoizedState!==null?bI(C):pe!==null?(pe.return=$,He=pe):bI(C);for(;P!==null;)He=P,MI(P),P=P.sibling;He=C,Vm=Z,_l=Le}EI(u)}else C.subtreeFlags&8772&&P!==null?(P.return=C,He=P):EI(u)}}function EI(u){for(;He!==null;){var f=He;if(f.flags&8772){var v=f.alternate;try{if(f.flags&8772)switch(f.tag){case 0:case 11:case 15:_l||xf(5,f);break;case 1:var A=f.stateNode;if(f.flags&4&&!_l)if(v===null)A.componentDidMount();else{var C=f.elementType===f.type?v.memoizedProps:xs(f.type,v.memoizedProps);A.componentDidUpdate(C,v.memoizedState,A.__reactInternalSnapshotBeforeUpdate)}var P=f.updateQueue;P!==null&&_T(f,P,A);break;case 3:var $=f.updateQueue;if($!==null){if(v=null,f.child!==null)switch(f.child.tag){case 5:v=ne(f.child.stateNode);break;case 1:v=f.child.stateNode}_T(f,$,v)}break;case 5:var Z=f.stateNode;v===null&&f.flags&4&&st(Z,f.type,f.memoizedProps,f);break;case 6:break;case 4:break;case 12:break;case 13:if(fe&&f.memoizedState===null){var pe=f.alternate;if(pe!==null){var Le=pe.memoizedState;if(Le!==null){var Ye=Le.dehydrated;Ye!==null&&Nt(Ye)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}_l||f.flags&512&&Lx(f)}catch(yt){pi(f,f.return,yt)}}if(f===u){He=null;break}if(v=f.sibling,v!==null){v.return=f.return,He=v;break}He=f.return}}function CI(u){for(;He!==null;){var f=He;if(f===u){He=null;break}var v=f.sibling;if(v!==null){v.return=f.return,He=v;break}He=f.return}}function bI(u){for(;He!==null;){var f=He;try{switch(f.tag){case 0:case 11:case 15:var v=f.return;try{xf(4,f)}catch(pe){pi(f,v,pe)}break;case 1:var A=f.stateNode;if(typeof A.componentDidMount=="function"){var C=f.return;try{A.componentDidMount()}catch(pe){pi(f,C,pe)}}var P=f.return;try{Lx(f)}catch(pe){pi(f,P,pe)}break;case 5:var $=f.return;try{Lx(f)}catch(pe){pi(f,$,pe)}}}catch(pe){pi(f,f.return,pe)}if(f===u){He=null;break}var Z=f.sibling;if(Z!==null){Z.return=f.return,He=Z;break}He=f.return}}var $m=0,Jm=1,Km=2,Xm=3,qm=4;if(typeof Symbol=="function"&&Symbol.for){var wf=Symbol.for;$m=wf("selector.component"),Jm=wf("selector.has_pseudo_class"),Km=wf("selector.role"),Xm=wf("selector.test_id"),qm=wf("selector.text")}function kx(u){var f=xe(u);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(o(364));return f}if(u=wt(u),u===null)throw Error(o(362));return u.stateNode.current}function Nx(u,f){switch(f.$$typeof){case $m:if(u.type===f.value)return!0;break;case Jm:e:{f=f.value,u=[u,0];for(var v=0;v<u.length;){var A=u[v++],C=u[v++],P=f[C];if(A.tag!==5||!ce(A)){for(;P!=null&&Nx(A,P);)C++,P=f[C];if(C===f.length){f=!0;break e}else for(A=A.child;A!==null;)u.push(A,C),A=A.sibling}}f=!1}return f;case Km:if(u.tag===5&&Pe(u.stateNode,f.value))return!0;break;case qm:if((u.tag===5||u.tag===6)&&(u=O(u),u!==null&&0<=u.indexOf(f.value)))return!0;break;case Xm:if(u.tag===5&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Fx(u){switch(u.$$typeof){case $m:return"<"+(L(u.value)||"Unknown")+">";case Jm:return":has("+(Fx(u)||"")+")";case Km:return'[role="'+u.value+'"]';case qm:return'"'+u.value+'"';case Xm:return'[data-testname="'+u.value+'"]';default:throw Error(o(365))}}function TI(u,f){var v=[];u=[u,0];for(var A=0;A<u.length;){var C=u[A++],P=u[A++],$=f[P];if(C.tag!==5||!ce(C)){for(;$!=null&&Nx(C,$);)P++,$=f[P];if(P===f.length)v.push(C);else for(C=C.child;C!==null;)u.push(C,P),C=C.sibling}}return v}function Ux(u,f){if(!ft)throw Error(o(363));u=kx(u),u=TI(u,f),f=[],u=Array.from(u);for(var v=0;v<u.length;){var A=u[v++];if(A.tag===5)ce(A)||f.push(A.stateNode);else for(A=A.child;A!==null;)u.push(A),A=A.sibling}return f}var C4=Math.ceil,Qm=a.ReactCurrentDispatcher,zx=a.ReactCurrentOwner,Gn=a.ReactCurrentBatchConfig,Ct=0,Kn=null,Xn=null,Mr=0,Ii=0,qc=gn(0),ir=0,Sf=null,Qc=0,Ym=0,Gx=0,Af=null,fi=null,Hx=0,Vx=1/0;function Yc(){Vx=fr()+500}var Zm=!1,Wx=null,la=null,eg=!1,ca=null,tg=0,Mf=0,jx=null,ng=-1,rg=0;function ti(){return Ct&6?fr():ng!==-1?ng:ng=fr()}function ua(u){return u.mode&1?Ct&2&&Mr!==0?Mr&-Mr:l4.transition!==null?(rg===0&&(u=gm,gm<<=1,!(gm&4194240)&&(gm=64),rg=u),rg):(u=jt,u!==0?u:Te()):1}function Zi(u,f,v){if(50<Mf)throw Mf=0,jx=null,Error(o(185));var A=ig(u,f);return A===null?null:(af(A,f,v),(!(Ct&2)||A!==Kn)&&(A===Kn&&(!(Ct&2)&&(Ym|=f),ir===4&&ha(A,Mr)),di(A,v),f===1&&Ct===0&&!(u.mode&1)&&(Yc(),xm&&Ks())),A)}function ig(u,f){u.lanes|=f;var v=u.alternate;for(v!==null&&(v.lanes|=f),v=u,u=u.return;u!==null;)u.childLanes|=f,v=u.alternate,v!==null&&(v.childLanes|=f),v=u,u=u.return;return v.tag===3?v.stateNode:null}function di(u,f){var v=u.callbackNode;Zz(u,f);var A=vm(u,u===Kn?Mr:0);if(A===0)v!==null&&pT(v),u.callbackNode=null,u.callbackPriority=0;else if(f=A&-A,u.callbackPriority!==f){if(v!=null&&pT(v),f===1)u.tag===0?a4(PI.bind(null,u)):mT(PI.bind(null,u)),Je?Qe(function(){Ct===0&&Ks()}):Z_(ex,Ks),v=null;else{switch(dT(A)){case 1:v=ex;break;case 4:v=r4;break;case 16:v=tx;break;case 536870912:v=i4;break;default:v=tx}v=UI(v,II.bind(null,u))}u.callbackPriority=f,u.callbackNode=v}}function II(u,f){if(ng=-1,rg=0,Ct&6)throw Error(o(327));var v=u.callbackNode;if(Al()&&u.callbackNode!==v)return null;var A=vm(u,u===Kn?Mr:0);if(A===0)return null;if(A&30||A&u.expiredLanes||f)f=sg(u,A);else{f=A;var C=Ct;Ct|=2;var P=DI();(Kn!==u||Mr!==f)&&(Yc(),wl(u,f));do try{I4();break}catch(Z){LI(u,Z)}while(1);ix(),Qm.current=P,Ct=C,Xn!==null?f=0:(Kn=null,Mr=0,f=ir)}if(f!==0){if(f===2&&(C=q_(u),C!==0&&(A=C,f=$x(u,C))),f===1)throw v=Sf,wl(u,0),ha(u,A),di(u,fr()),v;if(f===6)ha(u,A);else{if(C=u.current.alternate,!(A&30)&&!b4(C)&&(f=sg(u,A),f===2&&(P=q_(u),P!==0&&(A=P,f=$x(u,P))),f===1))throw v=Sf,wl(u,0),ha(u,A),di(u,fr()),v;switch(u.finishedWork=C,u.finishedLanes=A,f){case 0:case 1:throw Error(o(345));case 2:Sl(u,fi);break;case 3:if(ha(u,A),(A&130023424)===A&&(f=Hx+500-fr(),10<f)){if(vm(u,0)!==0)break;if(C=u.suspendedLanes,(C&A)!==A){ti(),u.pingedLanes|=u.suspendedLanes&C;break}u.timeoutHandle=Ae(Sl.bind(null,u,fi),f);break}Sl(u,fi);break;case 4:if(ha(u,A),(A&4194240)===A)break;for(f=u.eventTimes,C=-1;0<A;){var $=31-_s(A);P=1<<$,$=f[$],$>C&&(C=$),A&=~P}if(A=C,A=fr()-A,A=(120>A?120:480>A?480:1080>A?1080:1920>A?1920:3e3>A?3e3:4320>A?4320:1960*C4(A/1960))-A,10<A){u.timeoutHandle=Ae(Sl.bind(null,u,fi),A);break}Sl(u,fi);break;case 5:Sl(u,fi);break;default:throw Error(o(329))}}}return di(u,fr()),u.callbackNode===v?II.bind(null,u):null}function $x(u,f){var v=Af;return u.current.memoizedState.isDehydrated&&(wl(u,f).flags|=256),u=sg(u,f),u!==2&&(f=fi,fi=v,f!==null&&Jx(f)),u}function Jx(u){fi===null?fi=u:fi.push.apply(fi,u)}function b4(u){for(var f=u;;){if(f.flags&16384){var v=f.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var A=0;A<v.length;A++){var C=v[A],P=C.getSnapshot;C=C.value;try{if(!Js(P(),C))return!1}catch{return!1}}}if(v=f.child,f.subtreeFlags&16384&&v!==null)v.return=f,f=v;else{if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function ha(u,f){for(f&=~Gx,f&=~Ym,u.suspendedLanes|=f,u.pingedLanes&=~f,u=u.expirationTimes;0<f;){var v=31-_s(f),A=1<<v;u[v]=-1,f&=~A}}function PI(u){if(Ct&6)throw Error(o(327));Al();var f=vm(u,0);if(!(f&1))return di(u,fr()),null;var v=sg(u,f);if(u.tag!==0&&v===2){var A=q_(u);A!==0&&(f=A,v=$x(u,A))}if(v===1)throw v=Sf,wl(u,0),ha(u,f),di(u,fr()),v;if(v===6)throw Error(o(345));return u.finishedWork=u.current.alternate,u.finishedLanes=f,Sl(u,fi),di(u,fr()),null}function RI(u){ca!==null&&ca.tag===0&&!(Ct&6)&&Al();var f=Ct;Ct|=1;var v=Gn.transition,A=jt;try{if(Gn.transition=null,jt=1,u)return u()}finally{jt=A,Gn.transition=v,Ct=f,!(Ct&6)&&Ks()}}function Kx(){Ii=qc.current,Gt(qc)}function wl(u,f){u.finishedWork=null,u.finishedLanes=0;var v=u.timeoutHandle;if(v!==ze&&(u.timeoutHandle=ze,Oe(v)),Xn!==null)for(v=Xn.return;v!==null;){var A=v;switch(hx(A),A.tag){case 1:A=A.type.childContextTypes,A!=null&&pm();break;case 3:Kc(),Gt(Dr),Gt(Jn),vx();break;case 5:gx(A);break;case 4:Kc();break;case 13:Gt(Sn);break;case 19:Gt(Sn);break;case 10:sx(A.type._context);break;case 22:case 23:Kx()}v=v.return}if(Kn=u,Xn=u=fa(u.current,null),Mr=Ii=f,ir=0,Sf=null,Gx=Ym=Qc=0,fi=Af=null,Xs!==null){for(f=0;f<Xs.length;f++)if(v=Xs[f],A=v.interleaved,A!==null){v.interleaved=null;var C=A.next,P=v.pending;if(P!==null){var $=P.next;P.next=C,A.next=$}v.pending=A}Xs=null}return u}function LI(u,f){do{var v=Xn;try{if(ix(),Rm.current=Nm,Lm){for(var A=On.memoizedState;A!==null;){var C=A.queue;C!==null&&(C.pending=null),A=A.next}Lm=!1}if(Xc=0,dr=Br=On=null,df=!1,pf=0,zx.current=null,v===null||v.return===null){ir=1,Sf=f,Xn=null;break}e:{var P=u,$=v.return,Z=v,pe=f;if(f=Mr,Z.flags|=32768,pe!==null&&typeof pe=="object"&&typeof pe.then=="function"){var Le=pe,Ye=Z,yt=Ye.tag;if(!(Ye.mode&1)&&(yt===0||yt===11||yt===15)){var ct=Ye.alternate;ct?(Ye.updateQueue=ct.updateQueue,Ye.memoizedState=ct.memoizedState,Ye.lanes=ct.lanes):(Ye.updateQueue=null,Ye.memoizedState=null)}var sn=ZT($);if(sn!==null){sn.flags&=-257,eI(sn,$,Z,P,f),sn.mode&1&&YT(P,Le,f),f=sn,pe=Le;var it=f.updateQueue;if(it===null){var Nr=new Set;Nr.add(pe),f.updateQueue=Nr}else it.add(pe);break e}else{if(!(f&1)){YT(P,Le,f),Xx();break e}pe=Error(o(426))}}else if(yn&&Z.mode&1){var ts=ZT($);if(ts!==null){!(ts.flags&65536)&&(ts.flags|=256),eI(ts,$,Z,P,f),px(pe);break e}}P=pe,ir!==4&&(ir=2),Af===null?Af=[P]:Af.push(P),pe=Ex(pe,Z),Z=$;do{switch(Z.tag){case 3:Z.flags|=65536,f&=-f,Z.lanes|=f;var se=qT(Z,pe,f);vT(Z,se);break e;case 1:P=pe;var ee=Z.type,ue=Z.stateNode;if(!(Z.flags&128)&&(typeof ee.getDerivedStateFromError=="function"||ue!==null&&typeof ue.componentDidCatch=="function"&&(la===null||!la.has(ue)))){Z.flags|=65536,f&=-f,Z.lanes|=f;var We=QT(Z,P,f);vT(Z,We);break e}}Z=Z.return}while(Z!==null)}OI(v)}catch(nt){f=nt,Xn===v&&v!==null&&(Xn=v=v.return);continue}break}while(1)}function DI(){var u=Qm.current;return Qm.current=Nm,u===null?Nm:u}function Xx(){(ir===0||ir===3||ir===2)&&(ir=4),Kn===null||!(Qc&268435455)&&!(Ym&268435455)||ha(Kn,Mr)}function sg(u,f){var v=Ct;Ct|=2;var A=DI();Kn===u&&Mr===f||wl(u,f);do try{T4();break}catch(C){LI(u,C)}while(1);if(ix(),Ct=v,Qm.current=A,Xn!==null)throw Error(o(261));return Kn=null,Mr=0,ir}function T4(){for(;Xn!==null;)BI(Xn)}function I4(){for(;Xn!==null&&!t4();)BI(Xn)}function BI(u){var f=FI(u.alternate,u,Ii);u.memoizedProps=u.pendingProps,f===null?OI(u):Xn=f,zx.current=null}function OI(u){var f=u;do{var v=f.alternate;if(u=f.return,f.flags&32768){if(v=w4(v,f),v!==null){v.flags&=32767,Xn=v;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{ir=6,Xn=null;return}}else if(v=v4(v,f,Ii),v!==null){Xn=v;return}if(f=f.sibling,f!==null){Xn=f;return}Xn=f=u}while(f!==null);ir===0&&(ir=5)}function Sl(u,f){var v=jt,A=Gn.transition;try{Gn.transition=null,jt=1,P4(u,f,v)}finally{Gn.transition=A,jt=v}return null}function P4(u,f,v){do Al();while(ca!==null);if(Ct&6)throw Error(o(327));var A=u.finishedWork,C=u.finishedLanes;if(A===null)return null;if(u.finishedWork=null,u.finishedLanes=0,A===u.current)throw Error(o(177));u.callbackNode=null,u.callbackPriority=0;var P=A.lanes|A.childLanes;if(e4(u,P),u===Kn&&(Xn=Kn=null,Mr=0),!(A.subtreeFlags&2064)&&!(A.flags&2064)||eg||(eg=!0,UI(tx,function(){return Al(),null})),P=(A.flags&15990)!==0,A.subtreeFlags&15990||P){P=Gn.transition,Gn.transition=null;var $=jt;jt=1;var Z=Ct;Ct|=4,zx.current=null,A4(u,A),M4(u,A),B(u.containerInfo),u.current=A,E4(A),n4(),Ct=Z,jt=$,Gn.transition=P}else u.current=A;if(eg&&(eg=!1,ca=u,tg=C),P=u.pendingLanes,P===0&&(la=null),s4(A.stateNode),di(u,fr()),f!==null)for(v=u.onRecoverableError,A=0;A<f.length;A++)v(f[A]);if(Zm)throw Zm=!1,u=Wx,Wx=null,u;return tg&1&&u.tag!==0&&Al(),P=u.pendingLanes,P&1?u===jx?Mf++:(Mf=0,jx=u):Mf=0,Ks(),null}function Al(){if(ca!==null){var u=dT(tg),f=Gn.transition,v=jt;try{if(Gn.transition=null,jt=16>u?16:u,ca===null)var A=!1;else{if(u=ca,ca=null,tg=0,Ct&6)throw Error(o(331));var C=Ct;for(Ct|=4,He=u.current;He!==null;){var P=He,$=P.child;if(He.flags&16){var Z=P.deletions;if(Z!==null){for(var pe=0;pe<Z.length;pe++){var Le=Z[pe];for(He=Le;He!==null;){var Ye=He;switch(Ye.tag){case 0:case 11:case 15:xl(8,Ye,P)}var yt=Ye.child;if(yt!==null)yt.return=Ye,He=yt;else for(;He!==null;){Ye=He;var ct=Ye.sibling,sn=Ye.return;if(_I(Ye),Ye===Le){He=null;break}if(ct!==null){ct.return=sn,He=ct;break}He=sn}}}var it=P.alternate;if(it!==null){var Nr=it.child;if(Nr!==null){it.child=null;do{var ts=Nr.sibling;Nr.sibling=null,Nr=ts}while(Nr!==null)}}He=P}}if(P.subtreeFlags&2064&&$!==null)$.return=P,He=$;else e:for(;He!==null;){if(P=He,P.flags&2048)switch(P.tag){case 0:case 11:case 15:xl(9,P,P.return)}var se=P.sibling;if(se!==null){se.return=P.return,He=se;break e}He=P.return}}var ee=u.current;for(He=ee;He!==null;){$=He;var ue=$.child;if($.subtreeFlags&2064&&ue!==null)ue.return=$,He=ue;else e:for($=ee;He!==null;){if(Z=He,Z.flags&2048)try{switch(Z.tag){case 0:case 11:case 15:xf(9,Z)}}catch(nt){pi(Z,Z.return,nt)}if(Z===$){He=null;break e}var We=Z.sibling;if(We!==null){We.return=Z.return,He=We;break e}He=Z.return}}if(Ct=C,Ks(),$s&&typeof $s.onPostCommitFiberRoot=="function")try{$s.onPostCommitFiberRoot(_m,u)}catch{}A=!0}return A}finally{jt=v,Gn.transition=f}}return!1}function kI(u,f,v){f=Ex(v,f),f=qT(u,f,1),aa(u,f),f=ti(),u=ig(u,1),u!==null&&(af(u,1,f),di(u,f))}function pi(u,f,v){if(u.tag===3)kI(u,u,v);else for(;f!==null;){if(f.tag===3){kI(f,u,v);break}else if(f.tag===1){var A=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(la===null||!la.has(A))){u=Ex(v,u),u=QT(f,u,1),aa(f,u),u=ti(),f=ig(f,1),f!==null&&(af(f,1,u),di(f,u));break}}f=f.return}}function R4(u,f,v){var A=u.pingCache;A!==null&&A.delete(f),f=ti(),u.pingedLanes|=u.suspendedLanes&v,Kn===u&&(Mr&v)===v&&(ir===4||ir===3&&(Mr&130023424)===Mr&&500>fr()-Hx?wl(u,0):Gx|=v),di(u,f)}function NI(u,f){f===0&&(u.mode&1?(f=ym,ym<<=1,!(ym&130023424)&&(ym=4194304)):f=1);var v=ti();u=ig(u,f),u!==null&&(af(u,f,v),di(u,v))}function L4(u){var f=u.memoizedState,v=0;f!==null&&(v=f.retryLane),NI(u,v)}function D4(u,f){var v=0;switch(u.tag){case 13:var A=u.stateNode,C=u.memoizedState;C!==null&&(v=C.retryLane);break;case 19:A=u.stateNode;break;default:throw Error(o(314))}A!==null&&A.delete(f),NI(u,v)}var FI;FI=function(u,f,v){if(u!==null)if(u.memoizedProps!==f.pendingProps||Dr.current)Ti=!0;else{if(!(u.lanes&v)&&!(f.flags&128))return Ti=!1,x4(u,f,v);Ti=!!(u.flags&131072)}else Ti=!1,yn&&f.flags&1048576&&MT(f,Tm,f.index);switch(f.lanes=0,f.tag){case 2:var A=f.type;u!==null&&(u.alternate=null,f.alternate=null,f.flags|=2),u=f.pendingProps;var C=zc(f,Jn.current);Hc(f,v),C=xx(null,f,A,u,C,v);var P=wx();return f.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,hi(A)?(P=!0,mm(f)):P=!1,f.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,ax(f),C.updater=Cm,f.stateNode=C,C._reactInternals=f,cx(f,A,u,v),f=Tx(null,f,A,!0,P,v)):(f.tag=0,yn&&P&&ux(f),ei(null,f,C,v),f=f.child),f;case 16:A=f.elementType;e:{switch(u!==null&&(u.alternate=null,f.alternate=null,f.flags|=2),u=f.pendingProps,C=A._init,A=C(A._payload),f.type=A,C=f.tag=O4(A),u=xs(A,u),C){case 0:f=bx(null,f,A,u,v);break e;case 1:f=lI(null,f,A,u,v);break e;case 11:f=rI(null,f,A,u,v);break e;case 14:f=iI(null,f,A,xs(A.type,u),v);break e}throw Error(o(306,A,""))}return f;case 0:return A=f.type,C=f.pendingProps,C=f.elementType===A?C:xs(A,C),bx(u,f,A,C,v);case 1:return A=f.type,C=f.pendingProps,C=f.elementType===A?C:xs(A,C),lI(u,f,A,C,v);case 3:e:{if(cI(f),u===null)throw Error(o(387));A=f.pendingProps,P=f.memoizedState,C=P.element,yT(u,f),Em(f,A,null,v);var $=f.memoizedState;if(A=$.element,fe&&P.isDehydrated)if(P={element:A,isDehydrated:!1,cache:$.cache,transitions:$.transitions},f.updateQueue.baseState=P,f.memoizedState=P,f.flags&256){C=Error(o(423)),f=uI(u,f,A,v,C);break e}else if(A!==C){C=Error(o(424)),f=uI(u,f,A,v,C);break e}else for(fe&&(bi=ye(f.stateNode.containerInfo),Ci=f,yn=!0,ws=null,lf=!1),v=PT(f,null,A,v),f.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(jc(),A===C){f=Eo(u,f,v);break e}ei(u,f,A,v)}f=f.child}return f;case 5:return RT(f),u===null&&dx(f),A=f.type,C=f.pendingProps,P=u!==null?u.memoizedProps:null,$=C.children,Q(A,C)?$=null:P!==null&&Q(A,P)&&(f.flags|=32),aI(u,f),ei(u,f,$,v),f.child;case 6:return u===null&&dx(f),null;case 13:return hI(u,f,v);case 4:return mx(f,f.stateNode.containerInfo),A=f.pendingProps,u===null?f.child=$c(f,null,A,v):ei(u,f,A,v),f.child;case 11:return A=f.type,C=f.pendingProps,C=f.elementType===A?C:xs(A,C),rI(u,f,A,C,v);case 7:return ei(u,f,f.pendingProps,v),f.child;case 8:return ei(u,f,f.pendingProps.children,v),f.child;case 12:return ei(u,f,f.pendingProps.children,v),f.child;case 10:e:{if(A=f.type._context,C=f.pendingProps,P=f.memoizedProps,$=C.value,gT(f,A,$),P!==null)if(Js(P.value,$)){if(P.children===C.children&&!Dr.current){f=Eo(u,f,v);break e}}else for(P=f.child,P!==null&&(P.return=f);P!==null;){var Z=P.dependencies;if(Z!==null){$=P.child;for(var pe=Z.firstContext;pe!==null;){if(pe.context===A){if(P.tag===1){pe=wo(-1,v&-v),pe.tag=2;var Le=P.updateQueue;if(Le!==null){Le=Le.shared;var Ye=Le.pending;Ye===null?pe.next=pe:(pe.next=Ye.next,Ye.next=pe),Le.pending=pe}}P.lanes|=v,pe=P.alternate,pe!==null&&(pe.lanes|=v),ox(P.return,v,f),Z.lanes|=v;break}pe=pe.next}}else if(P.tag===10)$=P.type===f.type?null:P.child;else if(P.tag===18){if($=P.return,$===null)throw Error(o(341));$.lanes|=v,Z=$.alternate,Z!==null&&(Z.lanes|=v),ox($,v,f),$=P.sibling}else $=P.child;if($!==null)$.return=P;else for($=P;$!==null;){if($===f){$=null;break}if(P=$.sibling,P!==null){P.return=$.return,$=P;break}$=$.return}P=$}ei(u,f,C.children,v),f=f.child}return f;case 9:return C=f.type,A=f.pendingProps.children,Hc(f,v),C=Ki(C),A=A(C),f.flags|=1,ei(u,f,A,v),f.child;case 14:return A=f.type,C=xs(A,f.pendingProps),C=xs(A.type,C),iI(u,f,A,C,v);case 15:return sI(u,f,f.type,f.pendingProps,v);case 17:return A=f.type,C=f.pendingProps,C=f.elementType===A?C:xs(A,C),u!==null&&(u.alternate=null,f.alternate=null,f.flags|=2),f.tag=1,hi(A)?(u=!0,mm(f)):u=!1,Hc(f,v),ST(f,A,C),cx(f,A,C,v),Tx(null,f,A,!0,u,v);case 19:return mI(u,f,v);case 22:return oI(u,f,v)}throw Error(o(156,f.tag))};function UI(u,f){return Z_(u,f)}function B4(u,f,v,A){this.tag=u,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function es(u,f,v,A){return new B4(u,f,v,A)}function qx(u){return u=u.prototype,!(!u||!u.isReactComponent)}function O4(u){if(typeof u=="function")return qx(u)?1:0;if(u!=null){if(u=u.$$typeof,u===g)return 11;if(u===w)return 14}return 2}function fa(u,f){var v=u.alternate;return v===null?(v=es(u.tag,f,u.key,u.mode),v.elementType=u.elementType,v.type=u.type,v.stateNode=u.stateNode,v.alternate=u,u.alternate=v):(v.pendingProps=f,v.type=u.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=u.flags&14680064,v.childLanes=u.childLanes,v.lanes=u.lanes,v.child=u.child,v.memoizedProps=u.memoizedProps,v.memoizedState=u.memoizedState,v.updateQueue=u.updateQueue,f=u.dependencies,v.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},v.sibling=u.sibling,v.index=u.index,v.ref=u.ref,v}function og(u,f,v,A,C,P){var $=2;if(A=u,typeof u=="function")qx(u)&&($=1);else if(typeof u=="string")$=5;else e:switch(u){case h:return Ml(v.children,C,P,f);case d:$=8,C|=8;break;case p:return u=es(12,v,f,C|2),u.elementType=p,u.lanes=P,u;case _:return u=es(13,v,f,C),u.elementType=_,u.lanes=P,u;case x:return u=es(19,v,f,C),u.elementType=x,u.lanes=P,u;case M:return ag(v,C,P,f);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case m:$=10;break e;case y:$=9;break e;case g:$=11;break e;case w:$=14;break e;case S:$=16,A=null;break e}throw Error(o(130,u==null?u:typeof u,""))}return f=es($,v,f,C),f.elementType=u,f.type=A,f.lanes=P,f}function Ml(u,f,v,A){return u=es(7,u,A,f),u.lanes=v,u}function ag(u,f,v,A){return u=es(22,u,A,f),u.elementType=M,u.lanes=v,u.stateNode={},u}function Qx(u,f,v){return u=es(6,u,null,f),u.lanes=v,u}function Yx(u,f,v){return f=es(4,u.children!==null?u.children:[],u.key,f),f.lanes=v,f.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},f}function k4(u,f,v,A,C){this.tag=f,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ze,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Q_(0),this.expirationTimes=Q_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Q_(0),this.identifierPrefix=A,this.onRecoverableError=C,fe&&(this.mutableSourceEagerHydrationData=null)}function zI(u,f,v,A,C,P,$,Z,pe){return u=new k4(u,f,v,Z,pe),f===1?(f=1,P===!0&&(f|=8)):f=0,P=es(3,null,null,f),u.current=P,P.stateNode=u,P.memoizedState={element:A,isDehydrated:v,cache:null,transitions:null},ax(P),u}function GI(u){if(!u)return Bn;u=u._reactInternals;e:{if(R(u)!==u||u.tag!==1)throw Error(o(170));var f=u;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(hi(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(o(171))}if(u.tag===1){var v=u.type;if(hi(v))return hT(u,v,f)}return f}function HI(u){var f=u._reactInternals;if(f===void 0)throw typeof u.render=="function"?Error(o(188)):(u=Object.keys(u).join(","),Error(o(268,u)));return u=V(f),u===null?null:u.stateNode}function VI(u,f){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var v=u.retryLane;u.retryLane=v!==0&&v<f?v:f}}function Zx(u,f){VI(u,f),(u=u.alternate)&&VI(u,f)}function N4(u){return u=V(u),u===null?null:u.stateNode}function F4(){return null}return t.attemptContinuousHydration=function(u){if(u.tag===13){var f=ti();Zi(u,134217728,f),Zx(u,134217728)}},t.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var f=ti(),v=ua(u);Zi(u,v,f),Zx(u,v)}},t.attemptSynchronousHydration=function(u){switch(u.tag){case 3:var f=u.stateNode;if(f.current.memoizedState.isDehydrated){var v=of(f.pendingLanes);v!==0&&(Y_(f,v|1),di(f,fr()),!(Ct&6)&&(Yc(),Ks()))}break;case 13:var A=ti();RI(function(){return Zi(u,1,A)}),Zx(u,1)}},t.batchedUpdates=function(u,f){var v=Ct;Ct|=1;try{return u(f)}finally{Ct=v,Ct===0&&(Yc(),xm&&Ks())}},t.createComponentSelector=function(u){return{$$typeof:$m,value:u}},t.createContainer=function(u,f,v,A,C,P,$){return zI(u,f,!1,null,v,A,C,P,$)},t.createHasPseudoClassSelector=function(u){return{$$typeof:Jm,value:u}},t.createHydrationContainer=function(u,f,v,A,C,P,$,Z,pe){return u=zI(v,A,!0,u,C,P,$,Z,pe),u.context=GI(null),v=u.current,A=ti(),C=ua(v),P=wo(A,C),P.callback=f??null,aa(v,P),u.current.lanes=C,af(u,C,A),di(u,A),u},t.createPortal=function(u,f,v){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:A==null?null:""+A,children:u,containerInfo:f,implementation:v}},t.createRoleSelector=function(u){return{$$typeof:Km,value:u}},t.createTestNameSelector=function(u){return{$$typeof:Xm,value:u}},t.createTextSelector=function(u){return{$$typeof:qm,value:u}},t.deferredUpdates=function(u){var f=jt,v=Gn.transition;try{return Gn.transition=null,jt=16,u()}finally{jt=f,Gn.transition=v}},t.discreteUpdates=function(u,f,v,A,C){var P=jt,$=Gn.transition;try{return Gn.transition=null,jt=1,u(f,v,A,C)}finally{jt=P,Gn.transition=$,Ct===0&&Yc()}},t.findAllNodes=Ux,t.findBoundingRects=function(u,f){if(!ft)throw Error(o(363));f=Ux(u,f),u=[];for(var v=0;v<f.length;v++)u.push(j(f[v]));for(f=u.length-1;0<f;f--){v=u[f];for(var A=v.x,C=A+v.width,P=v.y,$=P+v.height,Z=f-1;0<=Z;Z--)if(f!==Z){var pe=u[Z],Le=pe.x,Ye=Le+pe.width,yt=pe.y,ct=yt+pe.height;if(A>=Le&&P>=yt&&C<=Ye&&$<=ct){u.splice(f,1);break}else if(A!==Le||v.width!==pe.width||ct<P||yt>$){if(!(P!==yt||v.height!==pe.height||Ye<A||Le>C)){Le>A&&(pe.width+=Le-A,pe.x=A),Ye<C&&(pe.width=C-Le),u.splice(f,1);break}}else{yt>P&&(pe.height+=yt-P,pe.y=P),ct<$&&(pe.height=$-yt),u.splice(f,1);break}}}return u},t.findHostInstance=HI,t.findHostInstanceWithNoPortals=function(u){return u=G(u),u=u!==null?J(u):null,u===null?null:u.stateNode},t.findHostInstanceWithWarning=function(u){return HI(u)},t.flushControlled=function(u){var f=Ct;Ct|=1;var v=Gn.transition,A=jt;try{Gn.transition=null,jt=1,u()}finally{jt=A,Gn.transition=v,Ct=f,Ct===0&&(Yc(),Ks())}},t.flushPassiveEffects=Al,t.flushSync=RI,t.focusWithin=function(u,f){if(!ft)throw Error(o(363));for(u=kx(u),f=TI(u,f),f=Array.from(f),u=0;u<f.length;){var v=f[u++];if(!ce(v)){if(v.tag===5&&Re(v.stateNode))return!0;for(v=v.child;v!==null;)f.push(v),v=v.sibling}}return!1},t.getCurrentUpdatePriority=function(){return jt},t.getFindAllNodesFailureDescription=function(u,f){if(!ft)throw Error(o(363));var v=0,A=[];u=[kx(u),0];for(var C=0;C<u.length;){var P=u[C++],$=u[C++],Z=f[$];if((P.tag!==5||!ce(P))&&(Nx(P,Z)&&(A.push(Fx(Z)),$++,$>v&&(v=$)),$<f.length))for(P=P.child;P!==null;)u.push(P,$),P=P.sibling}if(v<f.length){for(u=[];v<f.length;v++)u.push(Fx(f[v]));return`findAllNodes was able to match part of the selector:
  `+(A.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},t.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return ne(u.child.stateNode);default:return u.child.stateNode}},t.injectIntoDevTools=function(u){if(u={bundleType:u.bundleType,version:u.version,rendererPackageName:u.rendererPackageName,rendererConfig:u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:N4,findFiberByHostInstance:u.findFiberByHostInstance||F4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)u=!0;else{try{_m=f.inject(u),$s=f}catch{}u=!!f.checkDCE}}return u},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(u,f,v,A){if(!ft)throw Error(o(363));u=Ux(u,f);var C=Ne(u,v,A).disconnect;return{disconnect:function(){C()}}},t.registerMutableSourceForHydration=function(u,f){var v=f._getVersion;v=v(f._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[f,v]:u.mutableSourceEagerHydrationData.push(f,v)},t.runWithPriority=function(u,f){var v=jt;try{return jt=u,f()}finally{jt=v}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(u,f,v,A){var C=f.current,P=ti(),$=ua(C);return v=GI(v),f.context===null?f.context=v:f.pendingContext=v,f=wo(P,$),f.payload={element:u},A=A===void 0?null:A,A!==null&&(f.callback=A),aa(C,f),u=Zi(C,$,P),u!==null&&Mm(u,C,$),$},t};(function(n){n.exports=eq})(YX);const tq=f0(rM);function ON(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}const ko=[];function kN(n,e,t=!1,r={}){for(const s of ko)if(ON(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return s.response;if(!t)throw s.promise}const i={keys:e,equal:r.equal,promise:n(...e).then(s=>i.response=s).then(()=>{r.lifespan&&r.lifespan>0&&setTimeout(()=>{const s=ko.indexOf(i);s!==-1&&ko.splice(s,1)},r.lifespan)}).catch(s=>i.error=s)};if(ko.push(i),!t)throw i.promise}const nq=(n,e,t)=>kN(n,e,!1,t),rq=(n,e,t)=>void kN(n,e,!0,t),iq=n=>{if(n===void 0||n.length===0)ko.splice(0,ko.length);else{const e=ko.find(t=>ON(n,t.keys,t.equal));if(e){const t=ko.indexOf(e);t!==-1&&ko.splice(t,1)}}};var YR,ZR;const sq=(n,...e)=>e.reduce((t,r)=>t==null?void 0:t[r],n),wu="ColorManagement"in nM&&sq(nM,"ColorManagement")||null,NN=n=>n&&n.isOrthographicCamera,oq=n=>n&&n.hasOwnProperty("current"),Xp=typeof window<"u"&&((YR=window.document)!=null&&YR.createElement||((ZR=window.navigator)==null?void 0:ZR.product)==="ReactNative")?q.useLayoutEffect:q.useEffect;function FN(n){const e=q.useRef(n);return Xp(()=>void(e.current=n),[n]),e}function aq({set:n}){return Xp(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class UN extends q.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}UN.getDerivedStateFromError=()=>({error:!0});const zN="__default",eL=new Map,lq=n=>n&&!!n.memoized&&!!n.changes;function GN(n){const e=typeof window<"u"?window.devicePixelRatio:1;return Array.isArray(n)?Math.min(Math.max(n[0],e),n[1]):n}const jf=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},fn={obj:n=>n===Object(n)&&!fn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(fn.str(n)||fn.num(n))return n===e;const s=fn.obj(n);if(s&&r==="reference")return n===e;const o=fn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&r==="shallow"){for(a in i?e:n)if(!fn.equ(n[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:n)if(n[a]!==e[a])return!1;if(fn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function cq(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function uq(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Su(n,e){const t=n;return(e!=null&&e.primitive||!t.__r3f)&&(t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),n}function iM(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((s,o)=>s[o],n),{target:t,key:i}}else return{target:t,key:e}}const tL=/-\d+$/;function _w(n,e,t){if(fn.str(t)){if(tL.test(t)){const s=t.replace(tL,""),{target:o,key:a}=iM(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=iM(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function nL(n,e,t){var r,i;if(fn.str(t)){const{target:s,key:o}=iM(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function HN(n,{children:e,key:t,ref:r,...i},{children:s,key:o,ref:a,...l}={},c=!1){var h;const d=(h=n==null?void 0:n.__r3f)!=null?h:{},p=Object.entries(i),m=[];if(c){const g=Object.keys(l);for(let _=0;_<g.length;_++)i.hasOwnProperty(g[_])||p.unshift([g[_],zN+"remove"])}p.forEach(([g,_])=>{var x;if((x=n.__r3f)!=null&&x.primitive&&g==="object"||fn.equ(_,l[g]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(g))return m.push([g,_,!0,[]]);let w=[];g.includes("-")&&(w=g.split("-")),m.push([g,_,!1,w]);for(const S in i){const M=i[S];S.startsWith(`${g}-`)&&m.push([S,M,!1,S.split("-")])}});const y={...i};return d.memoizedProps&&d.memoizedProps.args&&(y.args=d.memoizedProps.args),d.memoizedProps&&d.memoizedProps.attach&&(y.attach=d.memoizedProps.attach),{memoized:y,changes:m}}function xw(n,e){var t,r,i;const s=(t=n.__r3f)!=null?t:{},o=s.root,a=(r=o==null||o.getState==null?void 0:o.getState())!=null?r:{},{memoized:l,changes:c}=lq(e)?e:HN(n,e),h=s.eventCount;n.__r3f&&(n.__r3f.memoizedProps=l);for(let p=0;p<c.length;p++){let[m,y,g,_]=c[p],x=n,w=x[m];if(_.length&&(w=_.reduce((S,M)=>S[M],n),!(w&&w.set))){const[S,...M]=_.reverse();x=M.reverse().reduce((T,I)=>T[I],n),m=S}if(y===zN+"remove")if(x.constructor){let S=eL.get(x.constructor);S||(S=new x.constructor,eL.set(x.constructor,S)),y=S[m]}else y=0;if(g)y?s.handlers[m]=y:delete s.handlers[m],s.eventCount=Object.keys(s.handlers).length;else if(w&&w.set&&(w.copy||w instanceof ac)){if(Array.isArray(y))w.fromArray?w.fromArray(y):w.set(...y);else if(w.copy&&y&&y.constructor&&w.constructor===y.constructor)w.copy(y);else if(y!==void 0){const S=w instanceof De;!S&&w.setScalar?w.setScalar(y):w instanceof ac&&y instanceof ac?w.mask=y.mask:w.set(y),!wu&&!a.linear&&S&&w.convertSRGBToLinear()}}else x[m]=y,!a.linear&&x[m]instanceof cn&&x[m].format===vi&&x[m].type===Ko&&(x[m].encoding=bt);Au(n)}if(s.parent&&a.internal&&n.raycast&&h!==s.eventCount){const p=a.internal.interaction.indexOf(n);p>-1&&a.internal.interaction.splice(p,1),s.eventCount&&a.internal.interaction.push(n)}return!(c.length===1&&c[0][0]==="onUpdate")&&c.length&&(i=n.__r3f)!=null&&i.parent&&sM(n),n}function Au(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function sM(n){n.onUpdate==null||n.onUpdate(n)}function hq(n,e){n.manual||(NN(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function fy(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function fq(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Ba.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Ba.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Ba.ContinuousEventPriority;default:return Ba.DefaultEventPriority}}function VN(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function dq(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{VN(t.capturedMap,e,r,i)})}function pq(n){function e(l){const{internal:c}=n.getState(),h=l.offsetX-c.initialClick[0],d=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(h*h+d*d))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(h=>{var d;return(d=c.__r3f)==null?void 0:d.handlers["onPointer"+h]}))}function r(l,c){const h=n.getState(),d=new Set,p=[],m=c?c(h.internal.interaction):h.internal.interaction;for(let x=0;x<m.length;x++){const w=jf(m[x]);w&&(w.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(l,h);function y(x){const w=jf(x);if(!w||!w.events.enabled||w.raycaster.camera===null)return[];if(w.raycaster.camera===void 0){var S;w.events.compute==null||w.events.compute(l,w,(S=w.previousRoot)==null?void 0:S.getState()),w.raycaster.camera===void 0&&(w.raycaster.camera=null)}return w.raycaster.camera?w.raycaster.intersectObject(x,!0):[]}let g=m.flatMap(y).sort((x,w)=>{const S=jf(x.object),M=jf(w.object);return!S||!M?x.distance-w.distance:M.events.priority-S.events.priority||x.distance-w.distance}).filter(x=>{const w=fy(x);return d.has(w)?!1:(d.add(w),!0)});h.events.filter&&(g=h.events.filter(g,h));for(const x of g){let w=x.object;for(;w;){var _;(_=w.__r3f)!=null&&_.eventCount&&p.push({...x,eventObject:w}),w=w.parent}}if("pointerId"in l&&h.internal.capturedMap.has(l.pointerId))for(let x of h.internal.capturedMap.get(l.pointerId).values())d.has(fy(x.intersection))||p.push(x.intersection);return p}function i(l,c,h,d){const p=n.getState();if(l.length){const m={stopped:!1};for(const y of l){const g=jf(y.object)||p,{raycaster:_,pointer:x,camera:w,internal:S}=g,M=new N(x.x,x.y,0).unproject(w),T=D=>{var G,V;return(G=(V=S.capturedMap.get(D))==null?void 0:V.has(y.eventObject))!=null?G:!1},I=D=>{const G={intersection:y,target:c.target};S.capturedMap.has(D)?S.capturedMap.get(D).set(y.eventObject,G):S.capturedMap.set(D,new Map([[y.eventObject,G]])),c.target.setPointerCapture(D)},L=D=>{const G=S.capturedMap.get(D);G&&VN(S.capturedMap,y.eventObject,G,D)};let b={};for(let D in c){let G=c[D];typeof G!="function"&&(b[D]=G)}let R={...y,...b,pointer:x,intersections:l,stopped:m.stopped,delta:h,unprojectedPoint:M,ray:_.ray,camera:w,stopPropagation(){const D="pointerId"in c&&S.capturedMap.get(c.pointerId);if((!D||D.has(y.eventObject))&&(R.stopped=m.stopped=!0,S.hovered.size&&Array.from(S.hovered.values()).find(G=>G.eventObject===y.eventObject))){const G=l.slice(0,l.indexOf(y));s([...G,y])}},target:{hasPointerCapture:T,setPointerCapture:I,releasePointerCapture:L},currentTarget:{hasPointerCapture:T,setPointerCapture:I,releasePointerCapture:L},nativeEvent:c};if(d(R),m.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const h of c.hovered.values())if(!l.length||!l.find(d=>d.object===h.object&&d.index===h.index&&d.instanceId===h.instanceId)){const p=h.eventObject.__r3f,m=p==null?void 0:p.handlers;if(c.hovered.delete(fy(h)),p!=null&&p.eventCount){const y={...h,intersections:l};m.onPointerOut==null||m.onPointerOut(y),m.onPointerLeave==null||m.onPointerLeave(y)}}}function o(l,c){for(let h=0;h<c.length;h++){const d=c[h].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:h}=n.getState();"pointerId"in c&&h.capturedMap.has(c.pointerId)&&(h.capturedMap.delete(c.pointerId),s([]))}}return function(h){const{onPointerMissed:d,internal:p}=n.getState();p.lastEvent.current=h;const m=l==="onPointerMove",y=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",_=r(h,m?t:void 0),x=y?e(h):0;l==="onPointerDown"&&(p.initialClick=[h.offsetX,h.offsetY],p.initialHits=_.map(S=>S.eventObject)),y&&!_.length&&x<=2&&(o(h,p.interaction),d&&d(h)),m&&s(_);function w(S){const M=S.eventObject,T=M.__r3f,I=T==null?void 0:T.handlers;if(T!=null&&T.eventCount)if(m){if(I.onPointerOver||I.onPointerEnter||I.onPointerOut||I.onPointerLeave){const L=fy(S),b=p.hovered.get(L);b?b.stopped&&S.stopPropagation():(p.hovered.set(L,S),I.onPointerOver==null||I.onPointerOver(S),I.onPointerEnter==null||I.onPointerEnter(S))}I.onPointerMove==null||I.onPointerMove(S)}else{const L=I[l];L?(!y||p.initialHits.includes(M))&&(o(h,p.interaction.filter(b=>!p.initialHits.includes(b))),L(S)):y&&p.initialHits.includes(M)&&o(h,p.interaction.filter(b=>!p.initialHits.includes(b)))}}i(_,h,x,w)}}return{handlePointer:a}}let oM={},mq=n=>void(oM={...oM,...n});function gq(n,e){function t(h,{args:d=[],attach:p,...m},y){let g=`${h[0].toUpperCase()}${h.slice(1)}`,_;if(h==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const x=m.object;_=Su(x,{type:h,root:y,attach:p,primitive:!0})}else{const x=oM[g];if(!x)throw new Error(`R3F: ${g} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");_=Su(new x(...d),{type:h,root:y,attach:p,memoizedProps:{args:d}})}return _.__r3f.attach===void 0&&(_ instanceof dt?_.__r3f.attach="geometry":_ instanceof nr&&(_.__r3f.attach="material")),g!=="inject"&&xw(_,m),_}function r(h,d){let p=!1;if(d){var m,y;(m=d.__r3f)!=null&&m.attach?_w(h,d,d.__r3f.attach):d.isObject3D&&h.isObject3D&&(h.add(d),p=!0),p||(y=h.__r3f)==null||y.objects.push(d),d.__r3f||Su(d,{}),d.__r3f.parent=h,sM(d),Au(d)}}function i(h,d,p){let m=!1;if(d){var y,g;if((y=d.__r3f)!=null&&y.attach)_w(h,d,d.__r3f.attach);else if(d.isObject3D&&h.isObject3D){d.parent=h,d.dispatchEvent({type:"added"});const _=h.children.filter(w=>w!==d),x=_.indexOf(p);h.children=[..._.slice(0,x),d,..._.slice(x)],m=!0}m||(g=h.__r3f)==null||g.objects.push(d),d.__r3f||Su(d,{}),d.__r3f.parent=h,sM(d),Au(d)}}function s(h,d,p=!1){h&&[...h].forEach(m=>o(d,m,p))}function o(h,d,p){if(d){var m,y,g;if(d.__r3f&&(d.__r3f.parent=null),(m=h.__r3f)!=null&&m.objects&&(h.__r3f.objects=h.__r3f.objects.filter(M=>M!==d)),(y=d.__r3f)!=null&&y.attach)nL(h,d,d.__r3f.attach);else if(d.isObject3D&&h.isObject3D){var _;h.remove(d),(_=d.__r3f)!=null&&_.root&&dq(d.__r3f.root,d)}const w=(g=d.__r3f)==null?void 0:g.primitive,S=p===void 0?d.dispose!==null&&!w:p;if(!w){var x;s((x=d.__r3f)==null?void 0:x.objects,d,S),s(d.children,d,S)}d.__r3f&&(delete d.__r3f.root,delete d.__r3f.objects,delete d.__r3f.handlers,delete d.__r3f.memoizedProps,w||delete d.__r3f),S&&d.dispose&&d.type!=="Scene"&&ap.unstable_scheduleCallback(ap.unstable_IdlePriority,()=>{try{d.dispose()}catch{}}),Au(h)}}function a(h,d,p,m){var y;const g=(y=h.__r3f)==null?void 0:y.parent;if(!g)return;const _=t(d,p,h.__r3f.root);if(h.children){for(const x of h.children)x.__r3f&&r(_,x);h.children=h.children.filter(x=>!x.__r3f)}h.__r3f.objects.forEach(x=>r(_,x)),h.__r3f.objects=[],h.__r3f.autoRemovedBeforeAppend||o(g,h),_.parent&&(_.__r3f.autoRemovedBeforeAppend=!0),r(g,_),_.raycast&&_.__r3f.eventCount&&_.__r3f.root.getState().internal.interaction.push(_),[m,m.alternate].forEach(x=>{x!==null&&(x.stateNode=_,x.ref&&(typeof x.ref=="function"?x.ref(_):x.ref.current=_))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:tq({createInstance:t,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(h,d)=>{if(!d)return;const p=h.getState().scene;p.__r3f&&(p.__r3f.root=h,r(p,d))},removeChildFromContainer:(h,d)=>{d&&o(h.getState().scene,d)},insertInContainerBefore:(h,d,p)=>{if(!d||!p)return;const m=h.getState().scene;m.__r3f&&i(m,d,p)},getRootHostContext:()=>null,getChildHostContext:h=>h,finalizeInitialChildren(h){var d;const p=(d=h==null?void 0:h.__r3f)!=null?d:{};return Boolean(p.handlers)},prepareUpdate(h,d,p,m){if(h.__r3f.primitive&&m.object&&m.object!==h)return[!0];{const{args:y=[],children:g,..._}=m,{args:x=[],children:w,...S}=p;if(!Array.isArray(y))throw new Error("R3F: the args prop must be an array!");if(y.some((T,I)=>T!==x[I]))return[!0];const M=HN(h,_,S,!0);return M.changes.length?[!1,M]:null}},commitUpdate(h,[d,p],m,y,g,_){d?a(h,m,g,_):xw(h,p)},commitMount(h,d,p,m){var y;const g=(y=h.__r3f)!=null?y:{};h.raycast&&g.handlers&&g.eventCount&&h.__r3f.root.getState().internal.interaction.push(h)},getPublicInstance:h=>h,prepareForCommit:()=>null,preparePortalMount:h=>Su(h.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(h){var d;const{attach:p,parent:m}=(d=h.__r3f)!=null?d:{};p&&m&&nL(m,h,p),h.isObject3D&&(h.visible=!1),Au(h)},unhideInstance(h,d){var p;const{attach:m,parent:y}=(p=h.__r3f)!=null?p:{};m&&y&&_w(y,h,m),(h.isObject3D&&d.visible==null||d.visible)&&(h.visible=!0),Au(h)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Ba.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&fn.fun(performance.now)?performance.now:fn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:fn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:fn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:xw}}const WN=n=>!!(n!=null&&n.render),jN=q.createContext(null),yq=(n,e)=>{const t=DN((a,l)=>{const c=new N,h=new N,d=new N;function p(x=l().camera,w=h,S=l().size){const{width:M,height:T,top:I,left:L}=S,b=M/T;w instanceof N?d.copy(w):d.set(...w);const R=x.getWorldPosition(c).distanceTo(d);if(NN(x))return{width:M/x.zoom,height:T/x.zoom,top:I,left:L,factor:1,distance:R,aspect:b};{const D=x.fov*Math.PI/180,G=2*Math.tan(D/2)*R,V=G*(M/T);return{width:V,height:G,top:I,left:L,factor:M/V,distance:R,aspect:b}}}let m;const y=x=>a(w=>({performance:{...w.performance,current:x}})),g=new ve;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,invalidate:(x=1)=>n(l(),x),advance:(x,w)=>e(x,w,l()),legacy:!1,linear:!1,flat:!1,scene:Su(new SC),controls:null,clock:new HC,pointer:g,mouse:g,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const x=l();m&&clearTimeout(m),x.performance.current!==x.performance.min&&y(x.performance.min),m=setTimeout(()=>y(l().performance.max),x.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:x=>a(w=>({...w,events:{...w.events,...x}})),setSize:(x,w,S,M,T)=>{const I=l().camera,L={width:x,height:w,top:M||0,left:T||0,updateStyle:S};a(b=>({size:L,viewport:{...b.viewport,...p(I,h,L)}}))},setDpr:x=>a(w=>{const S=GN(x);return{viewport:{...w.viewport,dpr:S,initialDpr:w.viewport.initialDpr||S}}}),setFrameloop:(x="always")=>{const w=l().clock;w.stop(),w.elapsedTime=0,x!=="never"&&(w.start(),w.elapsedTime=0),a(()=>({frameloop:x}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:q.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(x,w,S)=>{const M=l().internal;return M.priority=M.priority+(w>0?1:0),M.subscribers.push({ref:x,priority:w,store:S}),M.subscribers=M.subscribers.sort((T,I)=>T.priority-I.priority),()=>{const T=l().internal;T!=null&&T.subscribers&&(T.priority=T.priority-(w>0?1:0),T.subscribers=T.subscribers.filter(I=>I.ref!==x))}}}}}),r=t.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:h,set:d}=t.getState();if(l!==i||c.dpr!==s){var p;i=l,s=c.dpr,hq(a,l),h.setPixelRatio(c.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(l.width,l.height,m)}a!==o&&(o=a,d(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let dy,vq=new Set,_q=new Set,xq=new Set;function ww(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function $f(n,e){switch(n){case"before":return ww(vq,e);case"after":return ww(_q,e);case"tail":return ww(xq,e)}}let Sw,Aw;function Mw(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),Sw=e.internal.subscribers,dy=0;dy<Sw.length;dy++)Aw=Sw[dy],Aw.ref.current(Aw.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function wq(n){let e=!1,t,r,i;function s(l){r=requestAnimationFrame(s),e=!0,t=0,$f("before",l);for(const h of n.values()){var c;i=h.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((c=i.gl.xr)!=null&&c.isPresenting)&&(t+=Mw(l,i))}if($f("after",l),t===0)return $f("tail",l),e=!1,cancelAnimationFrame(r)}function o(l,c=1){var h;if(!l)return n.forEach(d=>o(d.store.getState()),c);(h=l.gl.xr)!=null&&h.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+c),e||(e=!0,requestAnimationFrame(s)))}function a(l,c=!0,h,d){if(c&&$f("before",l),h)Mw(l,h,d);else for(const p of n.values())Mw(l,p.store.getState());c&&$f("after",l)}return{loop:s,invalidate:o,advance:a}}function $N(){const n=q.useContext(jN);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Bi(n=t=>t,e){return $N()(n,e)}function $C(n,e=0){const t=$N(),r=t.getState().internal.subscribe,i=FN(n);return Xp(()=>r(i,e,t),[e,r,t]),null}function JN(n,e){return function(t,...r){const i=new t;return n&&n(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,cq(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l.message})`))))))}}function Vs(n,e,t,r){const i=Array.isArray(e)?e:[e],s=nq(JN(t,r),[n,...i],{equal:fn.equ});return Array.isArray(e)?s:s[0]}Vs.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return rq(JN(t),[n,...r])};Vs.clear=function(n,e){const t=Array.isArray(e)?e:[e];return iq([n,...t])};const Ch=new Map,{invalidate:rL,advance:iL}=wq(Ch),{reconciler:Vv,applyProps:Oa}=gq(Ch,fq),_u={objects:"shallow",strict:!1},Sq=(n,e)=>{const t=typeof n=="function"?n(e):n;return WN(t)?t:new W0({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function Aq(n,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:r,top:i,left:s}=n.parentElement.getBoundingClientRect();return{width:t,height:r,top:i,left:s}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function Mq(n){const e=Ch.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||yq(rL,iL),o=t||Vv.createContainer(s,Ba.ConcurrentRoot,null,!1,null,"",i,null);e||Ch.set(n,{fiber:o,store:s});let a,l=!1,c;return{configure(h={}){let{gl:d,size:p,events:m,onCreated:y,shadows:g=!1,linear:_=!1,flat:x=!1,legacy:w=!1,orthographic:S=!1,frameloop:M="always",dpr:T=[1,2],performance:I,raycaster:L,camera:b,onPointerMissed:R}=h,D=s.getState(),G=D.gl;D.gl||D.set({gl:G=Sq(d,n)});let V=D.raycaster;V||D.set({raycaster:V=new RN});const{params:F,...J}=L||{};if(fn.equ(J,V,_u)||Oa(V,{...J}),fn.equ(F,V.params,_u)||Oa(V,{params:{...V.params,...F}}),!D.camera||D.camera===c&&!fn.equ(c,b,_u)){c=b;const W=b instanceof Bp,B=W?b:S?new fs(0,0,0,0,.1,1e3):new rn(75,0,.1,1e3);W||(B.position.z=5,b&&Oa(B,b),!D.camera&&!(b!=null&&b.rotation)&&B.lookAt(0,0,0)),D.set({camera:B})}if(!D.xr){const W=(z,te)=>{const ae=s.getState();ae.frameloop!=="never"&&iL(z,!0,ae,te)},B=()=>{const z=s.getState();z.gl.xr.enabled=z.gl.xr.isPresenting,z.gl.xr.setAnimationLoop(z.gl.xr.isPresenting?W:null),z.gl.xr.isPresenting||rL(z)},ie={connect(){const z=s.getState().gl;z.xr.addEventListener("sessionstart",B),z.xr.addEventListener("sessionend",B)},disconnect(){const z=s.getState().gl;z.xr.removeEventListener("sessionstart",B),z.xr.removeEventListener("sessionend",B)}};G.xr&&ie.connect(),D.set({xr:ie})}if(G.shadowMap){const W=G.shadowMap.enabled,B=G.shadowMap.type;if(G.shadowMap.enabled=!!g,fn.boo(g))G.shadowMap.type=vd;else if(fn.str(g)){var X;const ie={basic:VO,percentage:k0,soft:vd,variance:Jl};G.shadowMap.type=(X=ie[g])!=null?X:vd}else fn.obj(g)&&Object.assign(G.shadowMap,g);(W!==G.shadowMap.enabled||B!==G.shadowMap.type)&&(G.shadowMap.needsUpdate=!0)}wu&&("enabled"in wu?wu.enabled=!w:"legacyMode"in wu&&(wu.legacyMode=w));const ne=_?Xo:bt,le=x?Ns:lC;G.outputEncoding!==ne&&(G.outputEncoding=ne),G.toneMapping!==le&&(G.toneMapping=le),D.legacy!==w&&D.set(()=>({legacy:w})),D.linear!==_&&D.set(()=>({linear:_})),D.flat!==x&&D.set(()=>({flat:x})),d&&!fn.fun(d)&&!WN(d)&&!fn.equ(d,G,_u)&&Oa(G,d),m&&!D.events.handlers&&D.set({events:m(s)});const U=Aq(n,p);return fn.equ(U,D.size,_u)||D.setSize(U.width,U.height,U.updateStyle,U.top,U.left),T&&D.viewport.dpr!==GN(T)&&D.setDpr(T),D.frameloop!==M&&D.setFrameloop(M),D.onPointerMissed||D.set({onPointerMissed:R}),I&&!fn.equ(I,D.performance,_u)&&D.set(W=>({performance:{...W.performance,...I}})),a=y,l=!0,this},render(h){return l||this.configure(),Vv.updateContainer(q.createElement(Eq,{store:s,children:h,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){KN(n)}}}function Eq({store:n,children:e,onCreated:t,rootElement:r}){return Xp(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),q.createElement(jN.Provider,{value:n},e)}function KN(n,e){const t=Ch.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),Vv.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),uq(i),Ch.delete(n),e&&e(n)}catch{}},500)})}}Vv.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:q.version});function Ec(){return Ec=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ec.apply(this,arguments)}function aM(n,e,t){var r,i,s,o,a;e==null&&(e=100);function l(){var h=Date.now()-o;h<e&&h>=0?r=setTimeout(l,e-h):(r=null,t||(a=n.apply(s,i),s=i=null))}var c=function(){s=this,i=arguments,o=Date.now();var h=t&&!r;return r||(r=setTimeout(l,e)),h&&(a=n.apply(s,i),s=i=null),a};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(a=n.apply(s,i),s=i=null,clearTimeout(r),r=null)},c}aM.debounce=aM;var sL=aM;function Cq(n){let{debounce:e,scroll:t,polyfill:r,offsetSize:i}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=q.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=q.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),c=e?typeof e=="number"?e:e.scroll:null,h=e?typeof e=="number"?e:e.resize:null,d=q.useRef(!1);q.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[p,m,y]=q.useMemo(()=>{const w=()=>{if(!l.current.element)return;const{left:S,top:M,width:T,height:I,bottom:L,right:b,x:R,y:D}=l.current.element.getBoundingClientRect(),G={left:S,top:M,width:T,height:I,bottom:L,right:b,x:R,y:D};l.current.element instanceof HTMLElement&&i&&(G.height=l.current.element.offsetHeight,G.width=l.current.element.offsetWidth),Object.freeze(G),d.current&&!Pq(l.current.lastBounds,G)&&a(l.current.lastBounds=G)};return[w,h?sL(w,h):w,c?sL(w,c):w]},[a,i,c,h]);function g(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(w=>w.removeEventListener("scroll",y,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function _(){l.current.element&&(l.current.resizeObserver=new s(y),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(w=>w.addEventListener("scroll",y,{capture:!0,passive:!0})))}const x=w=>{!w||w===l.current.element||(g(),l.current.element=w,l.current.scrollContainers=XN(w),_())};return Tq(y,Boolean(t)),bq(m),q.useEffect(()=>{g(),_()},[t,y,m]),q.useEffect(()=>g,[]),[x,o,p]}function bq(n){q.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function Tq(n,e){q.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function XN(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...XN(n.parentElement)]}const Iq=["x","y","top","bottom","left","right","width","height"],Pq=(n,e)=>Iq.every(t=>n[t]===e[t]);var Rq=Object.defineProperty,Lq=Object.defineProperties,Dq=Object.getOwnPropertyDescriptors,oL=Object.getOwnPropertySymbols,Bq=Object.prototype.hasOwnProperty,Oq=Object.prototype.propertyIsEnumerable,aL=(n,e,t)=>e in n?Rq(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,lL=(n,e)=>{for(var t in e||(e={}))Bq.call(e,t)&&aL(n,t,e[t]);if(oL)for(var t of oL(e))Oq.call(e,t)&&aL(n,t,e[t]);return n},kq=(n,e)=>Lq(n,Dq(e)),cL;function qN(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=e?n.return:n.child;for(;r;){const i=qN(r,e,t);if(i)return i;r=e?null:r.sibling}}function QN(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const JC=QN(q.createContext(null));class YN extends q.Component{render(){return q.createElement(JC.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:uL,ReactCurrentDispatcher:hL}=(cL=q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)!=null?cL:{};function Nq(){const n=q.useContext(JC),e=q.useId();return q.useMemo(()=>{var r;return(r=uL==null?void 0:uL.current)!=null?r:qN(n,!1,i=>{let s=i.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}})},[n,e])}function Fq(){var n,e;const t=Nq(),[r]=q.useState(()=>new Map);r.clear();let i=t;for(;i;){const s=(n=i.type)==null?void 0:n._context;s&&s!==JC&&!r.has(s)&&r.set(s,(e=hL==null?void 0:hL.current)==null?void 0:e.readContext(QN(s))),i=i.return}return q.useMemo(()=>Array.from(r.keys()).reduce((s,o)=>a=>q.createElement(s,null,q.createElement(o.Provider,kq(lL({},a),{value:r.get(o)}))),s=>q.createElement(YN,lL({},s))),[r])}const Ew={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Uq(n){const{handlePointer:e}=pq(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(Ew).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:s}=n.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,c]=Ew[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=Ew[s];r.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const zq=q.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:s,events:o=Uq,eventSource:a,eventPrefix:l,shadows:c,linear:h,flat:d,legacy:p,orthographic:m,frameloop:y,dpr:g,performance:_,raycaster:x,camera:w,onPointerMissed:S,onCreated:M,...T},I){q.useMemo(()=>mq(nM),[]);const L=Fq(),[b,R]=Cq({scroll:!0,debounce:{scroll:50,resize:0},...r}),D=q.useRef(null),G=q.useRef(null);q.useImperativeHandle(I,()=>D.current);const V=FN(S),[F,J]=q.useState(!1),[X,ne]=q.useState(!1);if(F)throw F;if(X)throw X;const le=q.useRef(null);Xp(()=>{const W=D.current;R.width>0&&R.height>0&&W&&(le.current||(le.current=Mq(W)),le.current.configure({gl:s,events:o,shadows:c,linear:h,flat:d,legacy:p,orthographic:m,frameloop:y,dpr:g,performance:_,raycaster:x,camera:w,size:R,onPointerMissed:(...B)=>V.current==null?void 0:V.current(...B),onCreated:B=>{B.events.connect==null||B.events.connect(a?oq(a)?a.current:a:G.current),l&&B.setEvents({compute:(ie,z)=>{const te=ie[l+"X"],ae=ie[l+"Y"];z.pointer.set(te/z.size.width*2-1,-(ae/z.size.height)*2+1),z.raycaster.setFromCamera(z.pointer,z.camera)}}),M==null||M(B)}}),le.current.render(q.createElement(L,null,q.createElement(UN,{set:ne},q.createElement(q.Suspense,{fallback:q.createElement(aq,{set:J})},e)))))}),q.useEffect(()=>{const W=D.current;if(W)return()=>KN(W)},[]);const U=a?"none":"auto";return q.createElement("div",Ec({ref:G,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:U,...i}},T),q.createElement("div",{ref:b,style:{width:"100%",height:"100%"}},q.createElement("canvas",{ref:D,style:{display:"block"}},t)))}),KC=q.forwardRef(function(e,t){return q.createElement(YN,null,q.createElement(zq,Ec({},e,{ref:t})))}),qp=new N,XC=new N,Gq=new N;function Hq(n,e,t){const r=qp.setFromMatrixPosition(n.matrixWorld);r.project(e);const i=t.width/2,s=t.height/2;return[r.x*i+i,-(r.y*s)+s]}function Vq(n,e){const t=qp.setFromMatrixPosition(n.matrixWorld),r=XC.setFromMatrixPosition(e.matrixWorld),i=t.sub(r),s=e.getWorldDirection(Gq);return i.angleTo(s)>Math.PI/2}function Wq(n,e,t,r){const i=qp.setFromMatrixPosition(n.matrixWorld),s=i.clone();s.project(e),t.setFromCamera(s,e);const o=t.intersectObjects(r,!0);if(o.length){const a=o[0].distance;return i.distanceTo(t.ray.origin)<a}return!0}function jq(n,e){if(e instanceof fs)return e.zoom;if(e instanceof rn){const t=qp.setFromMatrixPosition(n.matrixWorld),r=XC.setFromMatrixPosition(e.matrixWorld),i=e.fov*Math.PI/180,s=t.distanceTo(r);return 1/(2*Math.tan(i/2)*s)}else return 1}function $q(n,e,t){if(e instanceof rn||e instanceof fs){const r=qp.setFromMatrixPosition(n.matrixWorld),i=XC.setFromMatrixPosition(e.matrixWorld),s=r.distanceTo(i),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const lM=n=>Math.abs(n)<1e-10?0:n;function ZN(n,e,t=""){let r="matrix3d(";for(let i=0;i!==16;i++)r+=lM(e[i]*n.elements[i])+(i!==15?",":")");return t+r}const Jq=(n=>e=>ZN(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),Kq=(n=>(e,t)=>ZN(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function Xq(n){return n&&typeof n=="object"&&"current"in n}const qq=q.forwardRef(({children:n,eps:e=.001,style:t,className:r,prepend:i,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:c=!1,transform:h=!1,occlude:d,onOcclude:p,castShadow:m,receiveShadow:y,material:g,geometry:_,zIndexRange:x=[16777271,0],calculatePosition:w=Hq,as:S="div",wrapperClass:M,pointerEvents:T="auto",...I},L)=>{const{gl:b,camera:R,scene:D,size:G,raycaster:V,events:F,viewport:J}=Bi(),[X]=q.useState(()=>document.createElement(S)),ne=q.useRef(),le=q.useRef(null),U=q.useRef(0),W=q.useRef([0,0]),B=q.useRef(null),ie=q.useRef(null),z=(a==null?void 0:a.current)||F.connected||b.domElement.parentNode,te=q.useRef(null),ae=q.useRef(!1),Q=q.useMemo(()=>d&&d!=="blending"||Array.isArray(d)&&d.length&&Xq(d[0]),[d]);q.useLayoutEffect(()=>{const be=b.domElement;d&&d==="blending"?(be.style.zIndex=`${Math.floor(x[0]/2)}`,be.style.position="absolute",be.style.pointerEvents="none"):(be.style.zIndex=null,be.style.position=null,be.style.pointerEvents=null)},[d]),q.useLayoutEffect(()=>{if(le.current){const be=ne.current=Z3(X);if(D.updateMatrixWorld(),h)X.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Ee=w(le.current,R,G);X.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Ee[0]}px,${Ee[1]}px,0);transform-origin:0 0;`}return z&&(i?z.prepend(X):z.appendChild(X)),()=>{z&&z.removeChild(X),be.unmount()}}},[z,h]),q.useLayoutEffect(()=>{M&&(X.className=M)},[M]);const we=q.useMemo(()=>h?{position:"absolute",top:0,left:0,width:G.width,height:G.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-G.height/2,left:-G.width/2,width:G.width,height:G.height},...t},[t,s,o,G,h]),Ae=q.useMemo(()=>({position:"absolute",pointerEvents:T}),[T]);q.useLayoutEffect(()=>{if(ae.current=!1,h){var be;(be=ne.current)==null||be.render(q.createElement("div",{ref:B,style:we},q.createElement("div",{ref:ie,style:Ae},q.createElement("div",{ref:L,className:r,style:t,children:n}))))}else{var Ee;(Ee=ne.current)==null||Ee.render(q.createElement("div",{ref:L,style:we,className:r,children:n}))}});const Oe=q.useRef(!0);$C(be=>{if(le.current){R.updateMatrixWorld(),le.current.updateWorldMatrix(!0,!1);const Ee=h?W.current:w(le.current,R,G);if(h||Math.abs(U.current-R.zoom)>e||Math.abs(W.current[0]-Ee[0])>e||Math.abs(W.current[1]-Ee[1])>e){const he=Vq(le.current,R);let fe=!1;Q&&(d!=="blending"?fe=[D]:Array.isArray(d)&&(fe=d.map(Fe=>Fe.current)));const xe=Oe.current;if(fe){const Fe=Wq(le.current,R,V,fe);Oe.current=Fe&&!he}else Oe.current=!he;xe!==Oe.current&&(p?p(!Oe.current):X.style.display=Oe.current?"block":"none");const Ge=Math.floor(x[0]/2),Te=d?Q?[x[0],Ge]:[Ge-1,0]:x;if(X.style.zIndex=`${$q(le.current,R,Te)}`,h){const[Fe,Je]=[G.width/2,G.height/2],Qe=R.projectionMatrix.elements[5]*Je,{isOrthographicCamera:ft,top:wt,left:j,bottom:O,right:ce}=R,Pe=Jq(R.matrixWorldInverse),Re=ft?`scale(${Qe})translate(${lM(-(ce+j)/2)}px,${lM((wt+O)/2)}px)`:`translateZ(${Qe}px)`;let Ne=le.current.matrixWorld;c&&(Ne=R.matrixWorldInverse.clone().transpose().copyPosition(Ne).scale(le.current.scale),Ne.elements[3]=Ne.elements[7]=Ne.elements[11]=0,Ne.elements[15]=1),X.style.width=G.width+"px",X.style.height=G.height+"px",X.style.perspective=ft?"":`${Qe}px`,B.current&&ie.current&&(B.current.style.transform=`${Re}${Pe}translate(${Fe}px,${Je}px)`,ie.current.style.transform=Kq(Ne,1/((l||10)/400)))}else{const Fe=l===void 0?1:jq(le.current,R)*l;X.style.transform=`translate3d(${Ee[0]}px,${Ee[1]}px,0) scale(${Fe})`}W.current=Ee,U.current=R.zoom}}if(!Q&&te.current&&!ae.current)if(h){if(B.current){const Ee=B.current.children[0];if(Ee!=null&&Ee.clientWidth&&Ee!=null&&Ee.clientHeight){const{isOrthographicCamera:he}=R;if(he||_)I.scale&&(Array.isArray(I.scale)?I.scale instanceof N?te.current.scale.copy(I.scale.clone().divideScalar(1)):te.current.scale.set(1/I.scale[0],1/I.scale[1],1/I.scale[2]):te.current.scale.setScalar(1/I.scale));else{const fe=(l||10)/400,xe=Ee.clientWidth*fe,Ge=Ee.clientHeight*fe;te.current.scale.set(xe,Ge,1)}ae.current=!0}}}else{const Ee=X.children[0];if(Ee!=null&&Ee.clientWidth&&Ee!=null&&Ee.clientHeight){const he=1/J.factor,fe=Ee.clientWidth*he,xe=Ee.clientHeight*he;te.current.scale.set(fe,xe,1),ae.current=!0}te.current.lookAt(be.camera.position)}});const ze=q.useMemo(()=>({vertexShader:h?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[h]);return q.createElement("group",Ec({},I,{ref:le}),d&&!Q&&q.createElement("mesh",{castShadow:m,receiveShadow:y,ref:te},_||q.createElement("planeGeometry",null),g||q.createElement("shaderMaterial",{side:Ds,vertexShader:ze.vertexShader,fragmentShader:ze.fragmentShader})))});let Jf=0;const Qq=DN(n=>(Gu.onStart=(e,t,r)=>{n({active:!0,item:e,loaded:t,total:r,progress:(t-Jf)/(r-Jf)*100})},Gu.onLoad=()=>{n({active:!1})},Gu.onError=e=>n(t=>({errors:[...t.errors,e]})),Gu.onProgress=(e,t,r)=>{t===r&&(Jf=r),n({active:!0,item:e,loaded:t,total:r,progress:(t-Jf)/(r-Jf)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));function Yq(n){return function(e){n.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}function lp(n){return lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lp(n)}function Zq(n,e){if(lp(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(lp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function eQ(n){var e=Zq(n,"string");return lp(e)==="symbol"?e:String(e)}function gt(n,e,t){return e=eQ(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var ls=Uint8Array,ka=Uint16Array,cM=Uint32Array,eF=new ls([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),tF=new ls([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),tQ=new ls([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),nF=function(n,e){for(var t=new ka(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new cM(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return[t,i]},rF=nF(eF,2),iF=rF[0],nQ=rF[1];iF[28]=258,nQ[258]=28;var rQ=nF(tF,0),iQ=rQ[0],uM=new ka(32768);for(var dn=0;dn<32768;++dn){var xa=(dn&43690)>>>1|(dn&21845)<<1;xa=(xa&52428)>>>2|(xa&13107)<<2,xa=(xa&61680)>>>4|(xa&3855)<<4,uM[dn]=((xa&65280)>>>8|(xa&255)<<8)>>>1}var Ad=function(n,e,t){for(var r=n.length,i=0,s=new ka(e);i<r;++i)++s[n[i]-1];var o=new ka(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(t){a=new ka(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var c=i<<4|n[i],h=e-n[i],d=o[n[i]-1]++<<h,p=d|(1<<h)-1;d<=p;++d)a[uM[d]>>>l]=c}else for(a=new ka(r),i=0;i<r;++i)n[i]&&(a[i]=uM[o[n[i]-1]++]>>>15-n[i]);return a},Qp=new ls(288);for(var dn=0;dn<144;++dn)Qp[dn]=8;for(var dn=144;dn<256;++dn)Qp[dn]=9;for(var dn=256;dn<280;++dn)Qp[dn]=7;for(var dn=280;dn<288;++dn)Qp[dn]=8;var sF=new ls(32);for(var dn=0;dn<32;++dn)sF[dn]=5;var sQ=Ad(Qp,9,1),oQ=Ad(sF,5,1),Cw=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Cs=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},bw=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},aQ=function(n){return(n/8|0)+(n&7&&1)},lQ=function(n,e,t){(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof ka?ka:n instanceof cM?cM:ls)(t-e);return r.set(n.subarray(e,t)),r},cQ=function(n,e,t){var r=n.length;if(!r||t&&!t.l&&r<5)return e||new ls(0);var i=!e||t,s=!t||t.i;t||(t={}),e||(e=new ls(r*3));var o=function(we){var Ae=e.length;if(we>Ae){var Oe=new ls(Math.max(Ae*2,we));Oe.set(e),e=Oe}},a=t.f||0,l=t.p||0,c=t.b||0,h=t.l,d=t.d,p=t.m,m=t.n,y=r*8;do{if(!h){t.f=a=Cs(n,l,1);var g=Cs(n,l+1,3);if(l+=3,g)if(g==1)h=sQ,d=oQ,p=9,m=5;else if(g==2){var S=Cs(n,l,31)+257,M=Cs(n,l+10,15)+4,T=S+Cs(n,l+5,31)+1;l+=14;for(var I=new ls(T),L=new ls(19),b=0;b<M;++b)L[tQ[b]]=Cs(n,l+b*3,7);l+=M*3;for(var R=Cw(L),D=(1<<R)-1,G=Ad(L,R,1),b=0;b<T;){var V=G[Cs(n,l,D)];l+=V&15;var _=V>>>4;if(_<16)I[b++]=_;else{var F=0,J=0;for(_==16?(J=3+Cs(n,l,3),l+=2,F=I[b-1]):_==17?(J=3+Cs(n,l,7),l+=3):_==18&&(J=11+Cs(n,l,127),l+=7);J--;)I[b++]=F}}var X=I.subarray(0,S),ne=I.subarray(S);p=Cw(X),m=Cw(ne),h=Ad(X,p,1),d=Ad(ne,m,1)}else throw"invalid block type";else{var _=aQ(l)+4,x=n[_-4]|n[_-3]<<8,w=_+x;if(w>r){if(s)throw"unexpected EOF";break}i&&o(c+x),e.set(n.subarray(_,w),c),t.b=c+=x,t.p=l=w*8;continue}if(l>y){if(s)throw"unexpected EOF";break}}i&&o(c+131072);for(var le=(1<<p)-1,U=(1<<m)-1,W=l;;W=l){var F=h[bw(n,l)&le],B=F>>>4;if(l+=F&15,l>y){if(s)throw"unexpected EOF";break}if(!F)throw"invalid length/literal";if(B<256)e[c++]=B;else if(B==256){W=l,h=null;break}else{var ie=B-254;if(B>264){var b=B-257,z=eF[b];ie=Cs(n,l,(1<<z)-1)+iF[b],l+=z}var te=d[bw(n,l)&U],ae=te>>>4;if(!te)throw"invalid distance";l+=te&15;var ne=iQ[ae];if(ae>3){var z=tF[ae];ne+=bw(n,l)&(1<<z)-1,l+=z}if(l>y){if(s)throw"unexpected EOF";break}i&&o(c+131072);for(var Q=c+ie;c<Q;c+=4)e[c]=e[c-ne],e[c+1]=e[c+1-ne],e[c+2]=e[c+2-ne],e[c+3]=e[c+3-ne];c=Q}}t.l=h,t.p=W,t.b=c,h&&(a=1,t.m=p,t.d=d,t.n=m)}while(!a);return c==e.length?e:lQ(e,0,c)},uQ=new ls(0),hQ=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function fQ(n,e){return cQ((hQ(n),n.subarray(2,-4)),e)}var dQ=typeof TextDecoder<"u"&&new TextDecoder,pQ=0;try{dQ.decode(uQ,{stream:!0}),pQ=1}catch{}const fL=(n,e)=>(n%e+e)%e;let mQ=class extends go{constructor(e,t){super(),gt(this,"object",void 0),gt(this,"domElement",void 0),gt(this,"enabled",!0),gt(this,"target",new N),gt(this,"minDistance",0),gt(this,"maxDistance",1/0),gt(this,"minZoom",0),gt(this,"maxZoom",1/0),gt(this,"minPolarAngle",0),gt(this,"maxPolarAngle",Math.PI),gt(this,"minAzimuthAngle",-1/0),gt(this,"maxAzimuthAngle",1/0),gt(this,"enableDamping",!1),gt(this,"dampingFactor",.05),gt(this,"enableZoom",!0),gt(this,"zoomSpeed",1),gt(this,"enableRotate",!0),gt(this,"rotateSpeed",1),gt(this,"enablePan",!0),gt(this,"panSpeed",1),gt(this,"screenSpacePanning",!0),gt(this,"keyPanSpeed",7),gt(this,"autoRotate",!1),gt(this,"autoRotateSpeed",2),gt(this,"reverseOrbit",!1),gt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),gt(this,"mouseButtons",{LEFT:kl.ROTATE,MIDDLE:kl.DOLLY,RIGHT:kl.PAN}),gt(this,"touches",{ONE:Nl.ROTATE,TWO:Nl.DOLLY_PAN}),gt(this,"target0",void 0),gt(this,"position0",void 0),gt(this,"zoom0",void 0),gt(this,"_domElementKeyEvents",null),gt(this,"getPolarAngle",void 0),gt(this,"getAzimuthalAngle",void 0),gt(this,"setPolarAngle",void 0),gt(this,"setAzimuthalAngle",void 0),gt(this,"getDistance",void 0),gt(this,"listenToKeyEvents",void 0),gt(this,"saveState",void 0),gt(this,"reset",void 0),gt(this,"update",void 0),gt(this,"connect",void 0),gt(this,"dispose",void 0),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof rn?this.object.zoom:1,this.getPolarAngle=()=>h.phi,this.getAzimuthalAngle=()=>h.theta,this.setPolarAngle=K=>{let ge=fL(K,2*Math.PI),Me=h.phi;Me<0&&(Me+=2*Math.PI),ge<0&&(ge+=2*Math.PI);let Be=Math.abs(ge-Me);2*Math.PI-Be<Be&&(ge<Me?ge+=2*Math.PI:Me+=2*Math.PI),d.phi=ge-Me,r.update()},this.setAzimuthalAngle=K=>{let ge=fL(K,2*Math.PI),Me=h.theta;Me<0&&(Me+=2*Math.PI),ge<0&&(ge+=2*Math.PI);let Be=Math.abs(ge-Me);2*Math.PI-Be<Be&&(ge<Me?ge+=2*Math.PI:Me+=2*Math.PI),d.theta=ge-Me,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=K=>{K.addEventListener("keydown",ce),this._domElementKeyEvents=K},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object instanceof rn?r.object.zoom:1},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object instanceof rn&&(r.object.zoom=r.zoom0,r.object.updateProjectionMatrix()),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const K=new N,ge=new $n().setFromUnitVectors(e.up,new N(0,1,0)),Me=ge.clone().invert(),Be=new N,lt=new $n,Pt=2*Math.PI;return function(){const Y=r.object.position;K.copy(Y).sub(r.target),K.applyQuaternion(ge),h.setFromVector3(K),r.autoRotate&&l===a.NONE&&V(D()),r.enableDamping?(h.theta+=d.theta*r.dampingFactor,h.phi+=d.phi*r.dampingFactor):(h.theta+=d.theta,h.phi+=d.phi);let de=r.minAzimuthAngle,Se=r.maxAzimuthAngle;return isFinite(de)&&isFinite(Se)&&(de<-Math.PI?de+=Pt:de>Math.PI&&(de-=Pt),Se<-Math.PI?Se+=Pt:Se>Math.PI&&(Se-=Pt),de<=Se?h.theta=Math.max(de,Math.min(Se,h.theta)):h.theta=h.theta>(de+Se)/2?Math.max(de,h.theta):Math.min(Se,h.theta)),h.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,h.phi)),h.makeSafe(),h.radius*=p,h.radius=Math.max(r.minDistance,Math.min(r.maxDistance,h.radius)),r.enableDamping===!0?r.target.addScaledVector(m,r.dampingFactor):r.target.add(m),K.setFromSpherical(h),K.applyQuaternion(Me),Y.copy(r.target).add(K),r.object.lookAt(r.target),r.enableDamping===!0?(d.theta*=1-r.dampingFactor,d.phi*=1-r.dampingFactor,m.multiplyScalar(1-r.dampingFactor)):(d.set(0,0,0),m.set(0,0,0)),p=1,y||Be.distanceToSquared(r.object.position)>c||8*(1-lt.dot(r.object.quaternion))>c?(r.dispatchEvent(i),Be.copy(r.object.position),lt.copy(r.object.quaternion),y=!1,!0):!1}})(),this.connect=K=>{K===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),r.domElement=K,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",Ne),r.domElement.addEventListener("pointerdown",Fe),r.domElement.addEventListener("pointercancel",ft),r.domElement.addEventListener("wheel",O)},this.dispose=()=>{var K,ge,Me,Be,lt,Pt;(K=r.domElement)===null||K===void 0||K.removeEventListener("contextmenu",Ne),(ge=r.domElement)===null||ge===void 0||ge.removeEventListener("pointerdown",Fe),(Me=r.domElement)===null||Me===void 0||Me.removeEventListener("pointercancel",ft),(Be=r.domElement)===null||Be===void 0||Be.removeEventListener("wheel",O),(lt=r.domElement)===null||lt===void 0||lt.ownerDocument.removeEventListener("pointermove",Je),(Pt=r.domElement)===null||Pt===void 0||Pt.ownerDocument.removeEventListener("pointerup",Qe),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",ce)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,h=new tM,d=new tM;let p=1;const m=new N;let y=!1;const g=new ve,_=new ve,x=new ve,w=new ve,S=new ve,M=new ve,T=new ve,I=new ve,L=new ve,b=[],R={};function D(){return 2*Math.PI/60/60*r.autoRotateSpeed}function G(){return Math.pow(.95,r.zoomSpeed)}function V(K){r.reverseOrbit?d.theta+=K:d.theta-=K}function F(K){r.reverseOrbit?d.phi+=K:d.phi-=K}const J=(()=>{const K=new N;return function(Me,Be){K.setFromMatrixColumn(Be,0),K.multiplyScalar(-Me),m.add(K)}})(),X=(()=>{const K=new N;return function(Me,Be){r.screenSpacePanning===!0?K.setFromMatrixColumn(Be,1):(K.setFromMatrixColumn(Be,0),K.crossVectors(r.object.up,K)),K.multiplyScalar(Me),m.add(K)}})(),ne=(()=>{const K=new N;return function(Me,Be){const lt=r.domElement;if(lt&&r.object instanceof rn&&r.object.isPerspectiveCamera){const Pt=r.object.position;K.copy(Pt).sub(r.target);let un=K.length();un*=Math.tan(r.object.fov/2*Math.PI/180),J(2*Me*un/lt.clientHeight,r.object.matrix),X(2*Be*un/lt.clientHeight,r.object.matrix)}else lt&&r.object instanceof fs&&r.object.isOrthographicCamera?(J(Me*(r.object.right-r.object.left)/r.object.zoom/lt.clientWidth,r.object.matrix),X(Be*(r.object.top-r.object.bottom)/r.object.zoom/lt.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function le(K){r.object instanceof rn&&r.object.isPerspectiveCamera?p/=K:r.object instanceof fs&&r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*K)),r.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function U(K){r.object instanceof rn&&r.object.isPerspectiveCamera?p*=K:r.object instanceof fs&&r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/K)),r.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function W(K){g.set(K.clientX,K.clientY)}function B(K){T.set(K.clientX,K.clientY)}function ie(K){w.set(K.clientX,K.clientY)}function z(K){_.set(K.clientX,K.clientY),x.subVectors(_,g).multiplyScalar(r.rotateSpeed);const ge=r.domElement;ge&&(V(2*Math.PI*x.x/ge.clientHeight),F(2*Math.PI*x.y/ge.clientHeight)),g.copy(_),r.update()}function te(K){I.set(K.clientX,K.clientY),L.subVectors(I,T),L.y>0?le(G()):L.y<0&&U(G()),T.copy(I),r.update()}function ae(K){S.set(K.clientX,K.clientY),M.subVectors(S,w).multiplyScalar(r.panSpeed),ne(M.x,M.y),w.copy(S),r.update()}function Q(K){K.deltaY<0?U(G()):K.deltaY>0&&le(G()),r.update()}function we(K){let ge=!1;switch(K.code){case r.keys.UP:ne(0,r.keyPanSpeed),ge=!0;break;case r.keys.BOTTOM:ne(0,-r.keyPanSpeed),ge=!0;break;case r.keys.LEFT:ne(r.keyPanSpeed,0),ge=!0;break;case r.keys.RIGHT:ne(-r.keyPanSpeed,0),ge=!0;break}ge&&(K.preventDefault(),r.update())}function Ae(){if(b.length==1)g.set(b[0].pageX,b[0].pageY);else{const K=.5*(b[0].pageX+b[1].pageX),ge=.5*(b[0].pageY+b[1].pageY);g.set(K,ge)}}function Oe(){if(b.length==1)w.set(b[0].pageX,b[0].pageY);else{const K=.5*(b[0].pageX+b[1].pageX),ge=.5*(b[0].pageY+b[1].pageY);w.set(K,ge)}}function ze(){const K=b[0].pageX-b[1].pageX,ge=b[0].pageY-b[1].pageY,Me=Math.sqrt(K*K+ge*ge);T.set(0,Me)}function be(){r.enableZoom&&ze(),r.enablePan&&Oe()}function Ee(){r.enableZoom&&ze(),r.enableRotate&&Ae()}function he(K){if(b.length==1)_.set(K.pageX,K.pageY);else{const Me=st(K),Be=.5*(K.pageX+Me.x),lt=.5*(K.pageY+Me.y);_.set(Be,lt)}x.subVectors(_,g).multiplyScalar(r.rotateSpeed);const ge=r.domElement;ge&&(V(2*Math.PI*x.x/ge.clientHeight),F(2*Math.PI*x.y/ge.clientHeight)),g.copy(_)}function fe(K){if(b.length==1)S.set(K.pageX,K.pageY);else{const ge=st(K),Me=.5*(K.pageX+ge.x),Be=.5*(K.pageY+ge.y);S.set(Me,Be)}M.subVectors(S,w).multiplyScalar(r.panSpeed),ne(M.x,M.y),w.copy(S)}function xe(K){const ge=st(K),Me=K.pageX-ge.x,Be=K.pageY-ge.y,lt=Math.sqrt(Me*Me+Be*Be);I.set(0,lt),L.set(0,Math.pow(I.y/T.y,r.zoomSpeed)),le(L.y),T.copy(I)}function Ge(K){r.enableZoom&&xe(K),r.enablePan&&fe(K)}function Te(K){r.enableZoom&&xe(K),r.enableRotate&&he(K)}function Fe(K){if(r.enabled!==!1){if(b.length===0){var ge,Me;(ge=r.domElement)===null||ge===void 0||ge.ownerDocument.addEventListener("pointermove",Je),(Me=r.domElement)===null||Me===void 0||Me.ownerDocument.addEventListener("pointerup",Qe)}rt(K),K.pointerType==="touch"?Pe(K):wt(K)}}function Je(K){r.enabled!==!1&&(K.pointerType==="touch"?Re(K):j(K))}function Qe(K){if(je(K),b.length===0){var ge,Me,Be;(ge=r.domElement)===null||ge===void 0||ge.releasePointerCapture(K.pointerId),(Me=r.domElement)===null||Me===void 0||Me.ownerDocument.removeEventListener("pointermove",Je),(Be=r.domElement)===null||Be===void 0||Be.ownerDocument.removeEventListener("pointerup",Qe)}r.dispatchEvent(o),l=a.NONE}function ft(K){je(K)}function wt(K){let ge;switch(K.button){case 0:ge=r.mouseButtons.LEFT;break;case 1:ge=r.mouseButtons.MIDDLE;break;case 2:ge=r.mouseButtons.RIGHT;break;default:ge=-1}switch(ge){case kl.DOLLY:if(r.enableZoom===!1)return;B(K),l=a.DOLLY;break;case kl.ROTATE:if(K.ctrlKey||K.metaKey||K.shiftKey){if(r.enablePan===!1)return;ie(K),l=a.PAN}else{if(r.enableRotate===!1)return;W(K),l=a.ROTATE}break;case kl.PAN:if(K.ctrlKey||K.metaKey||K.shiftKey){if(r.enableRotate===!1)return;W(K),l=a.ROTATE}else{if(r.enablePan===!1)return;ie(K),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function j(K){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;z(K);break;case a.DOLLY:if(r.enableZoom===!1)return;te(K);break;case a.PAN:if(r.enablePan===!1)return;ae(K);break}}function O(K){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(K.preventDefault(),r.dispatchEvent(s),Q(K),r.dispatchEvent(o))}function ce(K){r.enabled===!1||r.enablePan===!1||we(K)}function Pe(K){switch(_e(K),b.length){case 1:switch(r.touches.ONE){case Nl.ROTATE:if(r.enableRotate===!1)return;Ae(),l=a.TOUCH_ROTATE;break;case Nl.PAN:if(r.enablePan===!1)return;Oe(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case Nl.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;be(),l=a.TOUCH_DOLLY_PAN;break;case Nl.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Ee(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function Re(K){switch(_e(K),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;he(K),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;fe(K),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Ge(K),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Te(K),r.update();break;default:l=a.NONE}}function Ne(K){r.enabled!==!1&&K.preventDefault()}function rt(K){b.push(K)}function je(K){delete R[K.pointerId];for(let ge=0;ge<b.length;ge++)if(b[ge].pointerId==K.pointerId){b.splice(ge,1);return}}function _e(K){let ge=R[K.pointerId];ge===void 0&&(ge=new ve,R[K.pointerId]=ge),ge.set(K.pageX,K.pageY)}function st(K){const ge=K.pointerId===b[0].pointerId?b[1]:b[0];return R[ge.pointerId]}t!==void 0&&this.connect(t),this.update()}};class qC extends Qr{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new xQ(t)}),this.register(function(t){return new bQ(t)}),this.register(function(t){return new TQ(t)}),this.register(function(t){return new SQ(t)}),this.register(function(t){return new AQ(t)}),this.register(function(t){return new MQ(t)}),this.register(function(t){return new EQ(t)}),this.register(function(t){return new _Q(t)}),this.register(function(t){return new CQ(t)}),this.register(function(t){return new wQ(t)}),this.register(function(t){return new yQ(t)}),this.register(function(t){return new IQ(t)})}load(e,t,r,i){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=zi.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){i?i(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Mi(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(h){t(h),s.manager.itemEnd(e)},a)}catch(h){a(h)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let s;const o={},a={};if(typeof e=="string")s=e;else if(zi.decodeText(new Uint8Array(e,0,4))===oF){try{o[Ot.KHR_BINARY_GLTF]=new PQ(e)}catch(d){i&&i(d);return}s=o[Ot.KHR_BINARY_GLTF].content}else s=zi.decodeText(new Uint8Array(e));const l=JSON.parse(s);if(l.asset===void 0||l.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new VQ(l,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let h=0;h<this.pluginCallbacks.length;h++){const d=this.pluginCallbacks[h](c);a[d.name]=d,o[d.name]=!0}if(l.extensionsUsed)for(let h=0;h<l.extensionsUsed.length;++h){const d=l.extensionsUsed[h],p=l.extensionsRequired||[];switch(d){case Ot.KHR_MATERIALS_UNLIT:o[d]=new vQ;break;case Ot.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[d]=new DQ;break;case Ot.KHR_DRACO_MESH_COMPRESSION:o[d]=new RQ(l,this.dracoLoader);break;case Ot.KHR_TEXTURE_TRANSFORM:o[d]=new LQ;break;case Ot.KHR_MESH_QUANTIZATION:o[d]=new BQ;break;default:p.indexOf(d)>=0&&a[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(r,i)}parseAsync(e,t){const r=this;return new Promise(function(i,s){r.parse(e,t,i,s)})}}function gQ(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Ot={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class yQ{constructor(e){this.parser=e,this.name=Ot.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){const s=t[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let i=t.cache.get(r);if(i)return i;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const h=new De(16777215);l.color!==void 0&&h.fromArray(l.color);const d=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new Z0(h),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new op(h),c.distance=d;break;case"spot":c=new Y0(h),c.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),i=Promise.resolve(c),t.cache.add(r,i),i}createNodeAttachment(e){const t=this,r=this.parser,s=r.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return r._getNodeRef(t.cache,a,l)})}}class vQ{constructor(){this.name=Ot.KHR_MATERIALS_UNLIT}getMaterialType(){return Ni}extendParams(e,t,r){const i=[];e.color=new De(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,bt))}return Promise.all(i)}}class _Q{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class xQ{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ia}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new ve(a,a)}return Promise.all(s)}}class wQ{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ia}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class SQ{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ia}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new De(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];return o.sheenColorFactor!==void 0&&t.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(t,"sheenColorMap",o.sheenColorTexture,bt)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class AQ{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ia}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class MQ{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ia}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new De(a[0],a[1],a[2]),Promise.all(s)}}class EQ{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ia}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class CQ{constructor(e){this.parser=e,this.name=Ot.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ia}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new De(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(r.assignTexture(t,"specularColorMap",o.specularColorTexture,bt)),Promise.all(s)}}class bQ{constructor(e){this.parser=e,this.name=Ot.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class TQ{constructor(e){this.parser=e,this.name=Ot.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class IQ{constructor(e){this.name=Ot.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=i.byteOffset||0,c=i.byteLength||0,h=i.count,d=i.byteStride,p=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(h,d,p,i.mode,i.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(h*d);return o.decodeGltfBuffer(new Uint8Array(m),h,d,p,i.mode,i.filter),m})})}else return null}}const oF="glTF",Kf=12,dL={JSON:1313821514,BIN:5130562};class PQ{constructor(e){this.name=Ot.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Kf);if(this.header={magic:zi.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==oF)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-Kf,i=new DataView(e,Kf);let s=0;for(;s<r;){const o=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===dL.JSON){const l=new Uint8Array(e,Kf+s,o);this.content=zi.decodeText(l)}else if(a===dL.BIN){const l=Kf+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class RQ{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Ot.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const h in o){const d=fM[h]||h.toLowerCase();a[d]=o[h]}for(const h in e.attributes){const d=fM[h]||h.toLowerCase();if(o[h]!==void 0){const p=r.accessors[e.attributes[h]],m=cp[p.componentType];c[d]=m.name,l[d]=p.normalized===!0}}return t.getDependency("bufferView",s).then(function(h){return new Promise(function(d){i.decodeDracoFile(h,function(p){for(const m in p.attributes){const y=p.attributes[m],g=l[m];g!==void 0&&(y.normalized=g)}d(p)},a,c)})})}}class LQ{constructor(){this.name=Ot.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class hM extends Kh{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),r=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),i=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),a={specular:{value:new De().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(l){for(const c in a)l.uniforms[c]=a[c];l.fragmentShader=l.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",r).replace("#include <roughnessmap_fragment>",i).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(l){a.specular.value=l}},specularMap:{get:function(){return a.specularMap.value},set:function(l){a.specularMap.value=l,l?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(l){a.glossiness.value=l}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(l){a.glossinessMap.value=l,l?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class DQ{constructor(){this.name=Ot.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return hM}extendParams(e,t,r){const i=t.extensions[this.name];e.color=new De(1,1,1),e.opacity=1;const s=[];if(Array.isArray(i.diffuseFactor)){const o=i.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(i.diffuseTexture!==void 0&&s.push(r.assignTexture(e,"map",i.diffuseTexture,bt)),e.emissive=new De(0,0,0),e.glossiness=i.glossinessFactor!==void 0?i.glossinessFactor:1,e.specular=new De(1,1,1),Array.isArray(i.specularFactor)&&e.specular.fromArray(i.specularFactor),i.specularGlossinessTexture!==void 0){const o=i.specularGlossinessTexture;s.push(r.assignTexture(e,"glossinessMap",o)),s.push(r.assignTexture(e,"specularMap",o,bt))}return Promise.all(s)}createMaterial(e){const t=new hM(e);return t.fog=!0,t.color=e.color,t.map=e.map===void 0?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=e.aoMap===void 0?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=e.emissiveIntensity===void 0?1:e.emissiveIntensity,t.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,t.bumpMap=e.bumpMap===void 0?null:e.bumpMap,t.bumpScale=1,t.normalMap=e.normalMap===void 0?null:e.normalMap,t.normalMapType=na,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=e.specularMap===void 0?null:e.specularMap,t.specular=e.specular,t.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=e.envMap===void 0?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}class BQ{constructor(){this.name=Ot.KHR_MESH_QUANTIZATION}}class aF extends Xh{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)t[o]=r[s+o];return t}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,h=i-t,d=(r-t)/h,p=d*d,m=p*d,y=e*c,g=y-c,_=-2*m+3*p,x=m-p,w=1-_,S=x-p+d;for(let M=0;M!==a;M++){const T=o[g+M+a],I=o[g+M+l]*h,L=o[y+M+a],b=o[y+M]*h;s[M]=w*T+S*I+_*L+x*b}return s}}const OQ=new $n;class kQ extends aF{interpolate_(e,t,r,i){const s=super.interpolate_(e,t,r,i);return OQ.fromArray(s).normalize().toArray(s),s}}const Lo={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},cp={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},pL={9728:Fn,9729:Cn,9984:qd,9985:F0,9986:Qu,9987:ho},mL={33071:or,33648:_h,10497:uo},gL={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},fM={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},wa={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},NQ={CUBICSPLINE:void 0,LINEAR:_c,STEP:wh},Tw={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function FQ(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Kh({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:co})),n.DefaultMaterial}function Xf(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function Ul(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function UQ(n,e,t){let r=!1,i=!1,s=!1;for(let c=0,h=e.length;c<h;c++){const d=e[c];if(d.POSITION!==void 0&&(r=!0),d.NORMAL!==void 0&&(i=!0),d.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,h=e.length;c<h;c++){const d=e[c];if(r){const p=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):n.attributes.position;o.push(p)}if(i){const p=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):n.attributes.normal;a.push(p)}if(s){const p=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const h=c[0],d=c[1],p=c[2];return r&&(n.morphAttributes.position=h),i&&(n.morphAttributes.normal=d),s&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function zQ(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function GQ(n){const e=n.extensions&&n.extensions[Ot.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+yL(e.attributes):t=n.indices+":"+yL(n.attributes)+":"+n.mode,t}function yL(n){let e="";const t=Object.keys(n).sort();for(let r=0,i=t.length;r<i;r++)e+=t[r]+":"+n[t[r]]+";";return e}function dM(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function HQ(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}class VQ{constructor(e={},t={}){var r,i;this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new gQ,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const s=typeof navigator<"u"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,o=typeof navigator<"u"&&((r=navigator.userAgent)===null||r===void 0?void 0:r.indexOf("Firefox"))>-1,a=typeof navigator<"u"&&o?(i=navigator.userAgent)===null||i===void 0?void 0:i.match(/Firefox\/([0-9]+)\./)[1]:-1;typeof createImageBitmap>"u"||s||o&&a<98?this.textureLoader=new qh(this.options.manager):this.textureLoader=new TN(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Mi(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};Xf(s,a,i),Ul(a,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const i=r.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,h]of o.children.entries())s(h,a.children[c])};return s(r,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const i=e(t[r]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&r.push(s)}return r}getDependency(e,t){const r=e+":"+t;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this.loadNode(t);break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Ot.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load(zi.resolveURL(t.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const i=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const t=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0)return Promise.resolve(null);const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=gL[i.type],c=cp[i.componentType],h=c.BYTES_PER_ELEMENT,d=h*l,p=i.byteOffset||0,m=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,y=i.normalized===!0;let g,_;if(m&&m!==d){const x=Math.floor(p/m),w="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+x+":"+i.count;let S=t.cache.get(w);S||(g=new c(a,x*m,i.count*m/h),S=new kp(g,m/h),t.cache.add(w,S)),_=new nl(S,l,p%m/h,y)}else a===null?g=new c(i.count*l):g=new c(a,p,i.count*l),_=new Xt(g,l,y);if(i.sparse!==void 0){const x=gL.SCALAR,w=cp[i.sparse.indices.componentType],S=i.sparse.indices.byteOffset||0,M=i.sparse.values.byteOffset||0,T=new w(o[1],S,i.sparse.count*x),I=new c(o[2],M,i.sparse.count*l);a!==null&&(_=new Xt(_.array.slice(),_.itemSize,_.normalized));for(let L=0,b=T.length;L<b;L++){const R=T[L];if(_.setX(R,I[L*l]),l>=2&&_.setY(R,I[L*l+1]),l>=3&&_.setZ(R,I[L*l+2]),l>=4&&_.setW(R,I[L*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return _})}loadTexture(e){const t=this.json,r=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=r.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,r){const i=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,r).then(function(h){h.flipY=!1,o.name&&(h.name=o.name);const p=(s.samplers||{})[o.sampler]||{};return h.magFilter=pL[p.magFilter]||Cn,h.minFilter=pL[p.minFilter]||ho,h.wrapS=mL[p.wrapS]||uo,h.wrapT=mL[p.wrapT]||uo,i.associations.set(h,{textures:e}),h}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const o=i.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=r.getDependency("bufferView",o.bufferView).then(function(d){c=!0;const p=new Blob([d],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(l).then(function(d){return new Promise(function(p,m){let y=p;t.isImageBitmapLoader===!0&&(y=function(g){const _=new cn(g);_.needsUpdate=!0,p(_)}),t.load(zi.resolveURL(d,s.path),y,void 0,m)})}).then(function(d){return c===!0&&a.revokeObjectURL(l),d.userData.mimeType=o.mimeType||HQ(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=h,h}assignTexture(e,t,r,i){const s=this;return this.getDependency("texture",r.index).then(function(o){if(r.texCoord!==void 0&&r.texCoord!=0&&!(t==="aoMap"&&r.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+r.texCoord+" for texture "+t+" not yet supported."),s.extensions[Ot.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[Ot.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Ot.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return i!==void 0&&(o.encoding=i),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new K0,nr.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new Rr,nr.prototype.copy.call(l,r),l.color.copy(r.color),this.cache.add(a,l)),r=l}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";r.isGLTFSpecularGlossinessMaterial&&(a+="specular-glossiness:"),i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}r.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=r}getMaterialType(){return Kh}loadMaterial(e){const t=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[Ot.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const d=i[Ot.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=d.getMaterialType(),c.push(d.extendParams(a,s,t))}else if(l[Ot.KHR_MATERIALS_UNLIT]){const d=i[Ot.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),c.push(d.extendParams(a,s,t))}else{const d=s.pbrMetallicRoughness||{};if(a.color=new De(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const p=d.baseColorFactor;a.color.fromArray(p),a.opacity=p[3]}d.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",d.baseColorTexture,bt)),a.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,a.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Ds);const h=s.alphaMode||Tw.OPAQUE;if(h===Tw.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,h===Tw.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Ni&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new ve(1,1),s.normalTexture.scale!==void 0)){const d=s.normalTexture.scale;a.normalScale.set(d,d)}return s.occlusionTexture!==void 0&&o!==Ni&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Ni&&(a.emissive=new De().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==Ni&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,bt)),Promise.all(c).then(function(){let d;return o===hM?d=i[Ot.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):d=new o(a),s.name&&(d.name=s.name),Ul(d,s),t.associations.set(d,{materials:e}),s.extensions&&Xf(i,d,s),d})}createUniqueName(e){const t=It.sanitizeNodeName(e||"");let r=t;for(let i=1;this.nodeNamesUsed[r];++i)r=t+"_"+i;return this.nodeNamesUsed[r]=!0,r}loadGeometries(e){const t=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[Ot.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return vL(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],h=GQ(c),d=i[h];if(d)o.push(d.promise);else{let p;c.extensions&&c.extensions[Ot.KHR_DRACO_MESH_COMPRESSION]?p=s(c):p=vL(new dt,c,t),i[h]={primitive:c,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const h=o[l].material===void 0?FQ(this.cache):this.getDependency("material",o[l].material);a.push(h)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),h=l[l.length-1],d=[];for(let m=0,y=h.length;m<y;m++){const g=h[m],_=o[m];let x;const w=c[m];if(_.mode===Lo.TRIANGLES||_.mode===Lo.TRIANGLE_STRIP||_.mode===Lo.TRIANGLE_FAN||_.mode===void 0)x=s.isSkinnedMesh===!0?new J0(g,w):new tr(g,w),x.isSkinnedMesh===!0&&!x.geometry.attributes.skinWeight.normalized&&x.normalizeSkinWeights(),_.mode===Lo.TRIANGLE_STRIP?x.geometry=_L(x.geometry,Dk):_.mode===Lo.TRIANGLE_FAN&&(x.geometry=_L(x.geometry,hC));else if(_.mode===Lo.LINES)x=new Gs(g,w);else if(_.mode===Lo.LINE_STRIP)x=new po(g,w);else if(_.mode===Lo.LINE_LOOP)x=new MC(g,w);else if(_.mode===Lo.POINTS)x=new EC(g,w);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+_.mode);Object.keys(x.geometry.morphAttributes).length>0&&zQ(x,s),x.name=t.createUniqueName(s.name||"mesh_"+e),Ul(x,s),_.extensions&&Xf(i,x,_),t.assignFinalMaterial(x),d.push(x)}for(let m=0,y=d.length;m<y;m++)t.associations.set(d[m],{meshes:e,primitives:m});if(d.length===1)return d[0];const p=new Bs;t.associations.set(p,{meshes:e});for(let m=0,y=d.length;m<y;m++)p.add(d[m]);return p})}loadCamera(e){let t;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new rn(Oi.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(t=new fs(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),Ul(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r={joints:t.joints};return t.inverseBindMatrices===void 0?Promise.resolve(r):this.getDependency("accessor",t.inverseBindMatrices).then(function(i){return r.inverseBindMatrices=i,r})}loadAnimation(e){const r=this.json.animations[e],i=[],s=[],o=[],a=[],l=[];for(let c=0,h=r.channels.length;c<h;c++){const d=r.channels[c],p=r.samplers[d.sampler],m=d.target,y=m.node,g=r.parameters!==void 0?r.parameters[p.input]:p.input,_=r.parameters!==void 0?r.parameters[p.output]:p.output;i.push(this.getDependency("node",y)),s.push(this.getDependency("accessor",g)),o.push(this.getDependency("accessor",_)),a.push(p),l.push(m)}return Promise.all([Promise.all(i),Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const h=c[0],d=c[1],p=c[2],m=c[3],y=c[4],g=[];for(let x=0,w=h.length;x<w;x++){const S=h[x],M=d[x],T=p[x],I=m[x],L=y[x];if(S===void 0)continue;S.updateMatrix();let b;switch(wa[L.path]){case wa.weights:b=wc;break;case wa.rotation:b=qo;break;case wa.position:case wa.scale:default:b=Sc;break}const R=S.name?S.name:S.uuid,D=I.interpolation!==void 0?NQ[I.interpolation]:_c,G=[];wa[L.path]===wa.weights?S.traverse(function(F){F.morphTargetInfluences&&G.push(F.name?F.name:F.uuid)}):G.push(R);let V=T.array;if(T.normalized){const F=dM(V.constructor),J=new Float32Array(V.length);for(let X=0,ne=V.length;X<ne;X++)J[X]=V[X]*F;V=J}for(let F=0,J=G.length;F<J;F++){const X=new b(G[F]+"."+wa[L.path],M.array,V,D);I.interpolation==="CUBICSPLINE"&&(X.createInterpolant=function(le){const U=this instanceof qo?kQ:aF;return new U(this.times,this.values,this.getValueSize()/3,le)},X.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),g.push(X)}}const _=r.name?r.name:"animation_"+e;return new Ac(_,void 0,g)})}createNodeMesh(e){const t=this.json,r=this,i=t.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=i.weights.length;l<c;l++)a.morphTargetInfluences[l]=i.weights[l]}),o})}loadNode(e){const t=this.json,r=this.extensions,i=this,s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"";return function(){const a=[],l=i._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(c){return i._getNodeRef(i.cameraCache,s.camera,c)})),i._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),Promise.all(a)}().then(function(a){let l;if(s.isBone===!0?l=new Mh:a.length>1?l=new Bs:a.length===1?l=a[0]:l=new kt,l!==a[0])for(let c=0,h=a.length;c<h;c++)l.add(a[c]);if(s.name&&(l.userData.name=s.name,l.name=o),Ul(l,s),s.extensions&&Xf(r,l,s),s.matrix!==void 0){const c=new Xe;c.fromArray(s.matrix),l.applyMatrix4(c)}else s.translation!==void 0&&l.position.fromArray(s.translation),s.rotation!==void 0&&l.quaternion.fromArray(s.rotation),s.scale!==void 0&&l.scale.fromArray(s.scale);return i.associations.has(l)||i.associations.set(l,{}),i.associations.get(l).nodes=e,l})}loadScene(e){const t=this.json,r=this.extensions,i=this.json.scenes[e],s=this,o=new Bs;i.name&&(o.name=s.createUniqueName(i.name)),Ul(o,i),i.extensions&&Xf(r,o,i);const a=i.nodes||[],l=[];for(let c=0,h=a.length;c<h;c++)l.push(lF(a[c],o,t,s));return Promise.all(l).then(function(){const c=h=>{const d=new Map;for(const[p,m]of s.associations)(p instanceof nr||p instanceof cn)&&d.set(p,m);return h.traverse(p=>{const m=s.associations.get(p);m!=null&&d.set(p,m)}),d};return s.associations=c(o),o})}}function lF(n,e,t,r){const i=t.nodes[n];return r.getDependency("node",n).then(function(s){if(i.skin===void 0)return s;let o;return r.getDependency("skin",i.skin).then(function(a){o=a;const l=[];for(let c=0,h=o.joints.length;c<h;c++)l.push(r.getDependency("node",o.joints[c]));return Promise.all(l)}).then(function(a){return s.traverse(function(l){if(!l.isMesh)return;const c=[],h=[];for(let d=0,p=a.length;d<p;d++){const m=a[d];if(m){c.push(m);const y=new Xe;o.inverseBindMatrices!==void 0&&y.fromArray(o.inverseBindMatrices.array,d*16),h.push(y)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[d])}l.bind(new Wh(c,h),l.matrixWorld)}),s})}).then(function(s){e.add(s);const o=[];if(i.children){const a=i.children;for(let l=0,c=a.length;l<c;l++){const h=a[l];o.push(lF(h,s,t,r))}}return Promise.all(o)})}function WQ(n,e,t){const r=e.attributes,i=new ul;if(r.POSITION!==void 0){const a=t.json.accessors[r.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(i.set(new N(l[0],l[1],l[2]),new N(c[0],c[1],c[2])),a.normalized){const h=dM(cp[a.componentType]);i.min.multiplyScalar(h),i.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new N,l=new N;for(let c=0,h=s.length;c<h;c++){const d=s[c];if(d.POSITION!==void 0){const p=t.json.accessors[d.POSITION],m=p.min,y=p.max;if(m!==void 0&&y!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(y[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(y[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(y[2]))),p.normalized){const g=dM(cp[p.componentType]);l.multiplyScalar(g)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}n.boundingBox=i;const o=new hl;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,n.boundingSphere=o}function vL(n,e,t){const r=e.attributes,i=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in r){const a=fM[o]||o.toLowerCase();a in n.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});i.push(o)}return Ul(n,e),WQ(n,e,t),Promise.all(i).then(function(){return e.targets!==void 0?UQ(n,e.targets,t):n})}function _L(n,e){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,i=[];if(e===hC)for(let o=1;o<=r;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==r&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(i),s}class jQ extends dt{constructor(e,t,r,i){super();const s=[],o=[],a=[],l=new N,c=new Xe;c.makeRotationFromEuler(r),c.setPosition(t);const h=new Xe;h.copy(c).invert(),d(),this.setAttribute("position",new $e(s,3)),this.setAttribute("normal",new $e(o,3)),this.setAttribute("uv",new $e(a,2));function d(){let g,_=[];const x=new N,w=new N;if(e.geometry.isGeometry===!0){console.error("THREE.DecalGeometry no longer supports THREE.Geometry. Use BufferGeometry instead.");return}const S=e.geometry,M=S.attributes.position,T=S.attributes.normal;if(S.index!==null){const I=S.index;for(g=0;g<I.count;g++)x.fromBufferAttribute(M,I.getX(g)),w.fromBufferAttribute(T,I.getX(g)),p(_,x,w)}else for(g=0;g<M.count;g++)x.fromBufferAttribute(M,g),w.fromBufferAttribute(T,g),p(_,x,w);for(_=m(_,l.set(1,0,0)),_=m(_,l.set(-1,0,0)),_=m(_,l.set(0,1,0)),_=m(_,l.set(0,-1,0)),_=m(_,l.set(0,0,1)),_=m(_,l.set(0,0,-1)),g=0;g<_.length;g++){const I=_[g];a.push(.5+I.position.x/i.x,.5+I.position.y/i.y),I.position.applyMatrix4(c),s.push(I.position.x,I.position.y,I.position.z),o.push(I.normal.x,I.normal.y,I.normal.z)}}function p(g,_,x){_.applyMatrix4(e.matrixWorld),_.applyMatrix4(h),x.transformDirection(e.matrixWorld),g.push(new xL(_.clone(),x.clone()))}function m(g,_){const x=[],w=.5*Math.abs(i.dot(_));for(let S=0;S<g.length;S+=3){let M,T,I,L=0,b,R,D,G;const V=g[S+0].position.dot(_)-w,F=g[S+1].position.dot(_)-w,J=g[S+2].position.dot(_)-w;switch(M=V>0,T=F>0,I=J>0,L=(M?1:0)+(T?1:0)+(I?1:0),L){case 0:{x.push(g[S]),x.push(g[S+1]),x.push(g[S+2]);break}case 1:{if(M&&(b=g[S+1],R=g[S+2],D=y(g[S],b,_,w),G=y(g[S],R,_,w)),T){b=g[S],R=g[S+2],D=y(g[S+1],b,_,w),G=y(g[S+1],R,_,w),x.push(D),x.push(R.clone()),x.push(b.clone()),x.push(R.clone()),x.push(D.clone()),x.push(G);break}I&&(b=g[S],R=g[S+1],D=y(g[S+2],b,_,w),G=y(g[S+2],R,_,w)),x.push(b.clone()),x.push(R.clone()),x.push(D),x.push(G),x.push(D.clone()),x.push(R.clone());break}case 2:{M||(b=g[S].clone(),R=y(b,g[S+1],_,w),D=y(b,g[S+2],_,w),x.push(b),x.push(R),x.push(D)),T||(b=g[S+1].clone(),R=y(b,g[S+2],_,w),D=y(b,g[S],_,w),x.push(b),x.push(R),x.push(D)),I||(b=g[S+2].clone(),R=y(b,g[S],_,w),D=y(b,g[S+1],_,w),x.push(b),x.push(R),x.push(D));break}}}return x}function y(g,_,x,w){const S=g.position.dot(x)-w,M=_.position.dot(x)-w,T=S/(S-M);return new xL(new N(g.position.x+T*(_.position.x-g.position.x),g.position.y+T*(_.position.y-g.position.y),g.position.z+T*(_.position.z-g.position.z)),new N(g.normal.x+T*(_.normal.x-g.normal.x),g.normal.y+T*(_.normal.y-g.normal.y),g.normal.z+T*(_.normal.z-g.normal.z)))}}}class xL{constructor(e,t){this.position=e,this.normal=t}clone(){return new this.constructor(this.position.clone(),this.normal.clone())}}function cF(n,e,t){const r=t.length-n-1;if(e>=t[r])return r-1;if(e<=t[n])return n;let i=n,s=r,o=Math.floor((i+s)/2);for(;e<t[o]||e>=t[o+1];)e<t[o]?s=o:i=o,o=Math.floor((i+s)/2);return o}function $Q(n,e,t,r){const i=[],s=[],o=[];i[0]=1;for(let a=1;a<=t;++a){s[a]=e-r[n+1-a],o[a]=r[n+a]-e;let l=0;for(let c=0;c<a;++c){const h=o[c+1],d=s[a-c],p=i[c]/(h+d);i[c]=l+h*p,l=d*p}i[a]=l}return i}function JQ(n,e,t,r){const i=cF(n,r,e),s=$Q(i,r,n,e),o=new Ht(0,0,0,0);for(let a=0;a<=n;++a){const l=t[i-n+a],c=s[a],h=l.w*c;o.x+=l.x*h,o.y+=l.y*h,o.z+=l.z*h,o.w+=l.w*c}return o}function KQ(n,e,t,r,i){const s=[];for(let p=0;p<=t;++p)s[p]=0;const o=[];for(let p=0;p<=r;++p)o[p]=s.slice(0);const a=[];for(let p=0;p<=t;++p)a[p]=s.slice(0);a[0][0]=1;const l=s.slice(0),c=s.slice(0);for(let p=1;p<=t;++p){l[p]=e-i[n+1-p],c[p]=i[n+p]-e;let m=0;for(let y=0;y<p;++y){const g=c[y+1],_=l[p-y];a[p][y]=g+_;const x=a[y][p-1]/a[p][y];a[y][p]=m+g*x,m=_*x}a[p][p]=m}for(let p=0;p<=t;++p)o[0][p]=a[p][t];for(let p=0;p<=t;++p){let m=0,y=1;const g=[];for(let _=0;_<=t;++_)g[_]=s.slice(0);g[0][0]=1;for(let _=1;_<=r;++_){let x=0;const w=p-_,S=t-_;p>=_&&(g[y][0]=g[m][0]/a[S+1][w],x=g[y][0]*a[w][S]);const M=w>=-1?1:-w,T=p-1<=S?_-1:t-p;for(let I=M;I<=T;++I)g[y][I]=(g[m][I]-g[m][I-1])/a[S+1][w+I],x+=g[y][I]*a[w+I][S];p<=S&&(g[y][_]=-g[m][_-1]/a[S+1][p],x+=g[y][_]*a[p][S]),o[_][p]=x;var h=m;m=y,y=h}}var d=t;for(let p=1;p<=r;++p){for(let m=0;m<=t;++m)o[p][m]*=d;d*=t-p}return o}function XQ(n,e,t,r,i){const s=i<n?i:n,o=[],a=cF(n,r,e),l=KQ(a,r,n,s,e),c=[];for(let d=0;d<t.length;++d){var h=t[d].clone();const p=h.w;h.x*=p,h.y*=p,h.z*=p,c[d]=h}for(let d=0;d<=s;++d){var h=c[a-n].clone().multiplyScalar(l[d][0]);for(let m=1;m<=n;++m)h.add(c[a-n+m].clone().multiplyScalar(l[d][m]));o[d]=h}for(let d=s+1;d<=i+1;++d)o[d]=new Ht(0,0,0);return o}function qQ(n,e){let t=1;for(let i=2;i<=n;++i)t*=i;let r=1;for(let i=2;i<=e;++i)r*=i;for(let i=2;i<=n-e;++i)r*=i;return t/r}function QQ(n){const e=n.length,t=[],r=[];for(let s=0;s<e;++s){const o=n[s];t[s]=new N(o.x,o.y,o.z),r[s]=o.w}const i=[];for(let s=0;s<e;++s){const o=t[s].clone();for(let a=1;a<=s;++a)o.sub(i[s-a].clone().multiplyScalar(qQ(s,a)*r[a]));i[s]=o.divideScalar(r[0])}return i}function YQ(n,e,t,r,i){const s=XQ(n,e,t,r,i);return QQ(s)}class wL extends ms{constructor(e,t,r,i,s){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=i||0,this.endKnot=s||this.knots.length-1;for(let o=0;o<r.length;++o){const a=r[o];this.controlPoints[o]=new Ht(a.x,a.y,a.z,a.w)}}getPoint(e,t){const r=t||new N,i=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=JQ(this.degree,this.knots,this.controlPoints,i);return s.w!=1&&s.divideScalar(s.w),r.set(s.x,s.y,s.z)}getTangent(e,t){const r=t||new N,i=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=YQ(this.degree,this.knots,this.controlPoints,i,1);return r.copy(s[1]).normalize(),r}}let Bt,Vn,gi;class QC extends Qr{constructor(e){super(e)}load(e,t,r,i){const s=this,o=s.path===""?zi.extractUrlBase(e):s.path,a=new Mi(this.manager);a.setPath(s.path),a.setResponseType("arraybuffer"),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{t(s.parse(l,o))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},r,i)}parse(e,t){if(iY(e))Bt=new rY().parse(e);else{const i=dF(e);if(!sY(i))throw new Error("THREE.FBXLoader: Unknown format.");if(AL(i)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+AL(i));Bt=new nY().parse(i)}const r=new qh(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new ZQ(r,this.manager).parse(Bt)}}class ZQ{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){Vn=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),r=this.parseMaterials(t),i=this.parseDeformers(),s=new eY().parse(i);return this.parseScene(i,s,r),gi}parseConnections(){const e=new Map;return"Connections"in Bt&&Bt.Connections.connections.forEach(function(r){const i=r[0],s=r[1],o=r[2];e.has(i)||e.set(i,{parents:[],children:[]});const a={ID:s,relationship:o};e.get(i).parents.push(a),e.has(s)||e.set(s,{parents:[],children:[]});const l={ID:i,relationship:o};e.get(s).children.push(l)}),e}parseImages(){const e={},t={};if("Video"in Bt.Objects){const r=Bt.Objects.Video;for(const i in r){const s=r[i],o=parseInt(i);if(e[o]=s.RelativeFilename||s.Filename,"Content"in s){const a=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,l=typeof s.Content=="string"&&s.Content!=="";if(a||l){const c=this.parseImage(r[i]);t[s.RelativeFilename||s.Filename]=c}}}}for(const r in e){const i=e[r];t[i]!==void 0?e[r]=t[i]:e[r]=e[r].split("\\").pop()}return e}parseImage(e){const t=e.Content,r=e.RelativeFilename||e.Filename,i=r.slice(r.lastIndexOf(".")+1).toLowerCase();let s;switch(i){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",r),s="image/tga";break;default:console.warn('FBXLoader: Image type "'+i+'" is not supported.');return}if(typeof t=="string")return"data:"+s+";base64,"+t;{const o=new Uint8Array(t);return window.URL.createObjectURL(new Blob([o],{type:s}))}}parseTextures(e){const t=new Map;if("Texture"in Bt.Objects){const r=Bt.Objects.Texture;for(const i in r){const s=this.parseTexture(r[i],e);t.set(parseInt(i),s)}}return t}parseTexture(e,t){const r=this.loadTexture(e,t);r.ID=e.id,r.name=e.attrName;const i=e.WrapModeU,s=e.WrapModeV,o=i!==void 0?i.value:0,a=s!==void 0?s.value:0;if(r.wrapS=o===0?uo:or,r.wrapT=a===0?uo:or,"Scaling"in e){const l=e.Scaling.value;r.repeat.x=l[0],r.repeat.y=l[1]}return r}loadTexture(e,t){let r;const i=this.textureLoader.path,s=Vn.get(e.id).children;s!==void 0&&s.length>0&&t[s[0].ID]!==void 0&&(r=t[s[0].ID],(r.indexOf("blob:")===0||r.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let o;const a=e.FileName.slice(-3).toLowerCase();if(a==="tga"){const l=this.manager.getHandler(".tga");l===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new cn):(l.setPath(this.textureLoader.path),o=l.load(r))}else a==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new cn):o=this.textureLoader.load(r);return this.textureLoader.setPath(i),o}parseMaterials(e){const t=new Map;if("Material"in Bt.Objects){const r=Bt.Objects.Material;for(const i in r){const s=this.parseMaterial(r[i],e);s!==null&&t.set(parseInt(i),s)}}return t}parseMaterial(e,t){const r=e.id,i=e.attrName;let s=e.ShadingModel;if(typeof s=="object"&&(s=s.value),!Vn.has(r))return null;const o=this.parseParameters(e,t,r);let a;switch(s.toLowerCase()){case"phong":a=new Sd;break;case"lambert":a=new DC;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),a=new Sd;break}return a.setValues(o),a.name=i,a}parseParameters(e,t,r){const i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=new De().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(i.color=new De().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=new De().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(i.emissive=new De().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(i.opacity=parseFloat(e.Opacity.value)),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=new De().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(i.specular=new De().fromArray(e.SpecularColor.value));const s=this;return Vn.get(r).children.forEach(function(o){const a=o.relationship;switch(a){case"Bump":i.bumpMap=s.getTexture(t,o.ID);break;case"Maya|TEX_ao_map":i.aoMap=s.getTexture(t,o.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":i.map=s.getTexture(t,o.ID),i.map!==void 0&&(i.map.encoding=bt);break;case"DisplacementColor":i.displacementMap=s.getTexture(t,o.ID);break;case"EmissiveColor":i.emissiveMap=s.getTexture(t,o.ID),i.emissiveMap!==void 0&&(i.emissiveMap.encoding=bt);break;case"NormalMap":case"Maya|TEX_normal_map":i.normalMap=s.getTexture(t,o.ID);break;case"ReflectionColor":i.envMap=s.getTexture(t,o.ID),i.envMap!==void 0&&(i.envMap.mapping=vh,i.envMap.encoding=bt);break;case"SpecularColor":i.specularMap=s.getTexture(t,o.ID),i.specularMap!==void 0&&(i.specularMap.encoding=bt);break;case"TransparentColor":case"TransparencyFactor":i.alphaMap=s.getTexture(t,o.ID),i.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",a);break}}),i}getTexture(e,t){return"LayeredTexture"in Bt.Objects&&t in Bt.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=Vn.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in Bt.Objects){const r=Bt.Objects.Deformer;for(const i in r){const s=r[i],o=Vn.get(parseInt(i));if(s.attrType==="Skin"){const a=this.parseSkeleton(o,r);a.ID=i,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=o.parents[0].ID,e[i]=a}else if(s.attrType==="BlendShape"){const a={id:i};a.rawTargets=this.parseMorphTargets(o,r),a.id=i,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[i]=a}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const r=[];return e.children.forEach(function(i){const s=t[i.ID];if(s.attrType!=="Cluster")return;const o={ID:i.ID,indices:[],weights:[],transformLink:new Xe().fromArray(s.TransformLink.a)};"Indexes"in s&&(o.indices=s.Indexes.a,o.weights=s.Weights.a),r.push(o)}),{rawBones:r,bones:[]}}parseMorphTargets(e,t){const r=[];for(let i=0;i<e.children.length;i++){const s=e.children[i],o=t[s.ID],a={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if(o.attrType!=="BlendShapeChannel")return;a.geoID=Vn.get(parseInt(s.ID)).children.filter(function(l){return l.relationship===void 0})[0].ID,r.push(a)}return r}parseScene(e,t,r){gi=new Bs;const i=this.parseModels(e.skeletons,t,r),s=Bt.Objects.Model,o=this;i.forEach(function(l){const c=s[l.ID];o.setLookAtProperties(l,c),Vn.get(l.ID).parents.forEach(function(d){const p=i.get(d.ID);p!==void 0&&p.add(l)}),l.parent===null&&gi.add(l)}),this.bindSkeleton(e.skeletons,t,i),this.createAmbientLight(),gi.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);const c=hF(l.userData.transformData);l.applyMatrix4(c),l.updateWorldMatrix()}});const a=new tY().parse();gi.children.length===1&&gi.children[0].isGroup&&(gi.children[0].animations=a,gi=gi.children[0]),gi.animations=a}parseModels(e,t,r){const i=new Map,s=Bt.Objects.Model;for(const o in s){const a=parseInt(o),l=s[o],c=Vn.get(a);let h=this.buildSkeleton(c,e,a,l.attrName);if(!h){switch(l.attrType){case"Camera":h=this.createCamera(c);break;case"Light":h=this.createLight(c);break;case"Mesh":h=this.createMesh(c,t,r);break;case"NurbsCurve":h=this.createCurve(c,t);break;case"LimbNode":case"Root":h=new Mh;break;case"Null":default:h=new Bs;break}h.name=l.attrName?It.sanitizeNodeName(l.attrName):"",h.ID=a}this.getTransformData(h,l),i.set(a,h)}return i}buildSkeleton(e,t,r,i){let s=null;return e.parents.forEach(function(o){for(const a in t){const l=t[a];l.rawBones.forEach(function(c,h){if(c.ID===o.ID){const d=s;s=new Mh,s.matrixWorld.copy(c.transformLink),s.name=i?It.sanitizeNodeName(i):"",s.ID=r,l.bones[h]=s,d!==null&&s.add(d)}})}}),s}createCamera(e){let t,r;if(e.children.forEach(function(i){const s=Bt.Objects.NodeAttribute[i.ID];s!==void 0&&(r=s)}),r===void 0)t=new kt;else{let i=0;r.CameraProjectionType!==void 0&&r.CameraProjectionType.value===1&&(i=1);let s=1;r.NearPlane!==void 0&&(s=r.NearPlane.value/1e3);let o=1e3;r.FarPlane!==void 0&&(o=r.FarPlane.value/1e3);let a=window.innerWidth,l=window.innerHeight;r.AspectWidth!==void 0&&r.AspectHeight!==void 0&&(a=r.AspectWidth.value,l=r.AspectHeight.value);const c=a/l;let h=45;r.FieldOfView!==void 0&&(h=r.FieldOfView.value);const d=r.FocalLength?r.FocalLength.value:null;switch(i){case 0:t=new rn(h,c,s,o),d!==null&&t.setFocalLength(d);break;case 1:t=new fs(-a/2,a/2,l/2,-l/2,s,o);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+i+"."),t=new kt;break}}return t}createLight(e){let t,r;if(e.children.forEach(function(i){const s=Bt.Objects.NodeAttribute[i.ID];s!==void 0&&(r=s)}),r===void 0)t=new kt;else{let i;r.LightType===void 0?i=0:i=r.LightType.value;let s=16777215;r.Color!==void 0&&(s=new De().fromArray(r.Color.value));let o=r.Intensity===void 0?1:r.Intensity.value/100;r.CastLightOnObject!==void 0&&r.CastLightOnObject.value===0&&(o=0);let a=0;r.FarAttenuationEnd!==void 0&&(r.EnableFarAttenuation!==void 0&&r.EnableFarAttenuation.value===0?a=0:a=r.FarAttenuationEnd.value);const l=1;switch(i){case 0:t=new op(s,o,a,l);break;case 1:t=new Z0(s,o);break;case 2:let c=Math.PI/3;r.InnerAngle!==void 0&&(c=Oi.degToRad(r.InnerAngle.value));let h=0;r.OuterAngle!==void 0&&(h=Oi.degToRad(r.OuterAngle.value),h=Math.max(h,1)),t=new Y0(s,o,a,c,h,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+r.LightType.value+", defaulting to a PointLight."),t=new op(s,o);break}r.CastShadows!==void 0&&r.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,r){let i,s=null,o=null;const a=[];return e.children.forEach(function(l){t.has(l.ID)&&(s=t.get(l.ID)),r.has(l.ID)&&a.push(r.get(l.ID))}),a.length>1?o=a:a.length>0?o=a[0]:(o=new Sd({color:13421772}),a.push(o)),"color"in s.attributes&&a.forEach(function(l){l.vertexColors=!0}),s.FBX_Deformer?(i=new J0(s,o),i.normalizeSkinWeights()):i=new tr(s,o),i}createCurve(e,t){const r=e.children.reduce(function(s,o){return t.has(o.ID)&&(s=t.get(o.ID)),s},null),i=new Rr({color:3342591,linewidth:1});return new po(r,i)}getTransformData(e,t){const r={};"InheritType"in t&&(r.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?r.eulerOrder=fF(t.RotationOrder.value):r.eulerOrder="ZYX","Lcl_Translation"in t&&(r.translation=t.Lcl_Translation.value),"PreRotation"in t&&(r.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(r.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(r.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(r.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(r.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(r.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(r.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(r.rotationPivot=t.RotationPivot.value),e.userData.transformData=r}setLookAtProperties(e,t){"LookAtProperty"in t&&Vn.get(e.ID).children.forEach(function(i){if(i.relationship==="LookAtProperty"){const s=Bt.Objects.Model[i.ID];if("Lcl_Translation"in s){const o=s.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(o),gi.add(e.target)):e.lookAt(new N().fromArray(o))}}})}bindSkeleton(e,t,r){const i=this.parsePoseNodes();for(const s in e){const o=e[s];Vn.get(parseInt(o.ID)).parents.forEach(function(l){if(t.has(l.ID)){const c=l.ID;Vn.get(c).parents.forEach(function(d){r.has(d.ID)&&r.get(d.ID).bind(new Wh(o.bones),i[d.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in Bt.Objects){const t=Bt.Objects.Pose;for(const r in t)if(t[r].attrType==="BindPose"&&t[r].NbPoseNodes>0){const i=t[r].PoseNode;Array.isArray(i)?i.forEach(function(s){e[s.Node]=new Xe().fromArray(s.Matrix.a)}):e[i.Node]=new Xe().fromArray(i.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in Bt&&"AmbientColor"in Bt.GlobalSettings){const e=Bt.GlobalSettings.AmbientColor.value,t=e[0],r=e[1],i=e[2];if(t!==0||r!==0||i!==0){const s=new De(t,r,i);gi.add(new zC(s,1))}}}}class eY{parse(e){const t=new Map;if("Geometry"in Bt.Objects){const r=Bt.Objects.Geometry;for(const i in r){const s=Vn.get(parseInt(i)),o=this.parseGeometry(s,r[i],e);t.set(parseInt(i),o)}}return t}parseGeometry(e,t,r){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,r);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,r){const i=r.skeletons,s=[],o=e.parents.map(function(d){return Bt.Objects.Model[d.ID]});if(o.length===0)return;const a=e.children.reduce(function(d,p){return i[p.ID]!==void 0&&(d=i[p.ID]),d},null);e.children.forEach(function(d){r.morphTargets[d.ID]!==void 0&&s.push(r.morphTargets[d.ID])});const l=o[0],c={};"RotationOrder"in l&&(c.eulerOrder=fF(l.RotationOrder.value)),"InheritType"in l&&(c.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(c.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(c.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(c.scale=l.GeometricScaling.value);const h=hF(c);return this.genGeometry(t,a,s,h)}genGeometry(e,t,r,i){const s=new dt;e.attrName&&(s.name=e.attrName);const o=this.parseGeoNode(e,t),a=this.genBuffers(o),l=new $e(a.vertex,3);if(l.applyMatrix4(i),s.setAttribute("position",l),a.colors.length>0&&s.setAttribute("color",new $e(a.colors,3)),t&&(s.setAttribute("skinIndex",new G0(a.weightsIndices,4)),s.setAttribute("skinWeight",new $e(a.vertexWeights,4)),s.FBX_Deformer=t),a.normal.length>0){const c=new vr().getNormalMatrix(i),h=new $e(a.normal,3);h.applyNormalMatrix(c),s.setAttribute("normal",h)}if(a.uvs.forEach(function(c,h){let d="uv"+(h+1).toString();h===0&&(d="uv"),s.setAttribute(d,new $e(a.uvs[h],2))}),o.material&&o.material.mappingType!=="AllSame"){let c=a.materialIndex[0],h=0;if(a.materialIndex.forEach(function(d,p){d!==c&&(s.addGroup(h,p-h,c),c=d,h=p)}),s.groups.length>0){const d=s.groups[s.groups.length-1],p=d.start+d.count;p!==a.materialIndex.length&&s.addGroup(p,a.materialIndex.length-p,c)}s.groups.length===0&&s.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(s,e,r,i),s}parseGeoNode(e,t){const r={};if(r.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],r.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(r.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(r.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(r.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){r.uv=[];let i=0;for(;e.LayerElementUV[i];)e.LayerElementUV[i].UV&&r.uv.push(this.parseUVs(e.LayerElementUV[i])),i++}return r.weightTable={},t!==null&&(r.skeleton=t,t.rawBones.forEach(function(i,s){i.indices.forEach(function(o,a){r.weightTable[o]===void 0&&(r.weightTable[o]=[]),r.weightTable[o].push({id:s,weight:i.weights[a]})})})),r}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let r=0,i=0,s=!1,o=[],a=[],l=[],c=[],h=[],d=[];const p=this;return e.vertexIndices.forEach(function(m,y){let g,_=!1;m<0&&(m=m^-1,_=!0);let x=[],w=[];if(o.push(m*3,m*3+1,m*3+2),e.color){const S=py(y,r,m,e.color);l.push(S[0],S[1],S[2])}if(e.skeleton){if(e.weightTable[m]!==void 0&&e.weightTable[m].forEach(function(S){w.push(S.weight),x.push(S.id)}),w.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const S=[0,0,0,0],M=[0,0,0,0];w.forEach(function(T,I){let L=T,b=x[I];M.forEach(function(R,D,G){if(L>R){G[D]=L,L=R;const V=S[D];S[D]=b,b=V}})}),x=S,w=M}for(;w.length<4;)w.push(0),x.push(0);for(let S=0;S<4;++S)h.push(w[S]),d.push(x[S])}if(e.normal){const S=py(y,r,m,e.normal);a.push(S[0],S[1],S[2])}e.material&&e.material.mappingType!=="AllSame"&&(g=py(y,r,m,e.material)[0]),e.uv&&e.uv.forEach(function(S,M){const T=py(y,r,m,S);c[M]===void 0&&(c[M]=[]),c[M].push(T[0]),c[M].push(T[1])}),i++,_&&(p.genFace(t,e,o,g,a,l,c,h,d,i),r++,i=0,o=[],a=[],l=[],c=[],h=[],d=[])}),t}genFace(e,t,r,i,s,o,a,l,c,h){for(let d=2;d<h;d++)e.vertex.push(t.vertexPositions[r[0]]),e.vertex.push(t.vertexPositions[r[1]]),e.vertex.push(t.vertexPositions[r[2]]),e.vertex.push(t.vertexPositions[r[(d-1)*3]]),e.vertex.push(t.vertexPositions[r[(d-1)*3+1]]),e.vertex.push(t.vertexPositions[r[(d-1)*3+2]]),e.vertex.push(t.vertexPositions[r[d*3]]),e.vertex.push(t.vertexPositions[r[d*3+1]]),e.vertex.push(t.vertexPositions[r[d*3+2]]),t.skeleton&&(e.vertexWeights.push(l[0]),e.vertexWeights.push(l[1]),e.vertexWeights.push(l[2]),e.vertexWeights.push(l[3]),e.vertexWeights.push(l[(d-1)*4]),e.vertexWeights.push(l[(d-1)*4+1]),e.vertexWeights.push(l[(d-1)*4+2]),e.vertexWeights.push(l[(d-1)*4+3]),e.vertexWeights.push(l[d*4]),e.vertexWeights.push(l[d*4+1]),e.vertexWeights.push(l[d*4+2]),e.vertexWeights.push(l[d*4+3]),e.weightsIndices.push(c[0]),e.weightsIndices.push(c[1]),e.weightsIndices.push(c[2]),e.weightsIndices.push(c[3]),e.weightsIndices.push(c[(d-1)*4]),e.weightsIndices.push(c[(d-1)*4+1]),e.weightsIndices.push(c[(d-1)*4+2]),e.weightsIndices.push(c[(d-1)*4+3]),e.weightsIndices.push(c[d*4]),e.weightsIndices.push(c[d*4+1]),e.weightsIndices.push(c[d*4+2]),e.weightsIndices.push(c[d*4+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[(d-1)*3]),e.colors.push(o[(d-1)*3+1]),e.colors.push(o[(d-1)*3+2]),e.colors.push(o[d*3]),e.colors.push(o[d*3+1]),e.colors.push(o[d*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(i),e.materialIndex.push(i),e.materialIndex.push(i)),t.normal&&(e.normal.push(s[0]),e.normal.push(s[1]),e.normal.push(s[2]),e.normal.push(s[(d-1)*3]),e.normal.push(s[(d-1)*3+1]),e.normal.push(s[(d-1)*3+2]),e.normal.push(s[d*3]),e.normal.push(s[d*3+1]),e.normal.push(s[d*3+2])),t.uv&&t.uv.forEach(function(p,m){e.uvs[m]===void 0&&(e.uvs[m]=[]),e.uvs[m].push(a[m][0]),e.uvs[m].push(a[m][1]),e.uvs[m].push(a[m][(d-1)*2]),e.uvs[m].push(a[m][(d-1)*2+1]),e.uvs[m].push(a[m][d*2]),e.uvs[m].push(a[m][d*2+1])})}addMorphTargets(e,t,r,i){if(r.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;r.forEach(function(o){o.rawTargets.forEach(function(a){const l=Bt.Objects.Geometry[a.geoID];l!==void 0&&s.genMorphGeometry(e,t,l,i,a.name)})})}genMorphGeometry(e,t,r,i,s){const o=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],a=r.Vertices!==void 0?r.Vertices.a:[],l=r.Indexes!==void 0?r.Indexes.a:[],c=e.attributes.position.count*3,h=new Float32Array(c);for(let y=0;y<l.length;y++){const g=l[y]*3;h[g]=a[y*3],h[g+1]=a[y*3+1],h[g+2]=a[y*3+2]}const d={vertexIndices:o,vertexPositions:h},p=this.genBuffers(d),m=new $e(p.vertex,3);m.name=s||r.attrName,m.applyMatrix4(i),e.morphAttributes.position.push(m)}parseNormals(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Normals.a;let s=[];return r==="IndexToDirect"&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:i,indices:s,mappingType:t,referenceType:r}}parseUVs(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.UV.a;let s=[];return r==="IndexToDirect"&&(s=e.UVIndex.a),{dataSize:2,buffer:i,indices:s,mappingType:t,referenceType:r}}parseVertexColors(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Colors.a;let s=[];return r==="IndexToDirect"&&(s=e.ColorIndex.a),{dataSize:4,buffer:i,indices:s,mappingType:t,referenceType:r}}parseMaterialIndices(e){const t=e.MappingInformationType,r=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:r};const i=e.Materials.a,s=[];for(let o=0;o<i.length;++o)s.push(o);return{dataSize:1,buffer:i,indices:s,mappingType:t,referenceType:r}}parseNurbsGeometry(e){if(wL===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new dt;const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new dt;const r=t-1,i=e.KnotVector.a,s=[],o=e.Points.a;for(let d=0,p=o.length;d<p;d+=4)s.push(new Ht().fromArray(o,d));let a,l;if(e.Form==="Closed")s.push(s[0]);else if(e.Form==="Periodic"){a=r,l=i.length-1-a;for(let d=0;d<r;++d)s.push(s[d])}const h=new wL(r,i,s,a,l).getPoints(s.length*12);return new dt().setFromPoints(h)}}class tY{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const r in t){const i=t[r],s=this.addClip(i);e.push(s)}return e}parseClips(){if(Bt.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=Bt.Objects.AnimationCurveNode,t=new Map;for(const r in e){const i=e[r];if(i.attrName.match(/S|R|T|DeformPercent/)!==null){const s={id:i.id,attr:i.attrName,curves:{}};t.set(s.id,s)}}return t}parseAnimationCurves(e){const t=Bt.Objects.AnimationCurve;for(const r in t){const i={id:t[r].id,times:t[r].KeyTime.a.map(oY),values:t[r].KeyValueFloat.a},s=Vn.get(i.id);if(s!==void 0){const o=s.parents[0].ID,a=s.parents[0].relationship;a.match(/X/)?e.get(o).curves.x=i:a.match(/Y/)?e.get(o).curves.y=i:a.match(/Z/)?e.get(o).curves.z=i:a.match(/d|DeformPercent/)&&e.has(o)&&(e.get(o).curves.morph=i)}}}parseAnimationLayers(e){const t=Bt.Objects.AnimationLayer,r=new Map;for(const i in t){const s=[],o=Vn.get(parseInt(i));o!==void 0&&(o.children.forEach(function(l,c){if(e.has(l.ID)){const h=e.get(l.ID);if(h.curves.x!==void 0||h.curves.y!==void 0||h.curves.z!==void 0){if(s[c]===void 0){const d=Vn.get(l.ID).parents.filter(function(p){return p.relationship!==void 0})[0].ID;if(d!==void 0){const p=Bt.Objects.Model[d.toString()];if(p===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}const m={modelName:p.attrName?It.sanitizeNodeName(p.attrName):"",ID:p.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};gi.traverse(function(y){y.ID===p.id&&(m.transform=y.matrix,y.userData.transformData&&(m.eulerOrder=y.userData.transformData.eulerOrder))}),m.transform||(m.transform=new Xe),"PreRotation"in p&&(m.preRotation=p.PreRotation.value),"PostRotation"in p&&(m.postRotation=p.PostRotation.value),s[c]=m}}s[c]&&(s[c][h.attr]=h)}else if(h.curves.morph!==void 0){if(s[c]===void 0){const d=Vn.get(l.ID).parents.filter(function(x){return x.relationship!==void 0})[0].ID,p=Vn.get(d).parents[0].ID,m=Vn.get(p).parents[0].ID,y=Vn.get(m).parents[0].ID,g=Bt.Objects.Model[y],_={modelName:g.attrName?It.sanitizeNodeName(g.attrName):"",morphName:Bt.Objects.Deformer[d].attrName};s[c]=_}s[c][h.attr]=h}}}),r.set(parseInt(i),s))}return r}parseAnimStacks(e){const t=Bt.Objects.AnimationStack,r={};for(const i in t){const s=Vn.get(parseInt(i)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(s[0].ID);r[i]={name:t[i].attrName,layer:o}}return r}addClip(e){let t=[];const r=this;return e.layer.forEach(function(i){t=t.concat(r.generateTracks(i))}),new Ac(e.name,-1,t)}generateTracks(e){const t=[];let r=new N,i=new $n,s=new N;if(e.transform&&e.transform.decompose(r,i,s),r=r.toArray(),i=new us().setFromQuaternion(i,e.eulerOrder).toArray(),s=s.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.T.curves,r,"position");o!==void 0&&t.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const o=this.generateRotationTrack(e.modelName,e.R.curves,i,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&t.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.S.curves,s,"scale");o!==void 0&&t.push(o)}if(e.DeformPercent!==void 0){const o=this.generateMorphTrack(e);o!==void 0&&t.push(o)}return t}generateVectorTrack(e,t,r,i){const s=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(s,t,r);return new Sc(e+"."+i,s,o)}generateRotationTrack(e,t,r,i,s,o){t.x!==void 0&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(Oi.degToRad)),t.y!==void 0&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(Oi.degToRad)),t.z!==void 0&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(Oi.degToRad));const a=this.getTimesForAllAxes(t),l=this.getKeyframeTrackValues(a,t,r);i!==void 0&&(i=i.map(Oi.degToRad),i.push(o),i=new us().fromArray(i),i=new $n().setFromEuler(i)),s!==void 0&&(s=s.map(Oi.degToRad),s.push(o),s=new us().fromArray(s),s=new $n().setFromEuler(s).invert());const c=new $n,h=new us,d=[];for(let p=0;p<l.length;p+=3)h.set(l[p],l[p+1],l[p+2],o),c.setFromEuler(h),i!==void 0&&c.premultiply(i),s!==void 0&&c.multiply(s),c.toArray(d,p/3*4);return new qo(e+".quaternion",a,d)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,r=t.values.map(function(s){return s/100}),i=gi.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new wc(e.modelName+".morphTargetInfluences["+i+"]",t.times,r)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(r,i){return r-i}),t.length>1){let r=1,i=t[0];for(let s=1;s<t.length;s++){const o=t[s];o!==i&&(t[r]=o,i=o,r++)}t=t.slice(0,r)}return t}getKeyframeTrackValues(e,t,r){const i=r,s=[];let o=-1,a=-1,l=-1;return e.forEach(function(c){if(t.x&&(o=t.x.times.indexOf(c)),t.y&&(a=t.y.times.indexOf(c)),t.z&&(l=t.z.times.indexOf(c)),o!==-1){const h=t.x.values[o];s.push(h),i[0]=h}else s.push(i[0]);if(a!==-1){const h=t.y.values[a];s.push(h),i[1]=h}else s.push(i[1]);if(l!==-1){const h=t.z.values[l];s.push(h),i[2]=h}else s.push(i[2])}),s}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const r=e.values[t-1],i=e.values[t]-r,s=Math.abs(i);if(s>=180){const o=s/180,a=i/o;let l=r+a;const c=e.times[t-1],d=(e.times[t]-c)/o;let p=c+d;const m=[],y=[];for(;p<e.times[t];)m.push(p),p+=d,y.push(l),l+=a;e.times=ML(e.times,t,m),e.values=ML(e.values,t,y)}}}}class nY{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new uF,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,r=e.split(/[\r\n]+/);return r.forEach(function(i,s){const o=i.match(/^[\s\t]*;/),a=i.match(/^[\s\t]*$/);if(o||a)return;const l=i.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),c=i.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),h=i.match("^\\t{"+(t.currentIndent-1)+"}}");l?t.parseNodeBegin(i,l):c?t.parseNodeProperty(i,c,r[++s]):h?t.popStack():i.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(i)}),this.allNodes}parseNodeBegin(e,t){const r=t[1].trim().replace(/^"/,"").replace(/"$/,""),i=t[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:r},o=this.parseNodeAttr(i),a=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(r,s):r in a?(r==="PoseNode"?a.PoseNode.push(s):a[r].id!==void 0&&(a[r]={},a[r][a[r].id]=a[r]),o.id!==""&&(a[r][o.id]=s)):typeof o.id=="number"?(a[r]={},a[r][o.id]=s):r!=="Properties70"&&(r==="PoseNode"?a[r]=[s]:a[r]=s),typeof o.id=="number"&&(s.id=o.id),o.name!==""&&(s.attrName=o.name),o.type!==""&&(s.attrType=o.type),this.pushStack(s)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let r="",i="";return e.length>1&&(r=e[1].replace(/^(\w+)::/,""),i=e[2]),{id:t,name:r,type:i}}parseNodeProperty(e,t,r){let i=t[1].replace(/^"/,"").replace(/"$/,"").trim(),s=t[2].replace(/^"/,"").replace(/"$/,"").trim();i==="Content"&&s===","&&(s=r.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if(o.name==="Properties70"){this.parseNodeSpecialProperty(e,i,s);return}if(i==="C"){const l=s.split(",").slice(1),c=parseInt(l[0]),h=parseInt(l[1]);let d=s.split(",").slice(3);d=d.map(function(p){return p.trim().replace(/^"/,"")}),i="connections",s=[c,h],lY(s,d),o[i]===void 0&&(o[i]=[])}i==="Node"&&(o.id=s),i in o&&Array.isArray(o[i])?o[i].push(s):i!=="a"?o[i]=s:o.a=s,this.setCurrentProp(o,i),i==="a"&&s.slice(-1)!==","&&(o.a=Pw(s))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=Pw(t.a))}parseNodeSpecialProperty(e,t,r){const i=r.split('",').map(function(h){return h.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=i[0],o=i[1],a=i[2],l=i[3];let c=i[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=Pw(c);break}this.getPrevNode()[s]={type:o,type2:a,flag:l,value:c},this.setCurrentProp(this.getPrevNode(),s)}}class rY{parse(e){const t=new SL(e);t.skip(23);const r=t.getUint32();if(r<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+r);const i=new uF;for(;!this.endOfContent(t);){const s=this.parseNode(t,r);s!==null&&i.add(s.name,s)}return i}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const r={},i=t>=7500?e.getUint64():e.getUint32(),s=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),a=e.getString(o);if(i===0)return null;const l=[];for(let p=0;p<s;p++)l.push(this.parseProperty(e));const c=l.length>0?l[0]:"",h=l.length>1?l[1]:"",d=l.length>2?l[2]:"";for(r.singleProperty=s===1&&e.getOffset()===i;i>e.getOffset();){const p=this.parseNode(e,t);p!==null&&this.parseSubNode(a,r,p)}return r.propertyList=l,typeof c=="number"&&(r.id=c),h!==""&&(r.attrName=h),d!==""&&(r.attrType=d),a!==""&&(r.name=a),r}parseSubNode(e,t,r){if(r.singleProperty===!0){const i=r.propertyList[0];Array.isArray(i)?(t[r.name]=r,r.a=i):t[r.name]=i}else if(e==="Connections"&&r.name==="C"){const i=[];r.propertyList.forEach(function(s,o){o!==0&&i.push(s)}),t.connections===void 0&&(t.connections=[]),t.connections.push(i)}else if(r.name==="Properties70")Object.keys(r).forEach(function(s){t[s]=r[s]});else if(e==="Properties70"&&r.name==="P"){let i=r.propertyList[0],s=r.propertyList[1];const o=r.propertyList[2],a=r.propertyList[3];let l;i.indexOf("Lcl ")===0&&(i=i.replace("Lcl ","Lcl_")),s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),s==="Color"||s==="ColorRGB"||s==="Vector"||s==="Vector3D"||s.indexOf("Lcl_")===0?l=[r.propertyList[4],r.propertyList[5],r.propertyList[6]]:l=r.propertyList[4],t[i]={type:s,type2:o,flag:a,value:l}}else t[r.name]===void 0?typeof r.id=="number"?(t[r.name]={},t[r.name][r.id]=r):t[r.name]=r:r.name==="PoseNode"?(Array.isArray(t[r.name])||(t[r.name]=[t[r.name]]),t[r.name].push(r)):t[r.name][r.id]===void 0&&(t[r.name][r.id]=r)}parseProperty(e){const t=e.getString(1);let r;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return r=e.getUint32(),e.getArrayBuffer(r);case"S":return r=e.getUint32(),e.getString(r);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const i=e.getUint32(),s=e.getUint32(),o=e.getUint32();if(s===0)switch(t){case"b":case"c":return e.getBooleanArray(i);case"d":return e.getFloat64Array(i);case"f":return e.getFloat32Array(i);case"i":return e.getInt32Array(i);case"l":return e.getInt64Array(i)}const a=fQ(new Uint8Array(e.getArrayBuffer(o))),l=new SL(a.buffer);switch(t){case"b":case"c":return l.getBooleanArray(i);case"d":return l.getFloat64Array(i);case"f":return l.getFloat32Array(i);case"i":return l.getInt32Array(i);case"l":return l.getInt64Array(i)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class SL{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const t=[];for(let r=0;r<e;r++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let i=0;i<e;i++)t[i]=this.getUint8();const r=t.indexOf(0);return r>=0&&(t=t.slice(0,r)),zi.decodeText(new Uint8Array(t))}}class uF{add(e,t){this[e]=t}}function iY(n){const e="Kaydara FBX Binary  \0";return n.byteLength>=e.length&&e===dF(n,0,e.length)}function sY(n){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function r(i){const s=n[i-1];return n=n.slice(t+i),t++,s}for(let i=0;i<e.length;++i)if(r(1)===e[i])return!1;return!0}function AL(n){const e=/FBXVersion: (\d+)/,t=n.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function oY(n){return n/46186158e3}const aY=[];function py(n,e,t,r){let i;switch(r.mappingType){case"ByPolygonVertex":i=n;break;case"ByPolygon":i=e;break;case"ByVertice":i=t;break;case"AllSame":i=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}r.referenceType==="IndexToDirect"&&(i=r.indices[i]);const s=i*r.dataSize,o=s+r.dataSize;return cY(aY,r.buffer,s,o)}const Iw=new us,xu=new N;function hF(n){const e=new Xe,t=new Xe,r=new Xe,i=new Xe,s=new Xe,o=new Xe,a=new Xe,l=new Xe,c=new Xe,h=new Xe,d=new Xe,p=new Xe,m=n.inheritType?n.inheritType:0;if(n.translation&&e.setPosition(xu.fromArray(n.translation)),n.preRotation){const D=n.preRotation.map(Oi.degToRad);D.push(n.eulerOrder),t.makeRotationFromEuler(Iw.fromArray(D))}if(n.rotation){const D=n.rotation.map(Oi.degToRad);D.push(n.eulerOrder),r.makeRotationFromEuler(Iw.fromArray(D))}if(n.postRotation){const D=n.postRotation.map(Oi.degToRad);D.push(n.eulerOrder),i.makeRotationFromEuler(Iw.fromArray(D)),i.invert()}n.scale&&s.scale(xu.fromArray(n.scale)),n.scalingOffset&&a.setPosition(xu.fromArray(n.scalingOffset)),n.scalingPivot&&o.setPosition(xu.fromArray(n.scalingPivot)),n.rotationOffset&&l.setPosition(xu.fromArray(n.rotationOffset)),n.rotationPivot&&c.setPosition(xu.fromArray(n.rotationPivot)),n.parentMatrixWorld&&(d.copy(n.parentMatrix),h.copy(n.parentMatrixWorld));const y=t.clone().multiply(r).multiply(i),g=new Xe;g.extractRotation(h);const _=new Xe;_.copyPosition(h);const x=_.clone().invert().multiply(h),w=g.clone().invert().multiply(x),S=s,M=new Xe;if(m===0)M.copy(g).multiply(y).multiply(w).multiply(S);else if(m===1)M.copy(g).multiply(w).multiply(y).multiply(S);else{const G=new Xe().scale(new N().setFromMatrixScale(d)).clone().invert(),V=w.clone().multiply(G);M.copy(g).multiply(y).multiply(V).multiply(S)}const T=c.clone().invert(),I=o.clone().invert();let L=e.clone().multiply(l).multiply(c).multiply(t).multiply(r).multiply(i).multiply(T).multiply(a).multiply(o).multiply(s).multiply(I);const b=new Xe().copyPosition(L),R=h.clone().multiply(b);return p.copyPosition(R),L=p.clone().multiply(M),L.premultiply(h.invert()),L}function fF(n){n=n||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return n===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[n]}function Pw(n){return n.split(",").map(function(t){return parseFloat(t)})}function dF(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=n.byteLength),zi.decodeText(new Uint8Array(n,e,t))}function lY(n,e){for(let t=0,r=n.length,i=e.length;t<i;t++,r++)n[r]=e[t]}function cY(n,e,t,r){for(let i=t,s=0;i<r;i++,s++)n[s]=e[i];return n}function ML(n,e,t){return n.slice(0,e).concat(t).concat(n.slice(e))}const Rw=new WeakMap;class uY extends Qr{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,i){const s=new Mi(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(i)},r,i)}decodeDracoFile(e,t,r,i){const s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const c=t.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=c.name)}const r=JSON.stringify(t);if(Rw.has(e)){const l=Rw.get(e);if(l.key===r)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(i=l,new Promise((c,h)=>{i._callbacks[s]={resolve:c,reject:h},i.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),Rw.set(e,{key:r,promise:a}),a}_createGeometry(e){const t=new dt;e.index&&t.setIndex(new Xt(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const i=e.attributes[r],s=i.name,o=i.array,a=i.itemSize;t.setAttribute(s,new Xt(o,a))}return t}_loadLibrary(e,t){const r=new Mi(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((i,s)=>{r.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{const i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const s=hY.toString(),o=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const o=s.data;switch(o.type){case"decode":i._callbacks[o.id].resolve(o);break;case"error":i._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function hY(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(h){n.onModuleLoaded=function(d){h({draco:d})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(h=>{const d=h.draco,p=new d.Decoder,m=new d.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const y=t(d,p,m,c),g=y.attributes.map(_=>_.array.buffer);y.index&&g.push(y.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:y},g)}catch(y){console.error(y),self.postMessage({type:"error",id:a.id,error:y.message})}finally{d.destroy(m),d.destroy(p)}});break}};function t(o,a,l,c){const h=c.attributeIDs,d=c.attributeTypes;let p,m;const y=a.GetEncodedGeometryType(l);if(y===o.TRIANGULAR_MESH)p=new o.Mesh,m=a.DecodeBufferToMesh(l,p);else if(y===o.POINT_CLOUD)p=new o.PointCloud,m=a.DecodeBufferToPointCloud(l,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const g={index:null,attributes:[]};for(const _ in h){const x=self[d[_]];let w,S;if(c.useUniqueIDs)S=h[_],w=a.GetAttributeByUniqueId(p,S);else{if(S=a.GetAttributeId(p,o[h[_]]),S===-1)continue;w=a.GetAttribute(p,S)}g.attributes.push(i(o,a,p,_,x,w))}return y===o.TRIANGULAR_MESH&&(g.index=r(o,a,p)),o.destroy(p),g}function r(o,a,l){const h=l.num_faces()*3,d=h*4,p=o._malloc(d);a.GetTrianglesUInt32Array(l,d,p);const m=new Uint32Array(o.HEAPF32.buffer,p,h).slice();return o._free(p),{array:m,itemSize:1}}function i(o,a,l,c,h,d){const p=d.num_components(),y=l.num_points()*p,g=y*h.BYTES_PER_ELEMENT,_=s(o,h),x=o._malloc(g);a.GetAttributeDataArrayForAllPoints(l,d,_,g,x);const w=new h(o.HEAPF32.buffer,x,y).slice();return o._free(x),{name:c,array:w,itemSize:p}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let my;const Lw=()=>{if(my)return my;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=n;WebAssembly.validate(t)&&(i=e);let s;const o=WebAssembly.instantiate(a(i),{}).then(d=>{s=d.instance,s.exports.__wasm_call_ctors()});function a(d){const p=new Uint8Array(d.length);for(let y=0;y<d.length;++y){const g=d.charCodeAt(y);p[y]=g>96?g-71:g>64?g-65:g>47?g+4:g>46?63:62}let m=0;for(let y=0;y<d.length;++y)p[m++]=p[y]<60?r[p[y]]:(p[y]-60)*64+p[++y];return p.buffer.slice(0,m)}function l(d,p,m,y,g,_){const x=s.exports.sbrk,w=m+3&-4,S=x(w*y),M=x(g.length),T=new Uint8Array(s.exports.memory.buffer);T.set(g,M);const I=d(S,m,y,M,g.length);if(I===0&&_&&_(S,w,y),p.set(T.subarray(S,S+m*y)),x(S-x(0)),I!==0)throw new Error(`Malformed buffer data: ${I}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},h={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return my={ready:o,supported:!0,decodeVertexBuffer(d,p,m,y,g){l(s.exports.meshopt_decodeVertexBuffer,d,p,m,y,s.exports[c[g]])},decodeIndexBuffer(d,p,m,y){l(s.exports.meshopt_decodeIndexBuffer,d,p,m,y)},decodeIndexSequence(d,p,m,y){l(s.exports.meshopt_decodeIndexSequence,d,p,m,y)},decodeGltfBuffer(d,p,m,y,g,_){l(s.exports[h[g]],d,p,m,y,s.exports[c[_]])}},my},EL=n=>n===Object(n)&&!Array.isArray(n)&&typeof n!="function";function YC(n,e){const t=Bi(i=>i.gl),r=Vs(qh,EL(n)?Object.values(n):n);if(q.useLayoutEffect(()=>{e==null||e(r)},[e]),q.useEffect(()=>{(Array.isArray(r)?r:[r]).forEach(t.initTexture)},[t,r]),EL(n)){const i=Object.keys(n),s={};return i.forEach(o=>Object.assign(s,{[o]:r[i.indexOf(o)]})),s}else return r}YC.preload=n=>Vs.preload(qh,n);YC.clear=n=>Vs.clear(qh,n);function fY(n){return Array.isArray(n)}function Dw(n=[0,0,0]){return fY(n)?n:n instanceof N||n instanceof us?[n.x,n.y,n.z]:[n,n,n]}function dY({debug:n,mesh:e,children:t,position:r,rotation:i,scale:s,...o}){const a=q.useRef(null),l=q.useRef(null);return q.useLayoutEffect(()=>{const c=(e==null?void 0:e.current)||a.current.parent,h=a.current;if(!(c instanceof tr))throw new Error('Decal must have a Mesh as parent or specify its "mesh" prop');const d={position:new N,rotation:new us,scale:new N(1,1,1)};if(c){Oa(d,{position:r,scale:s});const p=c.matrixWorld.clone();if(c.matrixWorld.identity(),!i||typeof i=="number"){const m=new kt;m.position.copy(d.position),m.lookAt(c.position),typeof i=="number"&&m.rotateZ(i),Oa(d,{rotation:m.rotation})}else Oa(d,{rotation:i});return h.geometry=new jQ(c,d.position,d.rotation,d.scale),l.current&&Oa(l.current,d),c.matrixWorld=p,()=>{h.geometry.dispose()}}},[e,...Dw(r),...Dw(s),...Dw(i)]),q.createElement("mesh",{ref:a},t||q.createElement("meshStandardMaterial",Ec({transparent:!0,polygonOffset:!0,polygonOffsetFactor:-10},o)),n&&q.createElement("mesh",{ref:l},q.createElement("boxGeometry",null),q.createElement("meshNormalMaterial",{wireframe:!0}),q.createElement("axesHelper",null)))}let gy=null;function pF(n,e,t){return r=>{t&&t(r),n&&(gy||(gy=new uY),gy.setDecoderPath(typeof n=="string"?n:"https://www.gstatic.com/draco/versioned/decoders/1.5.5/"),r.setDRACOLoader(gy)),e&&r.setMeshoptDecoder(typeof Lw=="function"?Lw():Lw)}}function ZC(n,e=!0,t=!0,r){return Vs(qC,n,pF(e,t,r))}ZC.preload=(n,e=!0,t=!0,r)=>Vs.preload(qC,n,pF(e,t,r));ZC.clear=n=>Vs.clear(qC,n);const eb=q.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:r,enableDamping:i=!0,onChange:s,onStart:o,onEnd:a,...l},c)=>{const h=Bi(T=>T.invalidate),d=Bi(T=>T.camera),p=Bi(T=>T.gl),m=Bi(T=>T.events),y=Bi(T=>T.setEvents),g=Bi(T=>T.set),_=Bi(T=>T.get),x=Bi(T=>T.performance),w=e||d,S=r||m.connected||p.domElement,M=q.useMemo(()=>new mQ(w),[w]);return $C(()=>{M.enabled&&M.update()},-1),q.useEffect(()=>(M.connect(S),()=>void M.dispose()),[S,t,M,h]),q.useEffect(()=>{const T=b=>{h(),t&&x.regress(),s&&s(b)},I=b=>{o&&o(b)},L=b=>{a&&a(b)};return M.addEventListener("change",T),M.addEventListener("start",I),M.addEventListener("end",L),()=>{M.removeEventListener("start",I),M.removeEventListener("end",L),M.removeEventListener("change",T)}},[s,o,a,M,h,y]),q.useEffect(()=>{if(n){const T=_().controls;return g({controls:M}),()=>g({controls:T})}},[n,M]),q.createElement("primitive",Ec({ref:c,object:M,enableDamping:i},l))});function tb(n){return Vs(QC,n)}tb.preload=n=>Vs.preload(QC,n);tb.clear=n=>Vs.clear(QC,n);const pY=q.forwardRef(({children:n,speed:e=1,rotationIntensity:t=1,floatIntensity:r=1,floatingRange:i=[-.1,.1],...s},o)=>{const a=q.useRef(null),l=q.useRef(Math.random()*1e4);return $C(c=>{var h,d;const p=l.current+c.clock.getElapsedTime();a.current.rotation.x=Math.cos(p/4*e)/8*t,a.current.rotation.y=Math.sin(p/4*e)/8*t,a.current.rotation.z=Math.sin(p/4*e)/20*t;let m=Math.sin(p/4*e)/10;m=Oi.mapLinear(m,-.1,.1,(h=i==null?void 0:i[0])!==null&&h!==void 0?h:-.1,(d=i==null?void 0:i[1])!==null&&d!==void 0?d:.1),a.current.position.y=m*r}),q.createElement("group",s,q.createElement("group",{ref:Yq([a,o])},n))});function mF({all:n,scene:e,camera:t}){const r=Bi(({gl:o})=>o),i=Bi(({camera:o})=>o),s=Bi(({scene:o})=>o);return q.useLayoutEffect(()=>{const o=[];n&&(e||s).traverse(c=>{c.visible===!1&&(o.push(c),c.visible=!0)}),r.compile(e||s,t||i);const a=new vC(128);new yC(.01,1e5,a).update(r,e||s),a.dispose(),o.forEach(c=>c.visible=!1)},[]),null}const nb=()=>{const{progress:n}=Qq();return k(qq,{as:"div",center:!0,style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[E("span",{className:"canvas-loader"}),k("p",{style:{fontSize:14,color:"#F1F1F1",fontWeight:800,marginTop:40},children:[n.toFixed(2),"%"]})]})},mY=n=>{const e=tb("Walking.fbx");return k("mesh",{children:[E("hemisphereLight",{intensity:.15,groundColor:"black"}),E("pointLight",{intensity:1}),E("primitive",{object:e,position:[0,-9.45,-1.5],scale:.13})]})},gY=()=>k(KC,{style:{height:600},frameloop:"demand",shadows:!0,camera:{position:[40,100,10],fov:15},gl:{preserveDrawing:!0},children:[k(q.Suspense,{fallback:E(nb,{}),children:[E(eb,{autoRotate:!0,enableZoom:!1,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/2}),E(mY,{})]}),E(mF,{all:!0})]}),yY="/money-can/assets/azzurra-77526470.png",vY="/money-can/assets/bianco-89b849c2.png",_Y="/money-can/assets/nero-3c5b028f.png",xY="/money-can/assets/bluette-17848b2b.png",wY="/money-can/assets/fragola-cf4a55e5.png",SY="/money-can/assets/verde_prato-8dc63d3d.png",AY=[{id:1,img:yY},{id:2,img:vY},{id:3,img:_Y},{id:4,img:xY},{id:5,img:wY},{id:6,img:SY}],MY=()=>E("div",{className:"constructor",children:k("div",{className:"container",children:[E("div",{className:"constructor__slider",children:k(Rp,{...{infinite:!0,slidesToShow:1,centerMode:!0,className:"center",slidesToScroll:1,vertical:!0,verticalSwiping:!0,beforeChange:function(e,t){console.log("before change",e,t)},afterChange:function(e){console.log("after change",e)}},children:[E("div",{className:"constructor__slider_card",children:E("img",{src:Ol,alt:""})}),E("div",{className:"constructor__slider_card",children:E("img",{src:Ol,alt:""})}),E("div",{className:"constructor__slider_card",children:E("img",{src:Ol,alt:""})}),E("div",{className:"constructor__slider_card",children:E("img",{src:Ol,alt:""})}),E("div",{className:"constructor__slider_card",children:E("img",{src:Ol,alt:""})}),E("div",{className:"constructor__slider_card",children:E("img",{src:Ol,alt:""})})]})}),k("div",{className:"constructor__model",children:[E(gY,{}),E("img",{src:HV,alt:""})]}),k("div",{className:"constructor__deps",children:[k("div",{className:"constructor__deps__types",children:[k("div",{className:"constructor__deps__textile",children:[E("h4",{children:""}),E("div",{children:AY.map(e=>E("span",{className:"constructor__textile",children:E("img",{src:e.img,alt:""})},e.id))})]}),k("div",{className:"constructor__deps__colors",children:[E("h4",{children:""}),k("div",{className:"constructor__deps__colors_block",children:[E("span",{className:"grey"}),E("span",{className:"violet"}),E("span",{className:"red"}),E("span",{className:"grey"}),E("span",{className:"khaki"}),E("span",{className:"dark"}),E("span",{className:"yellow"}),E("span",{className:"orange"}),E("span",{className:"green"}),E("span",{className:"white"})]})]}),k("div",{className:"constructor__deps__sizes",children:[E("h4",{children:""}),k("div",{children:[k("span",{children:[E("strong",{children:"XS"})," "]}),k("span",{children:[E("strong",{children:"S"})," "]}),k("span",{children:[E("strong",{children:"L"})," "]}),E("span",{children:E("strong",{children:"M"})}),k("span",{children:[E("strong",{children:"XL"})," "]}),k("span",{children:[E("strong",{children:"XXL"})," "]})]})]})]}),k("div",{className:"constructor__items__count",children:[E("h4",{children:"-"}),k("div",{children:[k("div",{children:[E(an,{children:E("img",{src:VV,alt:""})}),k("span",{children:[E("strong",{children:"300"})," "]}),E(an,{children:E("img",{src:WV,alt:""})})]}),E("p",{children:" : 300 "})]})]}),k("div",{className:"constructor__items__price",children:[k("div",{children:[E("h4",{children:""}),k("div",{children:[k("div",{children:[k("span",{children:[E("strong",{children:"0.00"})," RUB"]}),E("p",{children:" : 1 - 9 "})]}),k("div",{children:[k("span",{children:[E("strong",{children:"0.00"})," RUB"]}),E("span",{children:"  ."})]})]})]}),E("p",{children:"*     .     "})]}),k("div",{className:"constructor__btn",children:[E(an,{children:E("img",{src:zO,alt:""})}),E(an,{children:" "})]})]})]})}),EY=n=>E("div",{className:"skeleton"}),CY=({id:n,image:e,title:t,price:r,colors:i,sizes:s})=>{const[o,a]=q.useState(0),[l,c]=q.useState(0);return k("div",{className:"catalog__card",children:[E("div",{children:E("img",{src:e,alt:"  "})}),k("div",{className:"catalog__card_description",children:[E("h4",{children:t}),E("div",{className:"catalog__card__colors",children:i.map((h,d)=>E("span",{onClick:()=>a(d),className:o===d?"active":"",children:E("img",{src:h.img})},d))}),E("div",{className:"catalog__card__sizes",children:s.map((h,d)=>E("span",{onClick:()=>c(d),className:l===d?"active":"",children:E("strong",{children:h})},d))}),k("div",{className:"catalog__card_add",children:[k("p",{children:[" ",r," ."]}),k(an,{children:[E("img",{src:zO,alt:""}),"4"]})]})]})]},n)},bY=({searchedCatalogItems:n,isLoading:e})=>E("div",{className:"catalog__cards",children:e?[...new Array(6)].map((t,r)=>E(EY,{},r)):n.map(t=>E(CY,{...t},t.image))}),TY=({isVisiblePopup:n})=>E("svg",{width:"10",height:"6",viewBox:"0 0 10 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:n?"rotated":"",children:E("path",{d:"M10 5C10 5.16927 9.93815 5.31576 9.81445 5.43945C9.69075 5.56315 9.54427 5.625 9.375 5.625H0.625C0.455729 5.625 0.309245 5.56315 0.185547 5.43945C0.061849 5.31576 0 5.16927 0 5C0 4.83073 0.061849 4.68424 0.185547 4.56055L4.56055 0.185547C4.68424 0.061849 4.83073 0 5 0C5.16927 0 5.31576 0.061849 5.43945 0.185547L9.81445 4.56055C9.93815 4.68424 10 4.83073 10 5Z",fill:"#2C2C2C"})}),IY=()=>E("svg",{id:"Layer_1",version:"1.1",viewBox:"0 0 512 512",width:"512px",xmlSpace:"preserve",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:E("path",{d:"M448.3,424.7L335,311.3c20.8-26,33.3-59.1,33.3-95.1c0-84.1-68.1-152.2-152-152.2c-84,0-152,68.2-152,152.2  s68.1,152.2,152,152.2c36.2,0,69.4-12.7,95.5-33.8L425,448L448.3,424.7z M120.1,312.6c-25.7-25.7-39.8-59.9-39.8-96.3  s14.2-70.6,39.8-96.3S180,80,216.3,80c36.3,0,70.5,14.2,96.2,39.9s39.8,59.9,39.8,96.3s-14.2,70.6-39.8,96.3  c-25.7,25.7-59.9,39.9-96.2,39.9C180,352.5,145.8,338.3,120.1,312.6z",fill:"rgba(91, 91, 91, 1)"})}),PY=({setSearchQuary:n})=>E("svg",{onClick:()=>n(""),enableBackground:"new 0 0 128 128",height:"25px",id:"Layer_1",version:"1.1",viewBox:"0 0 128 128",width:"25px",xmlSpace:"preserve",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:E("g",{children:E("g",{children:E("path",{fill:"rgba(91, 91, 91, 1)",d:"M84.815,43.399c-0.781-0.782-2.047-0.782-2.828,0L64.032,61.356L46.077,43.399c-0.781-0.782-2.047-0.782-2.828,0    c-0.781,0.781-0.781,2.047,0,2.828l17.955,17.957L43.249,82.141c-0.781,0.78-0.781,2.047,0,2.828    c0.391,0.39,0.902,0.585,1.414,0.585s1.023-0.195,1.414-0.585l17.955-17.956l17.955,17.956c0.391,0.39,0.902,0.585,1.414,0.585    s1.023-0.195,1.414-0.585c0.781-0.781,0.781-2.048,0-2.828L66.86,64.184l17.955-17.957C85.597,45.447,85.597,44.18,84.815,43.399z     M64.032,14.054c-27.642,0-50.129,22.487-50.129,50.127c0.002,27.643,22.491,50.131,50.133,50.131    c27.639,0,50.125-22.489,50.125-50.131C114.161,36.541,91.674,14.054,64.032,14.054z M64.036,110.313h-0.002    c-25.435,0-46.129-20.695-46.131-46.131c0-25.435,20.693-46.127,46.129-46.127s46.129,20.693,46.129,46.127    C110.161,89.617,89.47,110.313,64.036,110.313z"})})})}),RY=({catalogItems:n,setCatalogItems:e,setActiveSort:t,activeSort:r})=>{const i=[{name:"",type:"rating"},{name:"",type:"price"},{name:"",type:"title"},{name:"",type:"male"},{name:"",type:"female"},{name:"",type:"child"}],[s,o]=q.useState(!1);//! 
const a=c=>{t(c);const h=n.sort((d,p)=>d[c.type].localeCompare(p[c.type]));e(h)},l=c=>{a&&a(c),t(c),o(!1)};return k("div",{className:"sort-popup",children:[k("p",{className:"sort-popup__name d-flex align-items-center gap-2",onClick:()=>o(!s),children:[E(TY,{isVisiblePopup:s,className:"sort__lable"}),"  : ",E("strong",{children:r.name})]}),s&&E("div",{className:"sort__popup",children:E("ul",{className:"d-flex flex-column align-items-start",children:i.map((c,h)=>E("li",{className:r.type===c.type?"active":"",onClick:()=>l(c),children:c.name},`${c.id}_${h}`))})})]})},LY=["","","","","","","","","",""],DY=({activeCategory:n,setActiveCategory:e,filterPizzas:t,catalogItems:r,setCatalogItems:i,activeSort:s,setActiveSort:o})=>{const a=l=>{e(l),t(l)};return E("div",{className:"catalog__category__filter d-flex align-items-center",children:k("ul",{id:"style__scroll",children:[E("li",{className:n===""?"active":"",onClick:()=>a(""),children:""}),LY.map((l,c)=>E("li",{onClick:()=>a(c),className:n===c?"active":"",children:l},c))]})})};var pM={},BY={get exports(){return pM},set exports(n){pM=n}};(function(n,e){(function(t,r){n.exports=r(q)})(Qf,t=>(()=>{var r={703:(a,l,c)=>{var h=c(414);function d(){}function p(){}p.resetWarningCache=d,a.exports=function(){function m(_,x,w,S,M,T){if(T!==h){var I=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw I.name="Invariant Violation",I}}function y(){return m}m.isRequired=m;var g={array:m,bigint:m,bool:m,func:m,number:m,object:m,string:m,symbol:m,any:m,arrayOf:y,element:m,elementType:m,instanceOf:y,node:m,objectOf:y,oneOf:y,oneOfType:y,shape:y,exact:y,checkPropTypes:p,resetWarningCache:d};return g.PropTypes=g,g}},697:(a,l,c)=>{a.exports=c(703)()},414:a=>{a.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},98:a=>{a.exports=t}},i={};function s(a){var l=i[a];if(l!==void 0)return l.exports;var c=i[a]={exports:{}};return r[a](c,c.exports,s),c.exports}s.n=a=>{var l=a&&a.__esModule?()=>a.default:()=>a;return s.d(l,{a:l}),l},s.d=(a,l)=>{for(var c in l)s.o(l,c)&&!s.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:l[c]})},s.o=(a,l)=>Object.prototype.hasOwnProperty.call(a,l),s.r=a=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o={};return(()=>{s.r(o),s.d(o,{default:()=>G});var a=s(98),l=s.n(a),c=s(697),h=s.n(c);function d(){return d=Object.assign?Object.assign.bind():function(V){for(var F=1;F<arguments.length;F++){var J=arguments[F];for(var X in J)Object.prototype.hasOwnProperty.call(J,X)&&(V[X]=J[X])}return V},d.apply(this,arguments)}var p=function(V){var F=V.pageClassName,J=V.pageLinkClassName,X=V.page,ne=V.selected,le=V.activeClassName,U=V.activeLinkClassName,W=V.getEventListener,B=V.pageSelectedHandler,ie=V.href,z=V.extraAriaContext,te=V.pageLabelBuilder,ae=V.rel,Q=V.ariaLabel||"Page "+X+(z?" "+z:""),we=null;return ne&&(we="page",Q=V.ariaLabel||"Page "+X+" is your current page",F=F!==void 0?F+" "+le:le,J!==void 0?U!==void 0&&(J=J+" "+U):J=U),l().createElement("li",{className:F},l().createElement("a",d({rel:ae,role:ie?void 0:"button",className:J,href:ie,tabIndex:ne?"-1":"0","aria-label":Q,"aria-current":we,onKeyPress:B},W(B)),te(X)))};p.propTypes={pageSelectedHandler:h().func.isRequired,selected:h().bool.isRequired,pageClassName:h().string,pageLinkClassName:h().string,activeClassName:h().string,activeLinkClassName:h().string,extraAriaContext:h().string,href:h().string,ariaLabel:h().string,page:h().number.isRequired,getEventListener:h().func.isRequired,pageLabelBuilder:h().func.isRequired,rel:h().string};const m=p;function y(){return y=Object.assign?Object.assign.bind():function(V){for(var F=1;F<arguments.length;F++){var J=arguments[F];for(var X in J)Object.prototype.hasOwnProperty.call(J,X)&&(V[X]=J[X])}return V},y.apply(this,arguments)}var g=function(V){var F=V.breakLabel,J=V.breakClassName,X=V.breakLinkClassName,ne=V.breakHandler,le=V.getEventListener,U=J||"break";return l().createElement("li",{className:U},l().createElement("a",y({className:X,role:"button",tabIndex:"0",onKeyPress:ne},le(ne)),F))};g.propTypes={breakLabel:h().oneOfType([h().string,h().node]),breakClassName:h().string,breakLinkClassName:h().string,breakHandler:h().func.isRequired,getEventListener:h().func.isRequired};const _=g;function x(V){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return V??F}function w(V){return w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},w(V)}function S(){return S=Object.assign?Object.assign.bind():function(V){for(var F=1;F<arguments.length;F++){var J=arguments[F];for(var X in J)Object.prototype.hasOwnProperty.call(J,X)&&(V[X]=J[X])}return V},S.apply(this,arguments)}function M(V,F){for(var J=0;J<F.length;J++){var X=F[J];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(V,X.key,X)}}function T(V,F){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(J,X){return J.__proto__=X,J},T(V,F)}function I(V,F){if(F&&(w(F)==="object"||typeof F=="function"))return F;if(F!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L(V)}function L(V){if(V===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V}function b(V){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(F){return F.__proto__||Object.getPrototypeOf(F)},b(V)}function R(V,F,J){return F in V?Object.defineProperty(V,F,{value:J,enumerable:!0,configurable:!0,writable:!0}):V[F]=J,V}var D=function(V){(function(W,B){if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function");W.prototype=Object.create(B&&B.prototype,{constructor:{value:W,writable:!0,configurable:!0}}),Object.defineProperty(W,"prototype",{writable:!1}),B&&T(W,B)})(U,V);var F,J,X,ne,le=(X=U,ne=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var W,B=b(X);if(ne){var ie=b(this).constructor;W=Reflect.construct(B,arguments,ie)}else W=B.apply(this,arguments);return I(this,W)});function U(W){var B,ie;return function(z,te){if(!(z instanceof te))throw new TypeError("Cannot call a class as a function")}(this,U),R(L(B=le.call(this,W)),"handlePreviousPage",function(z){var te=B.state.selected;B.handleClick(z,null,te>0?te-1:void 0,{isPrevious:!0})}),R(L(B),"handleNextPage",function(z){var te=B.state.selected,ae=B.props.pageCount;B.handleClick(z,null,te<ae-1?te+1:void 0,{isNext:!0})}),R(L(B),"handlePageSelected",function(z,te){if(B.state.selected===z)return B.callActiveCallback(z),void B.handleClick(te,null,void 0,{isActive:!0});B.handleClick(te,null,z)}),R(L(B),"handlePageChange",function(z){B.state.selected!==z&&(B.setState({selected:z}),B.callCallback(z))}),R(L(B),"getEventListener",function(z){return R({},B.props.eventListener,z)}),R(L(B),"handleClick",function(z,te,ae){var Q=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},we=Q.isPrevious,Ae=we!==void 0&&we,Oe=Q.isNext,ze=Oe!==void 0&&Oe,be=Q.isBreak,Ee=be!==void 0&&be,he=Q.isActive,fe=he!==void 0&&he;z.preventDefault?z.preventDefault():z.returnValue=!1;var xe=B.state.selected,Ge=B.props.onClick,Te=ae;if(Ge){var Fe=Ge({index:te,selected:xe,nextSelectedPage:ae,event:z,isPrevious:Ae,isNext:ze,isBreak:Ee,isActive:fe});if(Fe===!1)return;Number.isInteger(Fe)&&(Te=Fe)}Te!==void 0&&B.handlePageChange(Te)}),R(L(B),"handleBreakClick",function(z,te){var ae=B.state.selected;B.handleClick(te,z,ae<z?B.getForwardJump():B.getBackwardJump(),{isBreak:!0})}),R(L(B),"callCallback",function(z){B.props.onPageChange!==void 0&&typeof B.props.onPageChange=="function"&&B.props.onPageChange({selected:z})}),R(L(B),"callActiveCallback",function(z){B.props.onPageActive!==void 0&&typeof B.props.onPageActive=="function"&&B.props.onPageActive({selected:z})}),R(L(B),"getElementPageRel",function(z){var te=B.state.selected,ae=B.props,Q=ae.nextPageRel,we=ae.prevPageRel,Ae=ae.selectedPageRel;return te-1===z?we:te===z?Ae:te+1===z?Q:void 0}),R(L(B),"pagination",function(){var z=[],te=B.props,ae=te.pageRangeDisplayed,Q=te.pageCount,we=te.marginPagesDisplayed,Ae=te.breakLabel,Oe=te.breakClassName,ze=te.breakLinkClassName,be=B.state.selected;if(Q<=ae)for(var Ee=0;Ee<Q;Ee++)z.push(B.getPageElement(Ee));else{var he=ae/2,fe=ae-he;be>Q-ae/2?he=ae-(fe=Q-be):be<ae/2&&(fe=ae-(he=be));var xe,Ge,Te=function(Qe){return B.getPageElement(Qe)},Fe=[];for(xe=0;xe<Q;xe++){var Je=xe+1;Je<=we||Je>Q-we||xe>=be-he&&xe<=be+(be===0&&ae>1?fe-1:fe)?Fe.push({type:"page",index:xe,display:Te(xe)}):Ae&&Fe.length>0&&Fe[Fe.length-1].display!==Ge&&(ae>0||we>0)&&(Ge=l().createElement(_,{key:xe,breakLabel:Ae,breakClassName:Oe,breakLinkClassName:ze,breakHandler:B.handleBreakClick.bind(null,xe),getEventListener:B.getEventListener}),Fe.push({type:"break",index:xe,display:Ge}))}Fe.forEach(function(Qe,ft){var wt=Qe;Qe.type==="break"&&Fe[ft-1]&&Fe[ft-1].type==="page"&&Fe[ft+1]&&Fe[ft+1].type==="page"&&Fe[ft+1].index-Fe[ft-1].index<=2&&(wt={type:"page",index:Qe.index,display:Te(Qe.index)}),z.push(wt.display)})}return z}),W.initialPage!==void 0&&W.forcePage!==void 0&&console.warn("(react-paginate): Both initialPage (".concat(W.initialPage,") and forcePage (").concat(W.forcePage,") props are provided, which is discouraged.")+` Use exclusively forcePage prop for a controlled component.
See https://reactjs.org/docs/forms.html#controlled-components`),ie=W.initialPage?W.initialPage:W.forcePage?W.forcePage:0,B.state={selected:ie},B}return F=U,(J=[{key:"componentDidMount",value:function(){var W=this.props,B=W.initialPage,ie=W.disableInitialCallback,z=W.extraAriaContext,te=W.pageCount,ae=W.forcePage;B===void 0||ie||this.callCallback(B),z&&console.warn("DEPRECATED (react-paginate): The extraAriaContext prop is deprecated. You should now use the ariaLabelBuilder instead."),Number.isInteger(te)||console.warn("(react-paginate): The pageCount prop value provided is not an integer (".concat(te,"). Did you forget a Math.ceil()?")),B!==void 0&&B>te-1&&console.warn("(react-paginate): The initialPage prop provided is greater than the maximum page index from pageCount prop (".concat(B," > ").concat(te-1,").")),ae!==void 0&&ae>te-1&&console.warn("(react-paginate): The forcePage prop provided is greater than the maximum page index from pageCount prop (".concat(ae," > ").concat(te-1,")."))}},{key:"componentDidUpdate",value:function(W){this.props.forcePage!==void 0&&this.props.forcePage!==W.forcePage&&(this.props.forcePage>this.props.pageCount-1&&console.warn("(react-paginate): The forcePage prop provided is greater than the maximum page index from pageCount prop (".concat(this.props.forcePage," > ").concat(this.props.pageCount-1,").")),this.setState({selected:this.props.forcePage})),Number.isInteger(W.pageCount)&&!Number.isInteger(this.props.pageCount)&&console.warn("(react-paginate): The pageCount prop value provided is not an integer (".concat(this.props.pageCount,"). Did you forget a Math.ceil()?"))}},{key:"getForwardJump",value:function(){var W=this.state.selected,B=this.props,ie=B.pageCount,z=W+B.pageRangeDisplayed;return z>=ie?ie-1:z}},{key:"getBackwardJump",value:function(){var W=this.state.selected-this.props.pageRangeDisplayed;return W<0?0:W}},{key:"getElementHref",value:function(W){var B=this.props,ie=B.hrefBuilder,z=B.pageCount,te=B.hrefAllControls;if(ie)return te||W>=0&&W<z?ie(W+1,z,this.state.selected):void 0}},{key:"ariaLabelBuilder",value:function(W){var B=W===this.state.selected;if(this.props.ariaLabelBuilder&&W>=0&&W<this.props.pageCount){var ie=this.props.ariaLabelBuilder(W+1,B);return this.props.extraAriaContext&&!B&&(ie=ie+" "+this.props.extraAriaContext),ie}}},{key:"getPageElement",value:function(W){var B=this.state.selected,ie=this.props,z=ie.pageClassName,te=ie.pageLinkClassName,ae=ie.activeClassName,Q=ie.activeLinkClassName,we=ie.extraAriaContext,Ae=ie.pageLabelBuilder;return l().createElement(m,{key:W,pageSelectedHandler:this.handlePageSelected.bind(null,W),selected:B===W,rel:this.getElementPageRel(W),pageClassName:z,pageLinkClassName:te,activeClassName:ae,activeLinkClassName:Q,extraAriaContext:we,href:this.getElementHref(W),ariaLabel:this.ariaLabelBuilder(W),page:W+1,pageLabelBuilder:Ae,getEventListener:this.getEventListener})}},{key:"render",value:function(){var W=this.props.renderOnZeroPageCount;if(this.props.pageCount===0&&W!==void 0)return W&&W(this.props);var B=this.props,ie=B.disabledClassName,z=B.disabledLinkClassName,te=B.pageCount,ae=B.className,Q=B.containerClassName,we=B.previousLabel,Ae=B.previousClassName,Oe=B.previousLinkClassName,ze=B.previousAriaLabel,be=B.prevRel,Ee=B.nextLabel,he=B.nextClassName,fe=B.nextLinkClassName,xe=B.nextAriaLabel,Ge=B.nextRel,Te=this.state.selected,Fe=Te===0,Je=Te===te-1,Qe="".concat(x(Ae)).concat(Fe?" ".concat(x(ie)):""),ft="".concat(x(he)).concat(Je?" ".concat(x(ie)):""),wt="".concat(x(Oe)).concat(Fe?" ".concat(x(z)):""),j="".concat(x(fe)).concat(Je?" ".concat(x(z)):""),O=Fe?"true":"false",ce=Je?"true":"false";return l().createElement("ul",{className:ae||Q,role:"navigation","aria-label":"Pagination"},l().createElement("li",{className:Qe},l().createElement("a",S({className:wt,href:this.getElementHref(Te-1),tabIndex:Fe?"-1":"0",role:"button",onKeyPress:this.handlePreviousPage,"aria-disabled":O,"aria-label":ze,rel:be},this.getEventListener(this.handlePreviousPage)),we)),this.pagination(),l().createElement("li",{className:ft},l().createElement("a",S({className:j,href:this.getElementHref(Te+1),tabIndex:Je?"-1":"0",role:"button",onKeyPress:this.handleNextPage,"aria-disabled":ce,"aria-label":xe,rel:Ge},this.getEventListener(this.handleNextPage)),Ee)))}}])&&M(F.prototype,J),Object.defineProperty(F,"prototype",{writable:!1}),U}(a.Component);R(D,"propTypes",{pageCount:h().number.isRequired,pageRangeDisplayed:h().number,marginPagesDisplayed:h().number,previousLabel:h().node,previousAriaLabel:h().string,prevPageRel:h().string,prevRel:h().string,nextLabel:h().node,nextAriaLabel:h().string,nextPageRel:h().string,nextRel:h().string,breakLabel:h().oneOfType([h().string,h().node]),hrefBuilder:h().func,hrefAllControls:h().bool,onPageChange:h().func,onPageActive:h().func,onClick:h().func,initialPage:h().number,forcePage:h().number,disableInitialCallback:h().bool,containerClassName:h().string,className:h().string,pageClassName:h().string,pageLinkClassName:h().string,pageLabelBuilder:h().func,activeClassName:h().string,activeLinkClassName:h().string,previousClassName:h().string,nextClassName:h().string,previousLinkClassName:h().string,nextLinkClassName:h().string,disabledClassName:h().string,disabledLinkClassName:h().string,breakClassName:h().string,breakLinkClassName:h().string,extraAriaContext:h().string,ariaLabelBuilder:h().func,eventListener:h().string,renderOnZeroPageCount:h().func,selectedPageRel:h().string}),R(D,"defaultProps",{pageRangeDisplayed:2,marginPagesDisplayed:3,activeClassName:"selected",previousLabel:"Previous",previousClassName:"previous",previousAriaLabel:"Previous page",prevPageRel:"prev",prevRel:"prev",nextLabel:"Next",nextClassName:"next",nextAriaLabel:"Next page",nextPageRel:"next",nextRel:"next",breakLabel:"...",disabledClassName:"disabled",disableInitialCallback:!1,pageLabelBuilder:function(V){return V},eventListener:"onClick",renderOnZeroPageCount:void 0,selectedPageRel:"canonical",hrefAllControls:!1});const G=D})(),o})())})(BY);const OY=f0(pM),kY=({onChangePage:n})=>E("div",{className:"catalog__pagination",children:E(OY,{className:"pagination",breakLabel:"...",nextLabel:">",onPageChange:e=>n(e.selected+1),pageRangeDisplayed:3,pageCount:2,previousLabel:"<",renderOnZeroPageCount:null})}),NY="_wrapper_yu5if_1",FY="_input_yu5if_19",Bw={wrapper:NY,input:FY},UY=({searchQuary:n,setSearchQuary:e})=>k("div",{className:Bw.wrapper,children:[E(IY,{className:Bw.icon}),E("input",{value:n,onChange:t=>e(t.target.value),className:Bw.input,type:"text",placeholder:" ..."}),n&&E(PY,{setSearchQuary:e})]}),zY=({catalogItems:n,setCatalogItems:e,isLoading:t,activeCategory:r,setActiveCategory:i,filterPizzas:s,activeSort:o,setActiveSort:a,searchQuary:l,setSearchQuary:c,searchedCatalogItems:h,setCurrentPage:d})=>k("div",{className:"catalog",children:[k("div",{className:"container",children:[k("div",{className:"catalog__sort",children:[E("h2",{children:""}),k("div",{className:"d-flex align-items-center",children:[E(UY,{searchQuary:l,setSearchQuary:c}),E(RY,{catalogItems:n,setCatalogItems:e,activeSort:o,setActiveSort:a})]})]}),E(DY,{activeSort:o,setActiveSort:a,catalogItems:n,setCatalogItems:e,activeCategory:r,setActiveCategory:i,filterPizzas:s}),E(bY,{catalogItems:n,isLoading:t,searchedCatalogItems:h})]}),E(kY,{onChangePage:p=>d(p)}),E(Dc,{})]}),GY="/money-can/assets/about1-83284332.png",HY="/money-can/assets/about2-83a96a97.png",VY="/money-can/assets/desingHeader-62d0e9b5.jpg",WY=()=>k("div",{className:"about-us-page__section",children:[k("div",{children:[E("div",{children:E("img",{src:GY,alt:""})}),k("div",{children:[E("h4",{children:"Lorem ipsum"}),k("p",{children:["Lorem    2010-         .     , Womazing   ,         .     ,         .            -,     prt-a-porter ."," "]})]})]}),k("div",{children:[E("div",{children:E("img",{src:HY,alt:""})}),k("div",{children:[E("h4",{children:"Lorem ipsum"}),k("p",{children:["Lorem    2010-         .     , Womazing   ,         .     ,         .            -,     prt-a-porter ."," "]})]})]}),k("div",{children:[E("div",{children:E("img",{src:VY,alt:""})}),k("div",{children:[E("h4",{children:"Lorem ipsum"}),k("p",{children:["Lorem    2010-         .     , Womazing   ,         .     ,         .            -,     prt-a-porter ."," "]})]})]})]}),jY="/money-can/assets/pexels-ron-lach-9850088-a05de392.jpg",$Y=()=>E("section",{className:"about-us-page__comand",children:k("div",{className:"container",children:[E("h4",{children:" "}),E("p",{children:"                  .           , .            .         ,          ."}),E("figure",{children:E("img",{src:jY,alt:" ",title:" "})}),E(an,{to:"/cooperation",children:" "})]})}),JY=()=>k("div",{className:"about-us-page",children:[k("div",{className:"container",children:[E("h2",{children:" "}),E(WY,{}),E($Y,{})]}),E(Dc,{})]}),KY="/money-can/assets/boss-6dc6e1cc.jpg",qy="/money-can/assets/designStars-2927c50b.svg",XY="/money-can/assets/pexels-godisable-jacob-959751-83e71f46.jpg",qY="/money-can/assets/pexels-los-muertos-crew-8030150-a9865f14.jpg",QY="/money-can/assets/pexels-nappy-3097438-95e7e0f6.jpg",YY="/money-can/assets/pexels-sachin-bharti-1631181-f835a235.jpg",yy="/money-can/assets/pexels-anubhaw-anand-3756086-4d503552.jpg",Qy=()=>E("section",{className:"design-boss__works",children:k("div",{className:"container",children:[E("h4",{children:""}),k(Rp,{className:"design-boss__works__cards",...{infinite:!0,autoplay:!0,speed:500,slidesToShow:3,slidesToScroll:3,responsive:[{breakpoint:1024,settings:{slidesToShow:2,slidesToScroll:1,infinite:!0,dots:!1}},{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]},children:[E("div",{className:"design-boss__works__card",children:E(Li,{to:"/constructor",children:E("img",{src:Ol,alt:""})})}),E("div",{className:"design-boss__works__card",children:E(Li,{to:"/constructor",children:E("img",{src:XY,alt:""})})}),E("div",{className:"design-boss__works__card",children:E(Li,{to:"/constructor",children:E("img",{src:qY,alt:""})})}),E("div",{className:"design-boss__works__card",children:E(Li,{to:"/constructor",children:E("img",{src:QY,alt:""})})}),E("div",{className:"design-boss__works__card",children:E(Li,{to:"/constructor",children:E("img",{src:YY,alt:""})})}),E("div",{className:"design-boss__works__card",children:E(Li,{to:"/constructor",children:E("img",{src:yy,alt:""})})}),E("div",{className:"design-boss__works__card",children:E(Li,{to:"/constructor",children:E("img",{src:yy,alt:""})})}),E("div",{className:"design-boss__works__card",children:E(Li,{to:"/constructor",children:E("img",{src:yy,alt:""})})}),E("div",{className:"design-boss__works__card",children:E(Li,{to:"/constructor",children:E("img",{src:yy,alt:""})})})]})]})}),CL=()=>E("section",{className:"design-department__boss",children:k("div",{className:"design-dep__bg",children:[k("div",{className:"container",children:[E("figure",{children:E("img",{src:KY,alt:" ",title:"  "})}),k("div",{children:[k("p",{children:[E("strong",{children:" :"}),"  "]}),k("p",{children:[E("strong",{children:":"}),"  ,  "]}),k("p",{children:[E("strong",{children:":"})," ",k("ul",{children:[k("li",{children:[" -  ",E("strong",{children:"2000"})," ."]}),k("li",{children:[" -  ",E("strong",{children:"1800"})," ."]}),k("li",{children:[" -  ",E("strong",{children:"2000"})," ."]}),k("li",{children:[" -  ",E("strong",{children:"500 "})," ."]}),k("li",{children:[" -  ",E("strong",{children:"1500"})," ."]})]})]}),E("figure",{children:E("img",{src:qy,alt:""})}),k("div",{className:"d-flex gap-2",children:[E(an,{children:" "}),E(an,{children:"  "})]})]})]}),E(Qy,{})]})}),ZY=()=>k("section",{className:"design-department",children:[E("section",{className:"design__description",children:E("section",{className:"container",children:k("div",{children:[E("h2",{children:" "}),E("p",{children:" -            .      ,            ,    .              ."})]})})}),E(CL,{}),E(CL,{}),E("section",{className:"des-dep__constructor",children:k("div",{className:"container",children:[k("h4",{children:[E("strong",{children:"3D"})," "]}),k("p",{children:["     , ,         "," "]}),E(an,{children:"  "})]})}),E(Dc,{})]}),eZ=()=>{const n=ZC("./planet/scene.gltf");return E("primitive",{object:n.scene,scale:2.5,"position-y":0,"rotation-y":0})},tZ=()=>E(KC,{shadows:!0,frameloop:"demand",gl:{preserveDrawingBuffer:!0},camera:{fov:45,near:.1,far:200,position:[-3,3,6]},children:k(q.Suspense,{fallback:E(nb,{}),children:[E(eb,{autoRotate:!0,enableZoom:!1,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/2}),E(eZ,{})]})}),nZ=()=>k("div",{className:"container",children:[E("figure",{children:E(tZ,{})}),k("form",{action:"",children:[E("h4",{children:" "}),E("label",{htmlFor:"email",children:" email"}),E("input",{required:!0,id:"email",type:"text",placeholder:" email"}),E("label",{htmlFor:"text",children:" ,     "}),E("textarea",{name:"",id:"text",cols:"30",rows:"10",children:","}),E(an,{type:"button",children:""})]})]}),rZ=()=>k("div",{className:"container",children:[E("h4",{children:" "}),k("div",{children:[k("div",{children:[E("span",{children:""}),E("p",{children:E("a",{href:"",children:"+ 996 12 21 11"})})]}),k("div",{children:[E("span",{children:"Email"}),k("p",{children:[E("a",{href:"",children:"moneycan@gmail.com"})," "]})]}),k("div",{children:[E("span",{children:""}),k("p",{children:[E("a",{href:"",children:". , . , 25"})," "]})]})]})]}),iZ=()=>k("div",{className:"container",children:[E("h4",{children:" "}),k("div",{children:[k("div",{children:[E("span",{children:""}),E("p",{children:E("a",{href:"",children:"+996 700 000 000"})})]}),k("div",{children:[E("span",{children:"  "}),k("p",{children:[E("a",{href:"",children:"+996 700 000 000"})," "]})]}),k("div",{children:[E("span",{children:"  "}),k("p",{children:[E("a",{href:"",children:"+996 700 000 000"})," "]})]}),k("div",{children:[E("span",{children:"  "}),k("p",{children:[E("a",{href:"",children:"+996 700 000 000"})," "]})]})]})]}),sZ=()=>k("section",{className:"contuct-page",children:[E("div",{className:"container contuct-page__header__text",children:E("h2",{children:""})}),E("section",{className:"contuct-page__form",children:E(nZ,{})}),E("section",{className:"contuct-page__company",children:E(rZ,{})}),E("section",{className:"contuct-page__comand",children:E(iZ,{})}),E("section",{className:"contuct__map",children:E("div",{className:"container",children:E("iframe",{src:"https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d11696.552555433744!2d74.60490565!3d42.86992839999999!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1sru!2skg!4v1677494983736!5m2!1sru!2skg",style:{border:0},allowfullscreen:"",loading:"lazy",referrerpolicy:"no-referrer-when-downgrade"})})})]}),oZ="/money-can/assets/trashBasket 1-9d02c15b.svg",vy="/money-can/assets/cartItem-c8ee8088.svg",_y="/money-can/assets/plus-square 1-3ebdc397.svg",xy="/money-can/assets/dash-square 1-b8b56e8c.svg",wy="/money-can/assets/x-square 1-dbbf21d1.svg",aZ=()=>k("section",{className:"shopping-cart",children:[k("div",{className:"container",children:[k("div",{className:"shopping-cart__header",children:[k("div",{children:[E("figure",{children:E("img",{src:fO,alt:""})}),E("h2",{children:""})]}),k(an,{children:[E("img",{src:oZ,alt:" "})," "]})]}),E("div",{className:"shopping-cart__extra",children:k("p",{children:[":",E("strong",{children:" "})]})}),k("section",{className:"shopping-cart__items",children:[k("section",{className:"shopping-cart__item",children:[k("div",{children:[E("figure",{children:E("img",{src:vy,alt:" ",title:" "})}),k("div",{className:"shopping-cart__items_item",children:[E("p",{children:" USA"}),k("p",{children:[E("strong",{children:"-:"}),".  "]}),k("p",{children:[E("strong",{children:":"}),""]}),k("p",{children:[E("strong",{children:":"}),""]}),k("p",{children:[E("strong",{children:":"}),"S"]})]})]}),k("div",{className:"shopping-cart__items_count",children:[E("img",{src:_y,alt:"  ",title:"  "}),E("span",{children:E("strong",{children:"300"})}),E("img",{src:xy,alt:"  ",title:"  "})]}),k("div",{className:"shopping-cart__items_price",children:[k("p",{children:[E("strong",{children:"25000 "})," ."]}),E("img",{src:wy,alt:" ",title:" "})]})]}),k("section",{className:"shopping-cart__item",children:[k("div",{children:[E("figure",{children:E("img",{src:vy,alt:" ",title:" "})}),k("div",{className:"shopping-cart__items_item",children:[E("p",{children:" USA"}),k("p",{children:[E("strong",{children:"-:"}),".  "]}),k("p",{children:[E("strong",{children:":"}),""]}),k("p",{children:[E("strong",{children:":"}),""]}),k("p",{children:[E("strong",{children:":"}),"S"]})]})]}),k("div",{className:"shopping-cart__items_count",children:[E("img",{src:_y,alt:"  ",title:"  "}),E("span",{children:E("strong",{children:"300"})}),E("img",{src:xy,alt:"  ",title:"  "})]}),k("div",{className:"shopping-cart__items_price",children:[k("p",{children:[E("strong",{children:"25000 "})," ."]}),E("img",{src:wy,alt:" ",title:" "})]})]}),k("section",{className:"shopping-cart__item",children:[k("div",{children:[E("figure",{children:E("img",{src:vy,alt:" ",title:" "})}),k("div",{className:"shopping-cart__items_item",children:[E("p",{children:" USA"}),k("p",{children:[E("strong",{children:"-:"}),".  "]}),k("p",{children:[E("strong",{children:":"}),""]}),k("p",{children:[E("strong",{children:":"}),""]}),k("p",{children:[E("strong",{children:":"}),"S"]})]})]}),k("div",{className:"shopping-cart__items_count",children:[E("img",{src:_y,alt:"  ",title:"  "}),E("span",{children:E("strong",{children:"300"})}),E("img",{src:xy,alt:"  ",title:"  "})]}),k("div",{className:"shopping-cart__items_price",children:[k("p",{children:[E("strong",{children:"25000 "})," ."]}),E("img",{src:wy,alt:" ",title:" "})]})]}),k("section",{className:"shopping-cart__item",children:[k("div",{children:[E("figure",{children:E("img",{src:vy,alt:" ",title:" "})}),k("div",{className:"shopping-cart__items_item",children:[E("p",{children:" USA"}),k("p",{children:[E("strong",{children:"-:"}),".  "]}),k("p",{children:[E("strong",{children:":"}),""]}),k("p",{children:[E("strong",{children:":"}),""]}),k("p",{children:[E("strong",{children:":"}),"S"]})]})]}),k("div",{className:"shopping-cart__items_count",children:[E("img",{src:_y,alt:"  ",title:"  "}),E("span",{children:E("strong",{children:"300"})}),E("img",{src:xy,alt:"  ",title:"  "})]}),k("div",{className:"shopping-cart__items_price",children:[k("p",{children:[E("strong",{children:"25000 "})," ."]}),E("img",{src:wy,alt:" ",title:" "})]})]})]}),k("section",{className:"shopping-cart__payment",children:[k("p",{children:[": ",E("strong",{children:"1500"})," ."]}),k("p",{children:[" : ",E("strong",{children:"125000"})," ."]}),E(an,{children:" "}),E(an,{children:" "})]})]}),E(Dc,{})]}),lZ="/money-can/assets/pexels-the-lazy-artist-gallery-1342609-692dedc9.jpg",cZ="/money-can/assets/pexels-angela-roma-7480096-2ec7a1b4.jpg",uZ="/money-can/assets/pexels-cottonbro-studio-4622423-261c1e96.jpg",hZ=()=>k("section",{className:"production",children:[E("section",{className:"production__description",children:k("div",{className:"container",children:[E("h2",{children:""}),E("p",{children:"    ,    ,      .       ,       .      ,      ,     .      .      ,  ,     ,    .      ,     ,     ,       .           ."})]})}),k("section",{className:"first-production",children:[k("div",{className:"container",children:[E("figure",{children:E("img",{src:lZ,alt:""})}),k("div",{children:[k("div",{children:[k("div",{children:[k("p",{children:[E("strong",{children:" :"}),"  "]}),k("p",{children:[E("strong",{children:":"})," ",k("ul",{children:[k("li",{children:[" -  ",E("strong",{children:"2000"})," ."]}),k("li",{children:[" -  ",E("strong",{children:"1800"})," ."]}),k("li",{children:[" -  ",E("strong",{children:"2000"})," ."]}),k("li",{children:[" -  ",E("strong",{children:"500 "})," ."]}),k("li",{children:[" -  ",E("strong",{children:"1500"})," ."]})]})]}),k("p",{children:[E("strong",{children:":"})," 200 .  "]}),k("p",{children:[E("strong",{children:" :"}),k("ul",{children:[E("li",{children:"15 "}),E("li",{children:"3 "})]})]})]}),E("figure",{children:E("img",{src:qy,alt:""})})]}),k("div",{className:"first-production_btn",children:[E(an,{children:" "})," ",E(an,{children:""})]})]})]}),E(Qy,{})]}),k("section",{className:"first-production",children:[k("div",{className:"container",children:[E("figure",{children:E("img",{src:cZ,alt:""})}),k("div",{children:[k("div",{children:[k("div",{children:[k("p",{children:[E("strong",{children:" :"}),"  "]}),k("p",{children:[E("strong",{children:":"})," ",k("ul",{children:[k("li",{children:[" -  ",E("strong",{children:"2000"})," ."]}),k("li",{children:[" -  ",E("strong",{children:"1800"})," ."]}),k("li",{children:[" -  ",E("strong",{children:"2000"})," ."]}),k("li",{children:[" -  ",E("strong",{children:"500 "})," ."]}),k("li",{children:[" -  ",E("strong",{children:"1500"})," ."]})]})]}),k("p",{children:[E("strong",{children:":"})," 200 .  "]}),k("p",{children:[E("strong",{children:" :"}),k("ul",{children:[E("li",{children:"15 "}),E("li",{children:"3 "})]})]})]}),E("figure",{children:E("img",{src:qy,alt:""})})]}),k("div",{className:"first-production_btn",children:[E(an,{children:" "})," ",E(an,{children:""})]})]})]}),E(Qy,{})," "]}),k("section",{className:"first-production",children:[k("div",{className:"container",children:[E("figure",{children:E("img",{src:uZ,alt:""})}),k("div",{children:[k("div",{children:[k("div",{children:[k("p",{children:[E("strong",{children:" :"}),"  "]}),k("p",{children:[E("strong",{children:":"})," ",k("ul",{children:[k("li",{children:[" -  ",E("strong",{children:"2000"})," ."]}),k("li",{children:[" -  ",E("strong",{children:"1800"})," ."]}),k("li",{children:[" -  ",E("strong",{children:"2000"})," ."]}),k("li",{children:[" -  ",E("strong",{children:"500 "})," ."]}),k("li",{children:[" -  ",E("strong",{children:"1500"})," ."]})]})]}),k("p",{children:[E("strong",{children:":"})," 200 .  "]}),k("p",{children:[E("strong",{children:" :"}),k("ul",{children:[E("li",{children:"15 "}),E("li",{children:"3 "})]})]})]}),E("figure",{children:E("img",{src:qy,alt:""})})]}),k("div",{className:"first-production_btn",children:[E(an,{children:" "}),E(an,{children:""})]})]})]}),E(Qy,{})]}),E(Dc,{})]}),fZ="/money-can/assets/Arrow 1-eaf353f4.svg",dZ="/money-can/assets/cartAdd-83a06265.svg",pZ="/money-can/assets/bag-e17116bb.svg",gF="/money-can/assets/currency-d2a2ebfa.svg",mZ=()=>k("div",{className:"container",children:[E("h2",{children:" "}),k("section",{className:"cooperation__catalog",children:[E("div",{className:"cooperation__catalog_arrow",children:E("img",{src:fZ,alt:""})}),k("div",{className:"cooperation__catalog_block",children:[k("div",{children:[E("img",{src:dZ,alt:""}),E("h4",{children:"   "})]}),E("img",{src:pZ,alt:""})," ",E("strong",{children:" "}),k("ol",{children:[E("li",{children:"   ,     ,   .   "}),E("li",{children:"         , , ,   ."}),E("li",{children:"         "}),E("li",{children:"     "}),E("li",{children:"   "})]}),E("img",{src:gF,alt:""}),E("strong",{children:""}),k("ol",{children:[E("li",{children:"         (       )"}),E("li",{children:"       "}),E("li",{children:"    "}),E("li",{children:"       "}),E("li",{children:"          (  1 - 2 )"}),E("li",{children:"     (  1-3 ,       )"}),k("li",{children:["     30    ,       ,  "," "]})]})]})]})]}),gZ="/money-can/assets/Arrow 2-7afdd446.svg",yZ="/money-can/assets/build-8fcf050e.svg",vZ=()=>k("div",{className:"container",children:[E("div",{className:"cooperation__production_arrow",children:E("img",{src:gZ,alt:""})}),k("div",{className:"cooperation__production_block",children:[k("div",{children:[E("img",{src:yZ,alt:""}),E("h4",{children:" : "})]}),k("ol",{children:[E("li",{children:" ,          "}),E("li",{children:"   "}),k("li",{children:["     (.. ,  ,   .)"," "]})]}),E("img",{src:gF,alt:""}),E("strong",{children:""}),k("ol",{children:[E("li",{children:"      "}),E("li",{children:" 50%        "}),E("li",{children:"       "}),E("li",{children:" 1 - 2        "}),E("li",{children:"        "}),E("li",{children:"       "})]})]})]}),_Z="/money-can/assets/Arrow 3-3927bd56.svg",xZ="/money-can/assets/work-7254ef38.svg",wZ=()=>k("div",{className:"container",children:[E("div",{className:"how-we-work__arrow",children:E("img",{src:_Z,alt:""})}),k("div",{className:"how-we-work__content",children:[k("div",{children:[E("img",{src:xZ,alt:""}),E("h4",{children:"  "})]}),k("ol",{children:[E("li",{children:"   "}),E("li",{children:"  "}),E("li",{children:"   "}),E("li",{children:"  - , ,   ."}),k("li",{children:[" ",k("ul",{children:[E("li",{children:""}),E("li",{children:"      "}),E("li",{children:"     "}),E("li",{children:" "})]})]})]})]})]}),yF="/money-can/assets/Arrow 4-45489708.svg",SZ="/money-can/assets/min-5c86178e.svg",AZ="/money-can/assets/sport-e86448fc.svg",MZ="/money-can/assets/bluzka-28edfa6c.svg",EZ="/money-can/assets/rubashka-7a9655d4.svg",CZ="/money-can/assets/palto-bc9d83e0.svg",bZ="/money-can/assets/classic-648c238b.svg",TZ="/money-can/assets/dress-3ad99d20.svg",IZ="/money-can/assets/futbolka-7433f4c2.svg",PZ="/money-can/assets/pants-5476a2e7.svg",RZ="/money-can/assets/kurtka-31552027.svg",LZ=()=>k("div",{className:"container",children:[E("div",{className:"cooperation__min_arrow",children:E("img",{src:yF,alt:""})}),k("div",{className:"cooperation__min_content",children:[k("div",{children:[E("img",{src:SZ,alt:""}),E("h4",{children:" "})]}),k("ol",{children:[k("li",{children:[E("img",{src:AZ,alt:""}),"   5    .  20    "]}),k("li",{children:[E("img",{src:MZ,alt:""})," , , ,  3    .  40-80   "]}),k("li",{children:[E("img",{src:EZ,alt:""}),"  3    .  40-70   "]}),k("li",{children:[E("img",{src:CZ,alt:""}),"  4    .  15-30   1 "]}),k("li",{children:[E("img",{src:bZ,alt:""}),"   5    .  35-45   "]}),k("li",{children:[E("img",{src:TZ,alt:""}),"  3    .  40-70   "]}),k("li",{children:[E("img",{src:IZ,alt:""}),"  3    .  100-140   "]}),k("li",{children:[E("img",{src:PZ,alt:""}),"    3    .  65-95   "]}),k("li",{children:[E("img",{src:RZ,alt:""}),"  4    .  15-30   "]})]})]})]}),DZ="/money-can/assets/Arrow 6-a7443054.svg",BZ="/money-can/assets/time-172bb8ef.svg",OZ=()=>k("div",{className:"container",children:[E("div",{className:"cooperation__time_arrow",children:E("img",{src:DZ,alt:""})}),k("div",{className:"cooperation__time_content",children:[k("div",{children:[E("img",{src:BZ,alt:""}),E("h4",{children:""})]}),k("ol",{children:[E("li",{children:"  2-3 "}),E("li",{children:"        "})]})]})]}),kZ="/money-can/assets/delivery-10b8215e.svg",NZ="/money-can/assets/delAvto-bdf7d75e.svg",FZ="/money-can/assets/delAvia-06f99d75.svg",UZ=()=>k("div",{className:"container",children:[E("div",{className:"cooperation__delivery_arrow",children:E("img",{src:yF,alt:""})}),k("div",{className:"cooperation__delivery_content",children:[k("div",{children:[E("img",{src:kZ,alt:""}),E("h4",{children:""})]}),k("ul",{children:[k("li",{children:[E("img",{src:NZ,alt:""})," "]}),E("li",{className:"delLi",children:" 4-15   "}),E("li",{className:"delLi",children:" 35-40 /  "}),k("li",{children:[E("img",{src:FZ,alt:""})," "]}),E("li",{className:"delLi",children:" 2-3   "}),E("li",{className:"delLi",children:" 150-190 /  "}),E("li",{className:"delLi delLiCol",children:"    ,      (),   ,         ."}),E("li",{className:"delLi delLiCol",children:":     (  ).         30/.          .             ,   ."})]})]})]}),zZ=()=>k("section",{className:"cooperation",children:[E("div",{className:"cooperation__catalog_section",children:E(mZ,{})}),E("section",{className:"cooperation-production",children:E(vZ,{})}),E("section",{className:"how-we-work",children:E(wZ,{})}),E("section",{className:"cooperation__min",children:E(LZ,{})}),E("section",{className:"cooperation__limits",children:E(OZ,{})}),E("section",{className:"cooperation__delivery",children:E(UZ,{})}),E("div",{className:"cooperation__arr_back",children:E(an,{children:" "})}),E(Dc,{})]});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vF=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},GZ=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],a=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},_F={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(t[h],t[d],t[p],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(vF(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):GZ(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw Error();const p=s<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),d!==64){const y=c<<6&192|d;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},HZ=function(n){const e=vF(n);return _F.encodeByteArray(e,!0)},Wv=function(n){return HZ(n).replace(/\./g,"")},VZ=function(n){try{return _F.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WZ(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jZ=()=>WZ().__FIREBASE_DEFAULTS__,$Z=()=>{if(typeof process>"u"||typeof process.env>"u")return;const n={}.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},JZ=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&VZ(n[1]);return e&&JSON.parse(e)},xF=()=>{try{return jZ()||$Z()||JZ()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},KZ=n=>{var e,t;return(t=(e=xF())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},XZ=n=>{const e=KZ(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},qZ=()=>{var n;return(n=xF())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QZ{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YZ(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n),a="";return[Wv(JSON.stringify(t)),Wv(JSON.stringify(o)),a].join(".")}function ZZ(){try{return typeof indexedDB=="object"}catch{return!1}}function eee(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tee="FirebaseError";class Qh extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=tee,Object.setPrototypeOf(this,Qh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wF.prototype.create)}}class wF{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?nee(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Qh(i,a,r)}}function nee(n,e){return n.replace(ree,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const ree=/\{\$([^}]+)}/g;function mM(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(bL(s)&&bL(o)){if(!mM(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function bL(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(n){return n&&n._delegate?n._delegate:n}class up{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iee=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new QZ;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(oee(e))try{this.getOrInitializeService({instanceIdentifier:zl})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=zl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zl){return this.instances.has(e)}getOptions(e=zl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:see(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=zl){return this.component?this.component.multipleInstances?e:zl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function see(n){return n===zl?void 0:n}function oee(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aee{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new iee(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Qt||(Qt={}));const lee={debug:Qt.DEBUG,verbose:Qt.VERBOSE,info:Qt.INFO,warn:Qt.WARN,error:Qt.ERROR,silent:Qt.SILENT},cee=Qt.INFO,uee={[Qt.DEBUG]:"log",[Qt.VERBOSE]:"log",[Qt.INFO]:"info",[Qt.WARN]:"warn",[Qt.ERROR]:"error"},hee=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=uee[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class SF{constructor(e){this.name=e,this._logLevel=cee,this._logHandler=hee,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lee[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qt.DEBUG,...e),this._logHandler(this,Qt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qt.VERBOSE,...e),this._logHandler(this,Qt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qt.INFO,...e),this._logHandler(this,Qt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qt.WARN,...e),this._logHandler(this,Qt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qt.ERROR,...e),this._logHandler(this,Qt.ERROR,...e)}}const fee=(n,e)=>e.some(t=>n instanceof t);let TL,IL;function dee(){return TL||(TL=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pee(){return IL||(IL=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const AF=new WeakMap,gM=new WeakMap,MF=new WeakMap,Ow=new WeakMap,rb=new WeakMap;function mee(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Ka(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&AF.set(t,n)}).catch(()=>{}),rb.set(e,n),e}function gee(n){if(gM.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});gM.set(n,e)}let yM={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return gM.get(n);if(e==="objectStoreNames")return n.objectStoreNames||MF.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ka(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function yee(n){yM=n(yM)}function vee(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(kw(this),e,...t);return MF.set(r,e.sort?e.sort():[e]),Ka(r)}:pee().includes(n)?function(...e){return n.apply(kw(this),e),Ka(AF.get(this))}:function(...e){return Ka(n.apply(kw(this),e))}}function _ee(n){return typeof n=="function"?vee(n):(n instanceof IDBTransaction&&gee(n),fee(n,dee())?new Proxy(n,yM):n)}function Ka(n){if(n instanceof IDBRequest)return mee(n);if(Ow.has(n))return Ow.get(n);const e=_ee(n);return e!==n&&(Ow.set(n,e),rb.set(e,n)),e}const kw=n=>rb.get(n);function xee(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=Ka(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ka(o.result),l.oldVersion,l.newVersion,Ka(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}const wee=["get","getKey","getAll","getAllKeys","count"],See=["put","add","delete","clear"],Nw=new Map;function PL(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Nw.get(e))return Nw.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=See.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||wee.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),i&&l.done]))[0]};return Nw.set(e,s),s}yee(n=>({...n,get:(e,t,r)=>PL(e,t)||n.get(e,t,r),has:(e,t)=>!!PL(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aee{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Mee(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Mee(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const vM="@firebase/app",RL="0.9.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=new SF("@firebase/app"),Eee="@firebase/app-compat",Cee="@firebase/analytics-compat",bee="@firebase/analytics",Tee="@firebase/app-check-compat",Iee="@firebase/app-check",Pee="@firebase/auth",Ree="@firebase/auth-compat",Lee="@firebase/database",Dee="@firebase/database-compat",Bee="@firebase/functions",Oee="@firebase/functions-compat",kee="@firebase/installations",Nee="@firebase/installations-compat",Fee="@firebase/messaging",Uee="@firebase/messaging-compat",zee="@firebase/performance",Gee="@firebase/performance-compat",Hee="@firebase/remote-config",Vee="@firebase/remote-config-compat",Wee="@firebase/storage",jee="@firebase/storage-compat",$ee="@firebase/firestore",Jee="@firebase/firestore-compat",Kee="firebase",Xee="9.17.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M="[DEFAULT]",qee={[vM]:"fire-core",[Eee]:"fire-core-compat",[bee]:"fire-analytics",[Cee]:"fire-analytics-compat",[Iee]:"fire-app-check",[Tee]:"fire-app-check-compat",[Pee]:"fire-auth",[Ree]:"fire-auth-compat",[Lee]:"fire-rtdb",[Dee]:"fire-rtdb-compat",[Bee]:"fire-fn",[Oee]:"fire-fn-compat",[kee]:"fire-iid",[Nee]:"fire-iid-compat",[Fee]:"fire-fcm",[Uee]:"fire-fcm-compat",[zee]:"fire-perf",[Gee]:"fire-perf-compat",[Hee]:"fire-rc",[Vee]:"fire-rc-compat",[Wee]:"fire-gcs",[jee]:"fire-gcs-compat",[$ee]:"fire-fst",[Jee]:"fire-fst-compat","fire-js":"fire-js",[Kee]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v=new Map,xM=new Map;function Qee(n,e){try{n.container.addComponent(e)}catch(t){Cc.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Jv(n){const e=n.name;if(xM.has(e))return Cc.debug(`There were multiple attempts to register component ${e}.`),!1;xM.set(e,n);for(const t of $v.values())Qee(t,n);return!0}function Yee(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zee={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Xa=new wF("app","Firebase",Zee);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ete{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new up("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tte=Xee;function EF(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:_M,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Xa.create("bad-app-name",{appName:String(i)});if(t||(t=qZ()),!t)throw Xa.create("no-options");const s=$v.get(i);if(s){if(mM(t,s.options)&&mM(r,s.config))return s;throw Xa.create("duplicate-app",{appName:i})}const o=new aee(i);for(const l of xM.values())o.addComponent(l);const a=new ete(t,r,o);return $v.set(i,a),a}function nte(n=_M){const e=$v.get(n);if(!e&&n===_M)return EF();if(!e)throw Xa.create("no-app",{appName:n});return e}function eh(n,e,t){var r;let i=(r=qee[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cc.warn(a.join(" "));return}Jv(new up(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rte="firebase-heartbeat-database",ite=1,hp="firebase-heartbeat-store";let Fw=null;function CF(){return Fw||(Fw=xee(rte,ite,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(hp)}}}).catch(n=>{throw Xa.create("idb-open",{originalErrorMessage:n.message})})),Fw}async function ste(n){try{return(await CF()).transaction(hp).objectStore(hp).get(bF(n))}catch(e){if(e instanceof Qh)Cc.warn(e.message);else{const t=Xa.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Cc.warn(t.message)}}}async function LL(n,e){try{const r=(await CF()).transaction(hp,"readwrite");return await r.objectStore(hp).put(e,bF(n)),r.done}catch(t){if(t instanceof Qh)Cc.warn(t.message);else{const r=Xa.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Cc.warn(r.message)}}}function bF(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ote=1024,ate=30*24*60*60*1e3;class lte{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ute(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=DL();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=ate}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=DL(),{heartbeatsToSend:t,unsentEntries:r}=cte(this._heartbeatsCache.heartbeats),i=Wv(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function DL(){return new Date().toISOString().substring(0,10)}function cte(n,e=ote){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),BL(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),BL(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class ute{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ZZ()?eee().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await ste(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return LL(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return LL(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function BL(n){return Wv(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hte(n){Jv(new up("platform-logger",e=>new Aee(e),"PRIVATE")),Jv(new up("heartbeat",e=>new lte(e),"PRIVATE")),eh(vM,RL,n),eh(vM,RL,"esm2017"),eh("fire-js","")}hte("");var fte="firebase",dte="9.17.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */eh(fte,dte,"app");var pte=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tt,ib=ib||{},mt=pte||self;function Kv(){}function n_(n){var e=typeof n;return e=e!="object"?e:n?Array.isArray(n)?"array":e:"null",e=="array"||e=="object"&&typeof n.length=="number"}function Yp(n){var e=typeof n;return e=="object"&&n!=null||e=="function"}function mte(n){return Object.prototype.hasOwnProperty.call(n,Uw)&&n[Uw]||(n[Uw]=++gte)}var Uw="closure_uid_"+(1e9*Math.random()>>>0),gte=0;function yte(n,e,t){return n.call.apply(n.bind,arguments)}function vte(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Jr(n,e,t){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Jr=yte:Jr=vte,Jr.apply(null,arguments)}function Sy(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Lr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function pl(){this.s=this.s,this.o=this.o}var _te=0;pl.prototype.s=!1;pl.prototype.na=function(){!this.s&&(this.s=!0,this.M(),_te!=0)&&mte(this)};pl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const TF=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if(typeof n=="string")return typeof e!="string"||e.length!=1?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function sb(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function OL(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(n_(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let o=0;o<s;o++)n[i+o]=r[o]}else n.push(r)}}function Kr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Kr.prototype.h=function(){this.defaultPrevented=!0};var xte=function(){if(!mt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{mt.addEventListener("test",Kv,e),mt.removeEventListener("test",Kv,e)}catch{}return n}();function Xv(n){return/^[\s\xa0]*$/.test(n)}var kL=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function zw(n,e){return n<e?-1:n>e?1:0}function r_(){var n=mt.navigator;return n&&(n=n.userAgent)?n:""}function ro(n){return r_().indexOf(n)!=-1}function ob(n){return ob[" "](n),n}ob[" "]=Kv;function wte(n){var e=Mte;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}var Ste=ro("Opera"),bh=ro("Trident")||ro("MSIE"),IF=ro("Edge"),wM=IF||bh,PF=ro("Gecko")&&!(r_().toLowerCase().indexOf("webkit")!=-1&&!ro("Edge"))&&!(ro("Trident")||ro("MSIE"))&&!ro("Edge"),Ate=r_().toLowerCase().indexOf("webkit")!=-1&&!ro("Edge");function RF(){var n=mt.document;return n?n.documentMode:void 0}var qv;e:{var Gw="",Hw=function(){var n=r_();if(PF)return/rv:([^\);]+)(\)|;)/.exec(n);if(IF)return/Edge\/([\d\.]+)/.exec(n);if(bh)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n);if(Ate)return/WebKit\/(\S+)/.exec(n);if(Ste)return/(?:Version)[ \/]?(\S+)/.exec(n)}();if(Hw&&(Gw=Hw?Hw[1]:""),bh){var Vw=RF();if(Vw!=null&&Vw>parseFloat(Gw)){qv=String(Vw);break e}}qv=Gw}var Mte={};function Ete(){return wte(function(){let n=0;const e=kL(String(qv)).split("."),t=kL("9").split("."),r=Math.max(e.length,t.length);for(let o=0;n==0&&o<r;o++){var i=e[o]||"",s=t[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],i[0].length==0&&s[0].length==0)break;n=zw(i[1].length==0?0:parseInt(i[1],10),s[1].length==0?0:parseInt(s[1],10))||zw(i[2].length==0,s[2].length==0)||zw(i[2],s[2]),i=i[3],s=s[3]}while(n==0)}return 0<=n})}var SM;if(mt.document&&bh){var NL=RF();SM=NL||parseInt(qv,10)||void 0}else SM=void 0;var Cte=SM;function fp(n,e){if(Kr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(PF){e:{try{ob(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else t=="mouseover"?e=n.fromElement:t=="mouseout"&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType=typeof n.pointerType=="string"?n.pointerType:bte[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&fp.X.h.call(this)}}Lr(fp,Kr);var bte={2:"touch",3:"pen",4:"mouse"};fp.prototype.h=function(){fp.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Zp="closure_listenable_"+(1e6*Math.random()|0),Tte=0;function Ite(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++Tte,this.ba=this.ea=!1}function i_(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function ab(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function LF(n){const e={};for(const t in n)e[t]=n[t];return e}const FL="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function DF(n,e){let t,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(t in r)n[t]=r[t];for(let s=0;s<FL.length;s++)t=FL[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function s_(n){this.src=n,this.g={},this.h=0}s_.prototype.add=function(n,e,t,r,i){var s=n.toString();n=this.g[s],n||(n=this.g[s]=[],this.h++);var o=MM(n,e,r,i);return-1<o?(e=n[o],t||(e.ea=!1)):(e=new Ite(e,this.src,s,!!r,i),e.ea=t,n.push(e)),e};function AM(n,e){var t=e.type;if(t in n.g){var r=n.g[t],i=TF(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(i_(e),n.g[t].length==0&&(delete n.g[t],n.h--))}}function MM(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ba&&s.listener==e&&s.capture==!!t&&s.ha==r)return i}return-1}var lb="closure_lm_"+(1e6*Math.random()|0),Ww={};function BF(n,e,t,r,i){if(r&&r.once)return kF(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)BF(n,e[s],t,r,i);return null}return t=hb(t),n&&n[Zp]?n.N(e,t,Yp(r)?!!r.capture:!!r,i):OF(n,e,t,!1,r,i)}function OF(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var o=Yp(i)?!!i.capture:!!i,a=ub(n);if(a||(n[lb]=a=new s_(n)),t=a.add(e,t,r,o,s),t.proxy)return t;if(r=Pte(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)xte||(i=o),i===void 0&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(FF(e.toString()),r);else if(n.addListener&&n.removeListener)n.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return t}function Pte(){function n(t){return e.call(n.src,n.listener,t)}const e=Rte;return n}function kF(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)kF(n,e[s],t,r,i);return null}return t=hb(t),n&&n[Zp]?n.O(e,t,Yp(r)?!!r.capture:!!r,i):OF(n,e,t,!0,r,i)}function NF(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)NF(n,e[s],t,r,i);else r=Yp(r)?!!r.capture:!!r,t=hb(t),n&&n[Zp]?(n=n.i,e=String(e).toString(),e in n.g&&(s=n.g[e],t=MM(s,t,r,i),-1<t&&(i_(s[t]),Array.prototype.splice.call(s,t,1),s.length==0&&(delete n.g[e],n.h--)))):n&&(n=ub(n))&&(e=n.g[e.toString()],n=-1,e&&(n=MM(e,t,r,i)),(t=-1<n?e[n]:null)&&cb(t))}function cb(n){if(typeof n!="number"&&n&&!n.ba){var e=n.src;if(e&&e[Zp])AM(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(FF(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=ub(e))?(AM(t,n),t.h==0&&(t.src=null,e[lb]=null)):i_(n)}}}function FF(n){return n in Ww?Ww[n]:Ww[n]="on"+n}function Rte(n,e){if(n.ba)n=!0;else{e=new fp(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&cb(n),n=t.call(r,e)}return n}function ub(n){return n=n[lb],n instanceof s_?n:null}var jw="__closure_events_fn_"+(1e9*Math.random()>>>0);function hb(n){return typeof n=="function"?n:(n[jw]||(n[jw]=function(e){return n.handleEvent(e)}),n[jw])}function wr(){pl.call(this),this.i=new s_(this),this.P=this,this.I=null}Lr(wr,pl);wr.prototype[Zp]=!0;wr.prototype.removeEventListener=function(n,e,t,r){NF(this,n,e,t,r)};function Tr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,typeof e=="string")e=new Kr(e,n);else if(e instanceof Kr)e.target=e.target||n;else{var i=e;e=new Kr(r,n),DF(e,i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];i=Ay(o,r,!0,e)&&i}if(o=e.g=n,i=Ay(o,r,!0,e)&&i,i=Ay(o,r,!1,e)&&i,t)for(s=0;s<t.length;s++)o=e.g=t[s],i=Ay(o,r,!1,e)&&i}wr.prototype.M=function(){if(wr.X.M.call(this),this.i){var n=this.i,e;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)i_(t[r]);delete n.g[e],n.h--}}this.I=null};wr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)};wr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};function Ay(n,e,t,r){if(e=n.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ba&&o.capture==t){var a=o.listener,l=o.ha||o.src;o.ea&&AM(n.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var fb=mt.JSON.stringify;function Lte(){var n=GF;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}class Dte{constructor(){this.h=this.g=null}add(e,t){const r=UF.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}}var UF=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Bte,n=>n.reset());class Bte{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ote(n){mt.setTimeout(()=>{throw n},0)}function zF(n,e){EM||kte(),CM||(EM(),CM=!0),GF.add(n,e)}var EM;function kte(){var n=mt.Promise.resolve(void 0);EM=function(){n.then(Nte)}}var CM=!1,GF=new Dte;function Nte(){for(var n;n=Lte();){try{n.h.call(n.g)}catch(t){Ote(t)}var e=UF;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}CM=!1}function o_(n,e){wr.call(this),this.h=n||1,this.g=e||mt,this.j=Jr(this.lb,this),this.l=Date.now()}Lr(o_,wr);tt=o_.prototype;tt.ca=!1;tt.R=null;tt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Tr(this,"tick"),this.ca&&(db(this),this.start()))}};tt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function db(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}tt.M=function(){o_.X.M.call(this),db(this),delete this.g};function pb(n,e,t){if(typeof n=="function")t&&(n=Jr(n,t));else if(n&&typeof n.handleEvent=="function")n=Jr(n.handleEvent,n);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:mt.setTimeout(n,e||0)}function HF(n){n.g=pb(()=>{n.g=null,n.i&&(n.i=!1,HF(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}class Fte extends pl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:HF(this)}M(){super.M(),this.g&&(mt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dp(n){pl.call(this),this.h=n,this.g={}}Lr(dp,pl);var UL=[];function VF(n,e,t,r){Array.isArray(t)||(t&&(UL[0]=t.toString()),t=UL);for(var i=0;i<t.length;i++){var s=BF(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function WF(n){ab(n.g,function(e,t){this.g.hasOwnProperty(t)&&cb(e)},n),n.g={}}dp.prototype.M=function(){dp.X.M.call(this),WF(this)};dp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function a_(){this.g=!0}a_.prototype.Aa=function(){this.g=!1};function Ute(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var h=c[0];c=c[1];var d=h.split("_");o=2<=d.length&&d[1]=="type"?o+(h+"="+c+"&"):o+(h+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+t+`
`+o})}function zte(n,e,t,r,i,s,o){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+t+`
`+s+" "+o})}function Hu(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+Hte(n,t)+(r?" "+r:"")})}function Gte(n,e){n.info(function(){return"TIMEOUT: "+e})}a_.prototype.info=function(){};function Hte(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t){for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return fb(t)}catch{return e}}var Fc={},zL=null;function l_(){return zL=zL||new wr}Fc.Pa="serverreachability";function jF(n){Kr.call(this,Fc.Pa,n)}Lr(jF,Kr);function pp(n){const e=l_();Tr(e,new jF(e))}Fc.STAT_EVENT="statevent";function $F(n,e){Kr.call(this,Fc.STAT_EVENT,n),this.stat=e}Lr($F,Kr);function ai(n){const e=l_();Tr(e,new $F(e,n))}Fc.Qa="timingevent";function JF(n,e){Kr.call(this,Fc.Qa,n),this.size=e}Lr(JF,Kr);function em(n,e){if(typeof n!="function")throw Error("Fn must not be null and must be a function");return mt.setTimeout(function(){n()},e)}var c_={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},KF={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function mb(){}mb.prototype.h=null;function GL(n){return n.h||(n.h=n.i())}function XF(){}var tm={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function gb(){Kr.call(this,"d")}Lr(gb,Kr);function yb(){Kr.call(this,"c")}Lr(yb,Kr);var bM;function u_(){}Lr(u_,mb);u_.prototype.g=function(){return new XMLHttpRequest};u_.prototype.i=function(){return{}};bM=new u_;function nm(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new dp(this),this.O=Vte,n=wM?125:void 0,this.T=new o_(n),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new qF}function qF(){this.i=null,this.g="",this.h=!1}var Vte=45e3,TM={},Qv={};tt=nm.prototype;tt.setTimeout=function(n){this.O=n};function IM(n,e,t){n.K=1,n.v=f_(Qo(e)),n.s=t,n.P=!0,QF(n,null)}function QF(n,e){n.F=Date.now(),rm(n),n.A=Qo(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),sU(t.i,"t",r),n.C=0,t=n.l.H,n.h=new qF,n.g=CU(n.l,t?e:null,!n.s),0<n.N&&(n.L=new Fte(Jr(n.La,n,n.g),n.N)),VF(n.S,n.g,"readystatechange",n.ib),e=n.H?LF(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),pp(),Ute(n.j,n.u,n.A,n.m,n.U,n.s)}tt.ib=function(n){n=n.target;const e=this.L;e&&Go(n)==3?e.l():this.La(n)};tt.La=function(n){try{if(n==this.g)e:{const h=Go(this.g);var e=this.g.Ea();const d=this.g.aa();if(!(3>h)&&(h!=3||wM||this.g&&(this.h.h||this.g.fa()||jL(this.g)))){this.I||h!=4||e==7||(e==8||0>=d?pp(3):pp(2)),h_(this);var t=this.g.aa();this.Y=t;t:if(YF(this)){var r=jL(this.g);n="";var i=r.length,s=Go(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yl(this),Md(this);var o="";break t}this.h.i=new mt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=t==200,zte(this.j,this.u,this.A,this.m,this.U,h,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Xv(a)){var c=a;break t}}c=null}if(t=c)Hu(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,PM(this,t);else{this.i=!1,this.o=3,ai(12),Yl(this),Md(this);break e}}this.P?(ZF(this,h,o),wM&&this.i&&h==3&&(VF(this.S,this.T,"tick",this.hb),this.T.start())):(Hu(this.j,this.m,o,null),PM(this,o)),h==4&&Yl(this),this.i&&!this.I&&(h==4?SU(this.l,this):(this.i=!1,rm(this)))}else t==400&&0<o.indexOf("Unknown SID")?(this.o=3,ai(12)):(this.o=0,ai(13)),Yl(this),Md(this)}}}catch{}finally{}};function YF(n){return n.g?n.u=="GET"&&n.K!=2&&n.l.Da:!1}function ZF(n,e,t){let r=!0,i;for(;!n.I&&n.C<t.length;)if(i=Wte(n,t),i==Qv){e==4&&(n.o=4,ai(14),r=!1),Hu(n.j,n.m,null,"[Incomplete Response]");break}else if(i==TM){n.o=4,ai(15),Hu(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}else Hu(n.j,n.m,i,null),PM(n,i);YF(n)&&i!=Qv&&i!=TM&&(n.h.g="",n.C=0),e!=4||t.length!=0||n.h.h||(n.o=1,ai(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,e=n.l,e.g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Mb(e),e.K=!0,ai(11))):(Hu(n.j,n.m,t,"[Invalid Chunked Response]"),Yl(n),Md(n))}tt.hb=function(){if(this.g){var n=Go(this.g),e=this.g.fa();this.C<e.length&&(h_(this),ZF(this,n,e),this.i&&n!=4&&rm(this))}};function Wte(n,e){var t=n.C,r=e.indexOf(`
`,t);return r==-1?Qv:(t=Number(e.substring(t,r)),isNaN(t)?TM:(r+=1,r+t>e.length?Qv:(e=e.substr(r,t),n.C=r+t,e)))}tt.cancel=function(){this.I=!0,Yl(this)};function rm(n){n.V=Date.now()+n.O,eU(n,n.O)}function eU(n,e){if(n.B!=null)throw Error("WatchDog timer not null");n.B=em(Jr(n.gb,n),e)}function h_(n){n.B&&(mt.clearTimeout(n.B),n.B=null)}tt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(Gte(this.j,this.A),this.K!=2&&(pp(),ai(17)),Yl(this),this.o=2,Md(this)):eU(this,this.V-n)};function Md(n){n.l.G==0||n.I||SU(n.l,n)}function Yl(n){h_(n);var e=n.L;e&&typeof e.na=="function"&&e.na(),n.L=null,db(n.T),WF(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function PM(n,e){try{var t=n.l;if(t.G!=0&&(t.g==n||RM(t.h,n))){if(!n.J&&RM(t.h,n)&&t.G==3){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!t.u){if(t.g)if(t.g.F+3e3<n.F)e0(t),m_(t);else break e;Ab(t),ai(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&t.A==0&&!t.v&&(t.v=em(Jr(t.cb,t),6e3));if(1>=lU(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Zl(t,11)}else if((n.J||t.g==n)&&e0(t),!Xv(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(t.T=c[0],c=c[1],t.G==2)if(c[0]=="c"){t.I=c[1],t.ka=c[2];const h=c[3];h!=null&&(t.ma=h,t.j.info("VER="+t.ma));const d=c[4];d!=null&&(t.Ca=d,t.j.info("SVER="+t.Ca));const p=c[5];p!=null&&typeof p=="number"&&0<p&&(r=1.5*p,t.J=r,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const m=n.g;if(m){const y=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var s=r.h;s.g||y.indexOf("spdy")==-1&&y.indexOf("quic")==-1&&y.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(vb(s,s.h),s.h=null))}if(r.D){const g=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.za=g,wn(r.F,r.D,g))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms")),r=t;var o=n;if(r.sa=EU(r,r.H?r.ka:null,r.V),o.J){cU(r.h,o);var a=o,l=r.J;l&&a.setTimeout(l),a.B&&(h_(a),rm(a)),r.g=o}else xU(r);0<t.i.length&&g_(t)}else c[0]!="stop"&&c[0]!="close"||Zl(t,7);else t.G==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Zl(t,7):Sb(t):c[0]!="noop"&&t.l&&t.l.wa(c),t.A=0)}}pp(4)}catch{}}function jte(n){if(n.W&&typeof n.W=="function")return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if(typeof n=="string")return n.split("");if(n_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}e=[],t=0;for(r in n)e[t++]=n[r];return e}function $te(n){if(n.oa&&typeof n.oa=="function")return n.oa();if(!n.W||typeof n.W!="function"){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(n_(n)||typeof n=="string"){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}function tU(n,e){if(n.forEach&&typeof n.forEach=="function")n.forEach(e,void 0);else if(n_(n)||typeof n=="string")Array.prototype.forEach.call(n,e,void 0);else for(var t=$te(n),r=jte(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}var nU=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Jte(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function cc(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof cc){this.h=e!==void 0?e:n.h,Yv(this,n.j),this.s=n.s,this.g=n.g,Zv(this,n.m),this.l=n.l,e=n.i;var t=new mp;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),HL(this,t),this.o=n.o}else n&&(t=String(n).match(nU))?(this.h=!!e,Yv(this,t[1]||"",!0),this.s=rd(t[2]||""),this.g=rd(t[3]||"",!0),Zv(this,t[4]),this.l=rd(t[5]||"",!0),HL(this,t[6]||"",!0),this.o=rd(t[7]||"")):(this.h=!!e,this.i=new mp(null,this.h))}cc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(id(e,VL,!0),":");var t=this.g;return(t||e=="file")&&(n.push("//"),(e=this.s)&&n.push(id(e,VL,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.m,t!=null&&n.push(":",String(t))),(t=this.l)&&(this.g&&t.charAt(0)!="/"&&n.push("/"),n.push(id(t,t.charAt(0)=="/"?qte:Xte,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",id(t,Yte)),n.join("")};function Qo(n){return new cc(n)}function Yv(n,e,t){n.j=t?rd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Zv(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function HL(n,e,t){e instanceof mp?(n.i=e,Zte(n.i,n.h)):(t||(e=id(e,Qte)),n.i=new mp(e,n.h))}function wn(n,e,t){n.i.set(e,t)}function f_(n){return wn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function rd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function id(n,e,t){return typeof n=="string"?(n=encodeURI(n).replace(e,Kte),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Kte(n){return n=n.charCodeAt(0),"%"+(n>>4&15).toString(16)+(n&15).toString(16)}var VL=/[#\/\?@]/g,Xte=/[#\?:]/g,qte=/[#\?]/g,Qte=/[#\?@]/g,Yte=/#/g;function mp(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ml(n){n.g||(n.g=new Map,n.h=0,n.i&&Jte(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}tt=mp.prototype;tt.add=function(n,e){ml(this),this.i=null,n=Yh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this};function rU(n,e){ml(n),e=Yh(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function iU(n,e){return ml(n),e=Yh(n,e),n.g.has(e)}tt.forEach=function(n,e){ml(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)};tt.oa=function(){ml(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t};tt.W=function(n){ml(this);let e=[];if(typeof n=="string")iU(this,n)&&(e=e.concat(this.g.get(Yh(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e};tt.set=function(n,e){return ml(this),this.i=null,n=Yh(this,n),iU(this,n)&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this};tt.get=function(n,e){return n?(n=this.W(n),0<n.length?String(n[0]):e):e};function sU(n,e,t){rU(n,e),0<t.length&&(n.i=null,n.g.set(Yh(n,e),sb(t)),n.h+=t.length)}tt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),o=this.W(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),n.push(i)}}return this.i=n.join("&")};function Yh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Zte(n,e){e&&!n.j&&(ml(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(rU(this,r),sU(this,i,t))},n)),n.j=e}var ene=class{constructor(n,e){this.h=n,this.g=e}};function oU(n){this.l=n||tne,mt.PerformanceNavigationTiming?(n=mt.performance.getEntriesByType("navigation"),n=0<n.length&&(n[0].nextHopProtocol=="hq"||n[0].nextHopProtocol=="h2")):n=!!(mt.g&&mt.g.Ga&&mt.g.Ga()&&mt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var tne=10;function aU(n){return n.h?!0:n.g?n.g.size>=n.j:!1}function lU(n){return n.h?1:n.g?n.g.size:0}function RM(n,e){return n.h?n.h==e:n.g?n.g.has(e):!1}function vb(n,e){n.g?n.g.add(e):n.h=e}function cU(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}oU.prototype.cancel=function(){if(this.i=uU(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const n of this.g.values())n.cancel();this.g.clear()}};function uU(n){if(n.h!=null)return n.i.concat(n.h.D);if(n.g!=null&&n.g.size!==0){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return sb(n.i)}function _b(){}_b.prototype.stringify=function(n){return mt.JSON.stringify(n,void 0)};_b.prototype.parse=function(n){return mt.JSON.parse(n,void 0)};function nne(){this.g=new _b}function rne(n,e,t){const r=t||"";try{tU(n,function(i,s){let o=i;Yp(i)&&(o=fb(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function ine(n,e){const t=new a_;if(mt.Image){const r=new Image;r.onload=Sy(My,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Sy(My,t,r,"TestLoadImage: error",!1,e),r.onabort=Sy(My,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Sy(My,t,r,"TestLoadImage: timeout",!1,e),mt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}function My(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function im(n){this.l=n.ac||null,this.j=n.jb||!1}Lr(im,mb);im.prototype.g=function(){return new d_(this.l,this.j)};im.prototype.i=function(n){return function(){return n}}({});function d_(n,e){wr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=xb,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Lr(d_,wr);var xb=0;tt=d_.prototype;tt.open=function(n,e){if(this.readyState!=xb)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,gp(this)};tt.send=function(n){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||mt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};tt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,sm(this)),this.readyState=xb};tt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,gp(this)),this.g&&(this.readyState=3,gp(this),this.g)))if(this.responseType==="arraybuffer")n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof mt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;hU(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))};function hU(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}tt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?sm(this):gp(this),this.readyState==3&&hU(this)}};tt.Va=function(n){this.g&&(this.response=this.responseText=n,sm(this))};tt.Ua=function(n){this.g&&(this.response=n,sm(this))};tt.ga=function(){this.g&&sm(this)};function sm(n){n.readyState=4,n.l=null,n.j=null,n.A=null,gp(n)}tt.setRequestHeader=function(n,e){this.v.append(n,e)};tt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""};tt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)t=t.value,n.push(t[0]+": "+t[1]),t=e.next();return n.join(`\r
`)};function gp(n){n.onreadystatechange&&n.onreadystatechange.call(n)}Object.defineProperty(d_.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(n){this.m=n?"include":"same-origin"}});var sne=mt.JSON.parse;function Un(n){wr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=fU,this.K=this.L=!1}Lr(Un,wr);var fU="",one=/^https?$/i,ane=["POST","PUT"];tt=Un.prototype;tt.Ka=function(n){this.L=n};tt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():bM.g(),this.C=this.u?GL(this.u):GL(bM),this.g.onreadystatechange=Jr(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){WL(this,s);return}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())t.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(t.keys()).find(s=>s.toLowerCase()=="content-type"),i=mt.FormData&&n instanceof mt.FormData,!(0<=TF(ane,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{mU(this),0<this.B&&((this.K=lne(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Jr(this.qa,this)):this.A=pb(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){WL(this,s)}};function lne(n){return bh&&Ete()&&typeof n.timeout=="number"&&n.ontimeout!==void 0}tt.qa=function(){typeof ib<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Tr(this,"timeout"),this.abort(8))};function WL(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,dU(n),p_(n)}function dU(n){n.D||(n.D=!0,Tr(n,"complete"),Tr(n,"error"))}tt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Tr(this,"complete"),Tr(this,"abort"),p_(this))};tt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),p_(this,!0)),Un.X.M.call(this)};tt.Ha=function(){this.s||(this.F||this.v||this.l?pU(this):this.fb())};tt.fb=function(){pU(this)};function pU(n){if(n.h&&typeof ib<"u"&&(!n.C[1]||Go(n)!=4||n.aa()!=2)){if(n.v&&Go(n)==4)pb(n.Ha,0,n);else if(Tr(n,"readystatechange"),Go(n)==4){n.h=!1;try{const a=n.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=a===0){var i=String(n.H).match(nU)[1]||null;if(!i&&mt.self&&mt.self.location){var s=mt.self.location.protocol;i=s.substr(0,s.length-1)}r=!one.test(i?i.toLowerCase():"")}t=r}if(t)Tr(n,"complete"),Tr(n,"success");else{n.m=6;try{var o=2<Go(n)?n.g.statusText:""}catch{o=""}n.j=o+" ["+n.aa()+"]",dU(n)}}finally{p_(n)}}}}function p_(n,e){if(n.g){mU(n);const t=n.g,r=n.C[0]?Kv:null;n.g=null,n.C=null,e||Tr(n,"ready");try{t.onreadystatechange=r}catch{}}}function mU(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(mt.clearTimeout(n.A),n.A=null)}function Go(n){return n.g?n.g.readyState:0}tt.aa=function(){try{return 2<Go(this)?this.g.status:-1}catch{return-1}};tt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};tt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&e.indexOf(n)==0&&(e=e.substring(n.length)),sne(e)}};function jL(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case fU:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}tt.Ea=function(){return this.m};tt.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function gU(n){let e="";return ab(n,function(t,r){e+=r,e+=":",e+=t,e+=`\r
`}),e}function wb(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=gU(t),typeof n=="string"?t!=null&&encodeURIComponent(String(t)):wn(n,e,t))}function qf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function yU(n){this.Ca=0,this.i=[],this.j=new a_,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=qf("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=qf("baseRetryDelayMs",5e3,n),this.bb=qf("retryDelaySeedMs",1e4,n),this.$a=qf("forwardChannelMaxRetries",2,n),this.ta=qf("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new oU(n&&n.concurrentRequestLimit),this.Fa=new nne,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}tt=yU.prototype;tt.ma=8;tt.G=1;function Sb(n){if(vU(n),n.G==3){var e=n.U++,t=Qo(n.F);wn(t,"SID",n.I),wn(t,"RID",e),wn(t,"TYPE","terminate"),om(n,t),e=new nm(n,n.j,e,void 0),e.K=2,e.v=f_(Qo(t)),t=!1,mt.navigator&&mt.navigator.sendBeacon&&(t=mt.navigator.sendBeacon(e.v.toString(),"")),!t&&mt.Image&&(new Image().src=e.v,t=!0),t||(e.g=CU(e.l,null),e.g.da(e.v)),e.F=Date.now(),rm(e)}MU(n)}function m_(n){n.g&&(Mb(n),n.g.cancel(),n.g=null)}function vU(n){m_(n),n.u&&(mt.clearTimeout(n.u),n.u=null),e0(n),n.h.cancel(),n.m&&(typeof n.m=="number"&&mt.clearTimeout(n.m),n.m=null)}function g_(n){aU(n.h)||n.m||(n.m=!0,zF(n.Ja,n),n.C=0)}function cne(n,e){return lU(n.h)>=n.h.j-(n.m?1:0)?!1:n.m?(n.i=e.D.concat(n.i),!0):n.G==1||n.G==2||n.C>=(n.Za?0:n.$a)?!1:(n.m=em(Jr(n.Ja,n,e),AU(n,n.C)),n.C++,!0)}tt.Ja=function(n){if(this.m)if(this.m=null,this.G==1){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new nm(this,this.j,n,void 0);let s=this.s;if(this.S&&(s?(s=LF(s),DF(s,this.S)):s=this.S),this.o!==null||this.N||(i.H=s,s=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){t:{var r=this.i[t];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=t;break e}if(e===4096||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=_U(this,i,e),t=Qo(this.F),wn(t,"RID",n),wn(t,"CVER",22),this.D&&wn(t,"X-HTTP-Session-Id",this.D),om(this,t),s&&(this.N?e="headers="+encodeURIComponent(String(gU(s)))+"&"+e:this.o&&wb(t,this.o,s)),vb(this.h,i),this.Ya&&wn(t,"TYPE","init"),this.O?(wn(t,"$req",e),wn(t,"SID","null"),i.Z=!0,IM(i,t,null)):IM(i,t,e),this.G=2}}else this.G==3&&(n?$L(this,n):this.i.length==0||aU(this.h)||$L(this))};function $L(n,e){var t;e?t=e.m:t=n.U++;const r=Qo(n.F);wn(r,"SID",n.I),wn(r,"RID",t),wn(r,"AID",n.T),om(n,r),n.o&&n.s&&wb(r,n.o,n.s),t=new nm(n,n.j,t,n.C+1),n.o===null&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=_U(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),vb(n.h,t),IM(t,r,e)}function om(n,e){n.ia&&ab(n.ia,function(t,r){wn(e,r,t)}),n.l&&tU({},function(t,r){wn(e,r,t)})}function _U(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Jr(n.l.Ra,n.l,n):null;e:{var i=n.i;let s=-1;for(;;){const o=["count="+t];s==-1?0<t?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<t;l++){let c=i[l].h;const h=i[l].g;if(c-=s,0>c)s=Math.max(0,i[l].h-100),a=!1;else try{rne(h,o,"req"+c+"_")}catch{r&&r(h)}}if(a){r=o.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function xU(n){n.g||n.u||(n.Z=1,zF(n.Ia,n),n.A=0)}function Ab(n){return n.g||n.u||3<=n.A?!1:(n.Z++,n.u=em(Jr(n.Ia,n),AU(n,n.A)),n.A++,!0)}tt.Ia=function(){if(this.u=null,wU(this),this.$&&!(this.K||this.g==null||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=em(Jr(this.eb,this),n)}};tt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,ai(10),m_(this),wU(this))};function Mb(n){n.B!=null&&(mt.clearTimeout(n.B),n.B=null)}function wU(n){n.g=new nm(n,n.j,"rpc",n.Z),n.o===null&&(n.g.H=n.s),n.g.N=0;var e=Qo(n.sa);wn(e,"RID","rpc"),wn(e,"SID",n.I),wn(e,"CI",n.L?"0":"1"),wn(e,"AID",n.T),wn(e,"TYPE","xmlhttp"),om(n,e),n.o&&n.s&&wb(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=f_(Qo(e)),t.s=null,t.P=!0,QF(t,n)}tt.cb=function(){this.v!=null&&(this.v=null,m_(this),Ab(this),ai(19))};function e0(n){n.v!=null&&(mt.clearTimeout(n.v),n.v=null)}function SU(n,e){var t=null;if(n.g==e){e0(n),Mb(n),n.g=null;var r=2}else if(RM(n.h,e))t=e.D,cU(n.h,e),r=1;else return;if(n.G!=0){if(n.pa=e.Y,e.i)if(r==1){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;r=l_(),Tr(r,new JF(r,t)),g_(n)}else xU(n);else if(i=e.o,i==3||i==0&&0<n.pa||!(r==1&&cne(n,e)||r==2&&Ab(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Zl(n,5);break;case 4:Zl(n,10);break;case 3:Zl(n,6);break;default:Zl(n,2)}}}function AU(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Zl(n,e){if(n.j.info("Error code "+e),e==2){var t=null;n.l&&(t=null);var r=Jr(n.kb,n);t||(t=new cc("//www.google.com/images/cleardot.gif"),mt.location&&mt.location.protocol=="http"||Yv(t,"https"),f_(t)),ine(t.toString(),r)}else ai(2);n.G=0,n.l&&n.l.va(e),MU(n),vU(n)}tt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),ai(2)):(this.j.info("Failed to ping google.com"),ai(1))};function MU(n){if(n.G=0,n.la=[],n.l){const e=uU(n.h);(e.length!=0||n.i.length!=0)&&(OL(n.la,e),OL(n.la,n.i),n.h.i.length=0,sb(n.i),n.i.length=0),n.l.ua()}}function EU(n,e,t){var r=t instanceof cc?Qo(t):new cc(t,void 0);if(r.g!="")e&&(r.g=e+"."+r.g),Zv(r,r.m);else{var i=mt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new cc(null,void 0);r&&Yv(s,r),e&&(s.g=e),i&&Zv(s,i),t&&(s.l=t),r=s}return t=n.D,e=n.za,t&&e&&wn(r,t,e),wn(r,"VER",n.ma),om(n,r),r}function CU(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=t&&n.Da&&!n.ra?new Un(new im({jb:!0})):new Un(n.ra),e.Ka(n.H),e}function bU(){}tt=bU.prototype;tt.xa=function(){};tt.wa=function(){};tt.va=function(){};tt.ua=function(){};tt.Ra=function(){};function t0(){if(bh&&!(10<=Number(Cte)))throw Error("Environmental error: no available transport.")}t0.prototype.g=function(n,e){return new Hi(n,e)};function Hi(n,e){wr.call(this),this.g=new yU(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Xv(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Xv(e)&&(this.g.D=e,n=this.h,n!==null&&e in n&&(n=this.h,e in n&&delete n[e])),this.j=new Zh(this)}Lr(Hi,wr);Hi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;ai(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=EU(n,null,n.V),g_(n)};Hi.prototype.close=function(){Sb(this.g)};Hi.prototype.u=function(n){var e=this.g;if(typeof n=="string"){var t={};t.__data__=n,n=t}else this.v&&(t={},t.__data__=fb(n),n=t);e.i.push(new ene(e.ab++,n)),e.G==3&&g_(e)};Hi.prototype.M=function(){this.g.l=null,delete this.j,Sb(this.g),delete this.g,Hi.X.M.call(this)};function TU(n){gb.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=e!==null&&n in e?e[n]:void 0),this.data=e}else this.data=n}Lr(TU,gb);function IU(){yb.call(this),this.status=1}Lr(IU,yb);function Zh(n){this.g=n}Lr(Zh,bU);Zh.prototype.xa=function(){Tr(this.g,"a")};Zh.prototype.wa=function(n){Tr(this.g,new TU(n))};Zh.prototype.va=function(n){Tr(this.g,new IU)};Zh.prototype.ua=function(){Tr(this.g,"b")};t0.prototype.createWebChannel=t0.prototype.g;Hi.prototype.send=Hi.prototype.u;Hi.prototype.open=Hi.prototype.m;Hi.prototype.close=Hi.prototype.close;c_.NO_ERROR=0;c_.TIMEOUT=8;c_.HTTP_ERROR=6;KF.COMPLETE="complete";XF.EventType=tm;tm.OPEN="a";tm.CLOSE="b";tm.ERROR="c";tm.MESSAGE="d";wr.prototype.listen=wr.prototype.N;Un.prototype.listenOnce=Un.prototype.O;Un.prototype.getLastError=Un.prototype.Oa;Un.prototype.getLastErrorCode=Un.prototype.Ea;Un.prototype.getStatus=Un.prototype.aa;Un.prototype.getResponseJson=Un.prototype.Sa;Un.prototype.getResponseText=Un.prototype.fa;Un.prototype.send=Un.prototype.da;Un.prototype.setWithCredentials=Un.prototype.Ka;var une=function(){return new t0},hne=function(){return l_()},$w=c_,fne=KF,dne=Fc,JL={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},pne=im,Ey=XF,mne=Un;const KL="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Wr.UNAUTHENTICATED=new Wr(null),Wr.GOOGLE_CREDENTIALS=new Wr("google-credentials-uid"),Wr.FIRST_PARTY=new Wr("first-party-uid"),Wr.MOCK_USER=new Wr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ef="9.17.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bc=new SF("@firebase/firestore");function XL(){return bc.logLevel}function ot(n,...e){if(bc.logLevel<=Qt.DEBUG){const t=e.map(Eb);bc.debug(`Firestore (${ef}): ${n}`,...t)}}function Yo(n,...e){if(bc.logLevel<=Qt.ERROR){const t=e.map(Eb);bc.error(`Firestore (${ef}): ${n}`,...t)}}function LM(n,...e){if(bc.logLevel<=Qt.WARN){const t=e.map(Eb);bc.warn(`Firestore (${ef}): ${n}`,...t)}}function Eb(n){if(typeof n=="string")return n;try{return e=n,JSON.stringify(e)}catch{return n}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(n="Unexpected state"){const e=`FIRESTORE (${ef}) INTERNAL ASSERTION FAILED: `+n;throw Yo(e),new Error(e)}function rr(n,e){n||xt()}function Kt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ke={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};let et=class extends Qh{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uc=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PU=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}};class gne{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Wr.UNAUTHENTICATED))}shutdown(){}}let yne=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},vne=class{constructor(e){this.t=e,this.currentUser=Wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new uc;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new uc,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ot("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ot("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new uc)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ot("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rr(typeof r.accessToken=="string"),new PU(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return rr(e===null||typeof e=="string"),new Wr(e)}},_ne=class{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Wr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(rr(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}},xne=class{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new _ne(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Wr.FIRST_PARTY))}shutdown(){}invalidateToken(){}},wne=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Sne=class{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=s=>{s.error!=null&&ot("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.A;return this.A=s.token,ot("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ot("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?i(s):ot("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(rr(typeof t.token=="string"),this.A=t.token,new wne(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ane(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mne=class{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Ane(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function Yt(n,e){return n<e?-1:n>e?1:0}function Th(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new et(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new et(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new et(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new et(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return xr.fromMillis(Date.now())}static fromDate(e){return xr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new xr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Yt(this.nanoseconds,e.nanoseconds):Yt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new _t(e)}static min(){return new _t(new xr(0,0))}static max(){return new _t(new xr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,t,r){t===void 0?t=0:t>e.length&&xt(),r===void 0?r=e.length-t:r>e.length-t&&xt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return yp.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof yp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class bn extends yp{construct(e,t,r){return new bn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new et(ke.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new bn(t)}static emptyPath(){return new bn([])}}const Ene=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class oi extends yp{construct(e,t,r){return new oi(e,t,r)}static isValidIdentifier(e){return Ene.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),oi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new oi(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new et(ke.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new et(ke.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new et(ke.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new et(ke.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new oi(t)}static emptyPath(){return new oi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.path=e}static fromPath(e){return new ht(bn.fromString(e))}static fromName(e){return new ht(bn.fromString(e).popFirst(5))}static empty(){return new ht(bn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&bn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return bn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ht(new bn(e.slice()))}}function Cne(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=_t.fromTimestamp(r===1e9?new xr(t+1,0):new xr(t,r));return new rl(i,ht.empty(),e)}function bne(n){return new rl(n.readTime,n.key,-1)}class rl{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new rl(_t.min(),ht.empty(),-1)}static max(){return new rl(_t.max(),ht.empty(),-1)}}function Tne(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ht.comparator(n.documentKey,e.documentKey),t!==0?t:Yt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ine="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Pne{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cb(n){if(n.code!==ke.FAILED_PRECONDITION||n.message!==Ine)throw n;ot("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ie((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ie?t:Ie.resolve(t)}catch(t){return Ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ie.reject(t)}static resolve(e){return new Ie((t,r)=>{t(e)})}static reject(e){return new Ie((t,r)=>{r(e)})}static waitFor(e){return new Ie((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=Ie.resolve(!1);for(const r of e)t=t.next(i=>i?Ie.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new Ie((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new Ie((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}function am(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}bb.at=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rne{constructor(e,t,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class vp{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new vp("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof vp&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qL(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function lm(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function RU(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(n){return n==null}function n0(n){return n===0&&1/n==-1/0}function Lne(n){return typeof n=="number"&&Number.isInteger(n)&&!n0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new qr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new qr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Yt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qr.EMPTY_BYTE_STRING=new qr("");const Dne=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function il(n){if(rr(!!n),typeof n=="string"){let e=0;const t=Dne.exec(n);if(rr(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Yn(n.seconds),nanos:Yn(n.nanos)}}function Yn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ih(n){return typeof n=="string"?qr.fromBase64String(n):qr.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LU(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function DU(n){const e=n.mapValue.fields.__previous_value__;return LU(e)?DU(e):e}function _p(n){const e=il(n.mapValue.fields.__local_write_time__.timestampValue);return new xr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Tc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?LU(n)?4:Bne(n)?9007199254740991:10:xt()}function mo(n,e){if(n===e)return!0;const t=Tc(n);if(t!==Tc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return _p(n).isEqual(_p(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=il(r.timestampValue),o=il(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,i){return Ih(r.bytesValue).isEqual(Ih(i.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Yn(r.geoPointValue.latitude)===Yn(i.geoPointValue.latitude)&&Yn(r.geoPointValue.longitude)===Yn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Yn(r.integerValue)===Yn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Yn(r.doubleValue),o=Yn(i.doubleValue);return s===o?n0(s)===n0(o):isNaN(s)&&isNaN(o)}return!1}(n,e);case 9:return Th(n.arrayValue.values||[],e.arrayValue.values||[],mo);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(qL(s)!==qL(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!mo(s[a],o[a])))return!1;return!0}(n,e);default:return xt()}}function xp(n,e){return(n.values||[]).find(t=>mo(t,e))!==void 0}function Ph(n,e){if(n===e)return 0;const t=Tc(n),r=Tc(e);if(t!==r)return Yt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Yt(n.booleanValue,e.booleanValue);case 2:return function(i,s){const o=Yn(i.integerValue||i.doubleValue),a=Yn(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(n,e);case 3:return QL(n.timestampValue,e.timestampValue);case 4:return QL(_p(n),_p(e));case 5:return Yt(n.stringValue,e.stringValue);case 6:return function(i,s){const o=Ih(i),a=Ih(s);return o.compareTo(a)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let l=0;l<o.length&&l<a.length;l++){const c=Yt(o[l],a[l]);if(c!==0)return c}return Yt(o.length,a.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const o=Yt(Yn(i.latitude),Yn(s.latitude));return o!==0?o:Yt(Yn(i.longitude),Yn(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let l=0;l<o.length&&l<a.length;++l){const c=Ph(o[l],a[l]);if(c)return c}return Yt(o.length,a.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Cy.mapValue&&s===Cy.mapValue)return 0;if(i===Cy.mapValue)return 1;if(s===Cy.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),l=s.fields||{},c=Object.keys(l);a.sort(),c.sort();for(let h=0;h<a.length&&h<c.length;++h){const d=Yt(a[h],c[h]);if(d!==0)return d;const p=Ph(o[a[h]],l[c[h]]);if(p!==0)return p}return Yt(a.length,c.length)}(n.mapValue,e.mapValue);default:throw xt()}}function QL(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Yt(n,e);const t=il(n),r=il(e),i=Yt(t.seconds,r.seconds);return i!==0?i:Yt(t.nanos,r.nanos)}function Rh(n){return DM(n)}function DM(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=il(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ih(n.bytesValue).toBase64():"referenceValue"in n?(t=n.referenceValue,ht.fromName(t).toString()):"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=DM(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${DM(r.fields[a])}`;return s+"}"}(n.mapValue):xt();var e,t}function YL(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function BM(n){return!!n&&"integerValue"in n}function Tb(n){return!!n&&"arrayValue"in n}function ZL(n){return!!n&&"nullValue"in n}function eD(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Jw(n){return!!n&&"mapValue"in n}function Ed(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return lm(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ed(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ed(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Bne(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e,t){this.position=e,this.inclusive=t}}function tD(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(s.field.isKeyField()?r=ht.comparator(ht.fromName(o.referenceValue),t.key):r=Ph(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function nD(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!mo(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BU{}class er extends BU{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new kne(e,t,r):t==="array-contains"?new Une(e,r):t==="in"?new zne(e,r):t==="not-in"?new Gne(e,r):t==="array-contains-any"?new Hne(e,r):new er(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Nne(e,r):new Fne(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Ph(t,this.value)):t!==null&&Tc(this.value)===Tc(t)&&this.matchesComparison(Ph(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class zs extends BU{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new zs(e,t)}matches(e){return OU(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ht!==null||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return e!==null?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function OU(n){return n.op==="and"}function kU(n){return One(n)&&OU(n)}function One(n){for(const e of n.filters)if(e instanceof zs)return!1;return!0}function OM(n){if(n instanceof er)return n.field.canonicalString()+n.op.toString()+Rh(n.value);if(kU(n))return n.filters.map(e=>OM(e)).join(",");{const e=n.filters.map(t=>OM(t)).join(",");return`${n.op}(${e})`}}function NU(n,e){return n instanceof er?function(t,r){return r instanceof er&&t.op===r.op&&t.field.isEqual(r.field)&&mo(t.value,r.value)}(n,e):n instanceof zs?function(t,r){return r instanceof zs&&t.op===r.op&&t.filters.length===r.filters.length?t.filters.reduce((i,s,o)=>i&&NU(s,r.filters[o]),!0):!1}(n,e):void xt()}function FU(n){return n instanceof er?function(e){return`${e.field.canonicalString()} ${e.op} ${Rh(e.value)}`}(n):n instanceof zs?function(e){return e.op.toString()+" {"+e.getFilters().map(FU).join(" ,")+"}"}(n):"Filter"}class kne extends er{constructor(e,t,r){super(e,t,r),this.key=ht.fromName(r.referenceValue)}matches(e){const t=ht.comparator(e.key,this.key);return this.matchesComparison(t)}}class Nne extends er{constructor(e,t){super(e,"in",t),this.keys=UU("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Fne extends er{constructor(e,t){super(e,"not-in",t),this.keys=UU("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function UU(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ht.fromName(r.referenceValue))}class Une extends er{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Tb(t)&&xp(t.arrayValue,this.value)}}class zne extends er{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&xp(this.value.arrayValue,t)}}class Gne extends er{constructor(e,t){super(e,"not-in",t)}matches(e){if(xp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!xp(this.value.arrayValue,t)}}class Hne extends er{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Tb(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>xp(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,t="asc"){this.field=e,this.dir=t}}function Vne(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,t){this.comparator=e,this.root=t||Cr.EMPTY}insert(e,t){return new Pr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Cr.BLACK,null,null))}remove(e){return new Pr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new by(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new by(this.root,e,this.comparator,!1)}getReverseIterator(){return new by(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new by(this.root,e,this.comparator,!0)}}class by{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Cr{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Cr.RED,this.left=i??Cr.EMPTY,this.right=s??Cr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Cr(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Cr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Cr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Cr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Cr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw xt();const e=this.left.check();if(e!==this.right.check())throw xt();return e+(this.isRed()?0:1)}}Cr.EMPTY=null,Cr.RED=!0,Cr.BLACK=!1;Cr.EMPTY=new class{constructor(){this.size=0}get key(){throw xt()}get value(){throw xt()}get color(){throw xt()}get left(){throw xt()}get right(){throw xt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Cr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this.comparator=e,this.data=new Pr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new rD(this.data.getIterator())}getIteratorFrom(e){return new rD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof cr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new cr(this.comparator);return t.data=e,t}}class rD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e){this.fields=e,e.sort(oi.comparator)}static empty(){return new Na([])}unionWith(e){let t=new cr(oi.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Na(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Th(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this.value=e}static empty(){return new io({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Jw(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ed(t)}setAll(e){let t=oi.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Ed(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Jw(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return mo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Jw(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){lm(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new io(Ed(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new $r(e,0,_t.min(),_t.min(),_t.min(),io.empty(),0)}static newFoundDocument(e,t,r,i){return new $r(e,1,t,_t.min(),r,i,0)}static newNoDocument(e,t){return new $r(e,2,t,_t.min(),_t.min(),io.empty(),0)}static newUnknownDocument(e,t){return new $r(e,3,t,_t.min(),_t.min(),io.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(_t.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=io.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=io.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_t.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $r&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $r(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wne=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ft=null}};function iD(n,e=null,t=[],r=[],i=null,s=null,o=null){return new Wne(n,e,t,r,i,s,o)}function Ib(n){const e=Kt(n);if(e.ft===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>OM(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),y_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Rh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Rh(r)).join(",")),e.ft=t}return e.ft}function Pb(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Vne(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!NU(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!nD(n.startAt,e.startAt)&&nD(n.endAt,e.endAt)}function kM(n){return ht.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tf=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.dt=null,this._t=null,this.startAt,this.endAt}};function jne(n,e,t,r,i,s,o,a){return new tf(n,e,t,r,i,s,o,a)}function zU(n){return new tf(n)}function sD(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Rb(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function v_(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(t!==null)return t}return null}function GU(n){return n.collectionGroup!==null}function nh(n){const e=Kt(n);if(e.dt===null){e.dt=[];const t=v_(e),r=Rb(e);if(t!==null&&r===null)t.isKeyField()||e.dt.push(new th(t)),e.dt.push(new th(oi.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.dt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new th(oi.keyField(),s))}}}return e.dt}function Zo(n){const e=Kt(n);if(!e._t)if(e.limitType==="F")e._t=iD(e.path,e.collectionGroup,nh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of nh(e)){const o=s.dir==="desc"?"asc":"desc";t.push(new th(s.field,o))}const r=e.endAt?new r0(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new r0(e.startAt.position,e.startAt.inclusive):null;e._t=iD(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function NM(n,e){e.getFirstInequalityField(),v_(n);const t=n.filters.concat([e]);return new tf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function FM(n,e,t){return new tf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function __(n,e){return Pb(Zo(n),Zo(e))&&n.limitType===e.limitType}function HU(n){return`${Ib(Zo(n))}|lt:${n.limitType}`}function UM(n){return`Query(target=${function(e){let t=e.path.canonicalString();return e.collectionGroup!==null&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>FU(r)).join(", ")}]`),y_(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(r)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Rh(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Rh(r)).join(",")),`Target(${t})`}(Zo(n))}; limitType=${n.limitType})`}function x_(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return t.collectionGroup!==null?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):ht.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of nh(t))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&function(t,r){return!(t.startAt&&!function(i,s,o){const a=tD(i,s,o);return i.inclusive?a<=0:a<0}(t.startAt,nh(t),r)||t.endAt&&!function(i,s,o){const a=tD(i,s,o);return i.inclusive?a>=0:a>0}(t.endAt,nh(t),r))}(n,e)}function $ne(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function VU(n){return(e,t)=>{let r=!1;for(const i of nh(n)){const s=Jne(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Jne(n,e,t){const r=n.field.isKeyField()?ht.comparator(e.key,t.key):function(i,s,o){const a=s.data.field(i),l=o.data.field(i);return a!==null&&l!==null?Ph(a,l):xt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return xt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WU(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:n0(e)?"-0":e}}function jU(n){return{integerValue:""+n}}function Kne(n,e){return Lne(e)?jU(e):WU(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(){this._=void 0}}function Xne(n,e,t){return n instanceof zM?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof i0?$U(n,e):n instanceof s0?JU(n,e):function(r,i){const s=Qne(r,i),o=oD(s)+oD(r.gt);return BM(s)&&BM(r.gt)?jU(o):WU(r.yt,o)}(n,e)}function qne(n,e,t){return n instanceof i0?$U(n,e):n instanceof s0?JU(n,e):t}function Qne(n,e){return n instanceof GM?BM(t=e)||function(r){return!!r&&"doubleValue"in r}(t)?e:{integerValue:0}:null;var t}class zM extends w_{}class i0 extends w_{constructor(e){super(),this.elements=e}}function $U(n,e){const t=KU(e);for(const r of n.elements)t.some(i=>mo(i,r))||t.push(r);return{arrayValue:{values:t}}}class s0 extends w_{constructor(e){super(),this.elements=e}}function JU(n,e){let t=KU(e);for(const r of n.elements)t=t.filter(i=>!mo(i,r));return{arrayValue:{values:t}}}class GM extends w_{constructor(e,t){super(),this.yt=e,this.gt=t}}function oD(n){return Yn(n.integerValue||n.doubleValue)}function KU(n){return Tb(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Yne(n,e){return n.field.isEqual(e.field)&&function(t,r){return t instanceof i0&&r instanceof i0||t instanceof s0&&r instanceof s0?Th(t.elements,r.elements,mo):t instanceof GM&&r instanceof GM?mo(t.gt,r.gt):t instanceof zM&&r instanceof zM}(n.transform,e.transform)}class hc{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new hc}static exists(e){return new hc(void 0,e)}static updateTime(e){return new hc(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yy(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Lb{}function XU(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ere(n.key,hc.none()):new Db(n.key,n.data,hc.none());{const t=n.data,r=io.empty();let i=new cr(oi.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new S_(n.key,r,new Na(i.toArray()),hc.none())}}function Zne(n,e,t){n instanceof Db?function(r,i,s){const o=r.value.clone(),a=lD(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(n,e,t):n instanceof S_?function(r,i,s){if(!Yy(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=lD(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(qU(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Cd(n,e,t,r){return n instanceof Db?function(i,s,o,a){if(!Yy(i.precondition,s))return o;const l=i.value.clone(),c=cD(i.fieldTransforms,a,s);return l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof S_?function(i,s,o,a){if(!Yy(i.precondition,s))return o;const l=cD(i.fieldTransforms,a,s),c=s.data;return c.setAll(qU(i)),c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(n,e,t,r):function(i,s,o){return Yy(i.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(n,e,t)}function aD(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(t,r){return t===void 0&&r===void 0||!(!t||!r)&&Th(t,r,(i,s)=>Yne(i,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Db extends Lb{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class S_ extends Lb{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function qU(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function lD(n,e,t){const r=new Map;rr(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,qne(o,a,t[i]))}return r}function cD(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,Xne(s,o,e))}return r}class ere extends Lb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tre{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qn,zt;function QU(n){if(n===void 0)return Yo("GRPC error has no .code"),ke.UNKNOWN;switch(n){case Qn.OK:return ke.OK;case Qn.CANCELLED:return ke.CANCELLED;case Qn.UNKNOWN:return ke.UNKNOWN;case Qn.DEADLINE_EXCEEDED:return ke.DEADLINE_EXCEEDED;case Qn.RESOURCE_EXHAUSTED:return ke.RESOURCE_EXHAUSTED;case Qn.INTERNAL:return ke.INTERNAL;case Qn.UNAVAILABLE:return ke.UNAVAILABLE;case Qn.UNAUTHENTICATED:return ke.UNAUTHENTICATED;case Qn.INVALID_ARGUMENT:return ke.INVALID_ARGUMENT;case Qn.NOT_FOUND:return ke.NOT_FOUND;case Qn.ALREADY_EXISTS:return ke.ALREADY_EXISTS;case Qn.PERMISSION_DENIED:return ke.PERMISSION_DENIED;case Qn.FAILED_PRECONDITION:return ke.FAILED_PRECONDITION;case Qn.ABORTED:return ke.ABORTED;case Qn.OUT_OF_RANGE:return ke.OUT_OF_RANGE;case Qn.UNIMPLEMENTED:return ke.UNIMPLEMENTED;case Qn.DATA_LOSS:return ke.DATA_LOSS;default:return xt()}}(zt=Qn||(Qn={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){lm(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return RU(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nre=new Pr(ht.comparator);function sl(){return nre}const YU=new Pr(ht.comparator);function sd(...n){let e=YU;for(const t of n)e=e.insert(t.key,t);return e}function rre(n){let e=YU;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ec(){return bd()}function ZU(){return bd()}function bd(){return new nf(n=>n.toString(),(n,e)=>n.isEqual(e))}const ire=new cr(ht.comparator);function Vt(...n){let e=ire;for(const t of n)e=e.add(t);return e}const sre=new cr(Yt);function ez(){return sre}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,cm.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new A_(_t.min(),i,ez(),sl(),Vt())}}class cm{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new cm(r,t,Vt(),Vt(),Vt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(e,t,r,i){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=i}}class tz{constructor(e,t){this.targetId=e,this.Et=t}}class nz{constructor(e,t,r=qr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class uD{constructor(){this.At=0,this.Rt=fD(),this.bt=qr.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return this.At!==0}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=Vt(),t=Vt(),r=Vt();return this.Rt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:xt()}}),new cm(this.bt,this.Pt,e,t,r)}xt(){this.vt=!1,this.Rt=fD()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class ore{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=sl(),this.qt=hD(),this.Ut=new cr(Yt)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const r=this.Wt(t);switch(e.state){case 0:this.zt(t)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:xt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,i)=>{this.zt(i)&&t(i)})}Jt(e){const t=e.targetId,r=e.Et.count,i=this.Yt(t);if(i){const s=i.target;if(kM(s))if(r===0){const o=new ht(s.path);this.Qt(t,o,$r.newNoDocument(o,_t.min()))}else rr(r===1);else this.Xt(t)!==r&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((s,o)=>{const a=this.Yt(o);if(a){if(s.current&&kM(a.target)){const l=new ht(a.target.path);this.Lt.get(l)!==null||this.te(o,l)||this.Qt(o,l,$r.newNoDocument(l,e))}s.St&&(t.set(o,s.Ct()),s.xt())}});let r=Vt();this.qt.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Yt(l);return!c||c.purpose===2||(a=!1,!1)}),a&&(r=r.add(s))}),this.Lt.forEach((s,o)=>o.setReadTime(e));const i=new A_(e,t,this.Ut,this.Lt,r);return this.Lt=sl(),this.qt=hD(),this.Ut=new cr(Yt),i}Gt(e,t){if(!this.zt(e))return;const r=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.zt(e))return;const i=this.Wt(e);this.te(e,t)?i.Nt(t,1):i.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new uD,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new cr(Yt),this.qt=this.qt.insert(e,t)),t}zt(e){const t=this.Yt(e)!==null;return t||ot("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new uD),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function hD(){return new Pr(ht.comparator)}function fD(){return new Pr(ht.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const are=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),lre=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),cre=(()=>({and:"AND",or:"OR"}))();class ure{constructor(e,t){this.databaseId=e,this.wt=t}}function HM(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rz(n,e){return n.wt?e.toBase64():e.toUint8Array()}function rh(n){return rr(!!n),_t.fromTimestamp(function(e){const t=il(e);return new xr(t.seconds,t.nanos)}(n))}function iz(n,e){return function(t){return new bn(["projects",t.projectId,"databases",t.database])}(n).child("documents").child(e).canonicalString()}function sz(n){const e=bn.fromString(n);return rr(cz(e)),e}function Kw(n,e){const t=sz(e);if(t.get(1)!==n.databaseId.projectId)throw new et(ke.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new et(ke.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ht(oz(t))}function VM(n,e){return iz(n.databaseId,e)}function hre(n){const e=sz(n);return e.length===4?bn.emptyPath():oz(e)}function dD(n){return new bn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function oz(n){return rr(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function fre(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:xt()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,c){return l.wt?(rr(c===void 0||typeof c=="string"),qr.fromBase64String(c||"")):(rr(c===void 0||c instanceof Uint8Array),qr.fromUint8Array(c||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const c=l.code===void 0?ke.UNKNOWN:QU(l.code);return new et(c,l.message||"")}(o);t=new nz(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Kw(n,r.document.name),s=rh(r.document.updateTime),o=r.document.createTime?rh(r.document.createTime):_t.min(),a=new io({mapValue:{fields:r.document.fields}}),l=$r.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];t=new Zy(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Kw(n,r.document),s=r.readTime?rh(r.readTime):_t.min(),o=$r.newNoDocument(i,s),a=r.removedTargetIds||[];t=new Zy([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Kw(n,r.document),s=r.removedTargetIds||[];t=new Zy([],s,i,null)}else{if(!("filter"in e))return xt();{e.filter;const r=e.filter;r.targetId;const i=r.count||0,s=new tre(i),o=r.targetId;t=new tz(o,s)}}return t}function dre(n,e){return{documents:[VM(n,e.path)]}}function pre(n,e){const t={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(t.parent=VM(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=VM(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(l.length!==0)return lz(zs.create(l,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(l){if(l.length!==0)return l.map(c=>function(h){return{field:Mu(h.field),direction:yre(h.dir)}}(c))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=function(l,c){return l.wt||y_(c)?c:{value:c}}(n,e.limit);var a;return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),t}function mre(n){let e=hre(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){rr(r===1);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(h){const d=az(h);return d instanceof zs&&kU(d)?d.getFilters():[d]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(h=>function(d){return new th(Eu(d.field),function(p){switch(p){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction))}(h)));let a=null;t.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,y_(d)?null:d}(t.limit));let l=null;t.startAt&&(l=function(h){const d=!!h.before,p=h.values||[];return new r0(p,d)}(t.startAt));let c=null;return t.endAt&&(c=function(h){const d=!h.before,p=h.values||[];return new r0(p,d)}(t.endAt)),jne(e,i,o,s,a,"F",l,c)}function gre(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return xt()}}(0,e.purpose);return t==null?null:{"goog-listen-tags":t}}function az(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Eu(e.unaryFilter.field);return er.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Eu(e.unaryFilter.field);return er.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Eu(e.unaryFilter.field);return er.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Eu(e.unaryFilter.field);return er.create(s,"!=",{nullValue:"NULL_VALUE"});default:return xt()}}(n):n.fieldFilter!==void 0?function(e){return er.create(Eu(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xt()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return zs.create(e.compositeFilter.filters.map(t=>az(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return xt()}}(e.compositeFilter.op))}(n):xt()}function yre(n){return are[n]}function vre(n){return lre[n]}function _re(n){return cre[n]}function Mu(n){return{fieldPath:n.canonicalString()}}function Eu(n){return oi.fromServerFormat(n.fieldPath)}function lz(n){return n instanceof er?function(e){if(e.op==="=="){if(eD(e.value))return{unaryFilter:{field:Mu(e.field),op:"IS_NAN"}};if(ZL(e.value))return{unaryFilter:{field:Mu(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(eD(e.value))return{unaryFilter:{field:Mu(e.field),op:"IS_NOT_NAN"}};if(ZL(e.value))return{unaryFilter:{field:Mu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mu(e.field),op:vre(e.op),value:e.value}}}(n):n instanceof zs?function(e){const t=e.getFilters().map(r=>lz(r));return t.length===1?t[0]:{compositeFilter:{op:_re(e.op),filters:t}}}(n):xt()}function cz(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xre{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Zne(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Cd(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Cd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=ZU();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=XU(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(_t.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Vt())}isEqual(e){return this.batchId===e.batchId&&Th(this.mutations,e.mutations,(t,r)=>aD(t,r))&&Th(this.baseMutations,e.baseMutations,(t,r)=>aD(t,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wre{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,t,r,i,s=_t.min(),o=_t.min(),a=qr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new fc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new fc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new fc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sre{constructor(e){this.ie=e}}function Are(n){const e=mre({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?FM(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mre{constructor(){this.Je=new Ere}addToCollectionParentIndex(e,t){return this.Je.add(t),Ie.resolve()}getCollectionParents(e,t){return Ie.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return Ie.resolve()}deleteFieldIndex(e,t){return Ie.resolve()}getDocumentsMatchingTarget(e,t){return Ie.resolve(null)}getIndexType(e,t){return Ie.resolve(0)}getFieldIndexes(e,t){return Ie.resolve([])}getNextCollectionGroupToUpdate(e){return Ie.resolve(null)}getMinOffset(e,t){return Ie.resolve(rl.min())}getMinOffsetFromCollectionGroup(e,t){return Ie.resolve(rl.min())}updateCollectionGroup(e,t,r){return Ie.resolve()}updateIndexEntries(e,t){return Ie.resolve()}}class Ere{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new cr(bn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new cr(bn.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Lh(0)}static vn(){return new Lh(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cre{constructor(){this.changes=new nf(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$r.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bre{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tre{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Cd(r.mutation,i,Na.empty(),xr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Vt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Vt()){const i=ec();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=sd();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=ec();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Vt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=sl();const o=bd(),a=bd();return t.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof S_)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Cd(h.mutation,c,h.mutation.getFieldMask(),xr.now())):o.set(c.key,Na.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),t.forEach((c,h)=>{var d;return a.set(c,new bre(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,t){const r=bd();let i=new Pr((o,a)=>o-a),s=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let h=r.get(l)||Na.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(i.get(a.batchId)||Vt()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=ZU();h.forEach(p=>{if(!s.has(p)){const m=XU(t.get(p),r.get(p));m!==null&&d.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return Ie.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return function(i){return ht.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):GU(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):Ie.resolve(ec());let a=-1,l=s;return o.next(c=>Ie.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?Ie.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Vt())).next(h=>({batchId:a,changes:rre(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ht(t)).next(r=>{let i=sd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=sd();return this.indexManager.getCollectionParents(e,i).next(o=>Ie.forEach(o,a=>{const l=function(c,h){return new tf(h,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(c=>{c.forEach((h,d)=>{s=s.insert(h,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(s=>{i.forEach((a,l)=>{const c=l.getKey();s.get(c)===null&&(s=s.insert(c,$r.newInvalidDocument(c)))});let o=sd();return s.forEach((a,l)=>{const c=i.get(a);c!==void 0&&Cd(c.mutation,l,Na.empty(),xr.now()),x_(t,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ire{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return Ie.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:rh(r.createTime)}),Ie.resolve()}getNamedQuery(e,t){return Ie.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,function(r){return{name:r.name,query:Are(r.bundledQuery),readTime:rh(r.readTime)}}(t)),Ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pre{constructor(){this.overlays=new Pr(ht.comparator),this.es=new Map}getOverlay(e,t){return Ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ec();return Ie.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.oe(e,t,s)}),Ie.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(r)),Ie.resolve()}getOverlaysForCollection(e,t,r){const i=ec(),s=t.length+1,o=new ht(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Ie.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Pr((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=ec(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=ec(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return Ie.resolve(a)}oe(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new wre(t,r));let s=this.es.get(t);s===void 0&&(s=Vt(),this.es.set(t,s)),this.es.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(){this.ns=new cr(gr.ss),this.rs=new cr(gr.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new gr(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new gr(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new ht(new bn([])),r=new gr(t,e),i=new gr(t,e+1),s=[];return this.rs.forEachInRange([r,i],o=>{this.cs(o),s.push(o.key)}),s}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new ht(new bn([])),r=new gr(t,e),i=new gr(t,e+1);let s=Vt();return this.rs.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new gr(e,0),r=this.ns.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class gr{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return ht.comparator(e.key,t.key)||Yt(e._s,t._s)}static os(e,t){return Yt(e._s,t._s)||ht.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rre{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new cr(gr.ss)}checkEmpty(e){return Ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new xre(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.gs=this.gs.add(new gr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Ie.resolve(o)}lookupMutationBatch(e,t){return Ie.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ps(r),s=i<0?0:i;return Ie.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ie.resolve(this.mutationQueue.length===0?-1:this.ws-1)}getAllMutationBatches(e){return Ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new gr(t,0),i=new gr(t,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([r,i],o=>{const a=this.ys(o._s);s.push(a)}),Ie.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new cr(Yt);return t.forEach(i=>{const s=new gr(i,0),o=new gr(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,o],a=>{r=r.add(a._s)})}),Ie.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;ht.isDocumentKey(s)||(s=s.child(""));const o=new gr(new ht(s),0);let a=new cr(Yt);return this.gs.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l._s)),!0)},o),Ie.resolve(this.Is(a))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){rr(this.Ts(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.gs;return Ie.forEach(t.mutations,i=>{const s=new gr(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new gr(t,0),i=this.gs.firstAfterOrEqual(r);return Ie.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ie.resolve()}Ts(e,t){return this.ps(e)}ps(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lre{constructor(e){this.Es=e,this.docs=new Pr(ht.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Ie.resolve(r?r.document.mutableCopy():$r.newInvalidDocument(t))}getEntries(e,t){let r=sl();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():$r.newInvalidDocument(i))}),Ie.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=sl();const o=t.path,a=new ht(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Tne(bne(h),r)<=0||(i.has(h.key)||x_(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return Ie.resolve(s)}getAllFromCollectionGroup(e,t,r,i){xt()}As(e,t){return Ie.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Dre(this)}getSize(e){return Ie.resolve(this.size)}}class Dre extends Cre{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),Ie.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bre{constructor(e){this.persistence=e,this.Rs=new nf(t=>Ib(t),Pb),this.lastRemoteSnapshotVersion=_t.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Bb,this.targetCount=0,this.vs=Lh.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),Ie.resolve()}getLastRemoteSnapshotVersion(e){return Ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ie.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),Ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),Ie.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Lh(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,Ie.resolve()}updateTargetData(e,t){return this.Dn(t),Ie.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,Ie.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Rs.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Rs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Ie.waitFor(s).next(()=>i)}getTargetCount(e){return Ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return Ie.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),Ie.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Ie.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),Ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return Ie.resolve(r)}containsKey(e,t){return Ie.resolve(this.Ps.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ore{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new bb(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new Bre(this),this.indexManager=new Mre,this.remoteDocumentCache=function(r){return new Lre(r)}(r=>this.referenceDelegate.xs(r)),this.yt=new Sre(t),this.Ns=new Ire(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Pre,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new Rre(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){ot("MemoryPersistence","Starting transaction:",e);const i=new kre(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(s=>this.referenceDelegate.Os(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ms(e,t){return Ie.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class kre extends Pne{constructor(e){super(),this.currentSequenceNumber=e}}class Ob{constructor(e){this.persistence=e,this.Fs=new Bb,this.$s=null}static Bs(e){return new Ob(e)}get Ls(){if(this.$s)return this.$s;throw xt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),Ie.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),Ie.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),Ie.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Ls.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ie.forEach(this.Ls,r=>{const i=ht.fromPath(r);return this.qs(e,i).next(s=>{s||t.removeEntry(i,_t.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return Ie.or([()=>Ie.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Vt(),i=Vt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new kb(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nre{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(s=>s||this.Oi(e,t,i,r)).next(s=>s||this.Mi(e,t))}ki(e,t){if(sD(t))return Ie.resolve(null);let r=Zo(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=FM(t,null,"F"),r=Zo(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Vt(...s);return this.Ni.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Fi(t,a);return this.$i(t,c,o,l.readTime)?this.ki(e,FM(t,null,"F")):this.Bi(e,c,t,l)}))})))}Oi(e,t,r,i){return sD(t)||i.isEqual(_t.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(s=>{const o=this.Fi(t,s);return this.$i(t,o,r,i)?this.Mi(e,t):(XL()<=Qt.DEBUG&&ot("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),UM(t)),this.Bi(e,o,t,Cne(i,-1)))})}Fi(e,t){let r=new cr(VU(e));return t.forEach((i,s)=>{x_(e,s)&&(r=r.add(s))}),r}$i(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Mi(e,t){return XL()<=Qt.DEBUG&&ot("QueryEngine","Using full collection scan to execute query:",UM(t)),this.Ni.getDocumentsMatchingQuery(e,t,rl.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fre{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.yt=i,this.qi=new Pr(Yt),this.Ui=new nf(s=>Ib(s),Pb),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Tre(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function Ure(n,e,t,r){return new Fre(n,e,t,r)}async function uz(n,e){const t=Kt(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Vt();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(r,l).next(c=>({ji:c,removedBatchIds:o,addedBatchIds:a}))})})}function hz(n){const e=Kt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function zre(n,e){const t=Kt(n),r=e.snapshotVersion;let i=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.qi;const a=[];e.targetChanges.forEach((h,d)=>{const p=i.get(d);if(!p)return;a.push(t.Cs.removeMatchingKeys(s,h.removedDocuments,d).next(()=>t.Cs.addMatchingKeys(s,h.addedDocuments,d)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.has(d)?m=m.withResumeToken(qr.EMPTY_BYTE_STRING,_t.min()).withLastLimboFreeSnapshotVersion(_t.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),i=i.insert(d,m),function(y,g,_){return y.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(p,m,h)&&a.push(t.Cs.updateTargetData(s,m))});let l=sl(),c=Vt();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(Gre(s,o,e.documentUpdates).next(h=>{l=h.Wi,c=h.zi})),!r.isEqual(_t.min())){const h=t.Cs.getLastRemoteSnapshotVersion(s).next(d=>t.Cs.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return Ie.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.qi=i,s))}function Gre(n,e,t){let r=Vt(),i=Vt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=sl();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(_t.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ot("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Wi:o,zi:i}})}function Hre(n,e){const t=Kt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(s=>s?(i=s,Ie.resolve(i)):t.Cs.allocateTargetId(r).next(o=>(i=new fc(e,o,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.qi.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.qi=t.qi.insert(r.targetId,r),t.Ui.set(e,r.targetId)),r})}async function WM(n,e,t){const r=Kt(n),i=r.qi.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!am(o))throw o;ot("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.qi=r.qi.remove(e),r.Ui.delete(i.target)}function pD(n,e,t){const r=Kt(n);let i=_t.min(),s=Vt();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,l,c){const h=Kt(a),d=h.Ui.get(c);return d!==void 0?Ie.resolve(h.qi.get(d)):h.Cs.getTargetData(l,c)}(r,o,Zo(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Li.getDocumentsMatchingQuery(o,e,t?i:_t.min(),t?s:Vt())).next(a=>(Vre(r,$ne(e),a),{documents:a,Hi:s})))}function Vre(n,e,t){let r=n.Ki.get(e)||_t.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Ki.set(e,r)}class mD{constructor(){this.activeTargetIds=ez()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Wre{constructor(){this.Lr=new mD,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new mD,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jre{Ur(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){ot("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){ot("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $re={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jre{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kre extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.oo=t+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,s){const o=this.ho(e,t);ot("RestConnection","Sending: ",o,r);const a={};return this.lo(a,i,s),this.fo(e,o,a,r).then(l=>(ot("RestConnection","Received: ",l),l),l=>{throw LM("RestConnection",`${e} failed with error: `,l,"url: ",o,"request:",r),l})}_o(e,t,r,i,s,o){return this.ao(e,t,r,i,s)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ef,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}ho(e,t){const r=$re[e];return`${this.oo}/v1/${t}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((s,o)=>{const a=new mne;a.setWithCredentials(!0),a.listenOnce(fne.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case $w.NO_ERROR:const c=a.getResponseJson();ot("Connection","XHR received:",JSON.stringify(c)),s(c);break;case $w.TIMEOUT:ot("Connection",'RPC "'+e+'" timed out'),o(new et(ke.DEADLINE_EXCEEDED,"Request time out"));break;case $w.HTTP_ERROR:const h=a.getStatus();if(ot("Connection",'RPC "'+e+'" failed with status:',h,"response text:",a.getResponseText()),h>0){let d=a.getResponseJson();Array.isArray(d)&&(d=d[0]);const p=d==null?void 0:d.error;if(p&&p.status&&p.message){const m=function(y){const g=y.toLowerCase().replace(/_/g,"-");return Object.values(ke).indexOf(g)>=0?g:ke.UNKNOWN}(p.status);o(new et(m,p.message))}else o(new et(ke.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new et(ke.UNAVAILABLE,"Connection failed."));break;default:xt()}}finally{ot("Connection",'RPC "'+e+'" completed.')}});const l=JSON.stringify(i);a.send(t,"POST",l,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=une(),o=hne(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new pne({})),this.lo(a.initMessageHeaders,t,r),a.encodeInitMessageHeaders=!0;const l=i.join("");ot("Connection","Creating WebChannel: "+l,a);const c=s.createWebChannel(l,a);let h=!1,d=!1;const p=new Jre({Hr:y=>{d?ot("Connection","Not sending because WebChannel is closed:",y):(h||(ot("Connection","Opening WebChannel transport."),c.open(),h=!0),ot("Connection","WebChannel sending:",y),c.send(y))},Jr:()=>c.close()}),m=(y,g,_)=>{y.listen(g,x=>{try{_(x)}catch(w){setTimeout(()=>{throw w},0)}})};return m(c,Ey.EventType.OPEN,()=>{d||ot("Connection","WebChannel transport opened.")}),m(c,Ey.EventType.CLOSE,()=>{d||(d=!0,ot("Connection","WebChannel transport closed"),p.io())}),m(c,Ey.EventType.ERROR,y=>{d||(d=!0,LM("Connection","WebChannel transport errored:",y),p.io(new et(ke.UNAVAILABLE,"The operation could not be completed")))}),m(c,Ey.EventType.MESSAGE,y=>{var g;if(!d){const _=y.data[0];rr(!!_);const x=_,w=x.error||((g=x[0])===null||g===void 0?void 0:g.error);if(w){ot("Connection","WebChannel received error:",w);const S=w.status;let M=function(I){const L=Qn[I];if(L!==void 0)return QU(L)}(S),T=w.message;M===void 0&&(M=ke.INTERNAL,T="Unknown error status: "+S+" with message "+w.message),d=!0,p.io(new et(M,T)),c.close()}else ot("Connection","WebChannel received:",_),p.ro(_)}}),m(o,dne.STAT_EVENT,y=>{y.stat===JL.PROXY?ot("Connection","Detected buffering proxy"):y.stat===JL.NOPROXY&&ot("Connection","Detected no buffering proxy")}),setTimeout(()=>{p.so()},0),p}}function Xw(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(n){return new ure(n,!0)}class fz{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&ot("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){this.To!==null&&(this.To.skipDelay(),this.To=null)}cancel(){this.To!==null&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xre{constructor(e,t,r,i,s,o,a,l){this.Hs=e,this.vo=r,this.Vo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new fz(e,t)}No(){return this.state===1||this.state===5||this.ko()}ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Oo()}async stop(){this.No()&&await this.close(0)}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&this.Do===null&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}async $o(){if(this.ko())return this.close(0)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}async close(e,t){this.Lo(),this.qo(),this.xo.cancel(),this.So++,e!==4?this.xo.reset():t&&t.code===ke.RESOURCE_EXHAUSTED?(Yo(t.toString()),Yo("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):t&&t.code===ke.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Uo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zr(t)}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new et(ke.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){this.state=5,this.xo.Ro(async()=>{this.state=0,this.start()})}Qo(e){return ot("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(ot("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qre extends Xre{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.yt=s}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=fre(this.yt,e),r=function(i){if(!("targetChange"in i))return _t.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?_t.min():s.readTime?rh(s.readTime):_t.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=dD(this.yt),t.addTarget=function(i,s){let o;const a=s.target;return o=kM(a)?{documents:dre(i,a)}:{query:pre(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=rz(i,s.resumeToken):s.snapshotVersion.compareTo(_t.min())>0&&(o.readTime=HM(i,s.snapshotVersion.toTimestamp())),o}(this.yt,e);const r=gre(this.yt,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=dD(this.yt),t.removeTarget=e,this.Bo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qre extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.yt=i,this.nu=!1}su(){if(this.nu)throw new et(ke.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.ao(e,t,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new et(ke.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection._o(e,t,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new et(ke.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}class Yre{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){this.iu===0&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){this.state==="Online"?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,e==="Online"&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Yo(t),this.ou=!1):ot("OnlineStateTracker",t)}lu(){this.ru!==null&&(this.ru.cancel(),this.ru=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zre{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.Ur(o=>{r.enqueueAndForget(async()=>{hm(this)&&(ot("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=Kt(a);l._u.add(4),await um(l),l.gu.set("Unknown"),l._u.delete(4),await E_(l)}(this))})}),this.gu=new Yre(r,i)}}async function E_(n){if(hm(n))for(const e of n.wu)await e(!0)}async function um(n){for(const e of n.wu)await e(!1)}function dz(n,e){const t=Kt(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),Ub(t)?Fb(t):rf(t).ko()&&Nb(t,e))}function pz(n,e){const t=Kt(n),r=rf(t);t.du.delete(e),r.ko()&&mz(t,e),t.du.size===0&&(r.ko()?r.Fo():hm(t)&&t.gu.set("Unknown"))}function Nb(n,e){n.yu.Ot(e.targetId),rf(n).zo(e)}function mz(n,e){n.yu.Ot(e),rf(n).Ho(e)}function Fb(n){n.yu=new ore({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),rf(n).start(),n.gu.uu()}function Ub(n){return hm(n)&&!rf(n).No()&&n.du.size>0}function hm(n){return Kt(n)._u.size===0}function gz(n){n.yu=void 0}async function eie(n){n.du.forEach((e,t)=>{Nb(n,e)})}async function tie(n,e){gz(n),Ub(n)?(n.gu.hu(e),Fb(n)):n.gu.set("Unknown")}async function nie(n,e,t){if(n.gu.set("Online"),e instanceof nz&&e.state===2&&e.cause)try{await async function(r,i){const s=i.cause;for(const o of i.targetIds)r.du.has(o)&&(await r.remoteSyncer.rejectListen(o,s),r.du.delete(o),r.yu.removeTarget(o))}(n,e)}catch(r){ot("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await yD(n,r)}else if(e instanceof Zy?n.yu.Kt(e):e instanceof tz?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(_t.min()))try{const r=await hz(n.localStore);t.compareTo(r)>=0&&await function(i,s){const o=i.yu.Zt(s);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const c=i.du.get(l);c&&i.du.set(l,c.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const l=i.du.get(a);if(!l)return;i.du.set(a,l.withResumeToken(qr.EMPTY_BYTE_STRING,l.snapshotVersion)),mz(i,a);const c=new fc(l.target,a,1,l.sequenceNumber);Nb(i,c)}),i.remoteSyncer.applyRemoteEvent(o)}(n,t)}catch(r){ot("RemoteStore","Failed to raise snapshot:",r),await yD(n,r)}}async function yD(n,e,t){if(!am(e))throw e;n._u.add(1),await um(n),n.gu.set("Offline"),t||(t=()=>hz(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ot("RemoteStore","Retrying IndexedDB access"),await t(),n._u.delete(1),await E_(n)})}async function vD(n,e){const t=Kt(n);t.asyncQueue.verifyOperationInProgress(),ot("RemoteStore","RemoteStore received new credentials");const r=hm(t);t._u.add(3),await um(t),r&&t.gu.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),await E_(t)}async function rie(n,e){const t=Kt(n);e?(t._u.delete(2),await E_(t)):e||(t._u.add(2),await um(t),t.gu.set("Unknown"))}function rf(n){return n.pu||(n.pu=function(e,t,r){const i=Kt(e);return i.su(),new qre(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:eie.bind(null,n),Zr:tie.bind(null,n),Wo:nie.bind(null,n)}),n.wu.push(async e=>{e?(n.pu.Mo(),Ub(n)?Fb(n):n.gu.set("Unknown")):(await n.pu.stop(),gz(n))})),n.pu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new uc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new zb(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new et(ke.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yz(n,e){if(Yo("AsyncQueue",`${e}: ${n}`),am(n))return new et(ke.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ht.comparator(t.key,r.key):(t,r)=>ht.comparator(t.key,r.key),this.keyedMap=sd(),this.sortedSet=new Pr(this.comparator)}static emptySet(e){return new ih(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ih)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new ih;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(){this.Tu=new Pr(ht.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?e.type!==0&&r.type===3?this.Tu=this.Tu.insert(t,e):e.type===3&&r.type!==1?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Tu=this.Tu.remove(t):e.type===1&&r.type===2?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):xt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Dh{constructor(e,t,r,i,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Dh(e,t,ih.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&__(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iie{constructor(){this.Au=void 0,this.listeners=[]}}class sie{constructor(){this.queries=new nf(e=>HU(e),__),this.onlineState="Unknown",this.Ru=new Set}}async function oie(n,e){const t=Kt(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new iie),i)try{s.Au=await t.onListen(r)}catch(o){const a=yz(o,`Initialization of query '${UM(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.listeners.push(e),e.bu(t.onlineState),s.Au&&e.Pu(s.Au)&&Gb(t)}async function aie(n,e){const t=Kt(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return t.queries.delete(r),t.onUnlisten(r)}function lie(n,e){const t=Kt(n);let r=!1;for(const i of e){const s=i.query,o=t.queries.get(s);if(o){for(const a of o.listeners)a.Pu(i)&&(r=!0);o.Au=i}}r&&Gb(t)}function cie(n,e,t){const r=Kt(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function Gb(n){n.Ru.forEach(e=>{e.next()})}class uie{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Dh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){if(!e.fromCache)return!0;const r=t!=="Offline";return(!this.options.Nu||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Du(e){if(e.docChanges.length>0)return!0;const t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}xu(e){e=Dh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vz{constructor(e){this.key=e}}class _z{constructor(e){this.key=e}}class hie{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Vt(),this.mutatedKeys=Vt(),this.Gu=VU(e),this.Qu=new ih(this.Gu)}get ju(){return this.qu}Wu(e,t){const r=t?t.zu:new _D,i=t?t.Qu:this.Qu;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const p=i.get(h),m=x_(this.query,d)?d:null,y=!!p&&this.mutatedKeys.has(p.key),g=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let _=!1;p&&m?p.data.isEqual(m.data)?y!==g&&(r.track({type:3,doc:m}),_=!0):this.Hu(p,m)||(r.track({type:2,doc:m}),_=!0,(l&&this.Gu(m,l)>0||c&&this.Gu(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),_=!0):p&&!m&&(r.track({type:1,doc:p}),_=!0,(l||c)&&(a=!0)),_&&(m?(o=o.add(m),s=g?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Qu:o,zu:r,$i:a,mutatedKeys:s}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const s=e.zu.Eu();s.sort((c,h)=>function(d,p){const m=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xt()}};return m(d)-m(p)}(c.type,h.type)||this.Gu(c.doc,h.doc)),this.Ju(r);const o=t?this.Yu():[],a=this.Ku.size===0&&this.current?1:0,l=a!==this.Uu;return this.Uu=a,s.length!==0||l?{snapshot:new Dh(this.query,e.Qu,i,s,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}bu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new _D,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Vt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new _z(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new vz(r))}),t}tc(e){this.qu=e.Hi,this.Ku=Vt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Dh.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,this.Uu===0,this.hasCachedResults)}}class fie{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class die{constructor(e){this.key=e,this.nc=!1}}class pie{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new nf(a=>HU(a),__),this.rc=new Map,this.oc=new Set,this.uc=new Pr(ht.comparator),this.cc=new Map,this.ac=new Bb,this.hc={},this.lc=new Map,this.fc=Lh.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return this.dc===!0}}async function mie(n,e){const t=Sie(n);let r,i;const s=t.ic.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.ec();else{const o=await Hre(t.localStore,Zo(e));t.isPrimaryClient&&dz(t.remoteStore,o);const a=t.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await gie(t,e,r,a==="current",o.resumeToken)}return i}async function gie(n,e,t,r,i){n._c=(d,p,m)=>async function(y,g,_,x){let w=g.view.Wu(_);w.$i&&(w=await pD(y.localStore,g.query,!1).then(({documents:T})=>g.view.Wu(T,w)));const S=x&&x.targetChanges.get(g.targetId),M=g.view.applyChanges(w,y.isPrimaryClient,S);return wD(y,g.targetId,M.Xu),M.snapshot}(n,d,p,m);const s=await pD(n.localStore,e,!0),o=new hie(e,s.Hi),a=o.Wu(s.documents),l=cm.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),c=o.applyChanges(a,n.isPrimaryClient,l);wD(n,t,c.Xu);const h=new fie(e,t,o);return n.ic.set(e,h),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),c.snapshot}async function yie(n,e){const t=Kt(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(s=>!__(s,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||await WM(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),pz(t.remoteStore,r.targetId),jM(t,r.targetId)}).catch(Cb)):(jM(t,r.targetId),await WM(t.localStore,r.targetId,!0))}async function xz(n,e){const t=Kt(n);try{const r=await zre(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.cc.get(s);o&&(rr(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.nc=!0:i.modifiedDocuments.size>0?rr(o.nc):i.removedDocuments.size>0&&(rr(o.nc),o.nc=!1))}),await Sz(t,r,e)}catch(r){await Cb(r)}}function xD(n,e,t){const r=Kt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.ic.forEach((s,o)=>{const a=o.view.bu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=Kt(s);a.onlineState=o;let l=!1;a.queries.forEach((c,h)=>{for(const d of h.listeners)d.bu(o)&&(l=!0)}),l&&Gb(a)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function vie(n,e,t){const r=Kt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),s=i&&i.key;if(s){let o=new Pr(ht.comparator);o=o.insert(s,$r.newNoDocument(s,_t.min()));const a=Vt().add(s),l=new A_(_t.min(),new Map,new cr(Yt),o,a);await xz(r,l),r.uc=r.uc.remove(s),r.cc.delete(e),Hb(r)}else await WM(r.localStore,e,!1).then(()=>jM(r,e,t)).catch(Cb)}function jM(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||wz(n,r)})}function wz(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);t!==null&&(pz(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),Hb(n))}function wD(n,e,t){for(const r of t)r instanceof vz?(n.ac.addReference(r.key,e),_ie(n,r)):r instanceof _z?(ot("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||wz(n,r.key)):xt()}function _ie(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(ot("SyncEngine","New document in limbo: "+t),n.oc.add(r),Hb(n))}function Hb(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new ht(bn.fromString(e)),r=n.fc.next();n.cc.set(r,new die(t)),n.uc=n.uc.insert(t,r),dz(n.remoteStore,new fc(Zo(zU(t.path)),r,2,bb.at))}}async function Sz(n,e,t){const r=Kt(n),i=[],s=[],o=[];r.ic.isEmpty()||(r.ic.forEach((a,l)=>{o.push(r._c(l,e,t).then(c=>{if((c||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){i.push(c);const h=kb.Ci(l.targetId,c);s.push(h)}}))}),await Promise.all(o),r.sc.Wo(i),await async function(a,l){const c=Kt(a);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>Ie.forEach(l,d=>Ie.forEach(d.Si,p=>c.persistence.referenceDelegate.addReference(h,d.targetId,p)).next(()=>Ie.forEach(d.Di,p=>c.persistence.referenceDelegate.removeReference(h,d.targetId,p)))))}catch(h){if(!am(h))throw h;ot("LocalStore","Failed to update sequence numbers: "+h)}for(const h of l){const d=h.targetId;if(!h.fromCache){const p=c.qi.get(d),m=p.snapshotVersion,y=p.withLastLimboFreeSnapshotVersion(m);c.qi=c.qi.insert(d,y)}}}(r.localStore,s))}async function xie(n,e){const t=Kt(n);if(!t.currentUser.isEqual(e)){ot("SyncEngine","User change. New user:",e.toKey());const r=await uz(t.localStore,e);t.currentUser=e,function(i,s){i.lc.forEach(o=>{o.forEach(a=>{a.reject(new et(ke.CANCELLED,s))})}),i.lc.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Sz(t,r.ji)}}function wie(n,e){const t=Kt(n),r=t.cc.get(e);if(r&&r.nc)return Vt().add(r.key);{let i=Vt();const s=t.rc.get(e);if(!s)return i;for(const o of s){const a=t.ic.get(o);i=i.unionWith(a.view.ju)}return i}}function Sie(n){const e=Kt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=xz.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wie.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vie.bind(null,e),e.sc.Wo=lie.bind(null,e.eventManager),e.sc.wc=cie.bind(null,e.eventManager),e}class Aie{constructor(){this.synchronizeTabs=!1}async initialize(e){this.yt=M_(e.databaseInfo.databaseId),this.sharedClientState=this.gc(e),this.persistence=this.yc(e),await this.persistence.start(),this.localStore=this.Ic(e),this.gcScheduler=this.Tc(e,this.localStore),this.indexBackfillerScheduler=this.Ec(e,this.localStore)}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return Ure(this.persistence,new Nre,e.initialUser,this.yt)}yc(e){return new Ore(Ob.Bs,this.yt)}gc(e){return new Wre}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Mie{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>xD(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=xie.bind(null,this.syncEngine),await rie(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new sie}createDatastore(e){const t=M_(e.databaseInfo.databaseId),r=(i=e.databaseInfo,new Kre(i));var i;return function(s,o,a,l){return new Qre(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>xD(this.syncEngine,a,0),o=gD.C()?new gD:new jre,new Zre(t,r,i,s,o);var t,r,i,s,o}createSyncEngine(e,t){return function(r,i,s,o,a,l,c){const h=new pie(r,i,s,o,a,l);return c&&(h.dc=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Kt(e);ot("RemoteStore","RemoteStore shutting down."),t._u.add(5),await um(t),t.mu.shutdown(),t.gu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eie(n,e,t){if(!t)throw new et(ke.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Cie(n,e,t,r){if(e===!0&&r===!0)throw new et(ke.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function SD(n){if(ht.isDocumentKey(n))throw new et(ke.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function C_(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":xt()}function $M(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new et(ke.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=C_(n);throw new et(ke.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD=new Map;class MD{constructor(e){var t;if(e.host===void 0){if(e.ssl!==void 0)throw new et(ke.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new et(ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Cie("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new MD({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new et(ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new et(ke.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new MD(e),e.credentials!==void 0&&(this._authCredentials=function(t){if(!t)return new gne;switch(t.type){case"gapi":const r=t.client;return new xne(r,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new et(ke.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=AD.get(e);t&&(ot("ComponentProvider","Removing Datastore"),AD.delete(e),t.terminate())}(this),Promise.resolve()}}function bie(n,e,t,r={}){var i;const s=(n=$M(n,Vb))._getSettings();if(s.host!=="firestore.googleapis.com"&&s.host!==e&&LM("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let o,a;if(typeof r.mockUserToken=="string")o=r.mockUserToken,a=Wr.MOCK_USER;else{o=YZ(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new et(ke.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new Wr(l)}n._authCredentials=new yne(new PU(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sh(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sa(this.firestore,e,this._key)}}class Uc{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Uc(this.firestore,e,this._query)}}class sh extends Uc{constructor(e,t,r){super(e,t,zU(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sa(this.firestore,null,new ht(e))}withConverter(e){return new sh(this.firestore,e,this._path)}}function Tie(n,e,...t){if(n=jv(n),Eie("collection","path",e),n instanceof Vb){const r=bn.fromString(e,...t);return SD(r),new sh(n,null,r)}{if(!(n instanceof sa||n instanceof sh))throw new et(ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(bn.fromString(e,...t));return SD(r),new sh(n.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iie{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Yo("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pie{constructor(e,t,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Wr.UNAUTHENTICATED,this.clientId=Mne.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{ot("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(ot("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new et(ke.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new uc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=yz(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Rie(n,e){n.asyncQueue.verifyOperationInProgress(),ot("FirestoreClient","Initializing OfflineComponentProvider");const t=await n.getConfiguration();await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await uz(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}async function Lie(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Die(n);ot("FirestoreClient","Initializing OnlineComponentProvider");const r=await n.getConfiguration();await e.initialize(t,r),n.setCredentialChangeListener(i=>vD(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>vD(e.remoteStore,s)),n.onlineComponents=e}async function Die(n){return n.offlineComponents||(ot("FirestoreClient","Using default OfflineComponentProvider"),await Rie(n,new Aie)),n.offlineComponents}async function Bie(n){return n.onlineComponents||(ot("FirestoreClient","Using default OnlineComponentProvider"),await Lie(n,new Mie)),n.onlineComponents}async function Oie(n){const e=await Bie(n),t=e.eventManager;return t.onListen=mie.bind(null,e.syncEngine),t.onUnlisten=yie.bind(null,e.syncEngine),t}function kie(n,e,t={}){const r=new uc;return n.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,l){const c=new Iie({next:d=>{s.enqueueAndForget(()=>aie(i,h)),d.fromCache&&a.source==="server"?l.reject(new et(ke.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),h=new uie(o,c,{includeMetadataChanges:!0,Nu:!0});return oie(i,h)}(await Oie(n),n.asyncQueue,e,t,r)),r.promise}class Nie{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new fz(this,"async_queue_retry"),this.Wc=()=>{const t=Xw();t&&ot("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=Xw();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=Xw();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new uc;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}async Jc(){if(this.Lc.length!==0){try{await this.Lc[0](),this.Lc.shift(),this.xo.reset()}catch(e){if(!am(e))throw e;ot("AsyncQueue","Operation failed with retryable error: "+e)}this.Lc.length>0&&this.xo.Ro(()=>this.Jc())}}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{this.Kc=r,this.Gc=!1;const i=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(r);throw Yo("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=zb.createAndSchedule(this,e,t,r,s=>this.Yc(s));return this.Uc.push(i),i}zc(){this.Kc&&xt()}verifyOperationInProgress(){}async Xc(){let e;do e=this.Bc,await e;while(e!==this.Bc)}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}class Az extends Vb{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Nie,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Mz(this),this._firestoreClient.terminate()}}function Fie(n,e){const t=typeof n=="object"?n:nte(),r=typeof n=="string"?n:e||"(default)",i=Yee(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=XZ("firestore");s&&bie(i,...s)}return i}function Uie(n){return n._firestoreClient||Mz(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Mz(n){var e;const t=n._freezeSettings(),r=function(i,s,o,a){return new Rne(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,t);n._firestoreClient=new Pie(n._authCredentials,n._appCheckCredentials,n._queue,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bh(qr.fromBase64String(e))}catch(t){throw new et(ke.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Bh(qr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ez{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new et(ke.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new oi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cz{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new et(ke.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new et(ke.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Yt(this._lat,e._lat)||Yt(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zie=/^__.*__$/;function bz(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xt()}}class jb{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.yt=r,this.ignoreUndefinedProperties=i,s===void 0&&this.na(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new jb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return JM(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(e.length===0)throw this.ha("Document fields must not be empty");if(bz(this.sa)&&zie.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class Gie{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=r||M_(e)}da(e,t,r,i=!1){return new jb({sa:e,methodName:t,fa:r,path:oi.emptyPath(),oa:!1,la:i},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Hie(n){const e=n._freezeSettings(),t=M_(n._databaseId);return new Gie(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Vie(n,e,t,r=!1){return $b(t,n.da(r?4:3,e))}function $b(n,e){if(Tz(n=jv(n)))return jie("Unsupported field value:",e,n),Wie(n,e);if(n instanceof Cz)return function(t,r){if(!bz(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&e.sa!==4)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const o of t){let a=$b(o,r.aa(s));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if((t=jv(t))===null)return{nullValue:"NULL_VALUE"};if(typeof t=="number")return Kne(r.yt,t);if(typeof t=="boolean")return{booleanValue:t};if(typeof t=="string")return{stringValue:t};if(t instanceof Date){const i=xr.fromDate(t);return{timestampValue:HM(r.yt,i)}}if(t instanceof xr){const i=new xr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:HM(r.yt,i)}}if(t instanceof Wb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Bh)return{bytesValue:rz(r.yt,t._byteString)};if(t instanceof sa){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.ha(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:iz(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${C_(t)}`)}(n,e)}function Wie(n,e){const t={};return RU(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lm(n,(r,i)=>{const s=$b(i,e.ra(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function Tz(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof xr||n instanceof Wb||n instanceof Bh||n instanceof sa||n instanceof Cz)}function jie(n,e,t){if(!Tz(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){const r=C_(t);throw r==="an object"?e.ha(n+" a custom object"):e.ha(n+" "+r)}}const $ie=new RegExp("[~\\*/\\[\\]]");function Jie(n,e,t){if(e.search($ie)>=0)throw JM(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ez(...e.split("."))._internalPath}catch{throw JM(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function JM(n,e,t,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new et(ke.INVALID_ARGUMENT,a+n+l)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iz{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new sa(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Kie(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Jb("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Kie extends Iz{data(){return super.data()}}function Jb(n,e){return typeof e=="string"?Jie(n,e):e instanceof Ez?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xie(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new et(ke.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Kb{}class Pz extends Kb{}function qie(n,e,...t){let r=[];e instanceof Kb&&r.push(e),r=r.concat(t),function(i){const s=i.filter(a=>a instanceof qb).length,o=i.filter(a=>a instanceof Xb).length;if(s>1||s>0&&o>0)throw new et(ke.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Xb extends Pz{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Xb(e,t,r)}_apply(e){const t=this._parse(e);return Rz(e._query,t),new Uc(e.firestore,e.converter,NM(e._query,t))}_parse(e){const t=Hie(e.firestore);return function(i,s,o,a,l,c,h){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new et(ke.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){CD(h,c);const p=[];for(const m of h)p.push(ED(a,i,m));d={arrayValue:{values:p}}}else d=ED(a,i,h)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||CD(h,c),d=Vie(o,s,h,c==="in"||c==="not-in");return er.create(l,c,d)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class qb extends Kb{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new qb(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:zs.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(r,i){let s=r;const o=i.getFlattenedFilters();for(const a of o)Rz(s,a),s=NM(s,a)}(e._query,t),new Uc(e.firestore,e.converter,NM(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Qb extends Pz{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Qb(e,t)}_apply(e){const t=function(r,i,s){if(r.startAt!==null)throw new et(ke.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new et(ke.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new th(i,s);return function(a,l){if(Rb(a)===null){const c=v_(a);c!==null&&Lz(a,c,l.field)}}(r,o),o}(e._query,this._field,this._direction);return new Uc(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new tf(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}function Qie(n,e="asc"){const t=e,r=Jb("orderBy",n);return Qb._create(r,t)}function ED(n,e,t){if(typeof(t=jv(t))=="string"){if(t==="")throw new et(ke.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!GU(e)&&t.indexOf("/")!==-1)throw new et(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(bn.fromString(t));if(!ht.isDocumentKey(r))throw new et(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return YL(n,new ht(r))}if(t instanceof sa)return YL(n,t._key);throw new et(ke.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${C_(t)}.`)}function CD(n,e){if(!Array.isArray(n)||n.length===0)throw new et(ke.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new et(ke.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Rz(n,e){if(e.isInequality()){const r=v_(n),i=e.field;if(r!==null&&!r.isEqual(i))throw new et(ke.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=Rb(n);s!==null&&Lz(n,i,s)}const t=function(r,i){for(const s of r)for(const o of s.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new et(ke.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new et(ke.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Lz(n,e,t){if(!t.isEqual(e))throw new et(ke.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Yie{convertValue(e,t="none"){switch(Tc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ih(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw xt()}}convertObject(e,t){const r={};return lm(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new Wb(Yn(e.latitude),Yn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=DU(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(_p(e));default:return null}}convertTimestamp(e){const t=il(e);return new xr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=bn.fromString(e);rr(cz(r));const i=new vp(r.get(1),r.get(3)),s=new ht(r.popFirst(5));return i.isEqual(t)||Yo(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zie extends Iz{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ev(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Jb("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class ev extends Zie{data(e={}){return super.data(e)}}class ese{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ty(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ev(this._firestore,this._userDataWriter,r.key,r,new Ty(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new et(ke.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>{const a=new ev(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Ty(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const a=new ev(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Ty(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let l=-1,c=-1;return o.type!==0&&(l=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),c=s.indexOf(o.doc.key)),{type:tse(o.type),doc:a,oldIndex:l,newIndex:c}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function tse(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xt()}}class nse extends Yie{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bh(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sa(this.firestore,null,t)}}function rse(n){n=$M(n,Uc);const e=$M(n.firestore,Az),t=Uie(e),r=new nse(e);return Xie(n._query),kie(t,n._query).then(i=>new ese(e,r,n,i))}(function(n,e=!0){(function(t){ef=t})(tte),Jv(new up("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),o=new Az(new vne(t.getProvider("auth-internal")),new Sne(t.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new et(ke.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vp(a.options.projectId,l)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),eh(KL,"3.8.3",n),eh(KL,"3.8.3","esm2017")})();const ise={apiKey:"AIzaSyANfovU7d6QJFniluKEECeVBnxXChrHn54",authDomain:"money-can-145ae.firebaseapp.com",projectId:"money-can-145ae",storageBucket:"money-can-145ae.appspot.com",messagingSenderId:"408225112663",appId:"1:408225112663:web:6571b8a432228cf899f912",measurementId:"G-RZ2KH01K91"},sse=EF(ise),ose=Fie(sse),ase="/money-can/assets/-a7c01563.png",lse=()=>k("section",{className:"fulfillment",children:[E("section",{className:"fulfillment__description",children:k("div",{className:"container",children:[E("h2",{children:""}),E("p",{children:"        ,    .      ,  , , , ,   . .     ,     ,           ."})]})}),E("section",{className:"fulfillment__content",children:k("div",{className:"container",children:[E("figure",{children:E("img",{src:ase,alt:"  "})}),k("div",{className:"fulfillment__about",children:[k("p",{children:[E("strong",{children:" :"}),"  "]}),k("p",{children:[E("strong",{children:":"}),k("form",{action:"",children:[k("div",{children:[E("input",{type:"checkbox",id:"brak"}),E("label",{htmlFor:"brak",children:"  "})]}),k("div",{children:[E("input",{type:"checkbox",id:"brak"}),E("label",{htmlFor:"send",children:""})]}),k("div",{children:[E("input",{type:"checkbox",id:"clean"}),E("label",{htmlFor:"clean",children:" "})]}),k("div",{children:[E("input",{type:"checkbox",id:"lable"}),E("label",{htmlFor:"lable",children:" , , "})]}),k("div",{children:[E("input",{type:"checkbox",id:"brand"}),E("label",{htmlFor:"brand",children:"  ( )   "})]}),k("div",{children:[E("input",{type:"checkbox",id:"paint"}),E("label",{htmlFor:"paint",children:"    "})]}),k("div",{children:[E("input",{type:"checkbox",id:"mark"}),E("label",{htmlFor:"mark",children:""})]})]})]})]})]})})]}),cse=n=>{const[e]=YC([n.imgUrl]);return k(pY,{speed:.75,rotationIntensity:1,floatIntensity:2,children:[E("ambientLight",{intensity:.25}),E("directionalLight",{position:[0,0,.05]}),k("mesh",{castShadow:!0,receiveShadow:!0,scale:2.45,children:[E("icosahedronGeometry",{args:[1,1]}),E("meshStandardMaterial",{color:"#fff8eb",polygonOffset:!0,polygonOffsetFactor:-5,flatShading:!0}),E(dY,{position:[0,0,1],map:e,rotation:[2*Math.PI,0,6.25],flatShading:!0})]})]})},use=({icon:n})=>k(KC,{style:{height:50},frameloop:"demand",gl:{preserveDrawing:!0},children:[k(q.Suspense,{fallback:E(nb,{}),children:[E(eb,{enableZoom:!1}),E(cse,{imgUrl:n})]}),E(mF,{all:!0})]}),hse=()=>E("div",{className:"contact-links",children:T6.map((n,e)=>E("div",{children:E(use,{icon:n.icon})},e))});const fse=()=>k("div",{className:"not-found",children:[k("h1",{children:[E("span",{children:""}),E("br",{}),"  "]}),E("p",{children:"       !"})]});var KM={},dse={get exports(){return KM},set exports(n){KM=n}},Dz={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oh=q;function pse(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var mse=typeof Object.is=="function"?Object.is:pse,gse=Oh.useState,yse=Oh.useEffect,vse=Oh.useLayoutEffect,_se=Oh.useDebugValue;function xse(n,e){var t=e(),r=gse({inst:{value:t,getSnapshot:e}}),i=r[0].inst,s=r[1];return vse(function(){i.value=t,i.getSnapshot=e,qw(i)&&s({inst:i})},[n,t,e]),yse(function(){return qw(i)&&s({inst:i}),n(function(){qw(i)&&s({inst:i})})},[n]),_se(t),t}function qw(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!mse(n,t)}catch{return!0}}function wse(n,e){return e()}var Sse=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?wse:xse;Dz.useSyncExternalStore=Oh.useSyncExternalStore!==void 0?Oh.useSyncExternalStore:Sse;(function(n){n.exports=Dz})(dse);var bD={},Ase={get exports(){return bD},set exports(n){bD=n}},Bz={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b_=q,Mse=KM;function Ese(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Cse=typeof Object.is=="function"?Object.is:Ese,bse=Mse.useSyncExternalStore,Tse=b_.useRef,Ise=b_.useEffect,Pse=b_.useMemo,Rse=b_.useDebugValue;Bz.useSyncExternalStoreWithSelector=function(n,e,t,r,i){var s=Tse(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Pse(function(){function l(m){if(!c){if(c=!0,h=m,m=r(m),i!==void 0&&o.hasValue){var y=o.value;if(i(y,m))return d=y}return d=m}if(y=d,Cse(h,m))return y;var g=r(m);return i!==void 0&&i(y,g)?y:(h=m,d=g)}var c=!1,h,d,p=t===void 0?null:t;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,t,r,i]);var a=bse(n,s[0],s[1]);return Ise(function(){o.hasValue=!0,o.value=a},[a]),Rse(a),a};(function(n){n.exports=Bz})(Ase);function Lse(n){n()}let Oz=Lse;const Dse=n=>Oz=n,Bse=()=>Oz,Ose=q.createContext(null);var XM={},kse={get exports(){return XM},set exports(n){XM=n}},en={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sr=typeof Symbol=="function"&&Symbol.for,Yb=Sr?Symbol.for("react.element"):60103,Zb=Sr?Symbol.for("react.portal"):60106,T_=Sr?Symbol.for("react.fragment"):60107,I_=Sr?Symbol.for("react.strict_mode"):60108,P_=Sr?Symbol.for("react.profiler"):60114,R_=Sr?Symbol.for("react.provider"):60109,L_=Sr?Symbol.for("react.context"):60110,eT=Sr?Symbol.for("react.async_mode"):60111,D_=Sr?Symbol.for("react.concurrent_mode"):60111,B_=Sr?Symbol.for("react.forward_ref"):60112,O_=Sr?Symbol.for("react.suspense"):60113,Nse=Sr?Symbol.for("react.suspense_list"):60120,k_=Sr?Symbol.for("react.memo"):60115,N_=Sr?Symbol.for("react.lazy"):60116,Fse=Sr?Symbol.for("react.block"):60121,Use=Sr?Symbol.for("react.fundamental"):60117,zse=Sr?Symbol.for("react.responder"):60118,Gse=Sr?Symbol.for("react.scope"):60119;function $i(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case Yb:switch(n=n.type,n){case eT:case D_:case T_:case P_:case I_:case O_:return n;default:switch(n=n&&n.$$typeof,n){case L_:case B_:case N_:case k_:case R_:return n;default:return e}}case Zb:return e}}}function kz(n){return $i(n)===D_}en.AsyncMode=eT;en.ConcurrentMode=D_;en.ContextConsumer=L_;en.ContextProvider=R_;en.Element=Yb;en.ForwardRef=B_;en.Fragment=T_;en.Lazy=N_;en.Memo=k_;en.Portal=Zb;en.Profiler=P_;en.StrictMode=I_;en.Suspense=O_;en.isAsyncMode=function(n){return kz(n)||$i(n)===eT};en.isConcurrentMode=kz;en.isContextConsumer=function(n){return $i(n)===L_};en.isContextProvider=function(n){return $i(n)===R_};en.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===Yb};en.isForwardRef=function(n){return $i(n)===B_};en.isFragment=function(n){return $i(n)===T_};en.isLazy=function(n){return $i(n)===N_};en.isMemo=function(n){return $i(n)===k_};en.isPortal=function(n){return $i(n)===Zb};en.isProfiler=function(n){return $i(n)===P_};en.isStrictMode=function(n){return $i(n)===I_};en.isSuspense=function(n){return $i(n)===O_};en.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===T_||n===D_||n===P_||n===I_||n===O_||n===Nse||typeof n=="object"&&n!==null&&(n.$$typeof===N_||n.$$typeof===k_||n.$$typeof===R_||n.$$typeof===L_||n.$$typeof===B_||n.$$typeof===Use||n.$$typeof===zse||n.$$typeof===Gse||n.$$typeof===Fse)};en.typeOf=$i;(function(n){n.exports=en})(kse);var Nz=XM,Hse={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Vse={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Fz={};Fz[Nz.ForwardRef]=Hse;Fz[Nz.Memo]=Vse;var TD={},Wse={get exports(){return TD},set exports(n){TD=n}},tn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tT=Symbol.for("react.element"),nT=Symbol.for("react.portal"),F_=Symbol.for("react.fragment"),U_=Symbol.for("react.strict_mode"),z_=Symbol.for("react.profiler"),G_=Symbol.for("react.provider"),H_=Symbol.for("react.context"),jse=Symbol.for("react.server_context"),V_=Symbol.for("react.forward_ref"),W_=Symbol.for("react.suspense"),j_=Symbol.for("react.suspense_list"),$_=Symbol.for("react.memo"),J_=Symbol.for("react.lazy"),$se=Symbol.for("react.offscreen"),Uz;Uz=Symbol.for("react.module.reference");function gs(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case tT:switch(n=n.type,n){case F_:case z_:case U_:case W_:case j_:return n;default:switch(n=n&&n.$$typeof,n){case jse:case H_:case V_:case J_:case $_:case G_:return n;default:return e}}case nT:return e}}}tn.ContextConsumer=H_;tn.ContextProvider=G_;tn.Element=tT;tn.ForwardRef=V_;tn.Fragment=F_;tn.Lazy=J_;tn.Memo=$_;tn.Portal=nT;tn.Profiler=z_;tn.StrictMode=U_;tn.Suspense=W_;tn.SuspenseList=j_;tn.isAsyncMode=function(){return!1};tn.isConcurrentMode=function(){return!1};tn.isContextConsumer=function(n){return gs(n)===H_};tn.isContextProvider=function(n){return gs(n)===G_};tn.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===tT};tn.isForwardRef=function(n){return gs(n)===V_};tn.isFragment=function(n){return gs(n)===F_};tn.isLazy=function(n){return gs(n)===J_};tn.isMemo=function(n){return gs(n)===$_};tn.isPortal=function(n){return gs(n)===nT};tn.isProfiler=function(n){return gs(n)===z_};tn.isStrictMode=function(n){return gs(n)===U_};tn.isSuspense=function(n){return gs(n)===W_};tn.isSuspenseList=function(n){return gs(n)===j_};tn.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===F_||n===z_||n===U_||n===W_||n===j_||n===$se||typeof n=="object"&&n!==null&&(n.$$typeof===J_||n.$$typeof===$_||n.$$typeof===G_||n.$$typeof===H_||n.$$typeof===V_||n.$$typeof===Uz||n.getModuleId!==void 0)};tn.typeOf=gs;(function(n){n.exports=tn})(Wse);function Jse(){const n=Bse();let e=null,t=null;return{clear(){e=null,t=null},notify(){n(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=e;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!i||e===null||(i=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}const ID={notify(){},get:()=>[]};function Kse(n,e){let t,r=ID;function i(d){return l(),r.subscribe(d)}function s(){r.notify()}function o(){h.onStateChange&&h.onStateChange()}function a(){return Boolean(t)}function l(){t||(t=e?e.addNestedSub(o):n.subscribe(o),r=Jse())}function c(){t&&(t(),t=void 0,r.clear(),r=ID)}const h={addNestedSub:i,notifyNestedSubs:s,handleChangeWrapper:o,isSubscribed:a,trySubscribe:l,tryUnsubscribe:c,getListeners:()=>r};return h}const Xse=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qse=Xse?q.useLayoutEffect:q.useEffect;function Qse({store:n,context:e,children:t,serverState:r}){const i=q.useMemo(()=>{const a=Kse(n);return{store:n,subscription:a,getServerState:r?()=>r:void 0}},[n,r]),s=q.useMemo(()=>n.getState(),[n]);qse(()=>{const{subscription:a}=i;return a.onStateChange=a.notifyNestedSubs,a.trySubscribe(),s!==n.getState()&&a.notifyNestedSubs(),()=>{a.tryUnsubscribe(),a.onStateChange=void 0}},[i,s]);const o=e||Ose;return Td.createElement(o.Provider,{value:i},t)}Dse(nv.unstable_batchedUpdates);function Ls(n){for(var e=arguments.length,t=Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+n+(t.length?" "+t.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function ol(n){return!!n&&!!n[_n]}function ea(n){var e;return!!n&&(function(t){if(!t||typeof t!="object")return!1;var r=Object.getPrototypeOf(t);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===ooe}(n)||Array.isArray(n)||!!n[kD]||!!(!((e=n.constructor)===null||e===void 0)&&e[kD])||rT(n)||iT(n))}function Ic(n,e,t){t===void 0&&(t=!1),sf(n)===0?(t?Object.keys:ah)(n).forEach(function(r){t&&typeof r=="symbol"||e(r,n[r],n)}):n.forEach(function(r,i){return e(i,r,n)})}function sf(n){var e=n[_n];return e?e.i>3?e.i-4:e.i:Array.isArray(n)?1:rT(n)?2:iT(n)?3:0}function oh(n,e){return sf(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function Yse(n,e){return sf(n)===2?n.get(e):n[e]}function zz(n,e,t){var r=sf(n);r===2?n.set(e,t):r===3?n.add(t):n[e]=t}function Gz(n,e){return n===e?n!==0||1/n==1/e:n!=n&&e!=e}function rT(n){return ioe&&n instanceof Map}function iT(n){return soe&&n instanceof Set}function Gl(n){return n.o||n.t}function sT(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var e=Vz(n);delete e[_n];for(var t=ah(e),r=0;r<t.length;r++){var i=t[r],s=e[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(e[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:n[i]})}return Object.create(Object.getPrototypeOf(n),e)}function oT(n,e){return e===void 0&&(e=!1),aT(n)||ol(n)||!ea(n)||(sf(n)>1&&(n.set=n.add=n.clear=n.delete=Zse),Object.freeze(n),e&&Ic(n,function(t,r){return oT(r,!0)},!0)),n}function Zse(){Ls(2)}function aT(n){return n==null||typeof n!="object"||Object.isFrozen(n)}function lo(n){var e=ZM[n];return e||Ls(18,n),e}function eoe(n,e){ZM[n]||(ZM[n]=e)}function qM(){return wp}function Qw(n,e){e&&(lo("Patches"),n.u=[],n.s=[],n.v=e)}function o0(n){QM(n),n.p.forEach(toe),n.p=null}function QM(n){n===wp&&(wp=n.l)}function PD(n){return wp={p:[],l:wp,h:n,m:!0,_:0}}function toe(n){var e=n[_n];e.i===0||e.i===1?e.j():e.O=!0}function Yw(n,e){e._=e.p.length;var t=e.p[0],r=n!==void 0&&n!==t;return e.h.g||lo("ES5").S(e,n,r),r?(t[_n].P&&(o0(e),Ls(4)),ea(n)&&(n=a0(e,n),e.l||l0(e,n)),e.u&&lo("Patches").M(t[_n].t,n,e.u,e.s)):n=a0(e,t,[]),o0(e),e.u&&e.v(e.u,e.s),n!==Hz?n:void 0}function a0(n,e,t){if(aT(e))return e;var r=e[_n];if(!r)return Ic(e,function(a,l){return RD(n,r,e,a,l,t)},!0),e;if(r.A!==n)return e;if(!r.P)return l0(n,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=sT(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),Ic(s,function(a,l){return RD(n,r,i,a,l,t,o)}),l0(n,i,!1),t&&n.u&&lo("Patches").N(r,t,n.u,n.s)}return r.o}function RD(n,e,t,r,i,s,o){if(ol(i)){var a=a0(n,i,s&&e&&e.i!==3&&!oh(e.R,r)?s.concat(r):void 0);if(zz(t,r,a),!ol(a))return;n.m=!1}else o&&t.add(i);if(ea(i)&&!aT(i)){if(!n.h.D&&n._<1)return;a0(n,i),e&&e.A.l||l0(n,i)}}function l0(n,e,t){t===void 0&&(t=!1),!n.l&&n.h.D&&n.m&&oT(e,t)}function Zw(n,e){var t=n[_n];return(t?Gl(t):n)[e]}function LD(n,e){if(e in n)for(var t=Object.getPrototypeOf(n);t;){var r=Object.getOwnPropertyDescriptor(t,e);if(r)return r;t=Object.getPrototypeOf(t)}}function Ta(n){n.P||(n.P=!0,n.l&&Ta(n.l))}function eS(n){n.o||(n.o=sT(n.t))}function YM(n,e,t){var r=rT(e)?lo("MapSet").F(e,t):iT(e)?lo("MapSet").T(e,t):n.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:qM(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},l=a,c=Sp;o&&(l=[a],c=od);var h=Proxy.revocable(l,c),d=h.revoke,p=h.proxy;return a.k=p,a.j=d,p}(e,t):lo("ES5").J(e,t);return(t?t.A:qM()).p.push(r),r}function noe(n){return ol(n)||Ls(22,n),function e(t){if(!ea(t))return t;var r,i=t[_n],s=sf(t);if(i){if(!i.P&&(i.i<4||!lo("ES5").K(i)))return i.t;i.I=!0,r=DD(t,s),i.I=!1}else r=DD(t,s);return Ic(r,function(o,a){i&&Yse(i.t,o)===a||zz(r,o,e(a))}),s===3?new Set(r):r}(n)}function DD(n,e){switch(e){case 2:return new Map(n);case 3:return Array.from(n)}return sT(n)}function roe(){function n(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var l=this[_n];return Sp.get(l,s)},set:function(l){var c=this[_n];Sp.set(c,s,l)}},a}function e(s){for(var o=s.length-1;o>=0;o--){var a=s[o][_n];if(!a.P)switch(a.i){case 5:r(a)&&Ta(a);break;case 4:t(a)&&Ta(a)}}}function t(s){for(var o=s.t,a=s.k,l=ah(a),c=l.length-1;c>=0;c--){var h=l[c];if(h!==_n){var d=o[h];if(d===void 0&&!oh(o,h))return!0;var p=a[h],m=p&&p[_n];if(m?m.t!==d:!Gz(p,d))return!0}}var y=!!o[_n];return l.length!==ah(o).length+(y?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var i={};eoe("ES5",{J:function(s,o){var a=Array.isArray(s),l=function(h,d){if(h){for(var p=Array(d.length),m=0;m<d.length;m++)Object.defineProperty(p,""+m,n(m,!0));return p}var y=Vz(d);delete y[_n];for(var g=ah(y),_=0;_<g.length;_++){var x=g[_];y[x]=n(x,h||!!y[x].enumerable)}return Object.create(Object.getPrototypeOf(d),y)}(a,s),c={i:a?5:4,A:o?o.A:qM(),P:!1,I:!1,R:{},l:o,t:s,k:l,o:null,O:!1,C:!1};return Object.defineProperty(l,_n,{value:c,writable:!0}),l},S:function(s,o,a){a?ol(o)&&o[_n].A===s&&e(s.p):(s.u&&function l(c){if(c&&typeof c=="object"){var h=c[_n];if(h){var d=h.t,p=h.k,m=h.R,y=h.i;if(y===4)Ic(p,function(S){S!==_n&&(d[S]!==void 0||oh(d,S)?m[S]||l(p[S]):(m[S]=!0,Ta(h)))}),Ic(d,function(S){p[S]!==void 0||oh(p,S)||(m[S]=!1,Ta(h))});else if(y===5){if(r(h)&&(Ta(h),m.length=!0),p.length<d.length)for(var g=p.length;g<d.length;g++)m[g]=!1;else for(var _=d.length;_<p.length;_++)m[_]=!0;for(var x=Math.min(p.length,d.length),w=0;w<x;w++)p.hasOwnProperty(w)||(m[w]=!0),m[w]===void 0&&l(p[w])}}}}(s.p[0]),e(s.p))},K:function(s){return s.i===4?t(s):r(s)}})}var BD,wp,lT=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",ioe=typeof Map<"u",soe=typeof Set<"u",OD=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Hz=lT?Symbol.for("immer-nothing"):((BD={})["immer-nothing"]=!0,BD),kD=lT?Symbol.for("immer-draftable"):"__$immer_draftable",_n=lT?Symbol.for("immer-state"):"__$immer_state",ooe=""+Object.prototype.constructor,ah=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,Vz=Object.getOwnPropertyDescriptors||function(n){var e={};return ah(n).forEach(function(t){e[t]=Object.getOwnPropertyDescriptor(n,t)}),e},ZM={},Sp={get:function(n,e){if(e===_n)return n;var t=Gl(n);if(!oh(t,e))return function(i,s,o){var a,l=LD(s,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(i.k):void 0}(n,t,e);var r=t[e];return n.I||!ea(r)?r:r===Zw(n.t,e)?(eS(n),n.o[e]=YM(n.A.h,r,n)):r},has:function(n,e){return e in Gl(n)},ownKeys:function(n){return Reflect.ownKeys(Gl(n))},set:function(n,e,t){var r=LD(Gl(n),e);if(r!=null&&r.set)return r.set.call(n.k,t),!0;if(!n.P){var i=Zw(Gl(n),e),s=i==null?void 0:i[_n];if(s&&s.t===t)return n.o[e]=t,n.R[e]=!1,!0;if(Gz(t,i)&&(t!==void 0||oh(n.t,e)))return!0;eS(n),Ta(n)}return n.o[e]===t&&(t!==void 0||e in n.o)||Number.isNaN(t)&&Number.isNaN(n.o[e])||(n.o[e]=t,n.R[e]=!0),!0},deleteProperty:function(n,e){return Zw(n.t,e)!==void 0||e in n.t?(n.R[e]=!1,eS(n),Ta(n)):delete n.R[e],n.o&&delete n.o[e],!0},getOwnPropertyDescriptor:function(n,e){var t=Gl(n),r=Reflect.getOwnPropertyDescriptor(t,e);return r&&{writable:!0,configurable:n.i!==1||e!=="length",enumerable:r.enumerable,value:t[e]}},defineProperty:function(){Ls(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){Ls(12)}},od={};Ic(Sp,function(n,e){od[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),od.deleteProperty=function(n,e){return od.set.call(this,n,e,void 0)},od.set=function(n,e,t){return Sp.set.call(this,n[0],e,t,n[0])};var aoe=function(){function n(t){var r=this;this.g=OD,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var l=r;return function(g){var _=this;g===void 0&&(g=a);for(var x=arguments.length,w=Array(x>1?x-1:0),S=1;S<x;S++)w[S-1]=arguments[S];return l.produce(g,function(M){var T;return(T=s).call.apply(T,[_,M].concat(w))})}}var c;if(typeof s!="function"&&Ls(6),o!==void 0&&typeof o!="function"&&Ls(7),ea(i)){var h=PD(r),d=YM(r,i,void 0),p=!0;try{c=s(d),p=!1}finally{p?o0(h):QM(h)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(g){return Qw(h,o),Yw(g,h)},function(g){throw o0(h),g}):(Qw(h,o),Yw(c,h))}if(!i||typeof i!="object"){if((c=s(i))===void 0&&(c=i),c===Hz&&(c=void 0),r.D&&oT(c,!0),o){var m=[],y=[];lo("Patches").M(i,c,m,y),o(m,y)}return c}Ls(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(c){for(var h=arguments.length,d=Array(h>1?h-1:0),p=1;p<h;p++)d[p-1]=arguments[p];return r.produceWithPatches(c,function(m){return i.apply(void 0,[m].concat(d))})};var o,a,l=r.produce(i,s,function(c,h){o=c,a=h});return typeof Promise<"u"&&l instanceof Promise?l.then(function(c){return[c,o,a]}):[l,o,a]},typeof(t==null?void 0:t.useProxies)=="boolean"&&this.setUseProxies(t.useProxies),typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze)}var e=n.prototype;return e.createDraft=function(t){ea(t)||Ls(8),ol(t)&&(t=noe(t));var r=PD(this),i=YM(this,t,void 0);return i[_n].C=!0,QM(r),i},e.finishDraft=function(t,r){var i=t&&t[_n],s=i.A;return Qw(s,r),Yw(void 0,s)},e.setAutoFreeze=function(t){this.D=t},e.setUseProxies=function(t){t&&!OD&&Ls(20),this.g=t},e.applyPatches=function(t,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){t=s.value;break}}i>-1&&(r=r.slice(i+1));var o=lo("Patches").$;return ol(t)?o(t,r):this.produce(t,function(a){return o(a,r)})},n}(),Vi=new aoe,Wz=Vi.produce;Vi.produceWithPatches.bind(Vi);Vi.setAutoFreeze.bind(Vi);Vi.setUseProxies.bind(Vi);Vi.applyPatches.bind(Vi);Vi.createDraft.bind(Vi);Vi.finishDraft.bind(Vi);function ND(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function FD(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ND(Object(t),!0).forEach(function(r){gt(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ND(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Vr(n){return"Minified Redux error #"+n+"; visit https://redux.js.org/Errors?code="+n+" for the full message or use the non-minified dev environment for full errors. "}var UD=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),tS=function(){return Math.random().toString(36).substring(7).split("").join(".")},c0={INIT:"@@redux/INIT"+tS(),REPLACE:"@@redux/REPLACE"+tS(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+tS()}};function loe(n){if(typeof n!="object"||n===null)return!1;for(var e=n;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}function jz(n,e,t){var r;if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Vr(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Vr(1));return t(jz)(n,e)}if(typeof n!="function")throw new Error(Vr(2));var i=n,s=e,o=[],a=o,l=!1;function c(){a===o&&(a=o.slice())}function h(){if(l)throw new Error(Vr(3));return s}function d(g){if(typeof g!="function")throw new Error(Vr(4));if(l)throw new Error(Vr(5));var _=!0;return c(),a.push(g),function(){if(_){if(l)throw new Error(Vr(6));_=!1,c();var w=a.indexOf(g);a.splice(w,1),o=null}}}function p(g){if(!loe(g))throw new Error(Vr(7));if(typeof g.type>"u")throw new Error(Vr(8));if(l)throw new Error(Vr(9));try{l=!0,s=i(s,g)}finally{l=!1}for(var _=o=a,x=0;x<_.length;x++){var w=_[x];w()}return g}function m(g){if(typeof g!="function")throw new Error(Vr(10));i=g,p({type:c0.REPLACE})}function y(){var g,_=d;return g={subscribe:function(w){if(typeof w!="object"||w===null)throw new Error(Vr(11));function S(){w.next&&w.next(h())}S();var M=_(S);return{unsubscribe:M}}},g[UD]=function(){return this},g}return p({type:c0.INIT}),r={dispatch:p,subscribe:d,getState:h,replaceReducer:m},r[UD]=y,r}function coe(n){Object.keys(n).forEach(function(e){var t=n[e],r=t(void 0,{type:c0.INIT});if(typeof r>"u")throw new Error(Vr(12));if(typeof t(void 0,{type:c0.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Vr(13))})}function uoe(n){for(var e=Object.keys(n),t={},r=0;r<e.length;r++){var i=e[r];typeof n[i]=="function"&&(t[i]=n[i])}var s=Object.keys(t),o;try{coe(t)}catch(a){o=a}return function(l,c){if(l===void 0&&(l={}),o)throw o;for(var h=!1,d={},p=0;p<s.length;p++){var m=s[p],y=t[m],g=l[m],_=y(g,c);if(typeof _>"u")throw c&&c.type,new Error(Vr(14));d[m]=_,h=h||_!==g}return h=h||s.length!==Object.keys(l).length,h?d:l}}function u0(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function hoe(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Vr(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=e.map(function(l){return l(o)});return s=u0.apply(void 0,a)(i.dispatch),FD(FD({},i),{},{dispatch:s})}}}function $z(n){var e=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,n):o(a)}}};return e}var Jz=$z();Jz.withExtraArgument=$z;const zD=Jz;var foe=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),doe=globalThis&&globalThis.__generator||function(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(h){return l([c,h])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(h){c=[6,h],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},h0=globalThis&&globalThis.__spreadArray||function(n,e){for(var t=0,r=e.length,i=n.length;t<r;t++,i++)n[i]=e[t];return n},poe=Object.defineProperty,moe=Object.defineProperties,goe=Object.getOwnPropertyDescriptors,GD=Object.getOwnPropertySymbols,yoe=Object.prototype.hasOwnProperty,voe=Object.prototype.propertyIsEnumerable,HD=function(n,e,t){return e in n?poe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t},qa=function(n,e){for(var t in e||(e={}))yoe.call(e,t)&&HD(n,t,e[t]);if(GD)for(var r=0,i=GD(e);r<i.length;r++){var t=i[r];voe.call(e,t)&&HD(n,t,e[t])}return n},nS=function(n,e){return moe(n,goe(e))},_oe=function(n,e,t){return new Promise(function(r,i){var s=function(l){try{a(t.next(l))}catch(c){i(c)}},o=function(l){try{a(t.throw(l))}catch(c){i(c)}},a=function(l){return l.done?r(l.value):Promise.resolve(l.value).then(s,o)};a((t=t.apply(n,e)).next())})},xoe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?u0:u0.apply(null,arguments)};function woe(n){if(typeof n!="object"||n===null)return!1;var e=Object.getPrototypeOf(n);if(e===null)return!0;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return e===t}var Soe=function(n){foe(e,n);function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=n.apply(this,t)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return n.prototype.concat.apply(this,t)},e.prototype.prepend=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.length===1&&Array.isArray(t[0])?new(e.bind.apply(e,h0([void 0],t[0].concat(this)))):new(e.bind.apply(e,h0([void 0],t.concat(this))))},e}(Array);function eE(n){return ea(n)?Wz(n,function(){}):n}function Aoe(n){return typeof n=="boolean"}function Moe(){return function(e){return Eoe(e)}}function Eoe(n){n===void 0&&(n={});var e=n.thunk,t=e===void 0?!0:e;n.immutableCheck,n.serializableCheck;var r=new Soe;return t&&(Aoe(t)?r.push(zD):r.push(zD.withExtraArgument(t.extraArgument))),r}var Coe=!0;function boe(n){var e=Moe(),t=n||{},r=t.reducer,i=r===void 0?void 0:r,s=t.middleware,o=s===void 0?e():s,a=t.devTools,l=a===void 0?!0:a,c=t.preloadedState,h=c===void 0?void 0:c,d=t.enhancers,p=d===void 0?void 0:d,m;if(typeof i=="function")m=i;else if(woe(i))m=uoe(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var y=o;typeof y=="function"&&(y=y(e));var g=hoe.apply(void 0,y),_=u0;l&&(_=xoe(qa({trace:!Coe},typeof l=="object"&&l)));var x=[g];Array.isArray(p)?x=h0([g],p):typeof p=="function"&&(x=p(x));var w=_.apply(void 0,x);return jz(m,h,w)}function Qa(n,e){function t(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(e){var s=e.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return qa(qa({type:n,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:n,payload:r[0]}}return t.toString=function(){return""+n},t.type=n,t.match=function(r){return r.type===n},t}function Kz(n){var e={},t=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(a in e)throw new Error("addCase cannot be called with two reducers for the same action type");return e[a]=o,i},addMatcher:function(s,o){return t.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return n(i),[e,t,r]}function Toe(n){return typeof n=="function"}function Ioe(n,e,t,r){t===void 0&&(t=[]);var i=typeof e=="function"?Kz(e):[e,t,r],s=i[0],o=i[1],a=i[2],l;if(Toe(n))l=function(){return eE(n())};else{var c=eE(n);l=function(){return c}}function h(d,p){d===void 0&&(d=l());var m=h0([s[p.type]],o.filter(function(y){var g=y.matcher;return g(p)}).map(function(y){var g=y.reducer;return g}));return m.filter(function(y){return!!y}).length===0&&(m=[a]),m.reduce(function(y,g){if(g)if(ol(y)){var _=y,x=g(_,p);return x===void 0?y:x}else{if(ea(y))return Wz(y,function(w){return g(w,p)});var x=g(y,p);if(x===void 0){if(y===null)return y;throw Error("A case reducer on a non-draftable value must not return undefined")}return x}return y},d)}return h.getInitialState=l,h}function Poe(n,e){return n+"/"+e}function Roe(n){var e=n.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var t=typeof n.initialState=="function"?n.initialState:eE(n.initialState),r=n.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(h){var d=r[h],p=Poe(e,h),m,y;"reducer"in d?(m=d.reducer,y=d.prepare):m=d,s[h]=m,o[p]=m,a[h]=y?Qa(p,y):Qa(p)});function l(){var h=typeof n.extraReducers=="function"?Kz(n.extraReducers):[n.extraReducers],d=h[0],p=d===void 0?{}:d,m=h[1],y=m===void 0?[]:m,g=h[2],_=g===void 0?void 0:g,x=qa(qa({},p),o);return Ioe(t,function(w){for(var S in x)w.addCase(S,x[S]);for(var M=0,T=y;M<T.length;M++){var I=T[M];w.addMatcher(I.matcher,I.reducer)}_&&w.addDefaultCase(_)})}var c;return{name:e,reducer:function(h,d){return c||(c=l()),c(h,d)},actions:a,caseReducers:s,getInitialState:function(){return c||(c=l()),c.getInitialState()}}}var Loe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Doe=function(n){n===void 0&&(n=21);for(var e="",t=n;t--;)e+=Loe[Math.random()*64|0];return e},Boe=["name","message","stack","code"],rS=function(){function n(e,t){this.payload=e,this.meta=t}return n}(),VD=function(){function n(e,t){this.payload=e,this.meta=t}return n}(),Ooe=function(n){if(typeof n=="object"&&n!==null){for(var e={},t=0,r=Boe;t<r.length;t++){var i=r[t];typeof n[i]=="string"&&(e[i]=n[i])}return e}return{message:String(n)}};(function(){function n(e,t,r){var i=Qa(e+"/fulfilled",function(c,h,d,p){return{payload:c,meta:nS(qa({},p||{}),{arg:d,requestId:h,requestStatus:"fulfilled"})}}),s=Qa(e+"/pending",function(c,h,d){return{payload:void 0,meta:nS(qa({},d||{}),{arg:h,requestId:c,requestStatus:"pending"})}}),o=Qa(e+"/rejected",function(c,h,d,p,m){return{payload:p,error:(r&&r.serializeError||Ooe)(c||"Rejected"),meta:nS(qa({},m||{}),{arg:d,requestId:h,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function c(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return c.prototype.abort=function(){},c}();function l(c){return function(h,d,p){var m=r!=null&&r.idGenerator?r.idGenerator(c):Doe(),y=new a,g;function _(w){g=w,y.abort()}var x=function(){return _oe(this,null,function(){var w,S,M,T,I,L,b;return doe(this,function(R){switch(R.label){case 0:return R.trys.push([0,4,,5]),T=(w=r==null?void 0:r.condition)==null?void 0:w.call(r,c,{getState:d,extra:p}),Noe(T)?[4,T]:[3,2];case 1:T=R.sent(),R.label=2;case 2:if(T===!1||y.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return I=new Promise(function(D,G){return y.signal.addEventListener("abort",function(){return G({name:"AbortError",message:g||"Aborted"})})}),h(s(m,c,(S=r==null?void 0:r.getPendingMeta)==null?void 0:S.call(r,{requestId:m,arg:c},{getState:d,extra:p}))),[4,Promise.race([I,Promise.resolve(t(c,{dispatch:h,getState:d,extra:p,requestId:m,signal:y.signal,abort:_,rejectWithValue:function(D,G){return new rS(D,G)},fulfillWithValue:function(D,G){return new VD(D,G)}})).then(function(D){if(D instanceof rS)throw D;return D instanceof VD?i(D.payload,m,c,D.meta):i(D,m,c)})])];case 3:return M=R.sent(),[3,5];case 4:return L=R.sent(),M=L instanceof rS?o(null,m,c,L.payload,L.meta):o(L,m,c),[3,5];case 5:return b=r&&!r.dispatchConditionRejection&&o.match(M)&&M.meta.condition,b||h(M),[2,M]}})})}();return Object.assign(x,{abort:_,requestId:m,arg:c,unwrap:function(){return x.then(koe)}})}}return Object.assign(l,{pending:s,rejected:o,fulfilled:i,typePrefix:e})}return n.withTypes=function(){return n},n})();function koe(n){if(n.meta&&n.meta.rejectedWithValue)throw n.payload;if(n.error)throw n.error;return n.payload}function Noe(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}var cT="listenerMiddleware";Qa(cT+"/add");Qa(cT+"/removeAll");Qa(cT+"/remove");var WD;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);roe();const Foe={categoryId:0,sort:{name:"",type:"rating"}},Uoe=Roe({name:"filter",initialState:Foe,reducers:{setCategoryId:(n,e)=>{n.categoryId=e.payload}}}),zoe=Uoe.reducer;function Goe(){const[n,e]=q.useState([]),[t,r]=q.useState(!0),[i,s]=q.useState(""),[o,a]=q.useState([]),[l,c]=q.useState({name:"",type:"rating"}),[h,d]=q.useState(""),[p,m]=q.useState(1),y=Tie(ose,"catalogItems"),g=x=>{if(x===""){e(o);return}const w=o.filter(S=>S.category===x);e(w),console.log(w)},_=n.filter(x=>!!x.title.toLowerCase().includes(h.toLowerCase()));return q.useEffect(()=>{r(!0),(async()=>{try{const S=(await rse(qie(y,Qie("category","desc")))).docs.map(M=>({...M.data(),id:M.id}));e(S),a(S),r(!1)}catch(w){console.log(w)}})()},[h,p]),k("div",{className:"App",children:[E(I6,{}),E(hse,{}),k(u6,{children:[E(rs,{path:"/",element:E(GV,{})}),E(rs,{path:"/constructor",element:E(MY,{})}),E(rs,{path:"/catalog",element:E(zY,{activeSort:l,setActiveSort:c,catalogItems:n,setCatalogItems:e,isLoading:t,activeCategory:i,setActiveCategory:s,filterPizzas:g,searchQuary:h,setSearchQuary:d,searchedCatalogItems:_,setCurrentPage:m})}),E(rs,{path:"/about",element:E(JY,{})}),E(rs,{path:"/design",element:E(ZY,{})}),E(rs,{path:"/contact",element:E(sZ,{})}),E(rs,{path:"/cart",element:E(aZ,{})}),E(rs,{path:"/production",element:E(hZ,{})}),E(rs,{path:"/cooperation",element:E(zZ,{})}),E(rs,{path:"/fulfillment",element:E(lse,{})}),E(rs,{path:"*",element:E(fse,{})})]}),E(x6,{})]})}const Hoe=boe({reducer:{filter:zoe}});sS.createRoot(document.getElementById("root")).render(E(Td.StrictMode,{children:E(Qse,{store:Hoe,children:E(m6,{children:E(Goe,{})})})}));
